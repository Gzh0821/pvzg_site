import{a as V}from"./index-C88pvD_q.js";import{m as S,j,u as U,k as $,q as B,z as N,c as m,o as h,h as _,b as n,g as u,r as c,a as R,t as p,d as k,F as D}from"./app-COGmRoa0.js";import{t as F}from"./index-DDNJ5sBJ.js";import{_ as O}from"./plugin-vue_export-helper-DlAUqK2U.js";const P=S({__name:"App",props:{authorGroup:{}},setup(w,{expose:f}){f();const b=w,o=j([]),v=B("i18nLanguage","en"),g=j(""),y=async a=>{try{const e=(await V.get("https://levelapi.pvzge.com/links.json")).data[a];for(const d in e){const r=e[d].location,A=(await V.get(`https://levelapi.pvzge.com${r}`)).data,x=A.authorInfo,z=A.author;A.levelList.forEach(i=>{if(typeof i=="string")o.value.push({name:i,author:z,introduction:x,url:`https://levelapi.pvzge.com/${a}/${d}/levels/${i}`});else if(i.fileName&&i.Information){const t=i.Information;o.value.push({name:typeof t.name=="string"?t.name:t.name[v]??t.name.en,introduction:typeof t.Introduction=="string"?t.Introduction:t.Introduction[v]??t.Introduction.en,author:z,gameVersion:t.GameVersion,version:t.Version,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt,difficulty:t.Difficulty,category:t.Category,url:`https://levelapi.pvzge.com/${a}/${d}/levels/${i.fileName}`})}})}}catch(s){N.error("Failed to load levels: "+s.message)}},l=async a=>{try{const e=(await V.get(a.url)).data,d=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(d),r.setAttribute("download",a.name),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)}catch(s){N.error("Failed to download level: "+s.message)}},C={pageSize:6},I=U(()=>o.value.filter(a=>a.name.toLowerCase().includes(g.value.toLowerCase())||a.author.toLowerCase().includes(g.value.toLowerCase())));$(()=>{y(b.authorGroup)});const L={props:b,levels:o,i18nLanguage:v,searchValue:g,fetchLevels:y,downloadLevel:l,pagination:C,filteredLevels:I,get theme(){return F}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),E={key:0},G={key:1},M={key:2},q={key:3},J=["onClick"],T={class:"author-name"};function Z(w,f,b,o,v,g){const y=c("a-input-search"),l=c("VPIcon"),C=c("a-list-item-meta"),I=c("a-list-item"),L=c("a-list"),a=c("a-space"),s=c("a-config-provider");return h(),m(D,null,[_(` <a-row :gutter="[16, 24]">
        <a-col :span="8" v-for="level in paginatedLevels" :key="level.name">
            <a-card :title="level.name" @click="downloadLevel(level)" hoverable>
                <p v-if="level.author">Author: {{ level.author }}</p>
                <p v-if="level.introduction">Introduction: {{ level.introduction }}</p>
            </a-card>
        </a-col>
    </a-row>
 `),n(s,{theme:{algorithm:w.$isDarkmode?o.theme.darkAlgorithm:o.theme.defaultAlgorithm}},{default:u(()=>[n(a,{direction:"vertical",size:"middle",style:{width:"100%"},theme:"dark"},{default:u(()=>[n(y,{value:o.searchValue,"onUpdate:value":f[0]||(f[0]=e=>o.searchValue=e),valueModifiers:{lazy:!0},placeholder:"Search level...","enter-button":""},null,8,["value"]),n(L,{"item-layout":"vertical","data-source":o.filteredLevels,size:"middle",header:"PvZ2 Gardendless Levels",pagination:o.pagination,bordered:""},{renderItem:u(({item:e})=>[n(I,null,{actions:u(()=>[e.version?(h(),m("span",E,[n(l,{icon:"code-branch"}),k(" "+p(e.version),1)])):_("v-if",!0),e.difficulty?(h(),m("span",G,[n(l,{icon:"fire"}),k(" "+p(e.difficulty),1)])):_("v-if",!0),e.category?(h(),m("span",M,[n(l,{icon:"tag"}),k(" "+p(e.category),1)])):_("v-if",!0),e.updatedAt?(h(),m("span",q,[n(l,{icon:"clock"}),k(" "+p(e.updatedAt),1)])):_("v-if",!0)]),default:u(()=>[n(C,{description:e.introduction},{title:u(()=>[R("a",{onClick:d=>o.downloadLevel(e)},p(e.name),9,J),R("span",T," by "+p(e.author),1)]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["theme"])],2112)}const Y=O(P,[["render",Z],["__scopeId","data-v-9d7d38e2"],["__file","App.vue"]]);export{Y as L};
