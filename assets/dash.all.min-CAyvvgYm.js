import{g as fu}from"./commonjsHelpers-CqkleIqs.js";function du(Gr,bi){for(var wr=0;wr<bi.length;wr++){const dr=bi[wr];if(typeof dr!="string"&&!Array.isArray(dr)){for(const Fn in dr)if(Fn!=="default"&&!(Fn in Gr)){const Nr=Object.getOwnPropertyDescriptor(dr,Fn);Nr&&Object.defineProperty(Gr,Fn,Nr.get?Nr:{enumerable:!0,get:()=>dr[Fn]})}}}return Object.freeze(Object.defineProperty(Gr,Symbol.toStringTag,{value:"Module"}))}var To={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(Gr,bi){(function(wr,dr){Gr.exports=dr()})(self,function(){return function(){var wr={4593:function(at,we){var P,ae,T,t,e,y=function(_){for(var m=[],n=0;n<_.length;++n){var c=_.charCodeAt(n);c<128?m.push(c):c<2048?(m.push(192|c>>6),m.push(128|63&c)):c<65536?(m.push(224|c>>12),m.push(128|63&c>>6),m.push(128|63&c)):(m.push(240|c>>18),m.push(128|63&c>>12),m.push(128|63&c>>6),m.push(128|63&c))}return m},p=function(_){for(var m=[],n=0;n<_.length;){var c=_[n++];c<128||(c<224?(c=(31&c)<<6,c|=63&_[n++]):c<240?(c=(15&c)<<12,c|=(63&_[n++])<<6,c|=63&_[n++]):(c=(7&c)<<18,c|=(63&_[n++])<<12,c|=(63&_[n++])<<6,c|=63&_[n++])),m.push(String.fromCharCode(c))}return m.join("")},u={};P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae=function(_){for(var m=0,n=[],c=0|_.length/3;0<c--;){var d=(_[m]<<16)+(_[m+1]<<8)+_[m+2];m+=3,n.push(P.charAt(63&d>>18)),n.push(P.charAt(63&d>>12)),n.push(P.charAt(63&d>>6)),n.push(P.charAt(63&d))}return _.length-m==2?(d=(_[m]<<16)+(_[m+1]<<8),n.push(P.charAt(63&d>>18)),n.push(P.charAt(63&d>>12)),n.push(P.charAt(63&d>>6)),n.push("=")):_.length-m==1&&(d=_[m]<<16,n.push(P.charAt(63&d>>18)),n.push(P.charAt(63&d>>12)),n.push("==")),n.join("")},T=function(){for(var _=[],m=0;m<P.length;++m)_[P.charCodeAt(m)]=m;return _[61]=0,_}(),t=function(_){for(var m=0,n=[],c=0|_.length/4;0<c--;){var d=(T[_.charCodeAt(m)]<<18)+(T[_.charCodeAt(m+1)]<<12)+(T[_.charCodeAt(m+2)]<<6)+T[_.charCodeAt(m+3)];n.push(255&d>>16),n.push(255&d>>8),n.push(255&d),m+=4}return n&&(_.charAt(m-2)=="="?(n.pop(),n.pop()):_.charAt(m-1)=="="&&n.pop()),n},e={encode:function(_){for(var m=[],n=0;n<_.length;++n)m.push(_.charCodeAt(n));return m},decode:function(_){for(var m=0;m<s.length;++m)a[m]=String.fromCharCode(a[m]);return a.join("")}},u.decodeArray=function(_){var m=t(_);return new Uint8Array(m)},u.encodeASCII=function(_){var m=e.encode(_);return ae(m)},u.decodeASCII=function(_){var m=t(_);return e.decode(m)},u.encode=function(_){var m=y(_);return ae(m)},u.decode=function(_){var m=t(_);return p(m)},we.decode=u.decode,we.decodeArray=u.decodeArray,we.encode=u.encode,we.encodeASCII=u.encodeASCII},452:function(at,we){(function(P){var ae={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},T=function(O){var K=O;return ae.hasOwnProperty(O)&&(K=ae[O]),String.fromCharCode(K)},t=15,e=32,y={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},p={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_={25:2,26:4,29:6,30:8,31:10,27:13,28:15},m=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],n={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(O){this.time=O},log:function(O,K){var re=this.verboseFilter[O];this.verboseLevel>=re&&console.log(this.time+" ["+O+"] "+K)}},c=function(O){for(var K=[],re=0;re<O.length;re++)K.push(O[re].toString(16));return K},d=function(O,K,re,H,ee){this.foreground=O||"white",this.underline=K||!1,this.italics=re||!1,this.background=H||"black",this.flash=ee||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(O){for(var K=["foreground","underline","italics","background","flash"],re=0;re<K.length;re++){var H=K[re];O.hasOwnProperty(H)&&(this[H]=O[H])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(O){return this.foreground===O.foreground&&this.underline===O.underline&&this.italics===O.italics&&this.background===O.background&&this.flash===O.flash},copy:function(O){this.foreground=O.foreground,this.underline=O.underline,this.italics=O.italics,this.background=O.background,this.flash=O.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var I=function(O,K,re,H,ee,se){this.uchar=O||" ",this.penState=new d(K,re,H,ee,se)};I.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(O,K){this.uchar=O,this.penState.copy(K)},setPenState:function(O){this.penState.copy(O)},equals:function(O){return this.uchar===O.uchar&&this.penState.equals(O.penState)},copy:function(O){this.uchar=O.uchar,this.penState.copy(O.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var k=function(){this.chars=[];for(var O=0;O<e;O++)this.chars.push(new I);this.pos=0,this.currPenState=new d};k.prototype={equals:function(O){for(var K=!0,re=0;re<e;re++)if(!this.chars[re].equals(O.chars[re])){K=!1;break}return K},copy:function(O){for(var K=0;K<e;K++)this.chars[K].copy(O.chars[K])},isEmpty:function(){for(var O=!0,K=0;K<e;K++)if(!this.chars[K].isEmpty()){O=!1;break}return O},setCursor:function(O){this.pos!==O&&(this.pos=O),this.pos<0?(n.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>e&&(n.log("ERROR","Too large cursor position "+this.pos),this.pos=e)},moveCursor:function(O){var K=this.pos+O;if(O>1)for(var re=this.pos+1;re<K+1;re++)this.chars[re].setPenState(this.currPenState);this.setCursor(K)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(O){O>=144&&this.backSpace();var K=T(O);this.pos>=e?n.log("ERROR","Cannot insert "+O.toString(16)+" ("+K+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(K,this.currPenState),this.moveCursor(1))},clearFromPos:function(O){var K;for(K=O;K<e;K++)this.chars[K].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var O=[],K=!0,re=0;re<e;re++){var H=this.chars[re].uchar;H!==" "&&(K=!1),O.push(H)}return K?"":O.join("")},setPenStyles:function(O){this.currPenState.setStyles(O),this.chars[this.pos].setPenState(this.currPenState)}};var q=function(){this.rows=[];for(var O=0;O<t;O++)this.rows.push(new k);this.currRow=14,this.nrRollUpRows=null,this.reset()};q.prototype={reset:function(){for(var O=0;O<t;O++)this.rows[O].clear();this.currRow=14},equals:function(O){for(var K=!0,re=0;re<t;re++)if(!this.rows[re].equals(O.rows[re])){K=!1;break}return K},copy:function(O){for(var K=0;K<t;K++)this.rows[K].copy(O.rows[K])},isEmpty:function(){for(var O=!0,K=0;K<t;K++)if(!this.rows[K].isEmpty()){O=!1;break}return O},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(O){this.rows[this.currRow].insertChar(O)},setPen:function(O){this.rows[this.currRow].setPenStyles(O)},moveCursor:function(O){this.rows[this.currRow].moveCursor(O)},setCursor:function(O){n.log("INFO","setCursor: "+O),this.rows[this.currRow].setCursor(O)},setPAC:function(O){n.log("INFO","pacData = "+JSON.stringify(O));var K=O.row-1;this.nrRollUpRows&&K<this.nrRollUpRows-1&&(K=this.nrRollUpRows-1),this.currRow=K;var re=this.rows[this.currRow];if(O.indent!==null){var H=O.indent,ee=Math.max(H-1,0);re.setCursor(O.indent),O.color=re.chars[ee].penState.foreground}var se={foreground:O.color,underline:O.underline,italics:O.italics,background:"black",flash:!1};this.setPen(se)},setBkgData:function(O){n.log("INFO","bkgData = "+JSON.stringify(O)),this.backSpace(),this.setPen(O),this.insertChar(32)},setRollUpRows:function(O){this.nrRollUpRows=O},rollUp:function(){if(this.nrRollUpRows!==null){n.log("TEXT",this.getDisplayText());var O=this.currRow+1-this.nrRollUpRows,K=this.rows.splice(O,1)[0];K.clear(),this.rows.splice(this.currRow,0,K),n.log("INFO","Rolling up")}else n.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(O){O=O||!1;for(var K=[],re="",H=-1,ee=0;ee<t;ee++){var se=this.rows[ee].getTextString();se&&(H=ee+1,O?K.push("Row "+H+': "'+se+'"'):K.push(se.trim()))}return K.length>0&&(re=O?"["+K.join(" | ")+"]":K.join(`
`)),re},getTextAndFormat:function(){return this.rows}};var F=function(O,K){this.chNr=O,this.outputFilter=K,this.mode=null,this.verbose=0,this.displayedMemory=new q,this.nonDisplayedMemory=new q,this.lastOutputScreen=new q,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};F.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(O){this.outputFilter=O},setPAC:function(O){this.writeScreen.setPAC(O)},setBkgData:function(O){this.writeScreen.setBkgData(O)},setMode:function(O){O!==this.mode&&(this.mode=O,n.log("INFO","MODE="+O),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=O)},insertChars:function(O){for(var K=0;K<O.length;K++)this.writeScreen.insertChar(O[K]);var re=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";n.log("INFO",re+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(n.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){n.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){n.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){n.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(O){n.log("INFO","RU("+O+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(O)},cc_FON:function(){n.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){n.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){n.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){n.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){n.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){n.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){n.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(n.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var O=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=O,this.writeScreen=this.nonDisplayedMemory,n.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(O){n.log("INFO","TO("+O+") - Tab Offset"),this.writeScreen.moveCursor(O)},cc_MIDROW:function(O){var K={flash:!1};if(K.underline=O%2==1,K.italics=O>=46,K.italics)K.foreground="white";else{var re=Math.floor(O/2)-16;K.foreground=["white","green","blue","cyan","red","yellow","magenta"][re]}n.log("INFO","MIDROW: "+JSON.stringify(K)),this.writeScreen.setPen(K)},outputDataUpdate:function(){var O=n.time;O!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(O,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,O,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:O):this.cueStartTime=O,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(O){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,O,this.displayedMemory),this.cueStartTime=O))}};var $=function(O,K,re){this.field=O||1,this.outputs=[K,re],this.channels=[new F(1,K),new F(2,re)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};$.prototype={getHandler:function(O){return this.channels[O].getHandler()},setHandler:function(O,K){this.channels[O].setHandler(K)},addData:function(O,K){var re,H,ee,se=!1;this.lastTime=O,n.setTime(O);for(var _e=0;_e<K.length;_e+=2)H=127&K[_e],ee=127&K[_e+1],H>=16&&H<=31&&H===this.lastCmdA&&ee===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,n.log("DEBUG","Repeated command ("+c([H,ee])+") is dropped")):H!==0||ee!==0?(n.log("DATA","["+c([K[_e],K[_e+1]])+"] -> ("+c([H,ee])+")"),(re=this.parseCmd(H,ee))||(re=this.parseMidrow(H,ee)),re||(re=this.parsePAC(H,ee)),re||(re=this.parseBackgroundAttributes(H,ee)),re||(se=this.parseChars(H,ee))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(se):n.log("WARNING","No channel found yet. TEXT-MODE?")),re?this.dataCounters.cmd+=2:se?this.dataCounters.char+=2:(this.dataCounters.other+=2,n.log("WARNING","Couldn't parse cleaned data "+c([H,ee])+" orig: "+c([K[_e],K[_e+1]])))):this.dataCounters.padding+=2},parseCmd:function(O,K){var re;if(!((O===20||O===21||O===28||O===29)&&32<=K&&K<=47||(O===23||O===31)&&33<=K&&K<=35))return!1;re=O===20||O===21||O===23?1:2;var H=this.channels[re-1];return O===20||O===21||O===28||O===29?K===32?H.cc_RCL():K===33?H.cc_BS():K===34?H.cc_AOF():K===35?H.cc_AON():K===36?H.cc_DER():K===37?H.cc_RU(2):K===38?H.cc_RU(3):K===39?H.cc_RU(4):K===40?H.cc_FON():K===41?H.cc_RDC():K===42?H.cc_TR():K===43?H.cc_RTD():K===44?H.cc_EDM():K===45?H.cc_CR():K===46?H.cc_ENM():K===47&&H.cc_EOC():H.cc_TO(K-32),this.lastCmdA=O,this.lastCmdB=K,this.currChNr=re,!0},parseMidrow:function(O,K){var re=null;if((O===17||O===25)&&32<=K&&K<=47){if((re=O===17?1:2)!==this.currChNr)return n.log("ERROR","Mismatch channel in midrow parsing"),!1;var H=this.channels[re-1];return H.insertChars([32]),H.cc_MIDROW(K),n.log("DEBUG","MIDROW ("+c([O,K])+")"),this.lastCmdA=O,this.lastCmdB=K,!0}return!1},parsePAC:function(O,K){var re,H;if(!((17<=O&&O<=23||25<=O&&O<=31)&&64<=K&&K<=127||(O===16||O===24)&&64<=K&&K<=95))return!1;re=O<=23?1:2,H=64<=K&&K<=95?re===1?y[O]:u[O]:re===1?p[O]:_[O];var ee=this.interpretPAC(H,K);return this.channels[re-1].setPAC(ee),this.lastCmdA=O,this.lastCmdB=K,this.currChNr=re,!0},interpretPAC:function(O,K){var re,H={color:null,italics:!1,indent:null,underline:!1,row:O};return re=K>95?K-96:K-64,H.underline=(1&re)==1,re<=13?H.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(re/2)]:re<=15?(H.italics=!0,H.color="white"):H.indent=4*Math.floor((re-16)/2),H},parseChars:function(O,K){var re=null,H=null,ee=null;if(O>=25?(re=2,ee=O-8):(re=1,ee=O),17<=ee&&ee<=19){var se;se=ee===17?K+80:ee===18?K+112:K+144,n.log("INFO","Special char '"+T(se)+"' in channel "+re),H=[se],this.lastCmdA=O,this.lastCmdB=K}else 32<=O&&O<=127&&(H=K===0?[O]:[O,K],this.lastCmdA=null,this.lastCmdB=null);if(H){var _e=c(H);n.log("DEBUG","Char codes =  "+_e.join(","))}return H},parseBackgroundAttributes:function(O,K){var re,H,ee;return((O===16||O===24)&&32<=K&&K<=47||(O===23||O===31)&&45<=K&&K<=47)&&(re={},O===16||O===24?(H=Math.floor((K-32)/2),re.background=m[H],K%2==1&&(re.background=re.background+"_semi")):K===45?re.background="transparent":(re.foreground="black",K===47&&(re.underline=!0)),ee=O<24?1:2,this.channels[ee-1].setBkgData(re),this.lastCmdA=O,this.lastCmdB=K,!0)},reset:function(){for(var O=0;O<this.channels.length;O++)this.channels[O]&&this.channels[O].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(O){for(var K=0;K<this.channels.length;K++)this.channels[K]&&this.channels[K].cueSplitAtTime(O)}},P.logger=n,P.PenState=d,P.CaptionScreen=q,P.Cea608Parser=$,P.findCea608Nalus=function(O,K,re){for(var H=0,ee=K,se=[],_e=function(ye,Pe,He,tt){if(ye!==4||Pe<8)return null;var ve=He.getUint8(tt),Oe=He.getUint16(tt+1),_t=He.getUint32(tt+3),dt=He.getUint8(tt+7);return ve==181&&Oe==49&&_t==1195456820&&dt==3};ee<K+re;){if(H=O.getUint32(ee),(31&O.getUint8(ee+4))==6)for(var X=ee+5,Ae=-1;X<ee+4+H-1;){Ae=0;for(var Le=255;Le===255;)Ae+=Le=O.getUint8(X),X++;var Ye=0;for(Le=255;Le===255;)Ye+=Le=O.getUint8(X),X++;_e(Ae,Ye,O,X)&&se.push([X,Ye]),X+=Ye}ee+=H+4}return se},P.extractCea608DataFromRange=function(O,K){var re=K[0],H=[[],[]];re+=8;var ee=31&O.getUint8(re);re+=2;for(var se=0;se<ee;se++){var _e=O.getUint8(re),X=4&_e,Ae=3&_e;re++;var Le=O.getUint8(re);re++;var Ye=O.getUint8(re);re++,X&&(127&Le)+(127&Ye)!=0&&(Ae===0?(H[0].push(Le),H[0].push(Ye)):Ae===1&&(H[1].push(Le),H[1].push(Ye)))}return H}})(we)},8416:function(at,we,P){var ae=P(1139),T=P(5448),t=P(6398),e=P(2032),y=(P(5530),typeof window<"u"&&window||P.g),p=y.dashjs;p||(p=y.dashjs={}),p.MediaPlayer=ae.Z,p.FactoryMaker=T.Z,p.Debug=t.Z,p.Version=(0,e.e)()},6398:function(at,we,P){var ae=P(5595),T=P(8512),t=P(5448),e=1,y=2,p=3,u=4,_=5;function m(c){c=c||{};var d,I,k,q,F=this.context,$=(0,ae.Z)(F).getInstance(),O=c.settings,K=[];function re(Le){return Le&&Le.bind?Le.bind(window.console):window.console.log.bind(window.console)}function H(){for(var Le=arguments.length,Ye=new Array(Le),ye=0;ye<Le;ye++)Ye[ye]=arguments[ye];Ae.apply(void 0,[e,this].concat(Ye))}function ee(){for(var Le=arguments.length,Ye=new Array(Le),ye=0;ye<Le;ye++)Ye[ye]=arguments[ye];Ae.apply(void 0,[y,this].concat(Ye))}function se(){for(var Le=arguments.length,Ye=new Array(Le),ye=0;ye<Le;ye++)Ye[ye]=arguments[ye];Ae.apply(void 0,[p,this].concat(Ye))}function _e(){for(var Le=arguments.length,Ye=new Array(Le),ye=0;ye<Le;ye++)Ye[ye]=arguments[ye];Ae.apply(void 0,[u,this].concat(Ye))}function X(){for(var Le=arguments.length,Ye=new Array(Le),ye=0;ye<Le;ye++)Ye[ye]=arguments[ye];Ae.apply(void 0,[_,this].concat(Ye))}function Ae(Le,Ye){var ye="",Pe=null;I&&(Pe=new Date().getTime(),ye+="["+(Pe-q)+"]"),k&&Ye&&Ye.getClassName&&(ye+="["+Ye.getClassName()+"]",Ye.getType&&(ye+="["+Ye.getType()+"]")),ye.length>0&&(ye+=" ");for(var He=arguments.length,tt=new Array(He>2?He-2:0),ve=2;ve<He;ve++)tt[ve-2]=arguments[ve];Array.apply(null,tt).forEach(function(Oe){ye+=Oe+" "}),K[Le]&&O&&O.get().debug.logLevel>=Le&&K[Le](ye),O&&O.get().debug.dispatchEvent&&$.trigger(T.Z.LOG,{message:ye,level:Le})}return d={getLogger:function(Le){return{fatal:H.bind(Le),error:ee.bind(Le),warn:se.bind(Le),info:_e.bind(Le),debug:X.bind(Le)}},setLogTimestampVisible:function(Le){I=Le},setCalleeNameVisible:function(Le){k=Le}},I=!0,k=!0,q=new Date().getTime(),typeof window<"u"&&window.console&&(K[e]=re(window.console.error),K[y]=re(window.console.error),K[p]=re(window.console.warn),K[u]=re(window.console.info),K[_]=re(window.console.debug)),d}m.__dashjs_factory_name="Debug";var n=t.Z.getSingletonFactory(m);n.LOG_LEVEL_NONE=0,n.LOG_LEVEL_FATAL=e,n.LOG_LEVEL_ERROR=y,n.LOG_LEVEL_WARNING=p,n.LOG_LEVEL_INFO=u,n.LOG_LEVEL_DEBUG=_,t.Z.updateSingletonFactory(m.__dashjs_factory_name,n),we.Z=n},5595:function(at,we,P){var ae=P(5448),T=P(8825);function t(){var y={};function p(_,m,n){var c=-1;return y[_]&&y[_].some(function(d,I){if(d&&d.callback===m&&(!n||n===d.scope))return c=I,!0}),c}var u={on:function(_,m,n){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!_)throw new Error("event type cannot be null or undefined");if(!m||typeof m!="function")throw new Error("listener must be a function: "+m);var d=c.priority||0;if(!(p(_,m,n)>=0)){y[_]=y[_]||[];var I={callback:m,scope:n,priority:d};n&&n.getStreamId&&(I.streamId=n.getStreamId()),n&&n.getType&&(I.mediaType=n.getType()),c&&c.mode&&(I.mode=c.mode);var k=y[_].some(function(q,F){if(q&&d>q.priority)return y[_].splice(F,0,I),!0});k||y[_].push(I)}},off:function(_,m,n){if(_&&m&&y[_]){var c=p(_,m,n);c<0||(y[_][c]=null)}},trigger:function(_){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(_&&y[_]){if((m=m||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");m.type=_,n.streamId&&(m.streamId=n.streamId),n.mediaType&&(m.mediaType=n.mediaType),y[_].filter(function(c){return!(!c||n.streamId&&c.streamId&&c.streamId!==n.streamId||n.mediaType&&c.mediaType&&c.mediaType!==n.mediaType||n.mode&&c.mode&&c.mode!==n.mode||!c.mode&&n.mode&&n.mode===T.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(c){return c&&c.callback.call(c.scope,m)})}},reset:function(){y={}}};return u}t.__dashjs_factory_name="EventBus";var e=ae.Z.getSingletonFactory(t);e.EVENT_PRIORITY_LOW=0,e.EVENT_PRIORITY_HIGH=5e3,ae.Z.updateSingletonFactory(t.__dashjs_factory_name,e),we.Z=e},5448:function(at,we){var P=function(){var ae,T=[],t={},e={};function y(m,n){for(var c in T){var d=T[c];if(d.context===m&&d.name===n)return d.instance}return null}function p(m,n){return n[m]}function u(m,n,c){m in c&&(c[m]=n)}function _(m,n,c){var d,I=m.__dashjs_factory_name,k=n[I];if(k){var q=k.instance;if(!k.override)return q.apply({context:n,factory:ae},c);for(var F in d=m.apply({context:n},c),q=q.apply({context:n,factory:ae,parent:d},c))d.hasOwnProperty(F)&&(d[F]=q[F])}else d=m.apply({context:n},c);return d.getClassName=function(){return I},d}return ae={extend:function(m,n,c,d){!d[m]&&n&&(d[m]={instance:n,override:c})},getSingletonInstance:y,setSingletonInstance:function(m,n,c){for(var d in T){var I=T[d];if(I.context===m&&I.name===n)return void(T[d].instance=c)}T.push({name:n,context:m,instance:c})},deleteSingletonInstances:function(m){T=T.filter(function(n){return n.context!==m})},getSingletonFactory:function(m){var n=p(m.__dashjs_factory_name,t);return n||(n=function(c){var d;return c===void 0&&(c={}),{getInstance:function(){return d||(d=y(c,m.__dashjs_factory_name)),d||(d=_(m,c,arguments),T.push({name:m.__dashjs_factory_name,context:c,instance:d})),d}}},t[m.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(m){return p(m,t)},updateSingletonFactory:function(m,n){u(m,n,t)},getClassFactory:function(m){var n=p(m.__dashjs_factory_name,e);return n||(n=function(c){return c===void 0&&(c={}),{create:function(){return _(m,c,arguments)}}},e[m.__dashjs_factory_name]=n),n},getClassFactoryByName:function(m){return p(m,e)},updateClassFactory:function(m,n){u(m,n,e)}},ae}();we.Z=P},1264:function(at,we,P){var ae=P(5448),T=P(703),t=P(6398),e=P(3393),y=P(7855),p=P(5595),u=P(8512);function _(d){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},_(d)}function m(d,I,k){return I in d?Object.defineProperty(d,I,{value:k,enumerable:!0,configurable:!0,writable:!0}):d[I]=k,d}function n(){var d,I,k=this.context,q=(0,p.Z)(k).getInstance(),F={"streaming.delay.liveDelay":u.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},$={debug:{logLevel:t.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:e.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:e.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:e.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:e.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(d={},m(d,y.w.MPD_TYPE,500),m(d,y.w.XLINK_EXPANSION_TYPE,500),m(d,y.w.MEDIA_SEGMENT_TYPE,1e3),m(d,y.w.INIT_SEGMENT_TYPE,1e3),m(d,y.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),m(d,y.w.INDEX_SEGMENT_TYPE,1e3),m(d,y.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),m(d,y.w.LICENSE,1e3),m(d,y.w.OTHER_TYPE,1e3),m(d,"lowLatencyReductionFactor",10),d),retryAttempts:(I={},m(I,y.w.MPD_TYPE,3),m(I,y.w.XLINK_EXPANSION_TYPE,1),m(I,y.w.MEDIA_SEGMENT_TYPE,3),m(I,y.w.INIT_SEGMENT_TYPE,3),m(I,y.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),m(I,y.w.INDEX_SEGMENT_TYPE,3),m(I,y.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),m(I,y.w.LICENSE,3),m(I,y.w.OTHER_TYPE,3),m(I,"lowLatencyMultiplyFactor",5),I),abr:{movingAverageMethod:e.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:e.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:e.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},O=T.Z.clone($);function K(re,H,ee){for(var se in re)re.hasOwnProperty(se)&&(H.hasOwnProperty(se)?_(re[se])!=="object"||re[se]instanceof Array||re[se]===null?(H[se]=T.Z.clone(re[se]),F[ee+se]&&q.trigger(F[ee+se])):K(re[se],H[se],ee.slice()+se+"."):console.error("Settings parameter "+ee+se+" is not supported"))}return{get:function(){return O},update:function(re){_(re)==="object"&&K(re,O,"")},reset:function(){O=T.Z.clone($)}}}n.__dashjs_factory_name="Settings";var c=ae.Z.getSingletonFactory(n);we.Z=c},703:function(at,we,P){var ae=P(3875),T=P.n(ae),t=P(1067);function e(u){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},e(u)}function y(u,_){for(var m=0;m<_.length;m++){var n=_[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}var p=function(){function u(){(function(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u)}var _,m;return _=u,m=[{key:"mixin",value:function(n,c,d){var I,k={};if(n)for(var q in c)c.hasOwnProperty(q)&&(I=c[q],q in n&&(n[q]===I||q in k&&k[q]===I)||(e(n[q])==="object"&&n[q]!==null?n[q]=u.mixin(n[q],I,d):n[q]=d(I)));return n}},{key:"clone",value:function(n){if(!n||e(n)!=="object")return n;var c;if(n instanceof Array){c=[];for(var d=0,I=n.length;d<I;++d)d in n&&c.push(u.clone(n[d]))}else c={};return u.mixin(c,n,u.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,c){try{if(!c||c.length===0)return n;var d=new URL(n);return c.forEach(function(I){I.key&&I.value&&d.searchParams.set(I.key,I.value)}),d.href}catch{return n}}},{key:"parseHttpHeaders",value:function(n){var c={};if(!n)return c;for(var d=n.trim().split(`\r
`),I=0,k=d.length;I<k;I++){var q=d[I],F=q.indexOf(": ");F>0&&(c[q.substring(0,F)]=q.substring(F+2))}return c}},{key:"generateUuid",value:function(){var n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(n+16*Math.random())%16|0;return n=Math.floor(n/16),(c=="x"?d:3&d|8).toString(16)})}},{key:"generateHashCode",value:function(n){var c=0;if(n.length===0)return c;for(var d=0;d<n.length;d++)c=(c<<5)-c+n.charCodeAt(d),c|=0;return c}},{key:"getRelativeUrl",value:function(n,c){try{var d=new URL(n),I=new URL(c);if(d.protocol=I.protocol,d.origin!==I.origin)return c;var k=T().relative(d.pathname.substr(0,d.pathname.lastIndexOf("/")),I.pathname.substr(0,I.pathname.lastIndexOf("/"))),q=k.length===0?1:0;return k+=I.pathname.substr(I.pathname.lastIndexOf("/")+q,I.pathname.length-1),I.pathname.length<k.length?I.pathname:k}catch{return c}}},{key:"parseUserAgent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var c=n===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,t.UAParser)(c)}catch{return{}}}},{key:"stringHasProtocol",value:function(n){return/(http(s?)):\/\//i.test(n)}}],m&&y(_,m),u}();we.Z=p},2032:function(at,we,P){function ae(){return"4.7.4"}P.d(we,{e:function(){return ae}})},2230:function(at,we){function P(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var ae=function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T)}var t,e;return t=T,(e=[{key:"extend",value:function(y,p){if(y){var u=!!p&&p.override,_=!!p&&p.publicOnly;for(var m in y)!y.hasOwnProperty(m)||this[m]&&!u||_&&y[m].indexOf("public_")===-1||(this[m]=y[m])}}}])&&P(t.prototype,e),T}();we.Z=ae},4351:function(at,we,P){function ae(p){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ae(p)}function T(p,u){return T=Object.setPrototypeOf||function(_,m){return _.__proto__=m,_},T(p,u)}function t(p,u){return!u||ae(u)!=="object"&&typeof u!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,_,m=(u=n,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(_){var I=e(this).constructor;c=Reflect.construct(d,arguments,I)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,n),(c=m.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",c.BUFFERING_COMPLETED="bufferingCompleted",c.BUFFER_CLEARED="bufferCleared",c.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",c.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",c.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",c.CMSD_STATIC_HEADER="cmsdStaticHeader",c.CURRENT_TRACK_CHANGED="currentTrackChanged",c.DATA_UPDATE_COMPLETED="dataUpdateCompleted",c.INBAND_EVENTS="inbandEvents",c.INITIAL_STREAM_SWITCH="initialStreamSwitch",c.INIT_FRAGMENT_LOADED="initFragmentLoaded",c.INIT_FRAGMENT_NEEDED="initFragmentNeeded",c.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",c.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",c.LOADING_COMPLETED="loadingCompleted",c.LOADING_PROGRESS="loadingProgress",c.LOADING_DATA_PROGRESS="loadingDataProgress",c.LOADING_ABANDONED="loadingAborted",c.MANIFEST_UPDATED="manifestUpdated",c.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",c.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",c.QUOTA_EXCEEDED="quotaExceeded",c.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",c.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",c.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",c.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",c.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",c.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",c.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",c.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",c.SOURCE_BUFFER_ERROR="sourceBufferError",c.STREAMS_COMPOSED="streamsComposed",c.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",c.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",c.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",c.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",c.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",c.URL_RESOLUTION_FAILED="urlResolutionFailed",c.VIDEO_CHUNK_RECEIVED="videoChunkReceived",c.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",c.XLINK_ELEMENT_LOADED="xlinkElementLoaded",c.XLINK_READY="xlinkReady",c.SEEK_TARGET="seekTarget",c.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",c.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",c.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",c.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",c.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",c}return n}(P(8342).Z);we.Z=y},8512:function(at,we,P){function ae(_){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},ae(_)}function T(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}function t(_,m){return t=Object.setPrototypeOf||function(n,c){return n.__proto__=c,n},t(_,m)}function e(_,m){return!m||ae(m)!=="object"&&typeof m!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(_):m}function y(_){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},y(_)}var p=function(_){(function(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),k&&t(I,k)})(d,_);var m,n,c=(m=d,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var I,k=y(m);if(n){var q=y(this).constructor;I=Reflect.construct(k,arguments,q)}else I=k.apply(this,arguments);return e(this,I)});function d(){return T(this,d),c.apply(this,arguments)}return d}(P(4351).Z),u=new p;we.Z=u},8342:function(at,we){function P(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var ae=function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T)}var t,e;return t=T,(e=[{key:"extend",value:function(y,p){if(y){var u=!!p&&p.override,_=!!p&&p.publicOnly;for(var m in y)!y.hasOwnProperty(m)||this[m]&&!u||_&&y[m].indexOf("public_")===-1||(this[m]=y[m])}}}])&&P(t.prototype,e),T}();we.Z=ae},9326:function(at,we,P){var ae=P(3186),T=P(7855),t=P(5448),e=P(8825),y=P(7387),p=P(1553);function u(_){var m,n,c,d,I,k=(_=_||{}).eventBus,q=_.debug,F=_.urlUtils,$=_.type,O=_.streamInfo,K=_.segmentsController,re=_.timelineConverter,H=_.baseURLController;function ee(){return $}function se(){c=null}function _e(ye,Pe,He){var tt,ve,Oe=H.resolve(He.path),_t={};return Oe&&Pe!==Oe.url&&F.isRelative(Pe)?(tt=Oe.url,ve=Oe.serviceLocation,_t=Oe.queryParams,Pe&&(tt=F.resolve(Pe,tt))):tt=Pe,!F.isRelative(tt)&&(ye.url=tt,ye.serviceLocation=ve,ye.queryParams=_t,!0)}function X(ye,Pe){if(Pe==null)return null;var He=new ae.Z,tt=Pe.representation,ve=tt.adaptation.period.mpd.manifest.Period_asArray[tt.adaptation.period.index].AdaptationSet_asArray[tt.adaptation.index].Representation_asArray[tt.index].bandwidth,Oe=Pe.media;return Oe=(0,y.vi)(Oe,"Number",Pe.replacementNumber),Oe=(0,y.vi)(Oe,"Time",Pe.replacementTime),Oe=(0,y.vi)(Oe,"Bandwidth",ve),Oe=(0,y.Aj)(Oe,tt.id),Oe=(0,y.eR)(Oe),He.mediaType=ee(),He.type=T.w.MEDIA_SEGMENT_TYPE,He.range=Pe.mediaRange,He.startTime=Pe.presentationStartTime,He.mediaStartTime=Pe.mediaStartTime,He.duration=Pe.duration,He.timescale=tt.timescale,He.availabilityStartTime=Pe.availabilityStartTime,He.availabilityEndTime=Pe.availabilityEndTime,He.availabilityTimeComplete=tt.availabilityTimeComplete,He.wallStartTime=Pe.wallStartTime,He.quality=tt.index,He.index=Pe.index,He.mediaInfo=ye,He.adaptationIndex=tt.adaptation.index,He.representationId=tt.id,_e(He,Oe,tt)?He:void 0}function Ae(ye,Pe,He){var tt=null;if(!Pe||!Pe.segmentInfoType)return tt;var ve=K.getSegmentByTime(Pe,He);return ve&&(c=ve,n.debug("Index for time "+He+" is "+ve.index),tt=X(ye,ve)),tt}function Le(ye,Pe,He){var tt=null,ve=K.getSegmentByIndex(Pe,He,c?c.mediaStartTime:-1);if(ve)tt=X(ye,ve),c=ve;else{if(d&&!I)return n.debug(ee()+" No segment found at index: "+He+". Wait for next loop"),null;I=!0}return tt}function Ye(){n.debug("Dynamic stream complete"),I=!0}return m={getCurrentIndex:function(){return c?c.index:-1},getInitRequest:function(ye,Pe){return Pe?function(He,tt,ve){var Oe=new ae.Z,_t=tt.adaptation.period,dt=_t.start;if(Oe.mediaType=ve,Oe.type=T.w.INIT_SEGMENT_TYPE,Oe.range=tt.range,Oe.availabilityStartTime=re.calcAvailabilityStartTimeFromPresentationTime(dt,tt,d),Oe.availabilityEndTime=re.calcAvailabilityEndTimeFromPresentationTime(dt+_t.duration,tt,d),Oe.quality=tt.index,Oe.mediaInfo=He,Oe.representationId=tt.id,_e(Oe,tt.initialization,tt))return Oe.url=(0,y.vi)(Oe.url,"Bandwidth",tt.bandwidth),Oe}(ye,Pe,ee()):null},getNextSegmentRequest:function(ye,Pe){return Pe&&Pe.segmentInfoType?Le(ye,Pe,c?c.index+1:0):null},getNextSegmentRequestIdempotent:function(ye,Pe){var He=c?c.index+1:0,tt=K.getSegmentByIndex(Pe,He,c?c.mediaStartTime:-1);return tt?X(ye,tt):null},getSegmentRequestForTime:Ae,getStreamId:function(){return O.id},getStreamInfo:function(){return O},getType:ee,getValidTimeAheadOfTargetTime:function(ye,Pe,He,tt){try{if(isNaN(ye)||!Pe||!He)return NaN;if(ye<0&&(ye=0),isNaN(tt)&&(tt=.5),Ae(Pe,He,ye))return ye;if(He.adaptation.period.start+He.adaptation.period.duration<ye)return NaN;for(var ve=isFinite(He.adaptation.period.duration)?He.adaptation.period.start+He.adaptation.period.duration:ye+30,Oe=Math.min(ye+tt,ve),_t=NaN,dt=null;Oe<=ve;){var ke=null;if(Oe<=ve&&(ke=Ae(Pe,He,Oe)),ke){_t=Oe,dt=ke;break}Oe+=tt}if(dt){var Je=dt.startTime+dt.duration;return ye>dt.startTime&&Je-ye>tt?ye:!isNaN(dt.startTime)&&ye<dt.startTime&&_t>dt.startTime?dt.startTime+.001:Math.min(Je-tt,_t)}return _t}catch{return NaN}},initialize:function(ye){d=ye,I=!1,K.initialize(ye)},isLastSegmentRequested:function(ye,Pe){return!ye||!c?!1:I?!0:!isFinite(ye.adaptation.period.duration)||c.presentationStartTime+c.duration>Pe?!1:ye.mediaFinishedInformation&&!isNaN(ye.mediaFinishedInformation.numberOfSegments)&&!isNaN(c.index)&&c.index>=ye.mediaFinishedInformation.numberOfSegments-1&&(!d||ye.segmentInfoType===p.Z.SEGMENT_TEMPLATE||d&&ye.segmentInfoType===p.Z.SEGMENT_LIST&&ye.adaptation.period.nextPeriodId)?!0:!!(d&&ye.adaptation.period.nextPeriodId&&ye.segmentInfoType===p.Z.SEGMENT_TIMELINE&&ye.mediaFinishedInformation&&!isNaN(ye.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&c&&!isNaN(c.mediaStartTime)&&!isNaN(c.duration)&&c.mediaStartTime+c.duration>=ye.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(ye,Pe){return Pe&&Pe.segmentInfoType?Le(ye,Pe,c?c.index:0):null},reset:function(){se(),k.off(e.Z.DYNAMIC_TO_STATIC,Ye,m)}},n=q.getLogger(m),se(),k.on(e.Z.DYNAMIC_TO_STATIC,Ye,m),m}u.__dashjs_factory_name="DashHandler",we.Z=t.Z.getClassFactory(u)},1553:function(at,we){function P(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var ae=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&P(t.prototype,e),T}());we.Z=ae},7802:function(at,we,P){var ae=P(5448),T=P(1724),t=P(3636),e=P(1736),y=P(5246);function p(_){_=_||{};var m,n,c=this.context,d=_.dashConstants,I=_.type,k=_.segmentBaseController;function q(F){return F?F.segments?n[d.SEGMENT_BASE]:n[F.segmentInfoType]:null}return m={initialize:function(F){n[d.SEGMENT_TIMELINE]=(0,T.Z)(c).create(_,F),n[d.SEGMENT_TEMPLATE]=(0,t.Z)(c).create(_,F),n[d.SEGMENT_LIST]=(0,e.Z)(c).create(_,F),n[d.SEGMENT_BASE]=(0,y.Z)(c).create(_,F)},updateInitData:function(F,$){return $?Promise.resolve():k.getSegmentBaseInitSegment({representation:F,mediaType:I})},updateSegmentData:function(F,$){return $?Promise.resolve():k.getSegmentList({mimeType:F.mimeType,representation:F,mediaType:I})},getSegmentByIndex:function(F,$,O){var K=q(F);return K?K.getSegmentByIndex(F,$,O):null},getSegmentByTime:function(F,$){var O=q(F);return O?O.getSegmentByTime(F,$):null},getMediaFinishedInformation:function(F){var $=q(F);return $?$.getMediaFinishedInformation(F):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},m}p.__dashjs_factory_name="SegmentsController";var u=ae.Z.getClassFactory(p);we.Z=u},1736:function(at,we,P){var ae=P(5448),T=P(3393),t=P(7387);function e(p,u){var _=(p=p||{}).timelineConverter;function m(){if(!_||!_.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function n(c,d){if(m(),!c)return null;var I=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentList,k=I.SegmentURL_asArray.length,q=c&&!isNaN(c.startNumber)?c.startNumber:1,F=Math.max(q-1,0),$=Math.max(d-F,0),O=null;if($<k){var K=I.SegmentURL_asArray[$];(O=(0,t.NF)(_,u,c,d))&&(O.replacementTime=(q+d-1)*c.segmentDuration,O.media=K.media?K.media:"",O.mediaRange=K.mediaRange,O.indexRange=K.indexRange)}return O}return{getSegmentByIndex:n,getSegmentByTime:function(c,d){if(m(),!c)return null;var I=c.segmentDuration;if(isNaN(I))return null;var k=_.calcPeriodRelativeTimeFromMpdRelativeTime(c,d);return n(c,Math.floor(k/I))},getMediaFinishedInformation:function(c){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!c)return d;var I=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentList,k=c&&!isNaN(c.startNumber)?c.startNumber:1,q=Math.max(k-1,0);return d.numberOfSegments=q+I.SegmentURL_asArray.length,d}}}e.__dashjs_factory_name="ListSegmentsGetter";var y=ae.Z.getClassFactory(e);we.Z=y},5246:function(at,we,P){var ae=P(5448),T=P(3393);function t(y){var p=(y=y||{}).timelineConverter;function u(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function _(m,n){if(u(),!m)return null;var c,d=m.segments?m.segments.length:-1;if(n<d&&(c=m.segments[n])&&c.index===n)return c;for(var I=0;I<d;I++)if((c=m.segments[I])&&c.index===n)return c;return null}return{getSegmentByIndex:_,getSegmentByTime:function(m,n){u();var c=function(d,I){if(!d)return-1;var k,q,F,$,O,K=d.segments,re=K?K.length:null,H=-1;if(K&&re>0){for(O=0;O<re;O++)if(F=(q=K[O]).presentationStartTime,I+(k=($=q.duration)/2)>=F&&I-k<F+$){H=q.index;break}}return H}(m,n);return _(m,c)},getMediaFinishedInformation:function(m){var n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return m&&m.segments&&(n.numberOfSegments=m.segments.length),n}}}t.__dashjs_factory_name="SegmentBaseGetter";var e=ae.Z.getClassFactory(t);we.Z=e},7387:function(at,we,P){P.d(we,{Aj:function(){return e},NF:function(){return _},TJ:function(){return m},eR:function(){return t},vi:function(){return y}});var ae=P(2011);function T(n,c){for(;n.length<c;)n="0"+n;return n}function t(n){return n&&n.split("$$").join("$")}function e(n,c){if(!c||!n||n.indexOf("$RepresentationID$")===-1)return n;var d=c.toString();return n.split("$RepresentationID$").join(d)}function y(n,c,d){var I,k,q,F,$,O,K=c.length,re=2;if(!n)return n;for(;;){if((I=n.indexOf("$"+c))<0||(k=n.indexOf("$",I+K))<0)return n;if((q=n.indexOf("%0",I+K))>I&&q<k)switch(F=n.charAt(k-1),$=parseInt(n.substring(q+re,k-1),10),F){case"d":case"i":case"u":O=T(d.toString(),$);break;case"x":O=T(d.toString(16),$);break;case"X":O=T(d.toString(16),$).toUpperCase();break;case"o":O=T(d.toString(8),$);break;default:return n}else O=d;n=n.substring(0,I)+O+n.substring(k+1)}}function p(n,c,d,I,k,q,F,$){var O,K=new ae.Z;return K.representation=n,K.duration=c,K.presentationStartTime=d,K.mediaStartTime=I,K.availabilityStartTime=k.calcAvailabilityStartTimeFromPresentationTime(q,n,F),K.availabilityEndTime=k.calcAvailabilityEndTimeFromPresentationTime(q+c,n,F),K.wallStartTime=k.calcWallTimeForSegment(K,F),K.replacementNumber=(O=$,K.representation.startNumber+O),K.index=$,K}function u(n,c,d,I){var k=c.adaptation.period;if(isFinite(k.duration)&&k.start+k.duration<=d.presentationStartTime)return!1;if(I){if(c.availabilityTimeOffset==="INF")return!0;var q=n.getClientReferenceTime();return d.availabilityStartTime.getTime()<=q&&(!isFinite(d.availabilityEndTime)||d.availabilityEndTime.getTime()>=q)}return!0}function _(n,c,d,I){var k,q,F;k=d.segmentDuration,isNaN(k)&&(k=d.adaptation.period.duration),q=parseFloat((d.adaptation.period.start+I*k).toFixed(5)),F=parseFloat((q+k).toFixed(5));var $=p(d,k,q,n.calcMediaTimeFromPresentationTime(q,d),n,F,c,I);return u(n,d,$,c)?$:null}function m(n,c,d,I,k,q,F,$,O,K){var re,H,ee=I/q,se=k/q;return re=n.calcPresentationTimeFromMediaTime(ee,d),u(n,d,H=p(d,se,re,ee,n,re+se,c,O),c)?(H.replacementTime=K||I,F=y(F,"Number",H.replacementNumber),F=y(F,"Time",H.replacementTime),H.media=F,H.mediaRange=$,H):null}},3636:function(at,we,P){var ae=P(5448),T=P(3393),t=P(7387);function e(p,u){var _=(p=p||{}).timelineConverter;function m(){if(!_||!_.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function n(c,d){if(m(),!c)return null;var I=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentTemplate;d=Math.max(d,0);var k=(0,t.NF)(_,u,c,d);if(k){k.replacementTime=Math.round((d-1)*c.segmentDuration*c.timescale,10);var q=I.media;q=(0,t.vi)(q,"Number",k.replacementNumber),q=(0,t.vi)(q,"Time",k.replacementTime),k.media=q}return k}return{getSegmentByIndex:n,getSegmentByTime:function(c,d){if(m(),!c)return null;var I=c.segmentDuration;if(isNaN(I))return null;var k=_.calcPeriodRelativeTimeFromMpdRelativeTime(c,d);return n(c,Math.floor(k/I))},getMediaFinishedInformation:function(c){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!c)return d;var I=c.segmentDuration;return isNaN(I)?d.numberOfSegments=1:d.numberOfSegments=Math.ceil(c.adaptation.period.duration/I),d}}}e.__dashjs_factory_name="TemplateSegmentsGetter";var y=ae.Z.getClassFactory(e);we.Z=y},1724:function(at,we,P){var ae=P(5448),T=P(3393),t=P(7387);function e(p,u){var _=(p=p||{}).timelineConverter,m=p.dashMetrics;function n(){if(!_)throw new Error(T.Z.MISSING_CONFIG_ERROR)}function c(I,k){var q,F,$,O,K,re,H,ee=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate||I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,se=ee.SegmentTimeline,_e=ee.SegmentURL_asArray,X=0,Ae=-1;H=I.timescale;var Le=!1;for($=0,O=(q=se.S_asArray).length;$<O&&!Le;$++)for(re=0,(F=q[$]).hasOwnProperty("r")&&(re=F.r),F.hasOwnProperty("t")&&(X=F.t),re<0&&(re=d(I,q[$+1],F,H,X/H)),K=0;K<=re&&!Le;K++)(Le=k(X,ee,_e,F,H,++Ae,$))&&(I.segmentDuration=F.d/H),X+=F.d}function d(I,k,q,F,$){var O;if(k&&k.hasOwnProperty("t"))O=k.t/F;else try{var K=0;if(isNaN(I.adaptation.period.start)||isNaN(I.adaptation.period.duration)||!isFinite(I.adaptation.period.duration)){var re=m.getCurrentDVRInfo();K=isNaN(re.end)?0:re.end}else K=I.adaptation.period.start+I.adaptation.period.duration;O=_.calcMediaTimeFromPresentationTime(K,I),I.segmentDuration=q.d/F}catch{O=0}return Math.max(Math.ceil((O-$)/(q.d/F))-1,0)}return{getSegmentByIndex:function(I,k,q){if(n(),!I)return null;var F=null,$=!1;return c(I,function(O,K,re,H,ee,se,_e){if($||q<0){var X=K.media,Ae=H.mediaRange;return re&&(X=re[_e].media||"",Ae=re[_e].mediaRange),F=(0,t.TJ)(_,u,I,O,H.d,ee,X,Ae,se,H.tManifest),!0}return O>=q*ee-.5*H.d&&($=!0),!1}),F},getSegmentByTime:function(I,k){if(n(),!I)return null;k===void 0&&(k=null);var q=null,F=_.calcMediaTimeFromPresentationTime(k,I);return c(I,function($,O,K,re,H,ee,se){var _e=parseFloat((F*H).toPrecision(15));if(_e<$+re.d&&_e>=$){var X=O.media,Ae=re.mediaRange;return K&&(X=K[se].media||"",Ae=K[se].mediaRange),q=(0,t.TJ)(_,u,I,$,re.d,H,X,Ae,ee,re.tManifest),!0}return!1}),q},getMediaFinishedInformation:function(I){if(!I)return 0;var k,q,F,$,O,K,re,H=(I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate||I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList).SegmentTimeline,ee=0,se=0,_e=0;for(re=I.timescale,$=(k=H.S_asArray).length,F=0;F<$;F++)for(K=0,(q=k[F]).hasOwnProperty("r")&&(K=q.r),q.hasOwnProperty("t")&&(se=(ee=q.t)/re),K<0&&(K=d(I,k[F+1],q,re,se)),O=0;O<=K;O++)_e++,se=(ee+=q.d)/re;return{numberOfSegments:_e,mediaTimeOfLastSignaledSegment:se}}}}e.__dashjs_factory_name="TimelineSegmentsGetter";var y=ae.Z.getClassFactory(e);we.Z=y},2011:function(at,we){we.Z=function P(){(function(ae,T){if(!(ae instanceof T))throw new TypeError("Cannot call a class as a function")})(this,P),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(at,we){we.Z=function P(){(function(ae,T){if(!(ae instanceof T))throw new TypeError("Cannot call a class as a function")})(this,P),this.schemeIdUri="",this.value=""}},1139:function(at,we,P){P.d(we,{Z:function(){return cu}});var ae=P(452),T=P.n(ae),t=P(3393),e=P(1553),y=P(3860),p=P(5595),u=P(8512),_=P(5448),m=P(6398),n=P(8825);function c(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie,j,le,g,M,C,D=this.context,b=(0,p.Z)(D).getInstance();function ne(){x(),Z=!1,Y=0,B=0,ue=0,g=!1,de=!0,G=!1,M=!1,ie=NaN,te=NaN,h&&(b.off(u.Z.DATA_UPDATE_COMPLETED,qe,i),b.off(u.Z.LOADING_PROGRESS,kt,i),b.off(u.Z.MANIFEST_UPDATED,rt,i),b.off(u.Z.STREAMS_COMPOSED,fe,i),b.off(n.Z.PLAYBACK_ENDED,ut,i),b.off(n.Z.STREAM_INITIALIZING,Ge,i),b.off(n.Z.REPRESENTATION_SWITCH,Re,i),b.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,st,i),lt(),h.removeEventListener("canplay",ht),h.removeEventListener("canplaythrough",gt),h.removeEventListener("play",qt),h.removeEventListener("waiting",Gt),h.removeEventListener("playing",an),h.removeEventListener("pause",un),h.removeEventListener("error",Dt),h.removeEventListener("seeking",Be),h.removeEventListener("seeked",ft),h.removeEventListener("timeupdate",$e),h.removeEventListener("progress",vt),h.removeEventListener("ratechange",wt),h.removeEventListener("loadedmetadata",Ht),h.removeEventListener("loadeddata",Yt),h.removeEventListener("stalled",jt),h.removeEventListener("ended",Kt),h.removeEventListener("volumechange",Jt)),L=null,h=null,N=null,U=null}function z(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((oe(pe)-Te()).toFixed(5))}function oe(pe){var Ve=pe||N;return Ve.start+Ve.duration}function Q(){var pe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];N&&h&&h.getElement()?(pe&&U&&Ne(Te()),h.play()):Z=!0}function x(){N&&h&&h.pause()}function J(pe){var Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1],St=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Nt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(N&&h&&h.getElement()){var ln=isNaN(ie)?h.getTime():ie;pe!==ln&&((j=St===!0)||(ie=pe),r.info("Requesting seek to time: "+pe+(j?" (internal)":"")),U&&Nt&&Ne(pe),h.setCurrentTime(pe,Ve))}}function he(){if(N&&h&&U){var pe=l&&l.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ve=R.getCurrentDVRInfo(pe);return Ve&&Ve.range?Ve.range.end:0}}function Ne(pe){var Ve=new Date(w.getClientReferenceTime()),St=A.getRegularPeriods()[0],Nt=w.calcPresentationTimeFromWallTime(Ve,St);Y=Nt-pe}function Te(){return N&&h?h.getTime():null}function Ce(){return N&&h?h.isPaused():null}function Ie(){return N&&h?h.isSeeking():null}function et(){return N&&h?h.isStalled():null}function nt(){return N&&h?h.getPlaybackRate():null}function We(){return N&&h?h.getEnded():null}function Xe(){return U}function Mt(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Ce()&&U&&h.getReadyState()!==0&&!Ie()&&!g){pe||(pe=l.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO);var Ve=Te(),St=Ee(Ve,pe),Nt=!isNaN(St)&&St!==Ve;Nt&&!Ie()&&(et()||le||h.getReadyState()===1)&&(r.debug("UpdateCurrentTime: Seek to actual time: ".concat(St," from currentTime: ").concat(Ve)),J(St,!1,!1))}}function Ee(pe,Ve){var St=R.getCurrentDVRInfo(Ve),Nt=St?St.range:null;return Nt?pe>Nt.end?Math.max(Nt.end-Y,Nt.start):pe>0&&pe+.25<Nt.start&&Math.abs(pe-Nt.start)<31536e4?G?Math.max(Nt.end-Y,Nt.start):Nt.start:pe:NaN}function Fe(){L===null&&(L=setInterval(function(){(function(){if(b.trigger(u.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:U,time:new Date}),Xe()){var pe=Date.now();(isNaN(te)||pe>te+C.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(l.addDVRMetric(),Ce()?function(){var Ve=Date.now();(!ce||Ve>ce+500)&&(ce=Ve,$e())}():Mt(),te=pe)}})()},C.get().streaming.wallclockTimeUpdateInterval))}function lt(){clearInterval(L),L=null}function qe(pe){var Ve=A.convertRepresentationToRepresentationInfo(pe.currentRepresentation),St=Ve?Ve.mediaInfo.streamInfo:null;St!==null&&N.id===St.id&&(N=St)}function ht(){b.trigger(u.Z.CAN_PLAY)}function gt(){b.trigger(u.Z.CAN_PLAY_THROUGH)}function st(pe){pe.streamId===l.getActiveStreamInfo().id&&(le=pe.state===y.Z.BUFFER_EMPTY,C.get().streaming.buffer.setStallState&&h.setStallState(pe.mediaType,pe.state===y.Z.BUFFER_EMPTY))}function qt(){r.info("Native video element event: play"),Mt(),Fe(),b.trigger(u.Z.PLAYBACK_STARTED,{startTime:Te()})}function Gt(){r.info("Native video element event: waiting"),b.trigger(u.Z.PLAYBACK_WAITING,{playingTime:Te()})}function an(){r.info("Native video element event: playing"),j=!1,b.trigger(u.Z.PLAYBACK_PLAYING,{playingTime:Te()})}function un(){r.info("Native video element event: pause"),b.trigger(u.Z.PLAYBACK_PAUSED,{ended:We()})}function Be(){if(!j){var pe=Te();isNaN(ie)||ie===pe||(pe=ie),ie=NaN,r.info("Seeking to: "+pe),Fe(),b.trigger(u.Z.PLAYBACK_SEEKING,{seekTime:pe,streamId:N.id})}}function ft(){r.info("Native video element event: seeked"),j=!1,b.trigger(u.Z.PLAYBACK_SEEKED)}function $e(){N&&b.trigger(u.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:z(),time:Te(),streamId:N.id})}function vt(){b.trigger(u.Z.PLAYBACK_PROGRESS,{streamId:N.id})}function wt(){var pe=nt();r.info("Native video element event: ratechange: ",pe),b.trigger(u.Z.PLAYBACK_RATE_CHANGED,{playbackRate:pe})}function Ht(){r.info("Native video element event: loadedmetadata"),b.trigger(u.Z.PLAYBACK_METADATA_LOADED),Fe()}function Yt(){r.info("Native video element event: loadeddata"),b.trigger(u.Z.PLAYBACK_LOADED_DATA)}function Kt(){r.info("Native video element event: ended"),x(),lt();var pe=l?l.getActiveStreamInfo():null;pe&&b.trigger(u.Z.PLAYBACK_ENDED,{isLast:pe.isLast})}function Jt(){b.trigger(u.Z.PLAYBACK_VOLUME_CHANGED)}function ut(pe){if(L&&pe.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Ve=pe.seekTime?pe.seekTime:oe();h.setCurrentTime(Ve),x(),lt()}}function Dt(pe){var Ve=pe.target||pe.srcElement;b.trigger(u.Z.PLAYBACK_ERROR,{error:Ve.error})}function xt(){U=!1}function kt(pe){if(pe.stream===!1&&G&&!isNaN(pe.request.duration)){var Ve=1.2*pe.request.duration;Ve>Y&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Ve.toFixed(2)),Y=Ve,B=Ve)}}function jt(pe){b.trigger(u.Z.PLAYBACK_STALLED,{e:pe})}function Ge(pe){var Ve;(Ve=pe.mediaInfo)&&Ve.supplementalProperties&&Ve.supplementalProperties[t.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Ve.supplementalProperties[t.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),G=!0)}function Re(pe){var Ve=l.getActiveStreamInfo();pe&&Ve&&pe.currentRepresentation&&pe.streamId&&pe.streamId===Ve.id&&pe.mediaType&&(pe.mediaType===t.Z.VIDEO||pe.mediaType===t.Z.AUDIO)&&(de=pe.currentRepresentation.availabilityTimeComplete,(G=!de)&&!M&&(M=!0))}function rt(){g=!0}function fe(){g=!1}return i={initialize:function(pe,Ve){N=pe,Ve!==!0&&(h.addEventListener("canplay",ht),h.addEventListener("canplaythrough",gt),h.addEventListener("play",qt),h.addEventListener("waiting",Gt),h.addEventListener("playing",an),h.addEventListener("pause",un),h.addEventListener("error",Dt),h.addEventListener("seeking",Be),h.addEventListener("seeked",ft),h.addEventListener("timeupdate",$e),h.addEventListener("progress",vt),h.addEventListener("ratechange",wt),h.addEventListener("loadedmetadata",Ht),h.addEventListener("loadeddata",Yt),h.addEventListener("stalled",jt),h.addEventListener("ended",Kt),h.addEventListener("volumechange",Jt),U=N.manifestInfo.isDynamic,le=!1,j=!1,b.on(u.Z.DATA_UPDATE_COMPLETED,qe,i),b.on(u.Z.LOADING_PROGRESS,kt,i),b.on(u.Z.MANIFEST_UPDATED,rt,i),b.on(u.Z.STREAMS_COMPOSED,fe,i),b.on(n.Z.PLAYBACK_ENDED,ut,i,{priority:p.Z.EVENT_PRIORITY_HIGH}),b.on(n.Z.STREAM_INITIALIZING,Ge,i),b.on(n.Z.REPRESENTATION_SWITCH,Re,i),b.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,st,i),b.on(n.Z.DYNAMIC_TO_STATIC,xt,i),Z&&(Z=!1,Q()))},setConfig:function(pe){pe&&(pe.streamController&&(l=pe.streamController),pe.serviceDescriptionController&&(E=pe.serviceDescriptionController),pe.dashMetrics&&(R=pe.dashMetrics),pe.adapter&&(A=pe.adapter),pe.videoModel&&(h=pe.videoModel),pe.timelineConverter&&(w=pe.timelineConverter),pe.settings&&(C=pe.settings))},getTimeToStreamEnd:z,getBufferLevel:function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ve=null;return l.getActiveStreamProcessors().forEach(function(St){if(!pe||pe.length===0||pe.indexOf(St.getType())===-1){var Nt=St.getBufferLevel();Ve=Ve===null?Nt:Math.min(Ve,Nt)}}),Ve},getPlaybackStalled:function(){return le},getTime:Te,getLowLatencyModeEnabled:function(){return G},getInitialCatchupModeActivated:function(){return M},getIsManifestUpdateInProgress:function(){return g},getPlaybackRate:nt,getPlayedRanges:function(){return N&&h?h.getPlayedRanges():null},getEnded:We,getIsDynamic:Xe,getStreamController:function(){return l},computeAndSetLiveDelay:function(pe,Ve){var St,Nt,ln,bn=!isNaN(pe)&&isFinite(pe)?pe:NaN,Zn=A.getSuggestedPresentationDelay(),Sn=E.getServiceDescriptionSettings();return St=isNaN(C.get().streaming.delay.liveDelay)?C.get().streaming.delay.liveDelayFragmentCount===null||isNaN(C.get().streaming.delay.liveDelayFragmentCount)||isNaN(bn)?Sn&&!isNaN(Sn.liveDelay)&&Sn.liveDelay>0?Sn.liveDelay:C.get().streaming.delay.useSuggestedPresentationDelay===!0&&Zn!==null&&!isNaN(Zn)&&Zn>0?Zn:isNaN(bn)?Ve&&!isNaN(Ve.minBufferTime)?4*Ve.minBufferTime:4*N.manifestInfo.minBufferTime:4*bn:bn*C.get().streaming.delay.liveDelayFragmentCount:C.get().streaming.delay.liveDelay,(ln=A.getAvailabilityStartTime())!==null&&(ue=ln),Nt=Ve&&Ve.dvrWindowSize>0?Math.min(St,Ve.dvrWindowSize):St,Y=Nt,B=Nt,Nt},getLiveDelay:function(){return Y},getOriginalLiveDelay:function(){return B},getCurrentLiveLatency:function(){if(!U||isNaN(ue))return NaN;var pe=Te();if(isNaN(pe)||pe===0)return 0;var Ve=new Date().getTime()+1e3*w.getClientTimeOffset();return Math.max(((Ve-ue-1e3*pe)/1e3).toFixed(3),0)},play:Q,isPaused:Ce,isStalled:et,pause:x,isSeeking:Ie,getStreamEndTime:oe,seek:J,seekToOriginalLive:function(){var pe=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1],St=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Nt=he();if(Nt!==0){var ln=Nt-(Y=B);J(ln,pe,Ve,St)}},seekToCurrentLive:function(){var pe=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1],St=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Nt=he();if(Nt!==0){var ln=Nt-Y;J(ln,pe,Ve,St)}},reset:ne,updateCurrentTime:Mt,getAvailabilityStartTime:function(){return ue}},r=(0,m.Z)(D).getInstance().getLogger(i),ne(),i}c.__dashjs_factory_name="PlaybackController";var d=_.Z.getSingletonFactory(c),I=P(3186),k="loading",q="executed",F="failed";function $(i){var r,l,E,R,A=(i=i||{}).eventBus,h=i.events,w=i.dashMetrics,L=i.fragmentLoader,Y=i.debug,B=i.streamInfo,N=i.type;function U(g){var M;return!!g&&(M=!1,E.some(function(C){if(D=g,b=C,!isNaN(D.index)&&D.startTime===b.startTime&&D.adaptationIndex===b.adaptationIndex&&D.type===b.type||function(ne,z){return isNaN(ne.index)&&isNaN(z.index)&&ne.quality===z.quality}(g,C)||function(ne,z){return ne.action===I.Z.ACTION_COMPLETE&&ne.action===z.action}(g,C))return M=!0;var D,b}),M)}function Z(g){return isNaN(g.duration)?.25:Math.min(g.duration/8,.5)}function ce(g){E=E.filter(function(M){var C=Z(M);return isNaN(M.startTime)||g!==void 0&&M.startTime>=g-C})}function te(g,M){M<=g+.5||(E=E.filter(function(C){var D=Z(C);return isNaN(C.startTime)||C.startTime>=M-D||isNaN(C.duration)||C.startTime+C.duration<=g+D}))}function ue(g,M,C){for(var D=g.length-1;D>=0;D--){var b=g[D],ne=b.startTime,z=ne+b.duration;if(C=isNaN(C)?Z(b):C,!isNaN(ne)&&!isNaN(z)&&M+C>=ne&&M-C<z||isNaN(ne)&&isNaN(M))return b}return null}function de(g,M){w.addSchedulingInfo(g,M),w.addRequestsQueue(g.mediaType,R,E)}function G(g){g.sender===L&&(R.splice(R.indexOf(g.request),1),g.response&&!g.error&&E.push(g.request),de(g.request,g.error?F:q),A.trigger(h.FRAGMENT_LOADING_COMPLETED,{request:g.request,response:g.response,error:g.error,sender:this},{streamId:B.id,mediaType:N}))}function ie(g){g.sender===L&&A.trigger(h.FRAGMENT_LOADING_PROGRESS,{request:g.request,response:g.response,error:g.error,sender:this},{streamId:B.id,mediaType:N})}function j(g){g.sender===L&&A.trigger(h.FRAGMENT_LOADING_ABANDONED,{request:g.request},{streamId:B.id,mediaType:N})}function le(){E=[],R=[]}return r={getStreamId:function(){return B.id},getType:function(){return N},getRequests:function(g){var M=g?g.state instanceof Array?g.state:[g.state]:[],C=[];return M.forEach(function(D){var b=function(ne){var z;switch(ne){case k:z=R;break;case q:z=E;break;default:z=[]}return z}(D);C=C.concat(function(ne,z){return z.hasOwnProperty("time")?[ue(ne,z.time,z.threshold)]:ne.filter(function(oe){for(var Q in z)if(Q!=="state"&&z.hasOwnProperty(Q)&&oe[Q]!=z[Q])return!1;return!0})}(b,g))}),C},isFragmentLoaded:U,isFragmentLoadedOrPending:function(g){var M,C=!1,D=0;if(!(C=U(g)))for(D=0;D<R.length;D++)M=R[D],g.url===M.url&&g.startTime===M.startTime&&(C=!0);return C},removeExecutedRequestsBeforeTime:ce,removeExecutedRequestsAfterTime:function(g){E=E.filter(function(M){return isNaN(M.startTime)||g!==void 0&&M.startTime<g})},syncExecutedRequestsWithBufferedRange:function(g,M){if(g&&g.length!==0){for(var C=0,D=0,b=g.length;D<b;D++)te(C,g.start(D)),C=g.end(D);M>0&&te(C,M)}else ce()},abortRequests:function(){l.debug("abort requests"),L.abort(),R=[]},executeRequest:function(g){g.action===I.Z.ACTION_DOWNLOAD?(de(g,k),R.push(g),function(M){A.trigger(h.FRAGMENT_LOADING_STARTED,{request:M},{streamId:B.id,mediaType:N}),L.load(M)}(g)):l.warn("Unknown request action.")},reset:function(){A.off(h.LOADING_COMPLETED,G,this),A.off(h.LOADING_DATA_PROGRESS,ie,this),A.off(h.LOADING_ABANDONED,j,this),L&&L.reset(),le()},resetInitialSettings:le,addExecutedRequest:function(g){E.push(g)}},l=Y.getLogger(r),le(),A.on(h.LOADING_COMPLETED,G,r),A.on(h.LOADING_DATA_PROGRESS,ie,r),A.on(h.LOADING_ABANDONED,j,r),r}$.__dashjs_factory_name="FragmentModel";var O=_.Z.getClassFactory($);O.FRAGMENT_MODEL_LOADING=k,O.FRAGMENT_MODEL_EXECUTED=q,O.FRAGMENT_MODEL_CANCELED="canceled",O.FRAGMENT_MODEL_FAILED=F,_.Z.updateClassFactory($.__dashjs_factory_name,O);var K=O,re=P(5459);function H(i){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},H(i)}function ee(i,r){return ee=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ee(i,r)}function se(i,r){return!r||H(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function _e(i){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_e(i)}var X=new(function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ee(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=_e(r);if(l){var w=_e(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return se(this,A)});function R(){var A;return function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}(this,R),(A=E.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,A.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,A.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,A.SEGMENT_BASE_LOADER_ERROR_CODE=15,A.TIME_SYNC_FAILED_ERROR_CODE=16,A.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,A.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,A.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,A.APPEND_ERROR_CODE=20,A.REMOVE_ERROR_CODE=21,A.DATA_UPDATE_FAILED_ERROR_CODE=22,A.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,A.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,A.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,A.DOWNLOAD_ERROR_ID_SIDX_CODE=26,A.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,A.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,A.DOWNLOAD_ERROR_ID_XLINK_CODE=29,A.MANIFEST_ERROR_ID_PARSE_CODE=31,A.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,A.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,A.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,A.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,A.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",A.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",A.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",A.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",A.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",A.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",A.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",A.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",A.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",A.APPEND_ERROR_MESSAGE="chunk is not defined",A.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",A.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",A.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",A.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",A.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",A.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",A}return R}(P(2230).Z)),Ae=P(1264),Le=P(7855);function Ye(i){var r,l,E,R,A,h,w=this.context,L=(0,Ae.Z)(w).getInstance(),Y=i.textController,B=i.eventBus,N=[],U=[],Z=!1,ce=i.mediaSource,te=null;function ue(b){return new Promise(function(ne){D(function(){R.changeType&&R.changeType(b),ne()})})}function de(b){return R=Y.getTextSourceBuffer(b),Promise.resolve()}function G(){if(typeof R.addEventListener=="function")try{R.addEventListener("updateend",M,!1),R.addEventListener("error",C,!1),R.addEventListener("abort",C,!1)}catch{h=setInterval(M,50)}else h=setInterval(M,50)}function ie(b){return new Promise(function(ne){R&&L.get().streaming.buffer.useAppendWindow?D(function(){try{if(!R)return void ne();var z=ce.duration,oe=0;b&&!isNaN(b.start)&&!isNaN(b.duration)&&isFinite(b.duration)&&(z=b.start+b.duration),b&&!isNaN(b.start)&&(oe=b.start),R.appendWindowEnd===z&&R.appendWindowStart===oe||(R.appendWindowStart=0,R.appendWindowEnd=z+.01,R.appendWindowStart=Math.max(oe-.1,0),E.debug("Updated append window for ".concat(A.type,". Set start to ").concat(R.appendWindowStart," and end to ").concat(R.appendWindowEnd))),ne()}catch{E.warn("Failed to set append window"),ne()}}):ne()})}function j(b){return new Promise(function(ne){R?D(function(){try{R.timestampOffset===b||isNaN(b)||(R.timestampOffset=b,E.debug("Set MSE timestamp offset to ".concat(b))),ne()}catch{ne()}}):ne()})}function le(){if(!Z&&U.length>0){Z=!0;var b=U[0];U.splice(0,1);var ne=function(){Z=!1,U.length>0&&le.call(this),b&&b.data&&b.data.segmentType&&b.data.segmentType!==Le.w.INIT_SEGMENT_TYPE&&delete b.data.bytes,b.promise.resolve({chunk:b.data})};try{te=b.request,b.data.bytes.byteLength===0?ne.call(this):(R.appendBuffer?R.appendBuffer(b.data.bytes):R.append(b.data.bytes,b.data),D(ne.bind(this)))}catch(z){E.fatal('SourceBuffer append failed "'+z+'"'),U.length>0?le():Z=!1,delete b.data.bytes,b.promise.reject({chunk:b.data,error:new re.Z(z.code,z.message)})}}}function g(){N.length>0&&(R.updating||(N.shift()(),g()))}function M(){R.updating||g()}function C(b){var ne,z,oe=b.target||{};ne=u.Z.SOURCE_BUFFER_ERROR,z={error:oe,lastRequestAppended:te},B.trigger(ne,z,{streamId:A.streamInfo.id,mediaType:l})}function D(b){N.push(b),R.updating||g()}return r={getType:function(){return l},getAllBufferRanges:function(){try{return R.buffered}catch(b){return E.error("getAllBufferRanges exception: "+b.message),null}},getBuffer:function(){return R},append:function(b){var ne=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(oe,Q){b?(U.push({data:b,promise:{resolve:oe,reject:Q},request:z}),D(le.bind(ne))):Q({chunk:b,error:new re.Z(X.APPEND_ERROR_CODE,X.APPEND_ERROR_MESSAGE)})})},remove:function(b){return new Promise(function(ne,z){var oe=b.start,Q=b.end;oe>=0&&Q>oe?D(function(){try{R.remove(oe,Q),D(function(){ne({from:oe,to:Q,unintended:!1}),b.resolve&&b.resolve()})}catch(x){z({from:oe,to:Q,unintended:!1,error:new re.Z(X.REMOVE_ERROR_CODE,X.REMOVE_ERROR_MESSAGE)}),b.reject&&b.reject(x)}}):ne()})},abort:function(){return new Promise(function(b){try{U=[],ce.readyState==="open"?D(function(){try{R&&R.abort(),b()}catch{b()}}):(R&&R.setTextTrack&&ce.readyState==="ended"&&R.abort(),b())}catch{b()}})},reset:function(){if(R){try{N=[],function(){try{typeof R.removeEventListener=="function"&&(R.removeEventListener("updateend",M,!1),R.removeEventListener("error",C,!1),R.removeEventListener("abort",C,!1)),clearInterval(h)}catch(b){E.error(b)}}(),Z=!1,U=[],R.getClassName&&R.getClassName()==="TextSourceBuffer"||(E.debug("Removing sourcebuffer from media source"),ce.removeSourceBuffer(R))}catch{}R=null}te=null},updateTimestampOffset:j,initializeForStreamSwitch:function(b,ne,z){l=(A=b).type;var oe=A.codec;(function(x){R=x.getBuffer()})(z),G();var Q=[];return Q.push(new Promise(function(x){D(function(){var J=R.appendWindowStart,he=R.appendWindowEnd;R&&(R.abort(),R.appendWindowStart=J,R.appendWindowEnd=he),x()})})),Q.push(ie(A.streamInfo)),L.get().streaming.buffer.useChangeTypeForTrackSwitch&&Q.push(ue(oe)),ne&&ne.MSETimeOffset!==void 0&&Q.push(j(ne.MSETimeOffset)),Promise.all(Q)},initializeForFirstUse:function(b,ne,z){l=(A=ne).type;var oe=A.codec;try{if(oe.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return de(b);R=ce.addSourceBuffer(oe),G();var Q=[];return Q.push(ie(A.streamInfo)),z&&z.MSETimeOffset!==void 0&&Q.push(j(z.MSETimeOffset)),Promise.all(Q)}catch(x){return A.type==t.Z.TEXT&&!A.isFragmented||oe.indexOf('codecs="stpp')!==-1||oe.indexOf('codecs="vtt')!==-1||oe.indexOf("text/vtt")!==-1?de(b):Promise.reject(x)}},updateAppendWindow:ie,changeType:ue},E=(0,m.Z)(w).getInstance().getLogger(r),r}Ye.__dashjs_factory_name="SourceBufferSink";var ye=_.Z.getClassFactory(Ye);function Pe(i){var r,l,E,R=this.context,A=[],h=i;function w(L,Y){return A=A.filter(function(B){return!((isNaN(Y)||B.start<Y)&&(isNaN(L)||B.end>L))}),Promise.resolve()}return r={getAllBufferRanges:function(){for(var L=[],Y=0;Y<A.length;Y++){var B=A[Y];L.length===0||B.start>L[L.length-1].end?L.push({start:B.start,end:B.end}):L[L.length-1].end=B.end}var N={start:function(U){return L[U].start},end:function(U){return L[U].end}};return Object.defineProperty(N,"length",{get:function(){return L.length}}),N},append:function(L){return L.segmentType!=="InitializationSegment"?(A.push(L),A.sort(function(Y,B){return Y.start-B.start}),E=null):E=L,l.debug("PreBufferSink appended chunk s: "+L.start+"; e: "+L.end),h&&h({chunk:L}),Promise.resolve()},remove:w,abort:function(){return Promise.resolve()},discharge:function(L,Y){var B=function(N,U){return A.filter(function(Z){return(isNaN(U)||Z.start<U)&&(isNaN(N)||Z.end>N)})}(L,Y);return E&&(B.push(E),E=null),w(L,Y),B},reset:function(){A=[],E=null,h=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(L){L()},getBuffer:function(){return this}},l=(0,m.Z)(R).getInstance().getLogger(r),r}Pe.__dashjs_factory_name="PreBufferSink";var He=_.Z.getClassFactory(Pe);function tt(){var i={};return{save:function(r){var l=r.streamId,E=r.representationId;i[l]=i[l]||{},i[l][E]=r},extract:function(r,l){return i&&i[r]&&i[r][l]?i[r][l]:null},reset:function(){i={}}}}tt.__dashjs_factory_name="InitCache";var ve=_.Z.getSingletonFactory(tt),Oe=.01,_t="BufferController";function dt(i){i=i||{};var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie,j,le,g=this.context,M=(0,p.Z)(g).getInstance(),C=i.errHandler,D=i.fragmentModel,b=i.representationController,ne=i.adapter,z=i.textController,oe=i.abrController,Q=i.playbackController,x=i.streamInfo,J=i.type,he=i.settings;function Ne(Re){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(fe,pe){h=Re,Y&&rt&&typeof Y.discharge=="function"?(B=Y,Ce(rt).then(function(){fe()}).catch(function(Ve){pe(Ve)})):fe()})}function Te(Re){return ne.convertRepresentationToRepresentationInfo(b.getRepresentationForQuality(Re))}function Ce(Re){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(fe,pe){G&&Re?h?(N=!1,et(Re,rt).then(function(Ve){fe(Ve)}).catch(function(Ve){pe(Ve)})):(N=!0,Ie().then(function(Ve){fe(Ve)}).catch(function(Ve){pe(Ve)})):fe(null)})}function Ie(){var Re=this;return new Promise(function(rt,fe){var pe=oe.getQualityFor(J,x.id);Y=He(g).create(Ee.bind(Re)),Ht(Te(pe)).then(function(){rt(Y)}).catch(function(){fe()})})}function et(Re,rt){return new Promise(function(fe,pe){var Ve=oe.getQualityFor(J,x.id);Y=ye(g).create({mediaSource:h,textController:z,eventBus:M}),function(St,Nt,ln){var bn=Te(ln);return Nt&&Nt[J]&&(J===t.Z.VIDEO||J===t.Z.AUDIO)?Y.initializeForStreamSwitch(St,bn,Nt[J]):Y.initializeForFirstUse(x,St,bn)}(Re,rt,Ve).then(function(){return Ht(Te(Ve))}).then(function(){fe(Y)}).catch(function(St){l.fatal("Caught error on create SourceBuffer: "+St),C.error(new re.Z(X.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,X.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+J)),pe(St)})})}function nt(Re){he.get().streaming.cacheInitSegments&&(l.info("Init fragment finished loading saving to",J+"'s init cache"),G.save(Re.chunk)),l.debug("Append Init fragment",J," with representationId:",Re.chunk.representationId," and quality:",Re.chunk.quality,", data size:",Re.chunk.bytes.byteLength),Xe(Re.chunk)}function We(Re){Xe(Re.chunk,Re.request)}function Xe(Re){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Y&&(Y.append(Re,rt).then(function(fe){Ee(fe)}).catch(function(fe){Ee(fe)}),Re.mediaInfo.type===t.Z.VIDEO&&jt(u.Z.VIDEO_CHUNK_RECEIVED,{chunk:Re}))}function Mt(Re){if(Re&&Re.length>0)for(var rt=0,fe=Re.length;rt<fe;rt++)l.debug("Buffered range: "+Re.start(rt)+" - "+Re.end(rt)+", currentTime = ",Q.getTime())}function Ee(Re){if(Re.error)return Re.error.code===22&&function(){if(de=!0,A=.8*Dt(),l.warn("Quota exceeded, Critical Buffer: "+A),A>0){var pe=Math.max(.2*A,1),Ve=A-pe,St=Math.min(he.get().streaming.buffer.bufferTimeAtTopQuality,.9*Ve),Nt=Math.min(he.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Ve),ln={streaming:{buffer:{bufferToKeep:parseFloat(pe.toFixed(5)),bufferTimeAtTopQuality:parseFloat(St.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Nt.toFixed(5))}}};he.update(ln)}}(),void(Re.error.code!==22&&kt()||(l.warn("Clearing playback buffer to overcome quota exceed situation"),jt(u.Z.QUOTA_EXCEEDED,{criticalBufferLevel:A,quotaExceededTime:Re.chunk.start}),$e(ft())));if(Y&&(qt(),de=!1,(ce=Re.chunk)&&ce.endFragment)){ce&&!isNaN(ce.index)&&(w=Math.max(ce.index,w),Gt());var rt=Y.getAllBufferRanges();ce.segmentType===Le.w.MEDIA_SEGMENT_TYPE&&(Mt(rt),qe(),function(){if(!isNaN(le)&&!N)if(J===t.Z.AUDIO||J===t.Z.VIDEO){var pe=Q.getTime(),Ve=st(pe,0),St=st(le,0);if(Ve&&St&&Ve.start===St.start)le=NaN;else{var Nt=b.getCurrentRepresentation().segmentDuration,ln=st(le,Nt);ln&&(he.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(pe-le)>Nt?le<=ln.end&&Q.seek(Math.max(le,ln.start),!1,!0):pe<ln.start&&Q.seek(ln.start,!1,!0))}}else le=NaN}());var fe=!1;U&&(U.indexOf(ce)>0&&(fe=!0),U=null),ce&&!fe&&jt(u.Z.BYTES_APPENDED_END_FRAGMENT,{quality:ce.quality,startTime:ce.start,index:ce.index,bufferedRanges:rt,segmentType:ce.segmentType,mediaType:J})}}function Fe(){return new Promise(function(Re,rt){var fe=lt();if(!fe||fe.length===0)return qe(),void Re();$e(fe).then(function(){Re()}).catch(function(pe){rt(pe)})})}function lt(Re){var rt=[],fe=Y.getAllBufferRanges();if(!fe||fe.length===0)return rt;if(!Re&&Re!==0||isNaN(Re))rt.push({start:fe.start(0),end:fe.end(fe.length-1)+.5});else{var pe=function(St,Nt){var ln=he.get().streaming.buffer.bufferToKeep,bn=Nt.start(0);if(St-bn>ln){var Zn=Math.max(0,St-ln),Sn=D.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:St,threshold:Oe})[0];if(Sn&&(Zn=Math.min(Sn.startTime,Zn)),Zn>0)return{start:bn,end:Zn}}return null}(Re,fe),Ve=function(St,Nt){var ln=Nt.end(Nt.length-1)+.5,bn=xt(St),Zn=x.manifestInfo.duration>=he.get().streaming.buffer.longFormContentDurationThreshold?he.get().streaming.buffer.bufferTimeAtTopQualityLongForm:he.get().streaming.buffer.bufferTimeAtTopQuality,Sn=isNaN(bn)?St:Math.min(bn,St+Zn);if(Sn>=Nt.end(Nt.length-1))return null;var Jn=D.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:St,threshold:Oe})[0];if(Jn&&(Sn=Math.max(Jn.startTime+Jn.duration,Sn)),he.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Gn=0;Gn<Nt.length;Gn++)if(Nt.start(Gn)<=St&&St<=Nt.end(Gn)&&Nt.start(Gn)<=Sn&&Sn<=Nt.end(Gn)){var Er=Sn;Sn=Gn+1<Nt.length?Nt.start(Gn+1):Nt.end(Gn)+1,l.debug("Buffered range ["+Nt.start(Gn)+", "+Nt.end(Gn)+"] overlaps with targetTime "+St+" and range to be pruned ["+Er+", "+ln+"], using ["+Sn+", "+ln+"] instead"+(Sn<ln?"":" (no actual pruning)"));break}}return Sn<Nt.end(Nt.length-1)?{start:Sn,end:ln}:null}(Re,fe);pe&&rt.push(pe),Ve&&rt.push(Ve)}return rt}function qe(){(!j||J===t.Z.TEXT&&z.isTextEnabled())&&qt()}function ht(){an()}function gt(){an(),le=NaN}function st(Re,rt){if(!Y)return null;var fe,pe,Ve=Y.getAllBufferRanges(),St=0,Nt=0,ln=null,bn=null,Zn=0,Sn=isNaN(rt)?.15:rt;if(Ve!=null){for(pe=0,fe=Ve.length;pe<fe;pe++)if(St=Ve.start(pe),Nt=Ve.end(pe),ln===null)Zn=Math.abs(St-Re),(Re>=St&&Re<Nt||Zn<=Sn)&&(ln=St,bn=Nt);else{if(!((Zn=St-bn)<=Sn))break;bn=Nt}if(ln!==null)return{start:ln,end:bn}}return null}function qt(){if(Q){var Re=Q.getTime()||0;N&&(Re=isNaN(le)?0:le);var rt=he.get().streaming.gaps.jumpGaps&&!isNaN(he.get().streaming.gaps.smallGapLimit)?he.get().streaming.gaps.smallGapLimit:NaN;R=Math.max(function(fe,pe){var Ve;return he.get().streaming.gaps.jumpGaps&&(pe=he.get().streaming.gaps.smallGapLimit),(Ve=st(fe,pe))===null?0:Ve.end-fe}(Re,rt),0),jt(u.Z.BUFFER_LEVEL_UPDATED,{mediaType:J,bufferLevel:R}),an()}}function Gt(){var Re=w>=L-1,rt=Q.getTimeToStreamEnd(x)-R<1e-5;!Re&&!rt||E||(ut(!0),l.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(x.id," and type ").concat(J)))}function an(){J!==t.Z.AUDIO&&J!==t.Z.VIDEO||((!Q.getLowLatencyModeEnabled()&&R<he.get().streaming.buffer.stallThreshold||R===0)&&!E?un(y.Z.BUFFER_EMPTY):(E||R>=he.get().streaming.buffer.stallThreshold||Q.getLowLatencyModeEnabled()&&R>0)&&un(y.Z.BUFFER_LOADED))}function un(Re){Z===Re||Re===y.Z.BUFFER_EMPTY&&Q.getTime()===0||J===t.Z.TEXT&&!z.isTextEnabled()||(Z=Re,jt(u.Z.BUFFER_LEVEL_STATE_CHANGED,{state:Re}),jt(Re===y.Z.BUFFER_LOADED?u.Z.BUFFER_LOADED:u.Z.BUFFER_EMPTY),l.debug(Re===y.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Be(){Y&&J!==t.Z.TEXT&&(E||$e(ft()))}function ft(){var Re=[],rt=Y.getAllBufferRanges();if(!rt||rt.length===0)return Re;var fe=Q.getTime(),pe=Math.max(0,fe-he.get().streaming.buffer.bufferToKeep),Ve=D.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:fe,threshold:Oe})[0];if(Ve)pe=Math.min(Ve.startTime,pe);else if(fe===0&&Q.getIsDynamic())return[];if(rt.start(0)<=pe){for(var St={start:0,end:pe},Nt=0;Nt<rt.length&&rt.end(Nt)<=pe;Nt++)St.end=rt.end(Nt);St.start<St.end&&Re.push(St)}return Re}function $e(Re){return new Promise(function(rt,fe){if(Re&&Y&&Re.length!==0){var pe=[];Re.forEach(function(Ve){pe.push(function(St){return new Promise(function(Nt,ln){St.resolve=Nt,St.reject=ln,ie.push(St)})}(Ve))}),ue||vt(),Promise.all(pe).then(function(){rt()}).catch(function(Ve){fe(Ve)})}else rt()})}function vt(){try{if(ie.length===0||!Y)return l.debug("Nothing to prune, halt pruning"),ie=[],void(ue=!1);var Re=Y.getBuffer();if(!Re||!Re.buffered||Re.buffered.length===0)return l.debug("SourceBuffer is empty (or does not exist), halt pruning"),ie=[],void(ue=!1);var rt=ie.shift();l.debug("".concat(J,": Removing buffer from: ").concat(rt.start," to ").concat(rt.end)),ue=!0,Q.getTime()<rt.end&&ut(!1),Y.remove(rt).then(function(fe){wt(fe)}).catch(function(fe){wt(fe)})}catch{ue=!1}}function wt(Re){l.debug("onRemoved buffer from:",Re.from,"to",Re.to),Y&&(Mt(Y.getAllBufferRanges()),ie.length===0&&(ue=!1,qt()),Re.unintended&&(l.warn("Detected unintended removal from:",Re.from,"to",Re.to,"setting streamprocessor time to",Re.from),jt(u.Z.SEEK_TARGET,{time:Re.from})),ue?vt():(j?j=!1:qt(),jt(u.Z.BUFFER_CLEARED,{from:Re.from,to:Re.to,unintended:Re.unintended,hasEnoughSpaceToAppend:kt(),quotaExceeded:de})))}function Ht(Re){return new Promise(function(rt){Re&&Re.MSETimeOffset!==void 0&&Y&&Y.updateTimestampOffset?Y.updateTimestampOffset(Re.MSETimeOffset).then(function(){rt()}).catch(function(){rt()}):rt()})}function Yt(){return Y&&!E?Y.updateAppendWindow(x):Promise.resolve()}function Kt(){++te*(he.get().streaming.wallclockTimeUpdateInterval/1e3)>=he.get().streaming.buffer.bufferPruningInterval&&(te=0,Be())}function Jt(){an()}function ut(Re){(E=Re)?jt(u.Z.BUFFERING_COMPLETED):L=Number.POSITIVE_INFINITY}function Dt(){try{var Re,rt,fe=Y.getAllBufferRanges(),pe=0;if(!fe)return pe;for(rt=0,Re=fe.length;rt<Re;rt++)pe+=fe.end(rt)-fe.start(rt);return pe}catch{return 0}}function xt(Re){try{var rt=Re,fe=Y.getAllBufferRanges();if(!fe||fe.length===0)return NaN;for(var pe=0;rt===Re&&pe<fe.length;){var Ve=fe.start(pe),St=fe.end(pe);rt>=Ve&&rt<=St&&(rt=St),pe+=1}return rt===Re?NaN:rt}catch{}}function kt(){var Re=Dt();return isNaN(Re)||Re<A}function jt(Re,rt){var fe=rt||{};M.trigger(Re,fe,{streamId:x.id,mediaType:J})}function Ge(Re,rt){if(A=Number.POSITIVE_INFINITY,Z=void 0,L=Number.POSITIVE_INFINITY,w=0,ce=null,E=!1,ue=!1,de=!1,R=0,te=0,ie=[],le=NaN,N=!1,Y){var fe=Y;Y=null,Re||rt||fe.abort().then(function(){fe.reset(rt),fe=null})}j=!1}return r={initialize:function(Re){Ne(Re),M.on(u.Z.INIT_FRAGMENT_LOADED,nt,r),M.on(u.Z.MEDIA_FRAGMENT_LOADED,We,r),M.on(u.Z.WALLCLOCK_TIME_UPDATED,Kt,r),M.on(n.Z.PLAYBACK_PLAYING,gt,r),M.on(n.Z.PLAYBACK_PROGRESS,qe,r),M.on(n.Z.PLAYBACK_TIME_UPDATED,qe,r),M.on(n.Z.PLAYBACK_RATE_CHANGED,Jt,r),M.on(n.Z.PLAYBACK_STALLED,ht,r)},getStreamId:function(){return x.id},getType:function(){return J},getBufferControllerType:function(){return _t},createBufferSink:Ce,dischargePreBuffer:function(){if(Y&&B&&typeof B.discharge=="function"){var Re=B.getAllBufferRanges();if(Re.length>0){for(var rt="Beginning "+J+"PreBuffer discharge, adding buffer for:",fe=0;fe<Re.length;fe++)rt+=" start: "+Re.start(fe)+", end: "+Re.end(fe)+";";l.debug(rt)}else l.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");U=[];for(var pe=B.discharge(),Ve=null,St=0;St<pe.length;St++){var Nt=pe[St];if(Nt.segmentType!==Le.w.INIT_SEGMENT_TYPE){var ln=G.extract(Nt.streamId,Nt.representationId);ln&&Ve!==ln&&(U.push(ln),Y.append(ln),Ve=ln)}U.push(Nt),Y.append(Nt)}B.reset(),B=null}},getBuffer:function(){return Y},getBufferLevel:function(){return R},getRangeAt:st,hasBufferAtTime:function(Re){try{var rt=Y.getAllBufferRanges();if(!rt||rt.length===0)return!1;for(var fe=0;fe<rt.length;){var pe=rt.start(fe),Ve=rt.end(fe);if(Re>=pe&&Re<=Ve)return!0;fe+=1}return!1}catch(St){return l.error(St),!1}},pruneBuffer:Be,setMediaSource:Ne,getMediaSource:function(){return h},appendInitSegmentFromCache:function(Re){var rt=G.extract(x.id,Re);return!!rt&&(l.info("Append Init fragment",J," with representationId:",rt.representationId," and quality:",rt.quality,", data size:",rt.bytes.byteLength),Xe(rt),!0)},getIsBufferingCompleted:function(){return E},setIsBufferingCompleted:ut,getIsPruningInProgress:function(){return ue},reset:function(Re,rt){M.off(u.Z.INIT_FRAGMENT_LOADED,nt,this),M.off(u.Z.MEDIA_FRAGMENT_LOADED,We,this),M.off(u.Z.WALLCLOCK_TIME_UPDATED,Kt,this),M.off(n.Z.PLAYBACK_PLAYING,gt,this),M.off(n.Z.PLAYBACK_PROGRESS,qe,this),M.off(n.Z.PLAYBACK_TIME_UPDATED,qe,this),M.off(n.Z.PLAYBACK_RATE_CHANGED,Jt,this),M.off(n.Z.PLAYBACK_STALLED,ht,this),Ge(Re,rt)},prepareForPlaybackSeek:function(){return E&&ut(!1),Y.abort()},prepareForReplacementTrackSwitch:function(Re){return new Promise(function(rt,fe){Y.abort().then(function(){return Yt()}).then(function(){return he.get().streaming.buffer.useChangeTypeForTrackSwitch?Y.changeType(Re):Promise.resolve()}).then(function(){return Fe()}).then(function(){ut(!1),rt()}).catch(function(pe){fe(pe)})})},prepareForNonReplacementTrackSwitch:function(Re){return new Promise(function(rt,fe){Yt().then(function(){return he.get().streaming.buffer.useChangeTypeForTrackSwitch?Y.changeType(Re):Promise.resolve()}).then(function(){rt()}).catch(function(pe){fe(pe)})})},prepareForForceReplacementQualitySwitch:function(Re){return new Promise(function(rt,fe){Y.abort().then(function(){return Yt()}).then(function(){return Fe()}).then(function(){return Ht(Re)}).then(function(){ut(!1),rt()}).catch(function(pe){fe(pe)})})},updateAppendWindow:Yt,getAllRangesWithSafetyFactor:lt,getContinuousBufferTimeForTargetTime:xt,clearBuffers:$e,pruneAllSafely:Fe,updateBufferTimestampOffset:Ht,setSeekTarget:function(Re){le=Re},segmentRequestingCompleted:function(Re){isNaN(Re)||(L=Re,Gt())}},l=(0,m.Z)(g).getInstance().getLogger(r),G=ve(g).getInstance(),Ge(),r}dt.__dashjs_factory_name=_t;var ke=_.Z.getClassFactory(dt),Je="NotFragmentedTextBufferController";function ge(i){i=i||{};var r,l,E,R,A,h,w=this.context,L=(0,p.Z)(w).getInstance(),Y=i.textController,B=i.errHandler,N=i.streamInfo,U=i.type;function Z(ue){R=ue}function ce(ue){var de,G;l!==ue&&(l=ue)&&(de=u.Z.BUFFERING_COMPLETED,G={},L.trigger(de,G,{streamId:N.id,mediaType:U}))}function te(ue){ue.chunk.bytes&&!l&&(h.save(ue.chunk),A.append(ue.chunk),ce(!0))}return r={initialize:function(ue){Z(ue)},getStreamId:function(){return N.id},getType:function(){return U},getBufferControllerType:function(){return Je},createBufferSink:function(ue){return new Promise(function(de,G){try{(A=ye(w).create({mediaSource:R,textController:Y,eventBus:L})).initializeForFirstUse(N,ue),E||(A.getBuffer()&&typeof A.getBuffer().initialize=="function"&&A.getBuffer().initialize(),E=!0),de(A)}catch(ie){B.error(new re.Z(X.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,X.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+U)),G(ie)}})},dischargePreBuffer:function(){},getBuffer:function(){return A},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:Z,getMediaSource:function(){return R},appendInitSegmentFromCache:function(ue){return h.extract(N.id,ue)!==null},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:ce,getIsPruningInProgress:function(){return!1},reset:function(ue){L.off(u.Z.INIT_FRAGMENT_LOADED,te,r),!ue&&A&&(A.abort(),A.reset(),A=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return l=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},E=!1,R=null,l=!1,h=ve(w).getInstance(),L.on(u.Z.INIT_FRAGMENT_LOADED,te,r),r}ge.__dashjs_factory_name=Je;var me=_.Z.getClassFactory(ge);function Ue(i){i=i||{};var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce=this.context,te=(0,p.Z)(ce).getInstance(),ue=i.dashMetrics,de=i.mediaPlayerModel,G=i.fragmentModel,ie=i.abrController,j=i.playbackController,le=i.textController,g=i.type,M=i.bufferController,C=i.representationController,D=i.settings;function b(){U=!0}function ne(){U=!1}function z(et){if(!M.getIsBufferingCompleted()){oe();var nt=isNaN(et)?0:et;A=setTimeout(Q,nt)}}function oe(){A&&(clearTimeout(A),A=null)}function Q(){try{if(function(){try{return g===t.Z.TEXT&&!le.isTextEnabled()||j.isPaused()&&(!j.getStreamController().getInitialPlayback()||!j.getStreamController().getAutoPlay())&&!D.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void oe();if(function(){try{return!!U&&C.getCurrentRepresentationInfo()&&(isNaN(Y)||B||(We=l.id,Xe=ie.getMaxAllowedIndexFor(g,We),!(!isNaN(L)&&L==Xe||(E.info("Top quality "+g+" index has changed from "+L+" to "+Xe),L=Xe,0)))||function(){var Mt=C.getCurrentRepresentationInfo();return!g||!Mt||ue.getCurrentBufferLevel(g)<x()}())}catch{return!1}var We,Xe}()){var et=!1;Z&&(et=ie.checkPlaybackQuality(g,l.id)),et||(nt=C.getCurrentRepresentationInfo(),N||nt.quality!==Y||B?(B?(E.debug("Switch track for "+g+", representation id = "+nt.id),B=!1):E.debug("Quality has changed, get init request for representationid = "+nt.id),te.trigger(u.Z.INIT_FRAGMENT_NEEDED,{representationId:nt.id,sender:r},{streamId:l.id,mediaType:g}),Z=!1,N=!1):(E.debug("Media segment needed for ".concat(g," and stream id ").concat(l.id)),te.trigger(u.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:l.id,mediaType:g}),Z=!0))}else z(j.getLowLatencyModeEnabled()?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}catch{z(j.getLowLatencyModeEnabled()?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}var nt}function x(){var et=NaN,nt=C.getCurrentRepresentationInfo();return g&&nt&&(et=g===t.Z.TEXT?function(){try{if(le.isTextEnabled()){var We=C.getCurrentRepresentationInfo();if(isNaN(We.fragmentDuration)){var Xe=ue.getCurrentSchedulingInfo(y.Z.SCHEDULING_INFO);return Xe?Xe.duration:0}return We.fragmentDuration}return 0}catch{return 0}}():g===t.Z.AUDIO&&h?function(){try{var We=ue.getCurrentBufferLevel(t.Z.VIDEO),Xe=C.getCurrentRepresentationInfo();return isNaN(Xe.fragmentDuration)?We+1:Math.max(We+1,Xe.fragmentDuration)}catch{return 0}}():function(){try{var We=C.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ie.isPlayingAtTopQuality(We)?We.manifestInfo.duration>=D.get().streaming.buffer.longFormContentDurationThreshold?D.get().streaming.buffer.bufferTimeAtTopQualityLongForm:D.get().streaming.buffer.bufferTimeAtTopQuality:de.getStableBufferTime()}catch{return de.getStableBufferTime()}}()),et}function J(){he(!0)}function he(et){if(j&&G){var nt=G.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:j.getTime(),threshold:0})[0];nt&&j.getTime()>=nt.startTime&&((!w.mediaInfo||nt.mediaInfo.type===w.mediaInfo.type&&nt.mediaInfo.index!==w.mediaInfo.index)&&et&&te.trigger(u.Z.TRACK_CHANGE_RENDERED,{mediaType:g,oldMediaInfo:w.mediaInfo,newMediaInfo:nt.mediaInfo,streamId:l.id}),nt.quality===w.quality&&nt.adaptationIndex===w.adaptationIndex||!et||(E.debug("Quality change rendered for streamId ".concat(l.id," and type ").concat(g)),te.trigger(u.Z.QUALITY_CHANGE_RENDERED,{mediaType:g,oldQuality:w.quality,newQuality:nt.quality,streamId:l.id})),w={mediaInfo:nt.mediaInfo,quality:nt.quality,adaptationIndex:nt.adaptationIndex})}}function Ne(){G.abortRequests(),oe()}function Te(){D.get().streaming.scheduling.scheduleWhilePaused||z()}function Ce(et){ue.updatePlayListTraceMetrics({playbackspeed:et.playbackRate.toString()})}function Ie(){Z=!0,R=0,Y=NaN,w={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},L=NaN,B=!1,N=!1,U=!0}return r={initialize:function(et){h=et,te.on(u.Z.URL_RESOLUTION_FAILED,Ne,r),te.on(n.Z.PLAYBACK_STARTED,Te,r),te.on(n.Z.PLAYBACK_RATE_CHANGED,Ce,r),te.on(n.Z.PLAYBACK_TIME_UPDATED,J,r),te.on(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,b,r),te.on(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,ne,r)},getType:function(){return g},getStreamId:function(){return l.id},setTimeToLoadDelay:function(et){R=et},getTimeToLoadDelay:function(){return R},setSwitchTrack:function(et){B=et},getSwitchTrack:function(){return B},startScheduleTimer:z,clearScheduleTimer:oe,reset:function(){te.off(u.Z.URL_RESOLUTION_FAILED,Ne,r),te.off(n.Z.PLAYBACK_STARTED,Te,r),te.off(n.Z.PLAYBACK_RATE_CHANGED,Ce,r),te.off(n.Z.PLAYBACK_TIME_UPDATED,J,r),te.off(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,b,r),te.off(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,ne,r),oe(),he(!1),Ie(),l=null},getBufferTarget:x,getPlaybackController:function(){return j},setCheckPlaybackQuality:function(et){Z=et},setInitSegmentRequired:function(et){N=et},setLastInitializedQuality:function(et){Y=et}},E=(0,m.Z)(ce).getInstance().getLogger(r),Ie(),l=i.streamInfo,r}Ue.__dashjs_factory_name="ScheduleController";var f=_.Z.getClassFactory(Ue),o=P(7387);function v(i){var r,l,E,R,A,h,w=(i=i||{}).eventBus,L=i.events,Y=i.abrController,B=i.dashMetrics,N=i.playbackController,U=i.timelineConverter,Z=i.type,ce=i.streamInfo,te=i.dashConstants,ue=i.segmentsController,de=i.isDynamic,G=i.adapter;function ie(){return Z}function j(){return E}function le(){return h}function g(){l=null,E=!0,R=[],A=null}function M(oe){return new Promise(function(Q,x){var J=oe.hasInitialization(),he=oe.hasSegments(),Ne=[];Ne.push(ue.updateInitData(oe,J)),Ne.push(ue.updateSegmentData(oe,he)),Promise.all(Ne).then(function(Te){var Ce;Te[0]&&!Te[0].error&&(oe=function(Ie,et){return et&&!et.error&&et.representation?et.representation:Ie}(oe,Te[0])),Te[1]&&!Te[1].error&&(oe=function(Ie,et){if(et&&!et.error){var nt,We,Xe,Mt,Ee=et.segments,Fe=[],lt=0;for(nt=0,We=Ee?Ee.length:0;nt<We;nt++)Xe=Ee[nt],(Mt=(0,o.TJ)(U,de,Ie,Xe.startTime,Xe.duration,Xe.timescale,Xe.media,Xe.mediaRange,lt))&&(Fe.push(Mt),Mt=null,lt++);return Fe.length>0&&(Ie.segments=Fe),Ie}}(oe,Te[1])),(Ce=oe).mediaFinishedInformation=ue.getMediaFinishedInformation(Ce),function(Ie){if(j()){var et,nt,We=B.getCurrentManifestUpdate(),Xe=!1;if(We){for(var Mt=0;Mt<We.representationInfo.length;Mt++)if((et=We.representationInfo[Mt]).index===Ie.index&&et.mediaType===ie()){Xe=!0;break}Xe||B.addManifestUpdateRepresentationInfo(Ie,ie())}if(function(){for(var Fe=0,lt=R.length;Fe<lt;Fe++){var qe=R[Fe].segmentInfoType;if(!R[Fe].hasInitialization()||(qe===te.SEGMENT_BASE||qe===te.BASE_URL)&&!R[Fe].segments)return!1}return!0}()){Y.setPlaybackQuality(Z,ce,(nt=h,R.indexOf(nt)));var Ee=B.getCurrentDVRInfo(Z);Ee&&B.updateManifestUpdateInfo({latency:Ee.range.end-N.getTime()}),B.getCurrentRepresentationSwitch(le().adaptation.type)||C(),b()}}}(oe),Q()}).catch(function(Te){x(Te)})})}function C(){(function(){if(!(Y&&B&&N&&U))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var oe=new Date,Q=le(),x=1e3*N.getTime();Q&&B.addRepresentationSwitch(Q.adaptation.type,oe,x,Q.id),w.trigger(n.Z.REPRESENTATION_SWITCH,{mediaType:Z,streamId:ce.id,currentRepresentation:Q,numberOfRepresentations:R.length},{streamId:ce.id,mediaType:Z})}function D(oe){return oe==null||oe>=R.length?null:R[oe]}function b(oe){E=!1,w.trigger(L.DATA_UPDATE_COMPLETED,{data:l,currentRepresentation:h,error:oe},{streamId:ce.id,mediaType:Z})}function ne(oe){h=oe,A=G.convertRepresentationToRepresentationInfo(h)}function z(oe){if(oe.newDuration){var Q=le();Q&&Q.adaptation.period&&(Q.adaptation.period.duration=oe.newDuration)}}return r={getStreamId:function(){return ce.id},getType:ie,getData:function(){return l},isUpdating:j,updateData:function(oe,Q,x,J,he){return new Promise(function(Ne,Te){if(E=!0,R=Q,l=oe,ne(D(he)),x!==t.Z.VIDEO&&x!==t.Z.AUDIO&&(x!==t.Z.TEXT||!J))return b(),void Ne();for(var Ce=[],Ie=0,et=R.length;Ie<et;Ie++){var nt=R[Ie];Ce.push(M(nt))}Promise.all(Ce).then(function(){ne(D(he)),Ne()}).catch(function(We){Te(We)})})},getCurrentRepresentation:le,getCurrentRepresentationInfo:function(){return A},getRepresentationForQuality:D,prepareQualityChange:function(oe){ne(D(oe)),C()},reset:function(){w.off(n.Z.MANIFEST_VALIDITY_CHANGED,z,r),g()}},g(),w.on(n.Z.MANIFEST_VALIDITY_CHANGED,z,r),r}v.__dashjs_factory_name="RepresentationController";var S=_.Z.getClassFactory(v),W=P(3106),V=P(9326),Se=P(7473),ze=P(2594);function Me(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}var De=function i(){Me(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};De.INITIAL_PLAYOUT_START_REASON="initial_playout",De.SEEK_START_REASON="seek",De.RESUME_FROM_PAUSE_START_REASON="resume",De.METRICS_COLLECTION_START_REASON="metrics_collection_start";var be=function i(){Me(this,i),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};be.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",be.REBUFFERING_REASON="rebuffering",be.USER_REQUEST_STOP_REASON="user_request",be.END_OF_PERIOD_STOP_REASON="end_of_period",be.END_OF_CONTENT_STOP_REASON="end_of_content",be.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",be.FAILURE_STOP_REASON="failure";var xe=P(7802);function Qe(){return{ntpToUTC:function(i){var r=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(r.getTime()+i).getTime()}}}Qe.__dashjs_factory_name="TimeUtils";var mt=_.Z.getSingletonFactory(Qe);function it(i){i=i||{};var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue=this.context,de=(0,p.Z)(ue).getInstance(),G=i.streamInfo,ie=i.type,j=i.errHandler,le=i.mimeType,g=i.timelineConverter,M=i.adapter,C=i.manifestModel,D=i.mediaPlayerModel,b=i.fragmentModel,ne=i.abrController,z=i.playbackController,oe=i.mediaController,Q=i.textController,x=i.dashMetrics,J=i.settings,he=i.boxParser,Ne=i.segmentBlacklistController;function Te(){return G.id}function Ce(){return ie}function Ie(){return M.getIsTextTrack(L.getData())}function et(){A=[],R=null,ce=0,Y=!1,B=!1,N=!1,te=null}function nt(Ge){return!isNaN(Ge)&&!isNaN(G.duration)&&isFinite(G.duration)&&Ge>=G.start+G.duration}function We(Ge){var Re=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ge.sender){if(z.getIsManifestUpdateInProgress())lt();else if((!Ie()||Q.isTextEnabled())&&h&&Ge.representationId&&!h.appendInitSegmentFromCache(Ge.representationId)){var rt=L.getCurrentRepresentation();if(rt.range===0)return void Xe();var fe=U?U.getInitRequest(R,rt):null;fe?b.executeRequest(fe):Re&&(w.setInitSegmentRequired(!0),lt())}}}function Xe(Ge){var Re=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(z.getIsManifestUpdateInProgress()||h.getIsPruningInProgress())lt();else{var rt=Fe();rt?(Y=!1,B=!1,Mt(rt)):Ee(Re)}}function Mt(Ge){isNaN(Ge.startTime+Ge.duration)||(ce=Ge.startTime+Ge.duration),Ge.delayLoadingTime=new Date().getTime()+w.getTimeToLoadDelay(),w.setTimeToLoadDelay(0),function(Re){var rt=Re.url;return Re.range&&(rt=rt.concat("_",Re.range)),Ne.contains(rt)}(Ge)?(l.warn("Fragment request url ".concat(Ge.url," for stream id ").concat(G.id," and media type ").concat(ie," is on the ignore list and will be skipped")),lt()):(l.debug("Next fragment request url for stream id ".concat(G.id," and media type ").concat(ie," is ").concat(Ge.url)),b.executeRequest(Ge))}function Ee(Ge){var Re,rt=L.getCurrentRepresentation();if(!J.get().streaming.gaps.enableSeekFix||!Y&&z.getTime()!==0||(E?E&&rt.segmentInfoType===e.Z.SEGMENT_TIMELINE&&(Re=U.getValidTimeAheadOfTargetTime(ce,R,rt,J.get().streaming.gaps.threshold)):Re=U.getValidTimeAheadOfTargetTime(ce,R,rt,J.get().streaming.gaps.threshold),isNaN(Re)||Re===ce)){if(U.isLastSegmentRequested(rt,ce)){var fe=U.getCurrentIndex();return l.debug("Segment requesting for stream ".concat(G.id," has finished")),de.trigger(u.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:fe},{streamId:G.id,mediaType:ie}),h.segmentRequestingCompleted(fe),void w.clearScheduleTimer()}Ge&&lt()}else z.isSeeking()||z.getTime()===0?(l.warn("Adjusting playback time ".concat(Re," because of gap in the manifest. Seeking by ").concat(Re-ce)),z.seek(Re,!1,!1)):(l.warn("Adjusting buffering time ".concat(Re," because of gap in the manifest. Adjusting time by ").concat(Re-ce)),jt(Re),Ge&&lt())}function Fe(){var Ge,Re=Yt();if(isNaN(ce)||Ce()===t.Z.TEXT&&!Q.isTextEnabled())return null;if(U){var rt=L&&Re?L.getRepresentationForQuality(Re.quality):null;Ge=Y?U.getSegmentRequestForTime(R,rt,ce):B?U.repeatSegmentRequest(R,rt):U.getNextSegmentRequest(R,rt)}return Ge}function lt(){w.startScheduleTimer(z.getLowLatencyModeEnabled()?J.get().streaming.scheduling.lowLatencyTimeout:J.get().streaming.scheduling.defaultTimeout)}function qe(Ge){Ge.error||h.getIsBufferingCompleted()||h.updateBufferTimestampOffset(Ge.currentRepresentation)}function ht(Ge){x.addBufferState(ie,Ge.state,w.getBufferTarget()),Ge.state!==y.Z.BUFFER_EMPTY||z.isSeeking()||(l.info("Buffer is empty! Stalling!"),x.pushPlayListTraceMetrics(new Date,be.REBUFFERING_REASON))}function gt(Ge){b.syncExecutedRequestsWithBufferedRange(h.getBuffer().getAllBufferRanges(),G.duration),Ge.quotaExceeded&&Ge.from>z.getTime()&&jt(Ge.from),Ge.hasEnoughSpaceToAppend&&Ge.quotaExceeded&&w.startScheduleTimer()}function st(Ge){if(Ge&&Ge.lastRequestAppended&&Ge.lastRequestAppended.url){var Re=Ge.lastRequestAppended.url;Ge.lastRequestAppended.range&&(Re=Re.concat("_",Ge.lastRequestAppended.range)),l.warn("Blacklisting segment with url ".concat(Re)),Ne.add(Re)}}function qt(Ge){if(l.debug("Appended bytes for ".concat(Ge.mediaType," and stream id ").concat(Ge.streamId)),Ge.segmentType===Le.w.INIT_SEGMENT_TYPE){var Re=Ge.quality;w.setLastInitializedQuality(Re),l.info("["+ie+"] lastInitializedRepresentationInfo changed to "+Ge.quality)}te?Gt(te):w.startScheduleTimer(0)}function Gt(Ge){var Re=b.getRequests({state:K.FRAGMENT_MODEL_LOADING});if(Re&&Re.length>0)return l.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(te=Ge);h.updateBufferTimestampOffset(Ge).then(function(){w.setCheckPlaybackQuality(!1),R.segmentAlignment||R.subSegmentAlignment?w.startScheduleTimer():xt(),te=null,N=!1}).catch(function(){te=null,N=!1})}function an(Ge){l.info("onFragmentLoadingAbandoned request: "+Ge.request.url+" has been aborted"),z.isSeeking()||w.getSwitchTrack()||N||(l.info("onFragmentLoadingAbandoned request: "+Ge.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ge.request&&Ge.request.isInitializationRequest()?w.setInitSegmentRequired(!0):jt(Ge.request.startTime+Ge.request.duration/2),w.startScheduleTimer(0))}function un(Ge){l.info("OnFragmentLoadingCompleted for stream id "+G.id+" and media type "+ie+" - Url:",Ge.request?Ge.request.url:"undefined",Ge.request.range?", Range:"+Ge.request.range:""),Ie()&&w.startScheduleTimer(0),Ge.error&&Ge.request.serviceLocation&&function(Re){l.info("Fragment loading completed with an error"),Re&&Re.request&&Re.request.type&&(Re.request.type===Le.w.INIT_SEGMENT_TYPE?We({representationId:Re.request.representationId,sender:{}},!1):Re.request.type===Le.w.MEDIA_SEGMENT_TYPE&&(jt(Re.request.startTime+Re.request.duration/2),Xe({},!1)))}(Ge)}function Be(){jt(z.getTime()),Ht().startScheduleTimer()}function ft(Ge){var Re=Ge.currentTrackInfo;if(Re){var rt=A.find(function(fe){return fe.index===Re.index&&fe.lang===Re.lang});rt&&wt(rt).then(function(){h.setIsBufferingCompleted(!1),jt(z.getTime()),w.setInitSegmentRequired(!0),w.startScheduleTimer()})}}function $e(Ge){jt(Ge.quotaExceededTime),w.clearScheduleTimer()}function vt(){return h?h.getBuffer():null}function wt(Ge){Ge===R||Ge&&R&&Ge.type!==R.type||(R=Ge);var Re=M.getRealAdaptation(G,R),rt=M.getVoRepresentations(R);if(L){var fe,pe=L.getData(),Ve=ne.getMaxAllowedIndexFor(ie,G.id),St=ne.getMinAllowedIndexFor(ie,G.id),Nt=null;return pe!==null&&pe.id===Re.id||ie===t.Z.TEXT?fe=ne.getQualityFor(ie,G.id):(Nt=ne.getThroughputHistory().getAverageThroughput(ie,E)||ne.getInitialBitrateFor(ie,G.id),fe=ne.getQualityForBitrate(R,Nt,G.id)),St!==void 0&&fe<St&&(fe=St),fe>Ve&&(fe=Ve),L.updateData(Re,rt,ie,R.isFragmented,fe)}return Promise.resolve()}function Ht(){return w}function Yt(Ge){var Re;return Ge!==void 0?((0,W.SE)(Ge),Re=L?L.getRepresentationForQuality(Ge):null):Re=L?L.getCurrentRepresentation():null,M.convertRepresentationToRepresentationInfo(Re)}function Kt(){return!!h&&h.getIsBufferingCompleted()}function Jt(Ge){if(J.get().streaming.enableManifestTimescaleMismatchFix){var Re=Ge.chunk,rt=Re.bytes,fe=Yt(Re.quality),pe=L&&fe?L.getRepresentationForQuality(fe.quality):null;fe&&pe&&(pe.timescale=he.getMediaTimescaleFromMoov(rt))}}function ut(Ge){var Re=Ge.chunk,rt=Re.bytes,fe=Re.quality,pe=Yt(fe),Ve=L&&pe?L.getRepresentationForQuality(pe.quality):null;if(pe&&Ve){var St;if(J.get().streaming.parseInbandPrft&&Ge.request.type===Le.w.MEDIA_SEGMENT_TYPE){var Nt=function(Jn,Gn){var Er=Jn.getBoxes("prft"),br=[];return Er.forEach(function(Ar){br.push(function(fr,gr){var $n="unknown";switch(fr.flags){case 0:$n=e.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:$n=e.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:$n=e.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var vr=1e3*fr.ntp_timestamp_sec+fr.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:$n,ntpTimestamp:vr=mt(ue).getInstance().ntpToUTC(vr),mediaTime:fr.media_time/gr}}(Ar,Gn))}),br}(St=St||he.parse(rt),Ve.timescale);Nt&&Nt.length&&de.trigger(n.Z.INBAND_PRFT,{data:Nt},{streamId:G.id,mediaType:ie})}var ln=M.getEventsFor(pe.mediaInfo,null,G),bn=M.getEventsFor(pe,Ve,G);if(ln&&ln.length>0||bn&&bn.length>0){var Zn=b.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,quality:fe,index:Re.index})[0],Sn=function(Jn,Gn,Er,br){try{for(var Ar={},fr=[],gr=Er.concat(br),$n=0,vr=gr.length;$n<vr;$n++)Ar[gr[$n].schemeIdUri+"/"+gr[$n].value]=gr[$n];var Ir=Jn.getBoxes("emsg");if(!Ir||Ir.length===0)return fr;for(var sr=Jn.getBox("sidx"),Kr=!sr||isNaN(sr.earliest_presentation_time)||isNaN(sr.timescale)?Gn&&!isNaN(Gn.mediaStartTime)?Gn.mediaStartTime:0:sr.earliest_presentation_time/sr.timescale,_i=Math.max(Kr,0),Ti=L.getCurrentRepresentation(),_r=0,Si=Ir.length;_r<Si;_r++){var Rr=M.getEvent(Ir[_r],Ar,_i,Ti);Rr&&fr.push(Rr)}return fr}catch{return[]}}(St=St||he.parse(rt),Zn,ln,bn);de.trigger(u.Z.INBAND_EVENTS,{events:Sn},{streamId:G.id})}}}function Dt(){var Ge=z.getTime();J.get().streaming.buffer.flushBufferAtTrackSwitch&&z.seek(Ge+.001,!1,!0),jt(Ge),h.setSeekTarget(Ge),w.startScheduleTimer()}function xt(){var Ge=z.getTime(),Re=h.getContinuousBufferTimeForTargetTime(Ge);jt(isNaN(Re)?Ge:Re),w.startScheduleTimer()}function kt(Ge){Ge&&!isNaN(Ge.time)&&(jt(Ge.time),h.setSeekTarget(Ge.time))}function jt(Ge){ce=Ge,Y=!0}return r={initialize:function(Ge,Re,rt){Z=(0,xe.Z)(ue).create({events:u.Z,eventBus:de,streamInfo:G,timelineConverter:g,dashConstants:e.Z,segmentBaseController:i.segmentBaseController,type:ie}),U=(0,V.Z)(ue).create({streamInfo:G,type:ie,timelineConverter:g,dashMetrics:x,mediaPlayerModel:D,baseURLController:i.baseURLController,errHandler:j,segmentsController:Z,settings:J,boxParser:he,events:u.Z,eventBus:de,errors:X,debug:(0,m.Z)(ue).getInstance(),requestModifier:(0,Se.Z)(ue).getInstance(),dashConstants:e.Z,constants:t.Z,urlUtils:(0,ze.Z)(ue).getInstance()}),E=G.manifestInfo.isDynamic,U.initialize(E),ne.registerStreamType(ie,r),L=S(ue).create({streamInfo:G,type:ie,abrController:ne,dashMetrics:x,playbackController:z,timelineConverter:g,dashConstants:e.Z,events:u.Z,eventBus:de,errors:X,isDynamic:E,adapter:M,segmentsController:Z}),h=function(fe,pe){return fe?fe!==t.Z.TEXT||pe?ke(ue).create({streamInfo:G,type:fe,mediaPlayerModel:D,manifestModel:C,fragmentModel:b,errHandler:j,mediaController:oe,representationController:L,adapter:M,textController:Q,abrController:ne,playbackController:z,settings:J}):me(ue).create({streamInfo:G,type:fe,mimeType:le,fragmentModel:b,textController:Q,errHandler:j,settings:J}):(j.error(new re.Z(X.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,X.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ie,rt),h&&h.initialize(Ge),(w=f(ue).create({streamInfo:G,type:ie,mimeType:le,adapter:M,dashMetrics:x,mediaPlayerModel:D,fragmentModel:b,abrController:ne,playbackController:z,textController:Q,mediaController:oe,bufferController:h,representationController:L,settings:J})).initialize(Re),ce=0,Y=!1,B=!1},getStreamId:Te,getType:Ce,isUpdating:function(){return!!L&&L.isUpdating()},getBufferController:function(){return h},dischargePreBuffer:function(){h.dischargePreBuffer()},getFragmentModel:function(){return b},getScheduleController:Ht,getRepresentationController:function(){return L},getRepresentationInfo:Yt,getBufferLevel:function(){return h?h.getBufferLevel():0},isBufferingCompleted:Kt,createBufferSinks:function(Ge){var Re=vt();return Re?Promise.resolve(Re):h?h.createBufferSink(R,Ge):Promise.resolve(null)},updateStreamInfo:function(Ge){return G=Ge,Kt()?Promise.resolve():h.updateAppendWindow()},getStreamInfo:function(){return G},selectMediaInfo:wt,clearMediaInfoArray:function(){A=[]},addMediaInfo:function(Ge){A.indexOf(Ge)===-1&&A.push(Ge)},prepareTrackSwitch:function(){return new Promise(function(Ge){l.debug("Preparing track switch for type ".concat(ie));var Re=ie===t.Z.TEXT||J.get().streaming.trackSwitchMode[ie]===t.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&z.getTimeToStreamEnd(G)>J.get().streaming.buffer.stallThreshold;if(h.getIsBufferingCompleted()&&!Re)return h.prepareForNonReplacementTrackSwitch(R.codec).then(function(){de.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:G.id,mediaType:ie})}).catch(function(){de.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:G.id,mediaType:ie})}),void Ge();w.clearScheduleTimer(),w.setSwitchTrack(!0),Re?(de.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ie,streamId:G.id},{mediaType:ie,streamId:G.id}),b.abortRequests(),h.prepareForReplacementTrackSwitch(R.codec).then(function(){var rt=Yt();return h.updateBufferTimestampOffset(rt)}).then(function(){Dt(),Ge()}).catch(function(){Dt(),Ge()})):h.prepareForNonReplacementTrackSwitch(R.codec).then(function(){xt(),Ge()}).catch(function(){xt(),Ge()})})},prepareQualityChange:function(Ge){te&&l.warn("Canceling queued representation switch to ".concat(te.quality," for ").concat(ie)),l.debug("Preparing quality switch for type ".concat(ie));var Re=Ge.newQuality;N=!0,w.clearScheduleTimer(),L.prepareQualityChange(Re);var rt=Yt(Re);Ge.reason&&Ge.reason.forceReplace?function(fe){b.abortRequests(),de.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ie,streamId:G.id},{mediaType:ie,streamId:G.id}),w.setCheckPlaybackQuality(!1),h.prepareForForceReplacementQualitySwitch(fe).then(function(){Dt(),te=null,N=!1}).catch(function(){Dt(),te=null,N=!1})}(rt):Ge&&Ge.reason&&Ge.reason.forceAbandon?function(fe){h.updateBufferTimestampOffset(fe).then(function(){b.abortRequests(),B=!0,w.setCheckPlaybackQuality(!1),w.startScheduleTimer(),N=!1,te=null}).catch(function(){te=null,N=!1})}(rt):J.get().streaming.buffer.fastSwitchEnabled?function(fe){var pe=z.getTime(),Ve=1.5*(isNaN(fe.fragmentDuration)?1:fe.fragmentDuration),St=b.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:pe+Ve,threshold:0})[0];if(St&&!Ie()){var Nt=h.getBufferLevel(),ln=ne.getAbandonmentStateFor(G.id,ie);St.quality<fe.quality&&Nt>=Ve&&ln!==y.Z.ABANDON_LOAD?h.updateBufferTimestampOffset(fe).then(function(){b.abortRequests(),jt(pe+Ve),w.setCheckPlaybackQuality(!1),w.startScheduleTimer(),N=!1}).catch(function(){N=!1}):Gt(fe)}else Gt(fe)}(rt):Gt(rt),x.pushPlayListTraceMetrics(new Date,be.REPRESENTATION_SWITCH_STOP_REASON),x.createPlaylistTraceMetrics(rt.id,1e3*z.getTime(),z.getPlaybackRate())},getMediaInfo:function(){return R},getMediaSource:function(){return h.getMediaSource()},setMediaSource:function(Ge){return h.setMediaSource(Ge,R)},getBuffer:vt,setExplicitBufferingTime:jt,finalisePlayList:function(Ge,Re){x.pushPlayListTraceMetrics(Ge,Re)},probeNextRequest:function(){var Ge=Yt(),Re=L&&Ge?L.getRepresentationForQuality(Ge.quality):null;return U.getNextSegmentRequestIdempotent(R,Re)},prepareInnerPeriodPlaybackSeeking:function(Ge){return new Promise(function(Re){if(h.hasBufferAtTime(Ge.seekTime))return h.pruneBuffer(),nt(h.getContinuousBufferTimeForTargetTime(Ge.seekTime))&&h.setIsBufferingCompleted(!0),void Re();w.clearScheduleTimer(),b.abortRequests(),h.prepareForPlaybackSeek().then(function(){var rt=h.getAllRangesWithSafetyFactor(Ge.seekTime);return h.clearBuffers(rt)}).then(function(){var rt=h.getContinuousBufferTimeForTargetTime(Ge.seekTime);if(nt(rt))h.setIsBufferingCompleted(!0),Re();else{var fe=isNaN(rt)?Ge.seekTime:rt;jt(fe),h.setSeekTarget(fe);var pe=[];pe.push(h.updateAppendWindow());var Ve=Yt();pe.push(h.updateBufferTimestampOffset(Ve)),Promise.all(pe).then(function(){w.setInitSegmentRequired(!0),w.setCheckPlaybackQuality(!1),w.startScheduleTimer(),Re()})}}).catch(function(rt){l.error(rt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Ge,Re){try{w.clearScheduleTimer(),b.abortRequests(),h.prepareForPlaybackSeek().then(function(){return h.pruneAllSafely()}).then(function(){Ge()})}catch(rt){Re(rt)}})},reset:function(Ge,Re){U&&U.reset(),h&&(h.reset(Ge,Re),h=null),w&&(w.reset(),w=null),L&&(L.reset(),L=null),Z&&(Z=null),ne&&ne.unRegisterStreamType(Te(),ie),de.off(u.Z.DATA_UPDATE_COMPLETED,qe,r),de.off(u.Z.INIT_FRAGMENT_NEEDED,We,r),de.off(u.Z.MEDIA_FRAGMENT_NEEDED,Xe,r),de.off(u.Z.INIT_FRAGMENT_LOADED,Jt,r),de.off(u.Z.MEDIA_FRAGMENT_LOADED,ut,r),de.off(u.Z.BUFFER_LEVEL_STATE_CHANGED,ht,r),de.off(u.Z.BUFFER_CLEARED,gt,r),de.off(u.Z.SEEK_TARGET,kt,r),de.off(u.Z.FRAGMENT_LOADING_ABANDONED,an,r),de.off(u.Z.FRAGMENT_LOADING_COMPLETED,un,r),de.off(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Be,r),de.off(u.Z.SET_NON_FRAGMENTED_TEXT,ft,r),de.off(u.Z.QUOTA_EXCEEDED,$e,r),de.off(u.Z.SOURCE_BUFFER_ERROR,st,r),de.off(u.Z.BYTES_APPENDED_END_FRAGMENT,qt,r),et(),ie=null,G=null}},l=(0,m.Z)(ue).getInstance().getLogger(r),et(),de.on(u.Z.DATA_UPDATE_COMPLETED,qe,r,{priority:p.Z.EVENT_PRIORITY_HIGH}),de.on(u.Z.INIT_FRAGMENT_NEEDED,We,r),de.on(u.Z.MEDIA_FRAGMENT_NEEDED,Xe,r),de.on(u.Z.INIT_FRAGMENT_LOADED,Jt,r),de.on(u.Z.MEDIA_FRAGMENT_LOADED,ut,r),de.on(u.Z.BUFFER_LEVEL_STATE_CHANGED,ht,r),de.on(u.Z.BUFFER_CLEARED,gt,r),de.on(u.Z.SEEK_TARGET,kt,r),de.on(u.Z.FRAGMENT_LOADING_ABANDONED,an,r),de.on(u.Z.FRAGMENT_LOADING_COMPLETED,un,r),de.on(u.Z.QUOTA_EXCEEDED,$e,r),de.on(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Be,r),de.on(u.Z.SET_NON_FRAGMENTED_TEXT,ft,r),de.on(u.Z.SOURCE_BUFFER_ERROR,st,r),de.on(u.Z.BYTES_APPENDED_END_FRAGMENT,qt,r),r}it.__dashjs_factory_name="StreamProcessor";var Ut=_.Z.getClassFactory(it),It=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},Ft=P(9032);function Pt(i,r){if(i){if(typeof i=="string")return tn(i,r);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?tn(i,r):void 0}}function tn(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function dn(i){i=i||{};var r,l,E=this.context,R=i.requestModifier,A=i.lowLatencyThroughputModel,h=i.boxParser,w=(0,Ae.Z)(E).getInstance();function L(N){var U,Z=new Date,ce=N.request,te=new Headers;if(ce.range&&te.append("Range","bytes="+ce.range),N.headers)for(var ue in N.headers){var de=N.headers[ue];de&&te.append(ue,de)}ce.requestStartDate||(ce.requestStartDate=Z),R&&R.modifyRequestHeader&&R.modifyRequestHeader({setRequestHeader:function(g,M){te.append(g,M)}},{url:N.url}),typeof window.AbortController=="function"&&(U=new AbortController,N.abortController=U,U.signal.onabort=N.onabort);var G={method:N.method,headers:te,credentials:N.withCredentials?"include":void 0,signal:U?U.signal:void 0},ie=w.get().streaming.abr.fetchThroughputCalculationMode,j=Date.now(),le=0;new Promise(function(g){if(ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&A&&(le=A.getThroughputCapacityDelayMS(ce,1e3*l.getCurrentBufferLevel(ce.mediaType))))return setTimeout(g,le);g()}).then(function(){var g=Date.now();fetch(N.url,G).then(function(M){N.response||(N.response={}),N.response.status=M.status,N.response.statusText=M.statusText,N.response.responseURL=M.url,M.ok||N.onerror();var C,D="",b=function(qe,ht){var gt;if(typeof Symbol>"u"||qe[Symbol.iterator]==null){if(Array.isArray(qe)||(gt=Pt(qe))){gt&&(qe=gt);var st=0,qt=function(){};return{s:qt,n:function(){return st>=qe.length?{done:!0}:{done:!1,value:qe[st++]}},e:function(Be){throw Be},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gt,an=!0,un=!1;return{s:function(){gt=qe[Symbol.iterator]()},n:function(){var Be=gt.next();return an=Be.done,Be},e:function(Be){un=!0,Gt=Be},f:function(){try{an||gt.return==null||gt.return()}finally{if(un)throw Gt}}}}(M.headers.keys());try{for(b.s();!(C=b.n()).done;){var ne=C.value;D+=ne+": "+M.headers.get(ne)+`\r
`}}catch(qe){b.e(qe)}finally{b.f()}if(N.response.responseHeaders=D,!M.body)return M.arrayBuffer().then(function(qe){N.response.response=qe;var ht={loaded:qe.byteLength,total:qe.byteLength,stream:!1};N.progress(ht),N.onload(),N.onend()});var z,oe,Q,x,J=parseInt(M.headers.get("Content-Length"),10),he=0,Ne=!1,Te=new Uint8Array,Ce=0;if(ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&A){var Ie=g,et=0,nt=(Q=M.body.tee(),x=2,function(qe){if(Array.isArray(qe))return qe}(Q)||function(qe,ht){if(typeof Symbol<"u"&&Symbol.iterator in Object(qe)){var gt=[],st=!0,qt=!1,Gt=void 0;try{for(var an,un=qe[Symbol.iterator]();!(st=(an=un.next()).done)&&(gt.push(an.value),!ht||gt.length!==ht);st=!0);}catch(Be){qt=!0,Gt=Be}finally{try{st||un.return==null||un.return()}finally{if(qt)throw Gt}}return gt}}(Q,x)||Pt(Q,x)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),We=nt[0],Xe=nt[1];z=We.getReader(),oe=[],z.read().then(function qe(ht){var gt=ht.value,st=ht.done;if(et=Date.now(),gt&&gt.length){var qt=et-Ie,Gt=gt.length;oe.push({chunkDownloadTimeRelativeMS:et-g,chunkDownloadDurationMS:qt,chunkBytes:Gt,kbps:Math.round(8*Gt/(qt/1e3)),bufferLevel:l.getCurrentBufferLevel(ce.mediaType)})}if(st){var an=et-g,un=oe.reduce(function(Be,ft){return Be+ft.chunkBytes},0);return A.addMeasurement(ce,an,oe,j,le,D),void N.progress({loaded:un,total:un,lengthComputable:!0,time:A.getEstimatedDownloadDurationMS(ce),stream:!0})}return Ie=Date.now(),z.read().then(qe)}),N.reader=Xe.getReader()}else N.reader=M.body.getReader();var Mt=[],Ee=[],Fe=[],lt=!0;Y(N,function qe(ht){var gt=ht.value;if(ht.done){if(Te){if(ie!==t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var st=null,qt=null;ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(st=function(Be,ft){try{var $e,vt;$e=Be.filter(function(Dt,xt){return xt<Be.length-1}),vt=ft.filter(function(Dt,xt){return xt<ft.length-1});var wt=[];if($e.length>1){for(var Ht=0,Yt=0,Kt=0;Kt<$e.length;Kt++)if($e[Kt]&&vt[Kt]){var Jt=vt[Kt].ts-$e[Kt].ts;if(Jt>1)wt.push(8*vt[Kt].bytes/Jt),Yt=0;else{Yt===0&&(Yt=$e[Kt].ts,Ht=0);var ut=vt[Kt].ts-Yt;ut>1?(Ht+=vt[Kt].bytes,wt.push(8*Ht/ut),Yt=0):Ht+=vt[Kt].bytes}}if(wt.length>0)return wt.reduce(function(Dt,xt){return Dt+xt},0)/wt.length}return null}catch{return null}}(Ee,Fe),st&&(qt=8*he/st)):ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(qt=B(Mt,he)),N.progress({loaded:he,total:isNaN(J)?he:J,lengthComputable:!0,time:qt,stream:!0})}N.response.response=Te.buffer}return N.onload(),void N.onend()}if(gt&&gt.length>0){Te=function(Be,ft){if(Be.length===0)return ft;var $e=new Uint8Array(Be.length+ft.length);return $e.set(Be),$e.set(ft,Be.length),$e}(Te,gt),he+=gt.length,Mt.push({ts:Date.now(),bytes:gt.length}),ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&lt&&h.findLastTopIsoBoxCompleted(["moof"],Te,Ce).found&&(lt=!1,Ee.push({ts:performance.now(),bytes:gt.length}));var Gt=h.findLastTopIsoBoxCompleted(["moov","mdat"],Te,Ce);if(Gt.found){var an,un=Gt.lastCompletedOffset+Gt.size;ie!==t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||lt||(lt=!0,Fe.push({ts:performance.now(),bytes:Te.length})),un===Te.length?(an=Te,Te=new Uint8Array):(an=new Uint8Array(Te.subarray(0,un)),Te=Te.subarray(un)),N.progress({data:an.buffer,lengthComputable:!1,noTrace:!0}),Ce=0}else Ce=Gt.lastCompletedOffset,Ne||(N.progress({lengthComputable:!1,noTrace:!0}),Ne=!0)}Y(N,qe)})}).catch(function(M){N.onerror&&N.onerror(M)})})}function Y(N,U){N.reader.read().then(U).catch(function(Z){N.onerror&&N.response.status===200&&N.onerror(Z)})}function B(N,U){try{if((N=N.filter(function(te){return te.bytes>U/4/N.length})).length>1){var Z=0,ce=(N[N.length-1].ts-N[0].ts)/N.length;return N.forEach(function(te,ue){var de=N[ue+1];if(de){var G=de.ts-te.ts;Z+=G<ce?G:0}}),Z}return null}catch{return null}}return r={load:function(N){R&&R.modifyRequest?(0,Se.k)(N,R).then(function(){return L(N)}):L(N)},abort:function(N){if(N.abortController)N.abortController.abort();else if(N.reader)try{N.reader.cancel(),N.onabort()}catch{}},calculateDownloadedTime:B,setup:function(N){l=N.dashMetrics}},r}dn.__dashjs_factory_name="FetchLoader";var An=_.Z.getClassFactory(dn),_n=P(1180);function Rn(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var qn=function(){function i(){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var r,l;return r=i,(l=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==e.Z.BASE_URL&&this.segmentInfoType!==e.Z.SEGMENT_BASE&&!this.indexRange}}])&&Rn(r.prototype,l),i}(),yn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.period=null,this.index=-1,this.type=null},Qn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};Qn.DEFAULT_ID="defaultId";var xn=Qn,Vn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},er=P(2610),Kn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},nr=function i(r,l,E,R){(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||"",this.serviceLocation=l||r||"",this.dvbPriority=E||1,this.dvbWeight=R||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};nr.DEFAULT_DVB_PRIORITY=1,nr.DEFAULT_DVB_WEIGHT=1;var rr=nr,Cr=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},bt=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},Et=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function Tt(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Ze=function(){function i(){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.schemeIdUri=null,this.value=null,this.id=null}var r,l;return r=i,(l=[{key:"init",value:function(E){return E&&(this.schemeIdUri=E.schemeIdUri?E.schemeIdUri:null,this.value=E.value?E.value:null,this.id=E.id?E.id:null,E[e.Z.DVB_URL]&&(this.dvbUrl=E[e.Z.DVB_URL]),E[e.Z.DVB_MIMETYPE]&&(this.dvbMimeType=E[e.Z.DVB_MIMETYPE]),E[e.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=E[e.Z.DVB_FONTFAMILY])),this}}])&&Tt(r.prototype,l),i}(),ct=P(3101),je=P.n(ct);function ot(){return{areEqual:function(i,r){return je()(i,r)}}}ot.__dashjs_factory_name="ObjectUtils";var Ot=_.Z.getSingletonFactory(ot),Lt=P(7803),Wt=function i(r,l){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||"",this.serviceLocation=l||null,this.queryParams={}},Xt=function i(r,l,E){(function(R,A){if(!(R instanceof A))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||"",this.serviceLocation=l||null,this.ttl=E||NaN,this.queryParams={}};function Bt(i,r){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(i);r&&(E=E.filter(function(R){return Object.getOwnPropertyDescriptor(i,R).enumerable})),l.push.apply(l,E)}return l}function yt(i){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Bt(Object(l),!0).forEach(function(E){zt(i,E,l[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Bt(Object(l)).forEach(function(E){Object.defineProperty(i,E,Object.getOwnPropertyDescriptor(l,E))})}return i}function zt(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Vt(i,r){var l;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(l=rn(i))||r){l&&(i=l);var E=0,R=function(){};return{s:R,n:function(){return E>=i.length?{done:!0}:{done:!1,value:i[E++]}},e:function(L){throw L},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,h=!0,w=!1;return{s:function(){l=i[Symbol.iterator]()},n:function(){var L=l.next();return h=L.done,L},e:function(L){w=!0,A=L},f:function(){try{h||l.return==null||l.return()}finally{if(w)throw A}}}}function rn(i,r){if(i){if(typeof i=="string")return gn(i,r);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?gn(i,r):void 0}}function gn(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function vn(){var i,r,l,E,R=this.context,A=(0,ze.Z)(R).getInstance(),h=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g};function w(g,M){if(!g)throw new Error("adaptation is not defined");if(!M)throw new Error("type is not defined");if(g.Representation_asArray&&g.Representation_asArray.length){var C=ue(g.Representation_asArray[0]);if(C&&C.length>0&&Lt.Y.indexOf(C[0].schemeIdUri)>=0)return M===t.Z.IMAGE}if(g.ContentComponent_asArray&&g.ContentComponent_asArray.length>0){if(g.ContentComponent_asArray.length>1)return M===t.Z.MUXED;if(g.ContentComponent_asArray[0].contentType===M)return!0}var D=M===t.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(M);if(g.Representation_asArray&&g.Representation_asArray.length){var b=g.Representation_asArray[0].codecs;if(D.test(b))return!0}if(g.hasOwnProperty(e.Z.MIME_TYPE))return D.test(g.mimeType);if(g.Representation_asArray){for(var ne,z=0;z<g.Representation_asArray.length;z++)if((ne=g.Representation_asArray[z]).hasOwnProperty(e.Z.MIME_TYPE))return D.test(ne.mimeType)}return!1}function L(g){if(!g)throw new Error("adaptation is not defined");if(g.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)||g.hasOwnProperty(e.Z.SEGMENT_TIMELINE)||g.hasOwnProperty(e.Z.SEGMENT_LIST)||g.hasOwnProperty(e.Z.SEGMENT_BASE))return!0;if(g.Representation_asArray&&g.Representation_asArray.length>0){var M=g.Representation_asArray[0];if(M.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)||M.hasOwnProperty(e.Z.SEGMENT_TIMELINE)||M.hasOwnProperty(e.Z.SEGMENT_LIST)||M.hasOwnProperty(e.Z.SEGMENT_BASE))return!0}return!1}function Y(g){return w(g,t.Z.VIDEO)}function B(g){return w(g,t.Z.TEXT)}function N(g){return w(g,t.Z.IMAGE)}function U(g){return g&&Array.isArray(g.Representation_asArray)&&g.Representation_asArray.sort(function(M,C){return M.bandwidth-C.bandwidth}),g}function Z(g,M){return g&&g.Period_asArray&&h(M)&&g.Period_asArray[M]?g.Period_asArray[M].AdaptationSet_asArray:[]}function ce(g){return g&&g.Period_asArray?g.Period_asArray:[]}function te(g){var M=!1;return g&&g.hasOwnProperty("type")&&(M=g.type===e.Z.DYNAMIC),M}function ue(g){return g&&g.EssentialProperty_asArray&&g.EssentialProperty_asArray.length?g.EssentialProperty_asArray.map(function(M){return{schemeIdUri:M.schemeIdUri,value:M.value}}):null}function de(g){if(!g||!g.S_asArray)return NaN;var M=g.S_asArray[0],C=g.S_asArray[1];return M.hasOwnProperty("d")?M.d:C.t-M.t}function G(g,M){if(!g)throw new Error("Period cannot be null or undefined");var C=xn.DEFAULT_ID+"_"+M;return g.hasOwnProperty(e.Z.ID)&&g.id.length>0&&g.id!=="__proto__"&&(C=g.id),C}function ie(g,M,C){var D,b=[];if(!g)return b;for(D=0;D<g.length;D++){var ne=new Cr;if(ne.timescale=1,ne.representation=M,!g[D].hasOwnProperty(t.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");ne.schemeIdUri=g[D].schemeIdUri,g[D].hasOwnProperty(e.Z.TIMESCALE)&&(ne.timescale=g[D].timescale),g[D].hasOwnProperty(e.Z.VALUE)&&(ne.value=g[D].value),b.push(ne),ne.period=C}return b}function j(g){var M=[],C=g.BaseURL_asArray||[g.baseUri],D=!1;return C.some(function(b){if(b){var ne=new rr,z=b.__text||b;return A.isRelative(z)&&(D=!0,g.baseUri&&(z=A.resolve(z,g.baseUri))),ne.url=z,b.hasOwnProperty(e.Z.SERVICE_LOCATION)&&b.serviceLocation.length?ne.serviceLocation=b.serviceLocation:ne.serviceLocation=z,b.hasOwnProperty(e.Z.DVB_PRIORITY)&&(ne.dvbPriority=b[e.Z.DVB_PRIORITY]),b.hasOwnProperty(e.Z.DVB_WEIGHT)&&(ne.dvbWeight=b[e.Z.DVB_WEIGHT]),b.hasOwnProperty(e.Z.AVAILABILITY_TIME_OFFSET)&&(ne.availabilityTimeOffset=b[e.Z.AVAILABILITY_TIME_OFFSET]),b.hasOwnProperty(e.Z.AVAILABILITY_TIME_COMPLETE)&&(ne.availabilityTimeComplete=b[e.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),M.push(ne),D}}),M}function le(g){var M=new Et;return M.serverUrl=g.__text,g.hasOwnProperty(e.Z.DEFAULT_SERVICE_LOCATION)&&(M.defaultServiceLocation=g[e.Z.DEFAULT_SERVICE_LOCATION],M.defaultServiceLocationArray=M.defaultServiceLocation.split(" ")),g.hasOwnProperty(e.Z.QUERY_BEFORE_START)&&(M.queryBeforeStart=g[e.Z.QUERY_BEFORE_START].toLowerCase()==="true"),g.hasOwnProperty(e.Z.CLIENT_REQUIREMENT)&&(M.clientRequirement=g[e.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),M}return i={getIsTypeOf:w,getIsText:B,getIsFragmented:L,getProducerReferenceTimesForAdaptation:function(g){var M=g&&g.hasOwnProperty(e.Z.PRODUCERREFERENCETIME_ASARRAY)?g[e.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(g&&g.hasOwnProperty(e.Z.REPRESENTATION_ASARRAY)?g[e.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(D){var b;D.hasOwnProperty(e.Z.PRODUCERREFERENCETIME_ASARRAY)&&M.push.apply(M,function(ne){if(Array.isArray(ne))return gn(ne)}(b=D[e.Z.PRODUCERREFERENCETIME_ASARRAY])||function(ne){if(typeof Symbol<"u"&&Symbol.iterator in Object(ne))return Array.from(ne)}(b)||rn(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())});var C=[];return M.forEach(function(D){var b=new bt;D.hasOwnProperty(e.Z.ID)&&(b[e.Z.ID]=D[e.Z.ID],D.hasOwnProperty(e.Z.WALL_CLOCK_TIME)&&(b[e.Z.WALL_CLOCK_TIME]=D[e.Z.WALL_CLOCK_TIME],D.hasOwnProperty(e.Z.PRESENTATION_TIME)&&(b[e.Z.PRESENTATION_TIME]=D[e.Z.PRESENTATION_TIME],D.hasOwnProperty(e.Z.INBAND)&&(b[e.Z.INBAND]=D[e.Z.INBAND]!=="false"),D.hasOwnProperty(e.Z.TYPE)&&(b[e.Z.TYPE]=D[e.Z.TYPE]),C.push(b))))}),C},getLanguageForAdaptation:function(g){var M="";return g&&g.hasOwnProperty(e.Z.LANG)&&(M=g.lang),M},getViewpointForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.VIEWPOINT_ASARRAY)&&g[e.Z.VIEWPOINT_ASARRAY].length?g[e.Z.VIEWPOINT_ASARRAY].map(function(M){return new Ze().init(M)}):[]},getRolesForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ROLE_ASARRAY)&&g[e.Z.ROLE_ASARRAY].length?g[e.Z.ROLE_ASARRAY].map(function(M){return new Ze().init(M)}):[]},getAccessibilityForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ACCESSIBILITY_ASARRAY)&&g[e.Z.ACCESSIBILITY_ASARRAY].length?g[e.Z.ACCESSIBILITY_ASARRAY].map(function(M){return new Ze().init(M)}):[]},getAudioChannelConfigurationForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(M){return new Ze().init(M)}):[]},getAudioChannelConfigurationForRepresentation:function(g){return g&&g.hasOwnProperty(e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(M){return new Ze().init(M)}):[]},getAdaptationForIndex:function(g,M,C){var D=Z(M,C);return D.length>0&&h(g)?D[g]:null},getIndexForAdaptation:function(g,M,C){if(!g)return-1;for(var D=Z(M,C),b=0;b<D.length;b++)if(Ot(R).getInstance().areEqual(D[b],g))return b;return-1},getAdaptationForId:function(g,M,C){var D,b,ne=Z(M,C);for(D=0,b=ne.length;D<b;D++)if(ne[D].hasOwnProperty(e.Z.ID)&&ne[D].id===g)return ne[D];return null},getAdaptationsForType:function(g,M,C){var D,b,ne=Z(g,M),z=[];for(D=0,b=ne.length;D<b;D++)w(ne[D],C)&&z.push(U(ne[D]));return z},getRealPeriods:ce,getRealPeriodForIndex:function(g,M){var C=ce(M);return C.length>0&&h(g)?C[g]:null},getCodec:function(g,M,C){var D=null;if(g&&g.Representation_asArray&&g.Representation_asArray.length>0){var b=h(M)&&M>=0&&M<g.Representation_asArray.length?g.Representation_asArray[M]:g.Representation_asArray[0];b&&(D=b.mimeType+';codecs="'+b.codecs+'"',C&&b.width!==void 0&&(D+=';width="'+b.width+'";height="'+b.height+'"'))}return D&&(D=D.replace(/\sprofiles=[^;]*/g,"")),D},getSelectionPriority:function(g){try{var M=g&&g.selectionPriority!==void 0?parseInt(g.selectionPriority):1;return isNaN(M)?1:M}catch{return 1}},getMimeType:function(g){return g&&g.Representation_asArray&&g.Representation_asArray.length>0?g.Representation_asArray[0].mimeType:null},getKID:function(g){return g&&g.hasOwnProperty(e.Z.CENC_DEFAULT_KID)?g[e.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(g){if(!g||!Array.isArray(g.Label_asArray))return[];for(var M=[],C=0;C<g.Label_asArray.length;C++)M.push({lang:g.Label_asArray[C].lang,text:g.Label_asArray[C].__text||g.Label_asArray[C]});return M},getContentProtectionData:function(g){return g&&g.hasOwnProperty(e.Z.CONTENTPROTECTION_ASARRAY)&&g.ContentProtection_asArray.length!==0?g.ContentProtection_asArray:null},getIsDynamic:te,getId:function(g){return g&&g[e.Z.ID]||null},hasProfile:function(g,M){var C=!1;return g&&g.profiles&&g.profiles.length>0&&(C=g.profiles.indexOf(M)!==-1),C},getDuration:function(g){return g&&g.hasOwnProperty(e.Z.MEDIA_PRESENTATION_DURATION)?g.mediaPresentationDuration:g&&g.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(g){return g&&g.bandwidth?g.bandwidth:NaN},getManifestUpdatePeriod:function(g){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=NaN;return g&&g.hasOwnProperty(e.Z.MINIMUM_UPDATE_PERIOD)&&(C=g.minimumUpdatePeriod),isNaN(C)?C:Math.max(C-M,1)},getPublishTime:function(g){return g&&g.hasOwnProperty(e.Z.PUBLISH_TIME)?new Date(g[e.Z.PUBLISH_TIME]):null},getRepresentationCount:function(g){return g&&Array.isArray(g.Representation_asArray)?g.Representation_asArray.length:0},getBitrateListForAdaptation:function(g){var M=U(g);return(M&&Array.isArray(M.Representation_asArray)?M.Representation_asArray:[]).map(function(C){return{bandwidth:C.bandwidth,width:C.width||0,height:C.height||0,scanType:C.scanType||null,id:C.id||null}})},getRepresentationFor:function(g,M){return M&&M.Representation_asArray&&M.Representation_asArray.length>0&&h(g)?M.Representation_asArray[g]:null},getRepresentationsForAdaptation:function(g){var M,C,D,b,ne=[],z=function(Te){if(Te&&Te.period&&h(Te.period.index)){var Ce=Te.period.mpd.manifest.Period_asArray[Te.period.index];if(Ce&&Ce.AdaptationSet_asArray&&h(Te.index))return U(Ce.AdaptationSet_asArray[Te.index])}}(g);if(z&&z.Representation_asArray){if(g&&g.period&&h(g.period.index)){var oe=j(g.period.mpd.manifest);oe&&(C=oe[0])}for(var Q=0,x=z.Representation_asArray.length;Q<x;++Q){var J=z.Representation_asArray[Q],he=new qn;if(he.index=Q,he.adaptation=g,J.hasOwnProperty(e.Z.ID)&&(he.id=J.id),J.hasOwnProperty(e.Z.CODECS)&&(he.codecs=J.codecs),J.hasOwnProperty(e.Z.MIME_TYPE)&&(he.mimeType=J[e.Z.MIME_TYPE]),J.hasOwnProperty(e.Z.CODEC_PRIVATE_DATA)&&(he.codecPrivateData=J.codecPrivateData),J.hasOwnProperty(e.Z.BANDWITH)&&(he.bandwidth=J.bandwidth),J.hasOwnProperty(e.Z.WIDTH)&&(he.width=J.width),J.hasOwnProperty(e.Z.HEIGHT)&&(he.height=J.height),J.hasOwnProperty(e.Z.SCAN_TYPE)&&(he.scanType=J.scanType),J.hasOwnProperty(e.Z.MAX_PLAYOUT_RATE)&&(he.maxPlayoutRate=J.maxPlayoutRate),J.hasOwnProperty(e.Z.SEGMENT_BASE)?(M=J.SegmentBase,he.segmentInfoType=e.Z.SEGMENT_BASE):J.hasOwnProperty(e.Z.SEGMENT_LIST)?(M=J.SegmentList).hasOwnProperty(e.Z.SEGMENT_TIMELINE)?he.segmentInfoType=e.Z.SEGMENT_TIMELINE:he.segmentInfoType=e.Z.SEGMENT_LIST:J.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)?((M=J.SegmentTemplate).hasOwnProperty(e.Z.SEGMENT_TIMELINE)?he.segmentInfoType=e.Z.SEGMENT_TIMELINE:he.segmentInfoType=e.Z.SEGMENT_TEMPLATE,M.hasOwnProperty(e.Z.INITIALIZATION_MINUS)&&(he.initialization=M.initialization.split("$Bandwidth$").join(J.bandwidth).split("$RepresentationID$").join(J.id))):he.segmentInfoType=e.Z.BASE_URL,he.essentialProperties=ue(J),M){if(M.hasOwnProperty(e.Z.INITIALIZATION)){var Ne=M.Initialization;Ne.hasOwnProperty(e.Z.SOURCE_URL)&&(he.initialization=Ne.sourceURL),Ne.hasOwnProperty(e.Z.RANGE)&&(he.range=Ne.range)}else B(z)&&L(z)&&z.mimeType&&z.mimeType.indexOf("application/mp4")===-1&&(he.range=0);M.hasOwnProperty(e.Z.TIMESCALE)&&(he.timescale=M.timescale),M.hasOwnProperty(e.Z.DURATION)?he.segmentDuration=M.duration/he.timescale:J.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)&&(M=J.SegmentTemplate).hasOwnProperty(e.Z.SEGMENT_TIMELINE)&&(he.segmentDuration=de(M.SegmentTimeline)/he.timescale),M.hasOwnProperty(e.Z.MEDIA)&&(he.media=M.media),M.hasOwnProperty(e.Z.START_NUMBER)&&(he.startNumber=M.startNumber),M.hasOwnProperty(e.Z.INDEX_RANGE)&&(he.indexRange=M.indexRange),M.hasOwnProperty(e.Z.PRESENTATION_TIME_OFFSET)&&(he.presentationTimeOffset=M.presentationTimeOffset/he.timescale),M.hasOwnProperty(e.Z.AVAILABILITY_TIME_OFFSET)?he.availabilityTimeOffset=M.availabilityTimeOffset:C&&C.availabilityTimeOffset!==void 0&&(he.availabilityTimeOffset=C.availabilityTimeOffset),M.hasOwnProperty(e.Z.AVAILABILITY_TIME_COMPLETE)?he.availabilityTimeComplete=M.availabilityTimeComplete!=="false":C&&C.availabilityTimeComplete!==void 0&&(he.availabilityTimeComplete=C.availabilityTimeComplete)}he.MSETimeOffset=(b=(D=he).presentationTimeOffset,D.adaptation.period.start-b),he.path=[g.period.index,g.index,Q],ne.push(he)}}return ne},getAdaptationsForPeriod:function(g){var M,C,D,b=g&&h(g.index)?g.mpd.manifest.Period_asArray[g.index]:null,ne=[];if(b&&b.AdaptationSet_asArray)for(D=0;D<b.AdaptationSet_asArray.length;D++)C=b.AdaptationSet_asArray[D],M=new yn,C.hasOwnProperty(e.Z.ID)&&(M.id=C.id),M.index=D,M.period=g,w(C,t.Z.MUXED)?M.type=t.Z.MUXED:w(C,t.Z.AUDIO)?M.type=t.Z.AUDIO:Y(C)?M.type=t.Z.VIDEO:B(C)?M.type=t.Z.TEXT:N(C)?M.type=t.Z.IMAGE:r.warn("Unknown Adaptation stream type"),ne.push(M);return ne},getRegularPeriods:function(g){var M,C,D=!!g&&te(g.manifest),b=[],ne=null,z=null,oe=null,Q=null;for(C=0,M=g&&g.manifest&&g.manifest.Period_asArray?g.manifest.Period_asArray.length:0;C<M;C++)(z=g.manifest.Period_asArray[C]).hasOwnProperty(e.Z.START)?(Q=new xn).start=z.start:ne!==null&&ne.hasOwnProperty(e.Z.DURATION)&&oe!==null?(Q=new xn).start=parseFloat((oe.start+oe.duration).toFixed(5)):C!==0||D||((Q=new xn).start=0),oe!==null&&isNaN(oe.duration)&&(Q!==null?oe.duration=parseFloat((Q.start-oe.start).toFixed(5)):r.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Q!==null&&(Q.id=G(z,C),Q.index=C,Q.mpd=g,z.hasOwnProperty(e.Z.DURATION)&&(Q.duration=z.duration),oe&&(oe.nextPeriodId=Q.id),b.push(Q),ne=z,oe=Q),z=null,Q=null;return b.length===0||oe!==null&&isNaN(oe.duration)&&(oe.duration=parseFloat((function(x){(function(){if(!l||!l.hasOwnProperty("error"))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var J,he=te(x.mpd.manifest);return x.mpd.manifest.mediaPresentationDuration?J=x.mpd.manifest.mediaPresentationDuration:x.duration?J=x.duration:he?J=Number.POSITIVE_INFINITY:l.error(new re.Z(X.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",x)),J}(oe)-oe.start).toFixed(5))),b},getMpd:function(g){var M=new Vn;return g&&(M.manifest=g,g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME)?M.availabilityStartTime=new Date(g.availabilityStartTime.getTime()):g.loadedTime&&(M.availabilityStartTime=new Date(g.loadedTime.getTime())),g.hasOwnProperty(e.Z.AVAILABILITY_END_TIME)&&(M.availabilityEndTime=new Date(g.availabilityEndTime.getTime())),g.hasOwnProperty(e.Z.MINIMUM_UPDATE_PERIOD)&&(M.minimumUpdatePeriod=g.minimumUpdatePeriod),g.hasOwnProperty(e.Z.MEDIA_PRESENTATION_DURATION)&&(M.mediaPresentationDuration=g.mediaPresentationDuration),g.hasOwnProperty(e.Z.SUGGESTED_PRESENTATION_DELAY)&&(M.suggestedPresentationDelay=g.suggestedPresentationDelay),g.hasOwnProperty(e.Z.TIMESHIFT_BUFFER_DEPTH)&&(M.timeShiftBufferDepth=g.timeShiftBufferDepth),g.hasOwnProperty(e.Z.MAX_SEGMENT_DURATION)&&(M.maxSegmentDuration=g.maxSegmentDuration),g.hasOwnProperty(e.Z.PUBLISH_TIME)&&(M.publishTime=new Date(g.publishTime))),M},getEventsForPeriod:function(g){var M,C,D=g&&g.mpd&&g.mpd.manifest?g.mpd.manifest:null,b=D?D.Period_asArray:null,ne=b&&g&&h(g.index)?b[g.index].EventStream_asArray:null,z=[];if(ne)for(M=0;M<ne.length;M++){var oe=new Cr;if(oe.period=g,oe.timescale=1,!ne[M].hasOwnProperty(t.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(oe.schemeIdUri=ne[M][t.Z.SCHEME_ID_URI],ne[M].hasOwnProperty(e.Z.TIMESCALE)&&(oe.timescale=ne[M][e.Z.TIMESCALE]),ne[M].hasOwnProperty(e.Z.VALUE)&&(oe.value=ne[M][e.Z.VALUE]),ne[M].hasOwnProperty(e.Z.PRESENTATION_TIME_OFFSET)&&(oe.presentationTimeOffset=ne[M][e.Z.PRESENTATION_TIME_OFFSET]),C=0;ne[M].Event_asArray&&C<ne[M].Event_asArray.length;C++){var Q=ne[M].Event_asArray[C],x=new Kn;x.presentationTime=0,x.eventStream=oe,Q.hasOwnProperty(e.Z.PRESENTATION_TIME)&&(x.presentationTime=Q.presentationTime);var J=oe.presentationTimeOffset?oe.presentationTimeOffset/oe.timescale:0;x.calculatedPresentationTime=x.presentationTime/oe.timescale+g.start-J,Q.hasOwnProperty(e.Z.DURATION)&&(x.duration=Q.duration/oe.timescale),Q.hasOwnProperty(e.Z.ID)?x.id=Q.id:x.id=null,Q.Signal&&Q.Signal.Binary?x.messageData=E.decodeArray(Q.Signal.Binary.toString()):x.messageData=Q.messageData||Q.__cdata||Q.__text,z.push(x)}}return z},getEssentialPropertiesForAdaptation:function(g){var M={};if(g&&g.hasOwnProperty(e.Z.ESSENTIAL_PROPERTY_ASARRAY)){var C,D=Vt(g.EssentialProperty_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value;b.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(M[b[t.Z.SCHEME_ID_URI]]=yt({},b))}}catch(ne){D.e(ne)}finally{D.f()}}return M},getEssentialPropertiesAsArrayForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ESSENTIAL_PROPERTY_ASARRAY)&&g.EssentialProperty_asArray.length?g.EssentialProperty_asArray.map(function(M){return new Ze().init(M)}):[]},getEssentialPropertiesForRepresentation:ue,getEventStreamForAdaptationSet:function(g,M,C){var D,b,ne;return g&&g.Period_asArray&&M&&M.period&&h(M.period.index)&&(b=g.Period_asArray[M.period.index])&&b.AdaptationSet_asArray&&h(M.index)&&(ne=b.AdaptationSet_asArray[M.index])&&(D=ne.InbandEventStream_asArray),ie(D,null,C)},getEventStreamForRepresentation:function(g,M,C){var D,b,ne,z;return g&&g.Period_asArray&&M&&M.adaptation&&M.adaptation.period&&h(M.adaptation.period.index)&&(b=g.Period_asArray[M.adaptation.period.index])&&b.AdaptationSet_asArray&&h(M.adaptation.index)&&(ne=b.AdaptationSet_asArray[M.adaptation.index])&&ne.Representation_asArray&&h(M.index)&&(z=ne.Representation_asArray[M.index])&&(D=z.InbandEventStream_asArray),ie(D,M,C)},getUTCTimingSources:function(g){var M=te(g),C=!!g&&g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME),D=g?g.UTCTiming_asArray:null,b=[];return(M||C)&&D&&D.forEach(function(ne){var z=new er.Z;ne.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(z.schemeIdUri=ne.schemeIdUri,ne.hasOwnProperty(e.Z.VALUE)&&(z.value=ne.value.toString(),b.push(z)))}),b},getBaseURLsFromElement:j,getRepresentationSortFunction:function(){return function(g,M){return g.bandwidth-M.bandwidth}},getContentSteering:function(g){if(g&&g.hasOwnProperty(e.Z.CONTENT_STEERING_AS_ARRAY))return le(g[e.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(g){return g&&g.hasOwnProperty(e.Z.LOCATION_AS_ARRAY)?g[e.Z.LOCATION_AS_ARRAY].map(function(M){var C=M.__text||M,D=M.hasOwnProperty(e.Z.SERVICE_LOCATION)?M[e.Z.SERVICE_LOCATION]:null;return new Wt(C,D)}):[]},getPatchLocation:function(g){return g&&g.hasOwnProperty(e.Z.PATCH_LOCATION_AS_ARRAY)?g[e.Z.PATCH_LOCATION_AS_ARRAY].map(function(M){var C=M.__text||M,D=M.hasOwnProperty(e.Z.SERVICE_LOCATION)?M[e.Z.SERVICE_LOCATION]:null,b=M.hasOwnProperty(e.Z.TTL)?1e3*parseFloat(M[e.Z.TTL]):NaN;return new Xt(C,D,b)}):[]},getSuggestedPresentationDelay:function(g){return g&&g.hasOwnProperty(e.Z.SUGGESTED_PRESENTATION_DELAY)?g.suggestedPresentationDelay:null},getAvailabilityStartTime:function(g){return g&&g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME)&&g.availabilityStartTime!==null?g.availabilityStartTime.getTime():null},getServiceDescriptions:function(g){var M=[];if(g&&g.hasOwnProperty(e.Z.SERVICE_DESCRIPTION)){var C,D=Vt(g.ServiceDescription_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value,ne=null,z=null,oe=null,Q=null,x=null,J=null,he=null;for(var Ne in b)b.hasOwnProperty(Ne)&&(Ne===e.Z.ID?ne=b[Ne]:Ne===e.Z.SERVICE_DESCRIPTION_SCOPE?z=b[Ne].schemeIdUri:Ne===e.Z.SERVICE_DESCRIPTION_LATENCY?oe={target:parseInt(b[Ne].target),max:parseInt(b[Ne].max),min:parseInt(b[Ne].min),referenceId:parseInt(b[Ne].referenceId)}:Ne===e.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Q={max:parseFloat(b[Ne].max),min:parseFloat(b[Ne].min)}:Ne===e.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?x={mediaType:b[Ne].mediaType,max:parseInt(b[Ne].max),min:parseInt(b[Ne].min),target:parseInt(b[Ne].target),type:b[Ne].type,maxQualityDifference:parseInt(b[Ne].maxQualityDifference)}:Ne===e.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?J={mediaType:b[Ne].mediaType,max:parseInt(b[Ne].max),min:parseInt(b[Ne].min),target:parseInt(b[Ne].target)}:Ne===e.Z.CONTENT_STEERING&&(he=le(b[Ne])));M.push({id:ne,schemeIdUri:z,latency:oe,playbackRate:Q,operatingQuality:x,operatingBandwidth:J,contentSteering:he})}}catch(Te){D.e(Te)}finally{D.f()}}return M},getSegmentAlignment:function(g){return!(!g||!g.hasOwnProperty(e.Z.SEGMENT_ALIGNMENT))&&g[e.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(g){return!(!g||!g.hasOwnProperty(e.Z.SUB_SEGMENT_ALIGNMENT))&&g[e.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(g){var M={};if(g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var C,D=Vt(g.SupplementalProperty_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value;b.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(M[b[t.Z.SCHEME_ID_URI]]=yt({},b))}}catch(ne){D.e(ne)}finally{D.f()}}return M},getSupplementalPropertiesAsArrayForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&g.SupplementalProperty_asArray.length?g.SupplementalProperty_asArray.map(function(M){return new Ze().init(M)}):[]},getSupplementalPropertiesForRepresentation:function(g){var M={};if(g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var C,D=Vt(g.SupplementalProperty_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value;b.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(M[b[t.Z.SCHEME_ID_URI]]=yt({},b))}}catch(ne){D.e(ne)}finally{D.f()}}return M},getSupplementalPropertiesAsArrayForRepresentation:function(g){return g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&g.SupplementalProperty_asArray.length?g.SupplementalProperty_asArray.map(function(M){return new Ze().init(M)}):[]},setConfig:function(g){g&&(g.errHandler&&(l=g.errHandler),g.BASE64&&(E=g.BASE64))}},r=(0,m.Z)(R).getInstance().getLogger(i),i}vn.__dashjs_factory_name="DashManifestModel";var $t=_.Z.getSingletonFactory(vn),pt=P(703);function At(i,r){var l;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(l=function(L,Y){if(L){if(typeof L=="string")return Zt(L,Y);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Zt(L,Y):void 0}}(i))||r){l&&(i=l);var E=0,R=function(){};return{s:R,n:function(){return E>=i.length?{done:!0}:{done:!1,value:i[E++]}},e:function(L){throw L},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,h=!0,w=!1;return{s:function(){l=i[Symbol.iterator]()},n:function(){var L=l.next();return h=L.done,L},e:function(L){w=!0,A=L},f:function(){try{h||l.return==null||l.return()}finally{if(w)throw A}}}}function Zt(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function nn(){var i,r,l,E,R,A,h,w,L,Y,B=this.context,N=(0,p.Z)(B).getInstance(),U=(0,Ae.Z)(B).getInstance();function Z(){l={pr:1,nor:null,st:null,sf:null,sid:"".concat(pt.Z.generateUuid()),cid:null},L={},w={},Y={},te()}function ce(){te()}function te(){if(A){var b=A.getStreamController();if(b&&typeof b.getActiveStream=="function"){var ne=b.getActiveStream();ne&&(h=ne.getProcessors())}}}function ue(b,ne){var z,oe={},Q=At(ne);try{for(Q.s();!(z=Q.n()).done;){var x=z.value;b[x]&&(oe[x]=b[x])}}catch(J){Q.e(J)}finally{Q.f()}return oe}function de(b){var ne=U.get().streaming.cmcd.enabledKeys;return b.filter(function(z){return ne.includes(z)})}function G(b){try{return b.type===Le.w.MPD_TYPE?((z=ie()).ot="m",z):b.type===Le.w.MEDIA_SEGMENT_TYPE?(ne=b.mediaType,Y.hasOwnProperty(ne)||(Y[ne]=!1),w.hasOwnProperty(ne)||(w[ne]=!1),L.hasOwnProperty(ne)||(L[ne]=!1),function(oe){var Q,x=ie(),J=function(Xe){try{var Mt=Xe.quality,Ee=Xe.mediaInfo.bitrateList;return parseInt(Ee[Mt].bandwidth/1e3)}catch{return null}}(oe),he=function(Xe){try{return isNaN(Xe.duration)?NaN:Math.round(1e3*Xe.duration)}catch{return null}}(oe),Ne=function(Xe){try{return 100*parseInt(E.getThroughputHistory().getSafeAverageThroughput(Xe)/100)}catch{return null}}(oe.mediaType),Te=function(Xe){try{var Mt=l.pr,Ee=R.getCurrentBufferLevel(Xe);return isNaN(Mt)||isNaN(Ee)?null:100*parseInt(Ee/Mt*10)}catch{return null}}(oe.mediaType),Ce=j(oe.mediaType),Ie=function(Xe){try{var Mt=E.getTopBitrateInfoFor(Xe);return Math.round(Mt.bitrate/1e3)}catch{return null}}(oe.mediaType),et=l.pr,nt=function(Xe){if(h&&h.length!==0){var Mt,Ee=At(h);try{for(Ee.s();!(Mt=Ee.n()).done;){var Fe=Mt.value;if(Fe.getType()===Xe)return Fe.probeNextRequest()}}catch(lt){Ee.e(lt)}finally{Ee.f()}}}(oe.mediaType);oe.mediaType===t.Z.VIDEO&&(Q="v"),oe.mediaType===t.Z.AUDIO&&(Q="a"),oe.mediaType===t.Z.TEXT&&(Q=oe.mediaInfo.mimeType==="application/mp4"?"tt":"c");var We=U.get().streaming.cmcd.rtp;return We||(We=function(Xe){try{var Mt=A.getPlaybackRate();Mt||(Mt=1);var Ee=Xe.quality,Fe=Xe.mediaType,lt=Xe.mediaInfo,qe=Xe.duration;if(!lt)return NaN;var ht=j(Fe);ht===0&&(ht=500);var gt=lt.bitrateList[Ee].bandwidth*qe/1e3/(ht/Mt/1e3),st=U.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(U.get().streaming.cmcd.rtpSafetyFactor)?U.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(gt*st/100)+1)}catch{return NaN}}(oe)),isNaN(We)||(x.rtp=We),nt&&(oe.url!==nt.url?x.nor=encodeURIComponent(pt.Z.getRelativeUrl(oe.url,nt.url)):nt.range&&(x.nrr=nt.range)),J&&(x.br=J),Q&&(x.ot=Q),isNaN(he)||(x.d=he),isNaN(Ne)||(x.mtp=Ne),isNaN(Te)||(x.dl=Te),isNaN(Ce)||(x.bl=Ce),isNaN(Ie)||(x.tb=Ie),isNaN(et)||et===1||(x.pr=et),L[oe.mediaType]&&(x.bs=!0,L[oe.mediaType]=!1),!w[oe.mediaType]&&Y[oe.mediaType]||(x.su=!0,w[oe.mediaType]=!1,Y[oe.mediaType]=!0),x}(b)):b.type===Le.w.INIT_SEGMENT_TYPE?function(){var oe=ie();return oe.ot="i",oe.su=!0,oe}():b.type===Le.w.OTHER_TYPE||b.type===Le.w.XLINK_EXPANSION_TYPE?function(){var oe=ie();return oe.ot="o",oe}():b.type===Le.w.LICENSE?function(oe){var Q=ie();return Q.ot="k",Q}():null}catch{return null}var ne,z}function ie(){var b={},ne=U.get().streaming.cmcd.cid?U.get().streaming.cmcd.cid:l.cid;return b.v=1,b.sid=U.get().streaming.cmcd.sid?U.get().streaming.cmcd.sid:l.sid,b.sid="".concat(b.sid),ne&&(b.cid="".concat(ne)),isNaN(l.pr)||l.pr===1||l.pr===null||(b.pr=l.pr),l.st&&(b.st=l.st),l.sf&&(b.sf=l.sf),b}function j(b){try{var ne=R.getCurrentBufferLevel(b);return isNaN(ne)?null:100*parseInt(10*ne)}catch{return null}}function le(b){try{l.pr=b.playbackRate}catch{}}function g(b){try{var ne=i.getIsDynamic(b.data)?"l":"v",z=b.protocol&&b.protocol==="MSS"?"s":"d";l.st="".concat(ne),l.sf="".concat(z)}catch{}}function M(b){try{b.state&&b.mediaType&&b.state===n.Z.BUFFER_EMPTY&&(L[b.mediaType]||(L[b.mediaType]=!0),w[b.mediaType]||(w[b.mediaType]=!0))}catch{}}function C(){for(var b in L)L.hasOwnProperty(b)&&(L[b]=!0);for(var ne in w)w.hasOwnProperty(ne)&&(w[ne]=!0)}function D(b){try{if(!b)return null;var ne=Object.keys(b).sort(function(Q,x){return Q.localeCompare(x)}),z=ne.length,oe=ne.reduce(function(Q,x,J){return x==="v"&&b[x]===1||(typeof b[x]=="string"&&x!=="ot"&&x!=="sf"&&x!=="st"?Q+="".concat(x,"=").concat(JSON.stringify(b[x])):Q+="".concat(x,"=").concat(b[x]),J<z-1&&(Q+=",")),Q},"");return(oe=oe.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return r={getQueryParameter:function(b){try{if(U.get().streaming.cmcd&&U.get().streaming.cmcd.enabled){var ne=G(b),z=function(Q){try{var x=U.get().streaming.cmcd.enabledKeys;return Object.keys(Q).filter(function(J){return x.includes(J)}).reduce(function(J,he){return J[he]=Q[he],J},{})}catch{return Q}}(ne),oe=D(z);return N.trigger(_n.Z.CMCD_DATA_GENERATED,{url:b.url,mediaType:b.mediaType,cmcdData:ne,cmcdString:oe}),{key:"CMCD",value:oe}}return null}catch{return null}},getHeaderParameters:function(b){try{if(U.get().streaming.cmcd&&U.get().streaming.cmcd.enabled){var ne=G(b),z=ue(ne,de(["br","d","ot","tb"])),oe=ue(ne,de(["bl","dl","mtp","nor","nrr","su"])),Q=ue(ne,de(["bs","rtp"])),x=ue(ne,de(["cid","pr","sf","sid","st","v"])),J={"CMCD-Object":D(z),"CMCD-Request":D(oe),"CMCD-Status":D(Q),"CMCD-Session":D(x)};return N.trigger(_n.Z.CMCD_DATA_GENERATED,{url:b.url,mediaType:b.mediaType,cmcdData:ne,headers:J}),J}return null}catch{return null}},setConfig:function(b){b&&(b.abrController&&(E=b.abrController),b.dashMetrics&&(R=b.dashMetrics),b.playbackController&&(A=b.playbackController))},reset:function(){N.off(n.Z.PLAYBACK_RATE_CHANGED,le,this),N.off(n.Z.MANIFEST_LOADED,g,this),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,M,r),N.off(n.Z.PLAYBACK_SEEKED,C,r),Z()},initialize:function(){N.on(n.Z.PLAYBACK_RATE_CHANGED,le,r),N.on(n.Z.MANIFEST_LOADED,g,r),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,M,r),N.on(n.Z.PLAYBACK_SEEKED,C,r),N.on(n.Z.PERIOD_SWITCH_COMPLETED,ce,r)}},i=$t(B).getInstance(),Z(),r}nn.__dashjs_factory_name="CmcdModel";var sn=_.Z.getSingletonFactory(nn);function pn(i){return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pn(i)}function En(i,r){En=function(w,L){return new A(w,void 0,L)};var l=jn(RegExp),E=RegExp.prototype,R=new WeakMap;function A(w,L,Y){var B=l.call(this,w,L);return R.set(B,Y||R.get(w)),B}function h(w,L){var Y=R.get(L);return Object.keys(Y).reduce(function(B,N){return B[N]=w[Y[N]],B},Object.create(null))}return Yn(A,l),A.prototype.exec=function(w){var L=E.exec.call(this,w);return L&&(L.groups=h(L,this)),L},A.prototype[Symbol.replace]=function(w,L){if(typeof L=="string"){var Y=R.get(this);return E[Symbol.replace].call(this,w,L.replace(/\$<([^>]+)>/g,function(N,U){return"$"+Y[U]}))}if(typeof L=="function"){var B=this;return E[Symbol.replace].call(this,w,function(){var N=[];return N.push.apply(N,arguments),pn(N[N.length-1])!=="object"&&N.push(h(N,B)),L.apply(this,N)})}return E[Symbol.replace].call(this,w,L)},En.apply(this,arguments)}function Yn(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&Pn(i,r)}function jn(i){var r=typeof Map=="function"?new Map:void 0;return jn=function(l){if(l===null||(E=l,Function.toString.call(E).indexOf("[native code]")===-1))return l;var E;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(l))return r.get(l);r.set(l,R)}function R(){return Cn(l,arguments,Hn(this).constructor)}return R.prototype=Object.create(l.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),Pn(R,l)},jn(i)}function Cn(i,r,l){return Cn=Un()?Reflect.construct:function(E,R,A){var h=[null];h.push.apply(h,R);var w=new(Function.bind.apply(E,h));return A&&Pn(w,A.prototype),w},Cn.apply(null,arguments)}function Un(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pn(i,r){return Pn=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Pn(i,r)}function Hn(i){return Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Hn(i)}var mr="static",ir="dynamic",ur="cmsd-",zn=ur+mr,zr=ur+ir,Dr="stream",Wr=["mb","st","sf","v"],Xr={video:"v",audio:"a",text:"tt",stream:Dr},Qr=/^[-0-9]/;function Or(){var i,r,l,E,R=this.context,A=(0,p.Z)(R).getInstance();function h(){l={},E={}}function w(Z){Z&&Object.keys(Z).forEach(function(ce){Wr.includes(ce)||delete Z[ce]})}function L(Z){return!Z||Z.toLowerCase()!=="false"&&(Qr.test(Z)?parseInt(Z,10):Z.replace(/["]+/g,""))}function Y(Z){try{for(var ce={},te=Z.split(","),ue=0;ue<te.length;ue++){var de=te[ue].split("="),G=de[0],ie=L(de[1]);ce[G]=ie}return ce}catch(j){r.error("Failed to parse CMSD-Static response header value:",j)}}function B(Z){try{for(var ce={},te=Z.split(","),ue=te[te.length-1].split(";"),de=1;de<ue.length;de++){var G=ue[de].split("="),ie=G[0],j=L(G[1]);ce[ie]=j}return ce}catch(le){return r.error("Failed to parse CMSD-Dynamic response header value:",le),[]}}function N(Z){return Xr[Z]||"o"}function U(Z,ce,te){var ue=Z===mr?l:E,de=ue[ce]||{},G=ue[Dr]||{};return de[te]||G[te]}return i={setConfig:function(){},initialize:function(){},reset:function(){h()},parseResponseHeaders:function(Z,ce){for(var te=null,ue=null,de=Z.split(`\r
`),G=de.length-1;G>=0;G--){var ie=de[G].match(En(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ie&&ie.groups){var j=ie.groups.key.toLowerCase(),le=ie.groups.value;switch(j){case zn:te=Y(le),A.trigger(u.Z.CMSD_STATIC_HEADER,te);break;case zr:ue||(ue=B(le))}}}var g=Dr;return te&&te.ot?g=te.ot:ce&&(g=N(ce)),w(l[g]),w(E[g]),te&&(l[g]=Object.assign(l[g]||{},te)),ue&&(E[g]=Object.assign(E[g]||{},ue)),{static:te,dynamic:ue}},getMaxBitrate:function(Z){var ce=N(Z);return U(ir,ce,"mb")||-1},getEstimatedThroughput:function(Z){var ce=N(Z);return U(ir,ce,"etp")||null},getResponseDelay:function(Z){var ce=N(Z);return U(ir,ce,"rd")||null},getRoundTripTime:function(Z){var ce=N(Z);return U(ir,ce,"rtt")||null}},r=(0,m.Z)(R).getInstance().getLogger(i),h(),i}Or.__dashjs_factory_name="CmsdModel";var Ct=_.Z.getSingletonFactory(Or);function en(){var i,r,l=this.context,E={};function R(){r=(0,m.Z)(l).getInstance().getLogger(i)}function A(w){for(var L={},Y=0,B=0,N=0,U=0,Z=w.length,ce=0;ce<Z;++ce)Y+=w[ce].chunkDownloadTimeRelativeMS,B+=w[ce].bufferLevel,N+=w[ce].chunkDownloadTimeRelativeMS*w[ce].bufferLevel,U+=w[ce].chunkDownloadTimeRelativeMS*w[ce].chunkDownloadTimeRelativeMS;return L.m=(N-Y*B/Z)/(U-Y*Y/Z),L.b=B/Z-L.m*Y/Z,function(te){return L.m*te+L.b}}function h(w){var L,Y=!0,B=w.reduce(function(N,U){return N+U.bufferLevelAtSegmentEnd},0)/w.length;return w.forEach(function(N){Math.abs(N.bufferLevelAtSegmentEnd/N.bufferLevelAtSegmentStart)<.95&&(Y=!1),N.bufferLevelAtSegmentEnd/B<.8&&(Y=!1),L?L>N.bitrate&&(Y=!1):L=N.bitrate}),Y}return i={setup:R,addMeasurement:function(w,L,Y,B,N){w&&w.mediaType&&!E[w.mediaType]&&(E[w.mediaType]=[]);var U=w.mediaInfo.bitrateList.find(function(Z){return Z.id===w.representationId});E[w.mediaType].push({index:w.index,repId:w.representationId,mediaType:w.mediaType,requestTimeMS:B,adjustedAvailabilityStartTimeMS:w.availabilityStartTime.getTime(),segDurationMS:1e3*w.duration,chunksDurationMS:Y.reduce(function(Z,ce){return Z+ce.chunkDownloadDurationMS},0),segmentBytes:Y.reduce(function(Z,ce){return Z+ce.chunkBytes},0),bitrate:U&&U.bandwidth,bitrateList:w.mediaInfo.bitrateList,chunkMeasurements:Y,fetchDownloadDurationMS:L,throughputCapacityDelayMS:N,getEstimatedBufferLevel:A(Y.slice(1))}),E[w.mediaType].length>10&&E[w.mediaType].shift()},getThroughputCapacityDelayMS:function(w,L){var Y=E[w.mediaType]&&E[w.mediaType].slice(-3);return!Y||Y.length<3?0:h(Y)?L/4>250?250:L/4:0},getEstimatedDownloadDurationMS:function(w){var L=E[w.mediaType].slice(-1).pop(),Y=E[w.mediaType].slice(-3),B=L.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;L.bufferLevelAtSegmentStart=L.getEstimatedBufferLevel(B/2),L.bufferLevelAtSegmentEnd=L.getEstimatedBufferLevel(B);var N=h(Y),U=N?.6:.8;if(L.isBufferStable&&1.05*L.segDurationMS<L.fetchDownloadDurationMS)return L.fetchDownloadDurationMS;if(!N||L.segDurationMS<L.fetchDownloadDurationMS||L.adjustedAvailabilityStartTimeMS<=L.requestTimeMS+L.throughputCapacityDelayMS-L.segDurationMS)return .8*L.fetchDownloadDurationMS;for(var Z=L.requestTimeMS+L.throughputCapacityDelayMS-L.adjustedAvailabilityStartTimeMS,ce=0,te=0,ue=0,de=0;de<L.chunkMeasurements.length;de++){var G=L.chunkMeasurements[de];if(Z<te+G.chunkDownloadDurationMS)break;te+=G.chunkDownloadDurationMS,ce+=G.chunkBytes,ue++}if(Z<0&&r.warn("request time was before adjusted availibitly start time"),ce&&te&&ue>.2*L.chunkMeasurements.length){var ie=ce/te,j=L.segmentBytes/ie;return L.fetchDownloadDurationMS<j?L.fetchDownloadDurationMS*U:j*U}var le=L.bitrate;return L.bitrateList.some(function(g){if(g.bandwidth>L.bitrate)return le=g.bandwidth,!0}),le===L.bitrate?L.fetchDownloadDurationMS*U:U*L.segmentBytes*8*1e3/le}},R(),i}en.__dashjs_factory_name="LowLatencyThroughputModel";var fn=_.Z.getSingletonFactory(en),Ln=P(5717);function Tn(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Bn(i){i=i||{};var r,l,E,R,A,h,w,L,Y,B,N,U=this.context,Z=i.errHandler,ce=i.dashMetrics,te=i.mediaPlayerModel,ue=i.requestModifier,de=i.boxParser,G=i.errors,ie=i.requestTimeout||0,j=(0,p.Z)(U).getInstance(),le=(0,Ae.Z)(U).getInstance();function g(M,C){var D,b=M.request,ne=[],z=!0,oe=!0,Q=new Date,x=Q,J=0,he=null,Ne=null;if(!ue||!ce||!Z)throw new Error("config object is not correct or missing");var Te,Ce=function(ht){b.requestStartDate=Q,b.requestEndDate=new Date,b.firstByteDate=b.firstByteDate||Q,b.fileLoaderType=Ne;var gt=D.response?D.response.responseURL:null,st=D.response?D.response.status:null,qt=D.response&&D.response.getAllResponseHeaders?D.response.getAllResponseHeaders():D.response?D.response.responseHeaders:null,Gt=qt&&le.get().streaming.cmsd&&le.get().streaming.cmsd.enabled?w.parseResponseHeaders(qt,b.mediaType):null;ce.addHttpRequest(b,gt,st,qt,ht?ne:null,Gt)},Ie=function(ht){oe=!1,Ce(ht),b.type===Le.w.MPD_TYPE&&(ce.addManifestUpdate(b),j.trigger(u.Z.MANIFEST_LOADING_FINISHED,{request:b}))},et=function(){if(he&&(clearTimeout(he),he=null),l.indexOf(D)!==-1&&(l.splice(l.indexOf(D),1),oe))if(Ie(!1),C>0){try{le.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&b.type===Le.w.MEDIA_SEGMENT_TYPE&&te.getRetryAttemptsForType(Le.w.MEDIA_SEGMENT_TYPE)===C&&j.trigger(u.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}C--;var ht={config:M};R.push(ht),ht.timeout=setTimeout(function(){R.indexOf(ht)!==-1&&(R.splice(R.indexOf(ht),1),g(M,C))},te.getRetryIntervalsForType(b.type))}else{if(b.type===Le.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;Z.error(new re.Z(A[b.type],b.url+" is not available",{request:b,response:D.response})),M.error&&M.error(b,"error",D.response.statusText,D.response),M.complete&&M.complete(b,D.response.statusText)}};b.hasOwnProperty("availabilityTimeComplete")&&b.availabilityTimeComplete===!1&&window.fetch&&b.responseType==="arraybuffer"&&b.type===Le.w.MEDIA_SEGMENT_TYPE?((Te=An(U).create({requestModifier:ue,lowLatencyThroughputModel:Y,boxParser:de})).setup({dashMetrics:ce}),Ne=t.Z.FILE_LOADER_TYPES.FETCH):(Te=(0,Ft.Z)(U).create({requestModifier:ue}),Ne=t.Z.FILE_LOADER_TYPES.XHR);var nt=null,We=ue.modifyRequestURL?ue.modifyRequestURL(b.url):b.url;if(le.get().streaming.cmcd&&le.get().streaming.cmcd.enabled){var Xe=le.get().streaming.cmcd.mode;if(Xe===t.Z.CMCD_MODE_QUERY){var Mt=function(ht){try{var gt=[],st=h.getQueryParameter(ht);return st&&gt.push(st),gt}catch{return[]}}(b);We=pt.Z.addAditionalQueryParameterToUrl(We,Mt)}else Xe===t.Z.CMCD_MODE_HEADER&&(nt=h.getHeaderParameters(b))}var Ee=L.getXHRWithCredentialsForType(b.type);if(b.queryParams){var Fe=Object.keys(b.queryParams).map(function(ht){return{key:ht,value:b.queryParams[ht]}});We=pt.Z.addAditionalQueryParameterToUrl(We,Fe)}b.url=We,D={url:We,method:Le.w.GET,withCredentials:Ee,request:b,onload:function(){D.response.status>=200&&D.response.status<=299&&(Ie(!0),M.success&&M.success(D.response.response,D.response.statusText,D.response.responseURL),M.complete&&M.complete(b,D.response.statusText))},onend:et,onerror:et,progress:function(ht){var gt=new Date;z&&(z=!1,(!ht.lengthComputable||ht.lengthComputable&&ht.total!==ht.loaded)&&(b.firstByteDate=gt)),ht.lengthComputable&&(b.bytesLoaded=ht.loaded,b.bytesTotal=ht.total),ht.noTrace||(ne.push({s:x,d:ht.time?ht.time:gt.getTime()-x.getTime(),b:[ht.loaded?ht.loaded-J:0]}),x=gt,J=ht.loaded),he&&(clearTimeout(he),he=null),le.get().streaming.fragmentRequestProgressTimeout>0&&(he=setTimeout(function(){B.warn("Abort request "+D.url+" due to progress timeout"),D.response.onabort=null,D.loader.abort(D),et()},le.get().streaming.fragmentRequestProgressTimeout)),M.progress&&ht&&M.progress(ht)},onabort:function(){Ce(!0),he&&(clearTimeout(he),he=null),M.abort&&M.abort(b)},ontimeout:function(ht){var gt;if(ht.lengthComputable){var st=ht.loaded/ht.total*100;gt="Request timeout: loaded: "+ht.loaded+", out of: "+ht.total+" : "+st.toFixed(3)+"% Completed"}else gt="Request timeout: non-computable download size";B.warn(gt)},loader:Te,timeout:ie,headers:nt};var lt=new Date().getTime();if(isNaN(b.delayLoadingTime)||lt>=b.delayLoadingTime)l.push(D),Te.load(D);else{var qe={httpRequest:D};E.push(qe),qe.delayTimeout=setTimeout(function(){if(E.indexOf(qe)!==-1){E.splice(E.indexOf(qe),1);try{Q=new Date,x=Q,l.push(qe.httpRequest),Te.load(qe.httpRequest)}catch{qe.httpRequest.onerror()}}},b.delayLoadingTime-lt)}}return r={load:function(M){M.request?g(M,te.getRetryAttemptsForType(M.request.type)):M.error&&M.error(M.request,"error")},abort:function(){R.forEach(function(M){clearTimeout(M.timeout),M.config.request&&M.config.abort&&M.config.abort(M.config.request)}),R=[],E.forEach(function(M){return clearTimeout(M.delayTimeout)}),E=[],l.forEach(function(M){M.request.type!==Le.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(M.onloadend=M.onerror=M.onprogress=void 0,M.loader.abort(M))}),l=[]}},B=(0,m.Z)(U).getInstance().getLogger(r),l=[],E=[],R=[],h=sn(U).getInstance(),w=Ct(U).getInstance(),Y=fn(U).getInstance(),L=(0,Ln.Z)(U).getInstance(),Tn(N={},Le.w.MPD_TYPE,G.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Tn(N,Le.w.XLINK_EXPANSION_TYPE,G.DOWNLOAD_ERROR_ID_XLINK_CODE),Tn(N,Le.w.INIT_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Tn(N,Le.w.MEDIA_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),Tn(N,Le.w.INDEX_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),Tn(N,Le.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),Tn(N,Le.w.OTHER_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),A=N,r}Bn.__dashjs_factory_name="HTTPLoader";var wn=_.Z.getClassFactory(Bn);function tr(){var i;function r(){i={}}function l(){r()}return l(),{getLoader:function(E){for(var R in i)if(i.hasOwnProperty(R)&&E.startsWith(R))return i[R];return wn},registerLoader:function(E,R){i[E]=R},unregisterLoader:function(E){i[E]&&delete i[E]},unregisterAllLoader:r,reset:l}}tr.__dashjs_factory_name="SchemeLoaderFactory";var kn=_.Z.getSingletonFactory(tr);function Dn(i){i=i||{};var r,l,E=this.context;return r=kn(E).getInstance(),{load:function(R){if(!l){var A=r.getLoader(R&&R.request?R.request.url:null);l=A(E).create({errHandler:i.errHandler,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,dashMetrics:i.dashMetrics,boxParser:i.boxParser?i.boxParser:null,constants:i.constants?i.constants:null,dashConstants:i.dashConstants?i.dashConstants:null,urlUtils:i.urlUtils?i.urlUtils:null,requestTimeout:isNaN(i.requestTimeout)?0:i.requestTimeout,errors:i.errors})}l.load(R)},abort:function(){l&&l.abort()}}}Dn.__dashjs_factory_name="URLLoader";var Wn=_.Z.getClassFactory(Dn);function Xn(i){return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xn(i)}function lr(i,r){return lr=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},lr(i,r)}function ar(i,r){return!r||Xn(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function cr(i){return cr=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},cr(i)}var pr=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&lr(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=cr(r);if(l){var w=cr(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return ar(this,A)});function R(A){var h;return function(w,L){if(!(w instanceof L))throw new TypeError("Cannot call a class as a function")}(this,R),(h=E.call(this,A)).checkForExistenceOnly=!0,h}return R}(I.Z);function qr(i){i=i||{};var r,l,E=this.context,R=i.eventBus,A=i.events,h=i.urlUtils,w=i.errors,L=i.streamId;return r={checkForExistence:function(Y){var B=function(U){R.trigger(A.CHECK_FOR_EXISTENCE_COMPLETED,{request:Y,exists:U})};if(Y){var N=new pr(Y.url);l.load({request:N,success:function(){B(!0)},error:function(){B(!1)}})}else B(!1)},load:function(Y){var B=function(N,U){R.trigger(A.LOADING_COMPLETED,{request:Y,response:N||null,error:U||null,sender:r})};Y?l.load({request:Y,progress:function(N){R.trigger(A.LOADING_PROGRESS,{request:Y,stream:N.stream,streamId:L}),N.data&&R.trigger(A.LOADING_DATA_PROGRESS,{request:Y,response:N.data||null,error:null,sender:r})},success:function(N){B(N)},error:function(N,U,Z){B(void 0,new re.Z(w.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,Z,U))},abort:function(N){N&&R.trigger(A.LOADING_ABANDONED,{mediaType:N.mediaType,request:N,sender:r})}}):B(void 0,new re.Z(w.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,w.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){l&&l.abort()},reset:function(){l&&(l.abort(),l=null)}},l=Wn(E).create({errHandler:i.errHandler,errors:w,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,urlUtils:h,constants:t.Z,boxParser:i.boxParser,dashConstants:i.dashConstants,requestTimeout:i.settings.get().streaming.fragmentRequestTimeout}),r}qr.__dashjs_factory_name="FragmentLoader";var Mr=_.Z.getClassFactory(qr);function Pr(){return{modifyResponseAsync:function(i){return Promise.resolve(i)}}}Pr.__dashjs_factory_name="SegmentResponseModifier";var Jr=_.Z.getSingletonFactory(Pr);function $r(i){i=i||{};var r,l,E,R=this.context,A=(0,p.Z)(R).getInstance(),h=i.errHandler,w=i.mediaPlayerModel,L=i.dashMetrics,Y=(0,m.Z)(R).getInstance(),B=Jr(R).getInstance(),N=i.streamInfo;function U(){return N.id}function Z(){for(var te in E)E[te].reset();E={}}function ce(te){if(te.sender){var ue=te.request,de=te.response,G=ue.isInitializationRequest(),ie=ue.mediaInfo.streamInfo;if(te.error&&(ue.mediaType===t.Z.AUDIO||ue.mediaType===t.Z.VIDEO||ue.mediaType===t.Z.TEXT&&ue.mediaInfo.isFragmented)&&A.trigger(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:te.request.serviceLocation}),de&&ie){var j=function(le,g,M,C){var D=new It;return D.streamId=M,D.mediaInfo=g.mediaInfo,D.segmentType=g.type,D.start=g.startTime,D.duration=g.duration,D.end=D.start+D.duration,D.bytes=le,D.index=g.index,D.quality=g.quality,D.representationId=g.representationId,D.endFragment=C,D}(de,ue,N.id,te.type!==u.Z.FRAGMENT_LOADING_PROGRESS);B.modifyResponseAsync(j).then(function(le){A.trigger(G?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:le,request:ue},{streamId:ie.id,mediaType:ue.mediaType})}).catch(function(le){l.error(le),A.trigger(G?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:j,request:ue},{streamId:ie.id,mediaType:ue.mediaType})})}else l.warn("No "+ue.mediaType+" bytes to push or stream is inactive.")}}return r={getStreamId:U,getModel:function(te){var ue=E[te];return ue||(ue=K(R).create({streamInfo:N,type:te,dashMetrics:L,fragmentLoader:Mr(R).create({dashMetrics:L,mediaPlayerModel:w,errHandler:h,requestModifier:(0,Se.Z)(R).getInstance(),settings:i.settings,boxParser:i.boxParser,eventBus:A,events:u.Z,errors:X,dashConstants:i.dashConstants,urlUtils:i.urlUtils,streamId:U()}),debug:Y,eventBus:A,events:u.Z}),E[te]=ue),ue},reset:function(){A.off(n.Z.FRAGMENT_LOADING_COMPLETED,ce,this),A.off(n.Z.FRAGMENT_LOADING_PROGRESS,ce,this),Z()}},l=Y.getLogger(r),Z(),A.on(n.Z.FRAGMENT_LOADING_COMPLETED,ce,r),A.on(n.Z.FRAGMENT_LOADING_PROGRESS,ce,r),r}$r.__dashjs_factory_name="FragmentController";var Ai=_.Z.getClassFactory($r),Ii=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},ei=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ti(i){var r,l,E=this.context,R=i.streamInfo;function A(w){l.setTrackByIndex(w)}function h(){l&&l.reset()}return r={getStreamId:function(){return R.id},initialize:function(){l.addTracks();var w=l.getTracks();w&&w.length>0&&A(0)},provide:function(w,L){if(typeof L=="function"){var Y,B,N=l.getCurrentTrack();if(!N||N.segmentDuration<=0||w==null)L(null);else{(B=l.getThumbnailRequestForTime(w))&&(N.segmentDuration=B.duration),Y=w%N.segmentDuration;var U=Math.floor(Y*N.tilesHor*N.tilesVert/N.segmentDuration),Z=new Ii;if(Z.width=Math.floor(N.widthPerTile),Z.height=Math.floor(N.heightPerTile),Z.x=Math.floor(U%N.tilesHor)*N.widthPerTile,Z.y=Math.floor(U/N.tilesHor)*N.heightPerTile,"readThumbnail"in N)return N.readThumbnail(w,function(te){Z.url=te,L(Z)});if(B)Z.url=B.url,N.segmentDuration=NaN;else{var ce=Math.floor(w/N.segmentDuration);Z.url=function(te,ue){var de=ue+te.startNumber,G=(0,o.vi)(te.templateUrl,"Number",de);return G=(0,o.vi)(G,"Time",(de-1)*te.segmentDuration*te.timescale),G=(0,o.vi)(G,"Bandwidth",te.bandwidth),(0,o.eR)(G)}(N,ce)}L(Z)}}},setTrackByIndex:A,getCurrentTrackIndex:function(){return l.getCurrentTrackIndex()},getBitrateList:function(){var w=l.getTracks(),L=0;return w.map(function(Y){var B=new ei;return B.mediaType=t.Z.IMAGE,B.qualityIndex=L++,B.bitrate=Y.bitrate,B.width=Y.width,B.height=Y.height,B})},reset:h},h(),l=(0,Lt.Z)(E).create({streamInfo:R,adapter:i.adapter,baseURLController:i.baseURLController,timelineConverter:i.timelineConverter,debug:i.debug,eventBus:i.eventBus,events:i.events,dashConstants:i.dashConstants,dashMetrics:i.dashMetrics,segmentBaseController:i.segmentBaseController}),r}ti.__dashjs_factory_name="ThumbnailController";var Ri=_.Z.getClassFactory(ti),Yr=P(7417);function ni(i){var r;i=i||{};var l=[],E=(0,p.Z)(this.context).getInstance(),R=i.updateEventName,A=i.addBlacklistEventName;function h(w){l.indexOf(w)===-1&&(l.push(w),E.trigger(R,{entry:w}))}return r={add:h,contains:function(w){return!!(l.length&&w&&w.length)&&l.indexOf(w)!==-1},reset:function(){l=[]}},A&&E.on(A,function(w){h(w.entry)},r),r}ni.__dashjs_factory_name="BlackListController";var Lr=_.Z.getClassFactory(ni),wi=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT,t.Z.MUXED,t.Z.IMAGE];function Nn(i){i=i||{};var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie=this.context,j=(0,p.Z)(ie).getInstance(),le=(0,ze.Z)(ie).getInstance(),g=i.manifestModel,M=i.mediaPlayerModel,C=i.dashMetrics,D=i.manifestUpdater,b=i.adapter,ne=i.timelineConverter,z=i.capabilities,oe=i.errHandler,Q=i.abrController,x=i.playbackController,J=i.eventController,he=i.mediaController,Ne=i.protectionController,Te=i.textController,Ce=i.videoModel,Ie=i.streamInfo,et=i.settings;function nt(ut,Dt){return new Promise(function(xt,kt){gt(),B=!0,qt();var jt=Ce.getElement(),Ge=[];wi.forEach(function(Re){(Re!==t.Z.TEXT||ut)&&(Re!==t.Z.VIDEO||!jt||jt&&/^VIDEO$/i.test(jt.nodeName))&&Ge.push(We(Re,ut))}),Promise.all(Ge).then(function(){return Re=Dt,new Promise(function(rt){var fe={},pe=E.map(function(Ve){return Ve.createBufferSinks(Re)});Promise.all(pe).then(function(Ve){Ve.forEach(function(St){St&&(fe[St.getType()]=St)}),rt(fe)}).catch(function(){rt(fe)})});var Re}).then(function(Re){if(B=!1,E.length===0){var rt="No streams to play.";oe.error(new re.Z(X.MANIFEST_ERROR_ID_NOSTREAMS_CODE,rt,g.getValue())),l.fatal(rt)}else Gt();ut&&Te.createTracks(Ie),xt(Re)}).catch(function(Re){kt(Re)})})}function We(ut,Dt){var xt,kt=b.getAllMediaInfoForType(Ie,ut),jt=[],Ge=null;if(!kt||kt.length===0)return l.info("No "+ut+" data."),Promise.resolve();ut===t.Z.VIDEO&&(w=!0),ut===t.Z.AUDIO&&(L=!0);for(var Re=0,rt=kt.length;Re<rt;Re++)Ge=kt[Re],ut===t.Z.TEXT&&Ge.isEmbedded&&(Te.addEmbeddedTrack(Ie,Ge),jt.push(Ge)),Xe(Ge)&&he.addTrack(Ge);if(jt.length>0&&(he.setInitialMediaSettingsForType(ut,Ie),Te.addMediaInfosToBuffer(Ie,ut,jt)),kt=kt.filter(function(pe){return!pe.isEmbedded}),kt.length===0)return Promise.resolve();if(ut===t.Z.IMAGE)return(U=Ri(ie).create({streamInfo:Ie,adapter:b,baseURLController:i.baseURLController,timelineConverter:i.timelineConverter,debug:ue,eventBus:j,events:u.Z,dashConstants:e.Z,dashMetrics:i.dashMetrics,segmentBaseController:i.segmentBaseController})).initialize(),Promise.resolve();j.trigger(u.Z.STREAM_INITIALIZING,{streamInfo:Ie,mediaInfo:Ge}),he.setInitialMediaSettingsForType(ut,Ie);var fe=function(pe,Ve){var St=pe&&pe.length>0?pe[0]:null,Nt=N.getModel(St?St.type:null),ln=St?St.type:null,bn=St?St.mimeType:null,Zn=St?St.isFragmented:null,Sn=Ut(ie).create({streamInfo:Ie,type:ln,mimeType:bn,timelineConverter:ne,adapter:b,manifestModel:g,mediaPlayerModel:M,fragmentModel:Nt,dashMetrics:i.dashMetrics,baseURLController:i.baseURLController,segmentBaseController:i.segmentBaseController,abrController:Q,playbackController:x,mediaController:he,textController:Te,errHandler:oe,settings:et,boxParser:te,segmentBlacklistController:Z});Sn.initialize(Ve,w,Zn),E.push(Sn);for(var Jn=0;Jn<pe.length;Jn++)Sn.addMediaInfo(pe[Jn]);return ln===t.Z.TEXT&&Te.addMediaInfosToBuffer(Ie,ln,pe,Nt),Sn}(kt,Dt);return(xt=he.getCurrentTrackFor(ut,Ie.id))?(Q.updateTopQualityIndex(xt),fe.selectMediaInfo(ut===t.Z.TEXT&&xt.isEmbedded?kt[0]:xt)):Promise.resolve()}function Xe(ut){var Dt,xt=ut?ut.type:null;return xt===t.Z.MUXED?(Dt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",l.fatal(Dt),oe.error(new re.Z(X.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Dt,g.getValue())),!1):!(xt!==t.Z.TEXT&&xt!==t.Z.IMAGE&&ut.contentProtection&&!z.supportsEncryptedMedia()&&(oe.error(new re.Z(X.CAPABILITY_MEDIAKEYS_ERROR_CODE,X.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Mt(ut){for(var Dt=E?E.length:0,xt=0;xt<Dt;xt++){var kt=E[xt].getFragmentModel();kt.abortRequests(),kt.resetInitialSettings(),E[xt].reset(!1,ut)}Te&&Te.deactivateStream(Ie),E=[],A=!1,h=!1,Kt(!1),Fe(!1),j.trigger(u.Z.STREAM_DEACTIVATED,{streamInfo:Ie})}function Ee(ut){Mt(ut),R=!1,w=!1,L=!1,Y={},B=!1,de=!1,G=[]}function Fe(ut){de=ut}function lt(){return Ie?Ie.start:NaN}function qe(){return Ie?Ie.id:null}function ht(){return Ie}function gt(){if(!Ce||!Q)throw new Error(t.Z.MISSING_CONFIG_ERROR)}function st(ut){ut.error&&(oe.error(ut.error),l.fatal(ut.error.message))}function qt(){if(J){var ut=b.getEventsFor(Ie);ut&&ut.length>0&&J.addInlineEvents(ut,Ie.id)}}function Gt(){for(var ut=E.length,Dt=Y.audio||Y.video?new re.Z(X.DATA_UPDATE_FAILED_ERROR_CODE,X.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,xt=0;xt<ut;xt++)if(E[xt].isUpdating()||B)return;if(Ne){Ne.clearMediaInfoArray();for(var kt=0;kt<ut&&E[kt];kt++){var jt=E[kt].getType(),Ge=E[kt].getMediaInfo();if(jt===t.Z.AUDIO||jt===t.Z.VIDEO||jt===t.Z.TEXT&&Ge.isFragmented){var Re=E[kt].getMediaInfo();Re&&Ne.initializeForMedia(Re)}}Ne.handleKeySystemFromManifest()}Dt?oe.error(Dt):R||(R=!0,Ce.waitForReadyState(t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){j.trigger(u.Z.STREAM_INITIALIZED,{streamInfo:Ie})}))}function an(){var ut=vt(),Dt=ut.length;if(Dt!==0){for(var xt=0;xt<Dt;xt++)if(!ut[xt].isBufferingCompleted()&&(ut[xt].getType()===t.Z.AUDIO||ut[xt].getType()===t.Z.VIDEO))return void l.debug("onBufferingCompleted - One streamProcessor has finished but",ut[xt].getType(),"one is not buffering completed");l.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),h=!0,j.trigger(u.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:Ie},{streamInfo:Ie})}else l.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function un(ut){Y[ut.mediaType]=ut.error,Gt()}function Be(ut){J&&J.addInbandEvents(ut.events,Ie.id)}function ft(ut){return ut&&ut.type?$e(ut.type):null}function $e(ut){return ut?vt().filter(function(Dt){return Dt.getType()===ut})[0]:null}function vt(){for(var ut,Dt,xt=[],kt=0;kt<E.length;kt++)(ut=(Dt=E[kt]).getType())!==t.Z.AUDIO&&ut!==t.Z.VIDEO&&ut!==t.Z.TEXT||xt.push(Dt);return xt}function wt(ut,Dt){var xt=ht(),kt=Dt.getStreamInfo();if(!kt||!xt)return!0;var jt=b.getAdaptationForType(kt.index,ut,kt),Ge=b.getAdaptationForType(xt.index,ut,xt);return jt&&Ge?!(!Ht(Ge)&&Ht(jt)):!jt&&!Ge}function Ht(ut){return!!ut&&!!(ut.ContentProtection||ut.Representation_asArray&&ut.Representation_asArray.length>0&&ut.Representation_asArray[0].ContentProtection)}function Yt(ut,Dt){var xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!ut||!ut.hasOwnProperty("getStreamInfo"))return!1;var kt=ut.getStreamInfo(),jt=xt?xt.getStreamInfo():ht();if(!kt||!jt)return!1;var Ge=b.getAdaptationForType(kt.index,Dt,kt),Re=b.getAdaptationForType(jt.index,Dt,jt);if(!Ge||!Re)return!Ge&&!Re;var rt=Ge&&Re&&Ge.mimeType===Re.mimeType,fe=Re.Representation_asArray.map(function(Nt){return Nt.codecs}),pe=Ge.Representation_asArray.map(function(Nt){return Nt.codecs}),Ve=pe.some(function(Nt){return fe.indexOf(Nt)>-1}),St=pe.some(function(Nt){return fe.some(function(ln){return z.codecRootCompatibleWithCodec(ln,Nt)})});return Ve||St&&rt}function Kt(ut){ce=ut}function Jt(){return ce}return r={initialize:function(){j.on(u.Z.BUFFERING_COMPLETED,an,r),j.on(u.Z.DATA_UPDATE_COMPLETED,un,r),j.on(u.Z.INBAND_EVENTS,Be,r),Ne&&(j.on(u.Z.KEY_ERROR,st,r),j.on(u.Z.SERVER_CERTIFICATE_UPDATED,st,r),j.on(u.Z.LICENSE_REQUEST_COMPLETE,st,r),j.on(u.Z.KEY_SYSTEM_SELECTED,st,r),j.on(u.Z.KEY_SESSION_CREATED,st,r),j.on(u.Z.KEY_STATUSES_CHANGED,st,r)),Te.initializeForStream(Ie),j.trigger(u.Z.STREAM_UPDATED,{streamInfo:Ie})},getStreamId:function(){return Ie?Ie.id:null},activate:function(ut,Dt){return new Promise(function(xt,kt){if(!A)return Jt()?(A=!0,j.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:Ie}),void xt(Dt)):void function(jt,Ge){return nt(jt,Ge)}(ut,Dt).then(function(jt){A=!0,j.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:Ie}),xt(jt)}).catch(function(jt){kt(jt)});xt(Dt)})},deactivate:Mt,getIsActive:function(){return A},getDuration:function(){return Ie?Ie.duration:NaN},getStartTime:lt,getId:qe,getStreamInfo:ht,getHasAudioTrack:function(){return L},getHasVideoTrack:function(){return w},startPreloading:function(ut,Dt){return new Promise(function(xt,kt){Jt()?kt():(l.info("[startPreloading] Preloading next stream with id ".concat(qe())),Kt(!0),nt(ut,Dt).then(function(){for(var jt=0;jt<E.length&&E[jt];jt++)E[jt].setExplicitBufferingTime(lt()),E[jt].getScheduleController().startScheduleTimer();xt()}).catch(function(){Kt(!1),kt()}))})},initializeForTextWithMediaSource:function(ut){return new Promise(function(Dt,xt){We(t.Z.TEXT,ut).then(function(){return(kt=$e(t.Z.TEXT))?kt.createBufferSinks():Promise.resolve();var kt}).then(function(){Te.createTracks(Ie),Dt()}).catch(function(kt){xt(kt)})})},getThumbnailController:function(){return U},getBitrateListFor:function(ut){if(gt(),ut===t.Z.IMAGE)return U?U.getBitrateList():[];var Dt=function(xt){for(var kt=null,jt=0;jt<E.length;jt++)if((kt=E[jt]).getType()===xt)return kt.getMediaInfo();return null}(ut);return Q.getBitrateList(Dt)},updateData:function(ut){return new Promise(function(Dt){B=!0,Ie=ut,J&&qt();for(var xt=[],kt=0,jt=E.length;kt<jt;kt++){var Ge=E[kt],Re=Ge.getMediaInfo();xt.push(Ge.updateStreamInfo(Ie));var rt=b.getAllMediaInfoForType(Ie,Ge.getType());if(rt=rt.filter(function(Ve){return!Ve.isEmbedded})){Ge.clearMediaInfoArray();for(var fe=0;fe<rt.length;fe++){var pe=rt[fe];Ge.addMediaInfo(rt[fe]),b.areMediaInfosEqual(Re,pe)&&(Q.updateTopQualityIndex(pe),xt.push(Ge.selectMediaInfo(pe)))}}}Promise.all(xt).then(function(){for(xt=[];G.length>0;){var Ve=G.pop(),St=Ve.newMediaInfo,Nt=ft(Ve.oldMediaInfo);if(!Nt)return;xt.push(Nt.prepareTrackSwitch()),xt.push(Nt.selectMediaInfo(St))}return Promise.all(xt)}).then(function(){B=!1,Gt(),j.trigger(u.Z.STREAM_UPDATED,{streamInfo:Ie}),Dt()})})},reset:function(ut){N&&(N.reset(),N=null),Q&&Ie&&Q.clearDataForStream(Ie.id),Z&&(Z.reset(),Z=null),Ee(ut),Ie=null,j.off(u.Z.DATA_UPDATE_COMPLETED,un,r),j.off(u.Z.BUFFERING_COMPLETED,an,r),j.off(u.Z.INBAND_EVENTS,Be,r),Ne&&(j.off(u.Z.KEY_ERROR,st,r),j.off(u.Z.SERVER_CERTIFICATE_UPDATED,st,r),j.off(u.Z.LICENSE_REQUEST_COMPLETE,st,r),j.off(u.Z.KEY_SYSTEM_SELECTED,st,r),j.off(u.Z.KEY_SESSION_CREATED,st,r),j.off(u.Z.KEY_STATUSES_CHANGED,st,r))},getProcessors:vt,setMediaSource:function(ut){return new Promise(function(Dt,xt){for(var kt=[],jt=0;jt<E.length;)Xe(E[jt].getMediaInfo())?(kt.push(E[jt].setMediaSource(ut)),jt++):(E[jt].reset(),E.splice(jt,1));Promise.all(kt).then(function(){for(var Ge=0;Ge<E.length;Ge++)E[Ge].dischargePreBuffer();if(E.length===0){var Re="No streams to play.";oe.error(new re.Z(X.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Re+"nostreams",g.getValue())),l.fatal(Re)}Dt()}).catch(function(Ge){l.error(Ge),xt(Ge)})})},isMediaCodecCompatible:function(ut){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Yt(ut,t.Z.VIDEO,Dt)&&Yt(ut,t.Z.AUDIO,Dt)},isProtectionCompatible:function(ut){return!ut||wt(t.Z.VIDEO,ut)&&wt(t.Z.AUDIO,ut)},getPreloaded:Jt,getIsEndedEventSignaled:function(){return de},setIsEndedEventSignaled:Fe,getAdapter:function(){return b},getHasFinishedBuffering:function(){return h},setPreloaded:Kt,startScheduleControllers:function(){for(var ut=E.length,Dt=0;Dt<ut&&E[Dt];Dt++)E[Dt].getScheduleController().startScheduleTimer()},prepareTrackChange:function(ut){if(A&&Ie){h=!1;var Dt=ut.newMediaInfo,xt=g.getValue();b.setCurrentMediaInfo(Ie.id,Dt.type,Dt);var kt=ft(Dt);if(kt){var jt=x.getTime();l.info("Stream -  Process track changed at current time "+jt),xt.refreshManifestOnSwitchTrack?(G.push(ut),D.getIsUpdating()||(l.debug("Stream -  Refreshing manifest for switch track"),D.refreshManifest())):kt.selectMediaInfo(Dt).then(function(){Dt.type!==t.Z.VIDEO&&Dt.type!==t.Z.AUDIO||Q.updateTopQualityIndex(Dt),kt.prepareTrackSwitch()})}}},prepareQualityChange:function(ut){var Dt=$e(ut.mediaType);Dt&&Dt.prepareQualityChange(ut)}},function(){try{ue=(0,m.Z)(ie).getInstance(),l=ue.getLogger(r),Ee(),te=(0,Yr.Z)(ie).getInstance(),Z=Lr(ie).create({updateEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),N=Ai(ie).create({streamInfo:Ie,mediaPlayerModel:M,dashMetrics:C,errHandler:oe,settings:et,boxParser:te,dashConstants:e.Z,urlUtils:le})}catch(ut){throw ut}}(),r}Nn.__dashjs_factory_name="Stream";var Tr=_.Z.getClassFactory(Nn),Fr=function i(r){(function(l,E){if(!(l instanceof E))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||null,this.type=Le.w.CONTENT_STEERING_TYPE,this.responseType="json"},Sr=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function ri(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te=this.context,ue=(0,ze.Z)(te).getInstance();function de(Q){g(Q,"baseUrl")}function G(Q){g(Q,"location")}function ie(Q){if(Q&&Q.request&&Q.request.serviceLocation&&Q.request.requestStartDate&&Q.request.requestEndDate&&!isNaN(Q.request.bytesTotal)){var x=Q.request.serviceLocation,J=Q.request.requestEndDate.getTime()-Q.request.requestStartDate.getTime();le(x,parseInt(8*Q.request.bytesTotal/J*1e3))}}function j(Q){Q&&Q.httpRequest&&Q.httpRequest._serviceLocation&&!isNaN(Q.throughput)&&le(Q.httpRequest._serviceLocation,1e3*Q.throughput)}function le(Q,x){R[Q]||(R[Q]=[]),R[Q].push(x),R[Q].length>4&&R[Q].shift()}function g(Q,x){if(Q&&Q.request&&Q.request.serviceLocation){var J=Q.request.serviceLocation;E[x].all.indexOf(J)===-1&&E[x].all.push(J),E[x].current=J}}function M(){var Q=B.getValue(),x=ce.getContentSteering(Q);return x||(x=U.getServiceDescriptionSettings().contentSteering),x}function C(){return new Promise(function(Q){try{var x=M();if(!x||!x.serverUrl)return void Q();var J=function(Ne){var Te=Ne.serverUrl;l&&l.reloadUri&&(Te=ue.isRelative(l.reloadUri)?ue.resolve(l.reloadUri,Ne.serverUrl):l.reloadUri);var Ce=[],Ie=E.baseUrl.all.concat(E.location.all);if(Ie.length>0){var et=Ie.map(function(Xe){var Mt=function(Ee){if(!Ee||!R[Ee]||R[Ee].length===0)return-1;var Fe=R[Ee].reduce(function(lt,qe){return lt+qe})/R[Ee].length;return parseInt(Fe)}(Xe);return{serviceLocation:Xe,throughput:Mt}});et.sort(function(Xe,Mt){return Mt.throughput-Xe.throughput});var nt="",We="";et.forEach(function(Xe,Mt){Mt!==0&&(nt="".concat(nt,","),Xe.throughput>-1&&(We="".concat(We,","))),nt="".concat(nt).concat(Xe.serviceLocation),Xe.throughput>-1&&(We="".concat(We).concat(Xe.throughput))}),Ce.push({key:"_DASH_pathway",value:'"'.concat(nt,'"')}),Ce.push({key:"_DASH_throughput",value:We})}return Te=pt.Z.addAditionalQueryParameterToUrl(Te,Ce)}(x),he=new Fr(J);h.load({request:he,success:function(Ne){(function(Te){Te&&Te[e.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(Te[e.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((l=new Sr).version=Te[e.Z.CONTENT_STEERING_RESPONSE.VERSION],Te[e.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Te[e.Z.CONTENT_STEERING_RESPONSE.TTL])&&(l.ttl=Te[e.Z.CONTENT_STEERING_RESPONSE.TTL]),Te[e.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(l.reloadUri=Te[e.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Te[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(l.pathwayPriority=Te[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),Te[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(l.pathwayClones=Te[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],l.pathwayClones=l.pathwayClones.filter(function(Ce){return function(Ie){return Ie[e.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&Ie[e.Z.CONTENT_STEERING_RESPONSE.ID]&&Ie[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&Ie[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.HOST]}(Ce)})),ne())})(Ne),Z.trigger(n.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:l,url:J}),Q()},error:function(Ne,Te,Ce,Ie){(function(et,nt){try{switch(r.warn("Error fetching data from content steering server",et),nt.status){case 410:break;case 429:var We=nt&&nt.getResponseHeader?nt.getResponseHeader("retry-after"):null;We!==null&&(l||(l={}),l.ttl=parseInt(We)),ne();break;default:ne()}}catch(Xe){r.error(Xe)}})(Ne,Ie),Q(Ne)},complete:function(){E.baseUrl.all=D(E.baseUrl),E.location.all=D(E.location)}})}catch(Ne){Q(Ne)}})}function D(Q){return Q.all&&Q.all.length!==0&&Q.current?Q.all.filter(function(x){return x===Q.current}):[]}function b(Q){try{var x=[];return Q&&Q.length!==0&&l&&l.pathwayClones&&l.pathwayClones.length!==0&&l.pathwayClones.forEach(function(J){var he=Q.filter(function(et){return J[e.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===et.serviceLocation}),Ne=null;if(he&&he.length>0&&(Ne=he[0]),Ne){var Te=new URL(Ne.url),Ce=J[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.HOST];Ce=pt.Z.stringHasProtocol(Ce)?Ce:"".concat(Te.protocol,"//").concat(Ce);var Ie={synthesizedUrl:"".concat(Ce).concat(Te.pathname),serviceLocation:J[e.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:J[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:Ne};x.push(Ie)}}),x}catch(J){return r.error(J),[]}}function ne(){l&&l.ttl&&!isNaN(l.ttl)&&(A&&clearTimeout(A),A=setTimeout(function(){C()},1e3*l.ttl))}function z(){A&&clearTimeout(A),A=null}function oe(){l=null,R={},E={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},z()}return i={reset:function(){oe(),Z.off(n.Z.FRAGMENT_LOADING_STARTED,de,i),Z.off(n.Z.MANIFEST_LOADING_STARTED,G,i),Z.off(n.Z.MANIFEST_LOADING_FINISHED,ie,i),Z.off(n.Z.THROUGHPUT_MEASUREMENT_STORED,j,i)},setConfig:function(Q){Q&&(Q.adapter&&(ce=Q.adapter),Q.errHandler&&(w=Q.errHandler),Q.dashMetrics&&(L=Q.dashMetrics),Q.mediaPlayerModel&&(Y=Q.mediaPlayerModel),Q.requestModifier&&(N=Q.requestModifier),Q.manifestModel&&(B=Q.manifestModel),Q.serviceDescriptionController&&(U=Q.serviceDescriptionController),Q.eventBus&&(Z=Q.eventBus))},loadSteeringData:C,getCurrentSteeringResponseData:function(){return l},shouldQueryBeforeStart:function(){var Q=M();return!!Q&&Q.queryBeforeStart},getSteeringDataFromManifest:M,stopSteeringRequestTimer:z,getSynthesizedBaseUrlElements:function(Q){try{return b(Q).map(function(x){var J=new rr(x.synthesizedUrl,x.serviceLocation);return J.queryParams=x.queryParams,J.dvbPriority=x.reference.dvbPriority,J.dvbWeight=x.reference.dvbWeight,J.availabilityTimeOffset=x.reference.availabilityTimeOffset,J.availabilityTimeComplete=x.reference.availabilityTimeComplete,J})}catch(x){return r.error(x),[]}},getSynthesizedLocationElements:function(Q){try{return b(Q).map(function(x){var J=new Wt(x.synthesizedUrl,x.serviceLocation);return J.queryParams=x.queryParams,J})}catch(x){return r.error(x),[]}},initialize:function(){h=Wn(te).create({errHandler:w,dashMetrics:L,mediaPlayerModel:Y,requestModifier:N,errors:X}),Z.on(n.Z.FRAGMENT_LOADING_STARTED,de,i),Z.on(n.Z.MANIFEST_LOADING_STARTED,G,i),Z.on(n.Z.MANIFEST_LOADING_FINISHED,ie,i),Z.on(n.Z.THROUGHPUT_MEASUREMENT_STORED,j,i)}},r=(0,m.Z)(te).getInstance().getLogger(i),oe(),i}ri.__dashjs_factory_name="ContentSteeringController";var or=_.Z.getSingletonFactory(ri);function ii(){var i,r,l,E=this.context,R=(0,Ae.Z)(E).getInstance();return i={select:function(A){if(!A||A.length===0)return null;var h=null;return R.get().streaming.applyContentSteering&&(h=function(w){var L=l.getCurrentSteeringResponseData();return L&&L.pathwayPriority&&L.pathwayPriority.length>0?function(){for(var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],N=0,U=null,Z=function(){var ce=Y[N],te=B.findIndex(function(ue){return ue.serviceLocation&&ue.serviceLocation===ce});if(te!==-1&&!r.contains(B[te].serviceLocation))return U=B[te],"break";N+=1};N<Y.length&&Z()!=="break";);return U}(L.pathwayPriority,w):null}(A)),h||(h=function(w){return w[0]}(A)),h},setConfig:function(A){A.blacklistController&&(r=A.blacklistController),A.contentSteeringController&&(l=A.contentSteeringController)},reset:function(){r.reset()}},r=Lr(E).create({updateEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),l=or(E).getInstance(),i}ii.__dashjs_factory_name="LocationSelector";var yr=_.Z.getClassFactory(ii);function ai(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce=this.context,te=(0,p.Z)(ce).getInstance(),ue=(0,ze.Z)(ce).getInstance();function de(){l=NaN,h=!1,R=!0,A=!1,G()}function G(){E!==null&&(clearTimeout(E),E=null)}function ie(z){G(),A||(isNaN(z)&&!isNaN(l)&&(z=1e3*l),isNaN(z)||(r.debug("Refresh manifest in "+z+" milliseconds."),E=setTimeout(M,z)))}function j(){var z=arguments.length>0&&arguments[0]!==void 0&&arguments[0];h=!0;var oe=L.getValue(),Q=oe.url,x=null,J=B.getPatchLocation(oe),he=Y.select(J),Ne=null;if(he&&!z)Q=he.url,x=he.serviceLocation,Ne=he.queryParams;else{var Te=le(oe),Ce=Y.select(Te);Ce&&(Q=Ce.url,x=Ce.serviceLocation,Ne=Ce.queryParams)}ue.isRelative(Q)&&(Q=ue.resolve(Q,oe.url)),w.load(Q,x,Ne)}function le(z){var oe=B.getLocation(z),Q=U.getSynthesizedLocationElements(oe);return oe.concat(Q)}function g(z){if(z){if(B.getIsPatch(z)){var oe=z;z=L.getValue();var Q=B.isPatchValid(z,oe),x=Q;if(Q){var J=B.getPublishTime(z);x=B.applyPatchToManifest(z,oe);var he=B.getPublishTime(z);x=J.getTime()!=he.getTime()}if(!x)return r.debug("Patch provided is invalid, performing full manifest refresh"),void j(!0);z.loadedTime=new Date}}else(z=L.getValue()).loadedTime=new Date;if(L.getValue()&&L.getValue().type===e.Z.DYNAMIC&&z.type===e.Z.STATIC)return te.trigger(u.Z.DYNAMIC_TO_STATIC),h=!1,void(A=!0);L.setValue(z);var Ne=new Date,Te=(Ne.getTime()-z.loadedTime.getTime())/1e3;1e3*(l=B.getManifestUpdatePeriod(z,Te))>2147483647&&(l=2147483647e-3),te.trigger(u.Z.MANIFEST_UPDATED,{manifest:z}),r.info("Manifest has been refreshed at "+Ne+"["+Ne.getTime()/1e3+"] "),R||ie()}function M(){R||(h?ie(Z.get().streaming.manifestUpdateRetryInterval):j())}function C(z){z.error?z.error.code===X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&N.error(z.error):g(z.manifest)}function D(){R=!1,ie()}function b(){(R=!Z.get().streaming.scheduling.scheduleWhilePaused)&&G()}function ne(){h=!1}return i={initialize:function(){de(),te.on(u.Z.STREAMS_COMPOSED,ne,this),te.on(n.Z.PLAYBACK_STARTED,D,this),te.on(n.Z.PLAYBACK_PAUSED,b,this),te.on(u.Z.INTERNAL_MANIFEST_LOADED,C,this)},setManifest:function(z){g(z)},refreshManifest:j,getIsUpdating:function(){return h},setConfig:function(z){z&&(z.manifestModel&&(L=z.manifestModel),z.adapter&&(B=z.adapter),z.manifestLoader&&(w=z.manifestLoader),z.errHandler&&(N=z.errHandler),z.locationSelector&&(Y=z.locationSelector),z.settings&&(Z=z.settings),z.contentSteeringController&&(U=z.contentSteeringController))},reset:function(){te.off(n.Z.PLAYBACK_STARTED,D,this),te.off(n.Z.PLAYBACK_PAUSED,b,this),te.off(u.Z.STREAMS_COMPOSED,ne,this),te.off(u.Z.INTERNAL_MANIFEST_LOADED,C,this),de()}},r=(0,m.Z)(ce).getInstance().getLogger(i),Y=yr(ce).create(),i}ai.__dashjs_factory_name="ManifestUpdater";var ia=_.Z.getClassFactory(ai);function Ni(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue=this.context,de=(0,p.Z)(ue).getInstance(),G=(0,ze.Z)(ue).getInstance();function ie(){w=[],L=[],Y=null,B=null,U=null,N=NaN,l=!1,E=!1,Z=R.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function j(){R.get().streaming.utcSynchronization.enabled&&!l&&!E&&U&&U.value&&U.schemeIdUri&&!isNaN(N)&&!isNaN(R.get().streaming.utcSynchronization.backgroundAttempts)&&(B&&(Date.now()-B)/1e3<30||(w=[],E=!0,le(isNaN(R.get().streaming.utcSynchronization.backgroundAttempts)?2:R.get().streaming.utcSynchronization.backgroundAttempts)))}function le(Ce){try{if(Ce<=0)return void Ne();var Ie=Date.now();A[U.schemeIdUri](U.value,function(et){var nt=Date.now(),We=M(Ie,nt,et);w.push(We),le(Ce-1)},function(){Ne()})}catch{Ne()}}function g(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ie=Ce||0;if(!L||L.length===0||Ie>=L.length)C();else{var et=L[Ie];if(et)if(A.hasOwnProperty(et.schemeIdUri)){var nt=new Date().getTime();A[et.schemeIdUri](et.value,function(We){var Xe=new Date().getTime(),Mt=M(nt,Xe,We);U=et,C(Mt)},function(){g(Ie+1)})}else g(Ie+1);else C()}}function M(Ce,Ie,et){return et-(Ie-(Ie-Ce)/2)}function C(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,Ie=isNaN(Ce);Ie&&R.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?J():he(Ie,Ce)}function D(Ce){var Ie=Date.parse(Ce);return isNaN(Ie)&&(Ie=function(et){var nt,We,Xe=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(et);return nt=Date.UTC(parseInt(Xe[1],10),parseInt(Xe[2],10)-1,parseInt(Xe[3],10),parseInt(Xe[4],10),parseInt(Xe[5],10),Xe[6]&&(parseInt(Xe[6],10)||0),Xe[7]&&1e3*parseFloat(Xe[7])||0),Xe[9]&&Xe[10]&&(We=60*parseInt(Xe[9],10)+parseInt(Xe[10],10),nt+=(Xe[8]==="+"?-1:1)*We*60*1e3),new Date(nt).getTime()}(Ce)),Ie}function b(Ce){return Date.parse(Ce)}function ne(Ce){return Date.parse(Ce)}function z(Ce,Ie,et){et()}function oe(Ce,Ie,et){var nt=D(Ce);isNaN(nt)?et():Ie(nt)}function Q(Ce,Ie,et,nt,We){var Xe,Mt,Ee=!1,Fe=new XMLHttpRequest,lt=We?Le.w.HEAD:Le.w.GET,qe=Ie.match(/\S+/g);if(Ie=qe.shift(),Xe=function(){Ee||(Ee=!0,qe.length?Q(Ce,qe.join(" "),et,nt,We):nt())},Mt=function(){var gt,st;Fe.status===200&&(gt=We?Fe.getResponseHeader("Date"):Fe.response,st=Ce(gt),isNaN(st)||(et(st),Ee=!0))},G.isRelative(Ie)){var ht=te.resolve();ht&&(Ie=G.resolve(Ie,ht.url))}Fe.open(lt,Ie),Fe.timeout=5e3,Fe.onload=Mt,Fe.onloadend=Xe,Fe.send()}function x(Ce,Ie,et){Q(ne,Ce,Ie,et,!0)}function J(){var Ce=h.getLatestMPDRequestHeaderValueByID("Date"),Ie=Ce!==null?new Date(Ce).getTime():Number.NaN;isNaN(Ie)?he(!0):he(!1,Ie-Date.now())}function he(Ce,Ie){if(isNaN(N)||isNaN(Ie)||Ce||function(nt){try{var We,Xe=Te(nt),Mt=isNaN(Z)?30:Z,Ee=isNaN(R.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:R.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Fe=isNaN(R.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:R.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,lt=isNaN(R.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:R.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Xe?(We=Math.min(Mt*Ee,Fe),r.debug("Increasing timeBetweenSyncAttempts to ".concat(We))):(We=Math.max(Mt/Ee,lt),r.debug("Decreasing timeBetweenSyncAttempts to ".concat(We))),Z=We}catch{}}(Ie),!Ce&&!isNaN(Ie)){Y=Date.now(),l=!1;var et=isNaN(N);N=Ie,et&&j(),r.debug("Completed UTC sync. Setting client - server offset to ".concat(Ie))}Ce&&(U=null,l=!1,ce.error(new re.Z(X.TIME_SYNC_FAILED_ERROR_CODE,X.TIME_SYNC_FAILED_ERROR_MESSAGE))),de.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:Ie}),de.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED)}function Ne(){if(w&&w.length!==0){var Ce=w.reduce(function(Ie,et){return Ie+et},0)/w.length;Te(Ce)?r.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(r.debug("Completed background UTC sync. Setting client - server offset to ".concat(Ce)),N=Ce,de.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:N})),E=!1,B=Date.now()}}function Te(Ce){try{if(isNaN(N))return!0;var Ie=R.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(R.get().streaming.utcSynchronization.maximumAllowedDrift)?R.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Ce>=N-Ie&&Ce<=N+Ie}catch{return!0}}return i={initialize:function(){ie(),A={"urn:mpeg:dash:utc:http-head:2014":x,"urn:mpeg:dash:utc:http-xsdate:2014":Q.bind(null,D),"urn:mpeg:dash:utc:http-iso:2014":Q.bind(null,b),"urn:mpeg:dash:utc:direct:2014":oe,"urn:mpeg:dash:utc:http-head:2012":x,"urn:mpeg:dash:utc:http-xsdate:2012":Q.bind(null,D),"urn:mpeg:dash:utc:http-iso:2012":Q.bind(null,b),"urn:mpeg:dash:utc:direct:2012":oe,"urn:mpeg:dash:utc:http-ntp:2014":z,"urn:mpeg:dash:utc:ntp:2014":z,"urn:mpeg:dash:utc:sntp:2014":z}},attemptSync:function(Ce,Ie){L=Ce,l||(function(et){try{if(!et||!R.get().streaming.utcSynchronization.enabled)return!1;var nt=isNaN(Z)?30:Z;return!(Y&&nt&&!isNaN(nt))||(Date.now()-Y)/1e3>=nt}catch{return!0}}(Ie)?(l=!0,g()):de.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Ce){Ce&&(Ce.dashMetrics&&(h=Ce.dashMetrics),Ce.baseURLController&&(te=Ce.baseURLController),Ce.errHandler&&(ce=Ce.errHandler),Ce.settings&&(R=Ce.settings))},reset:function(){ie(),de.off(u.Z.ATTEMPT_BACKGROUND_SYNC,j,i)}},r=(0,m.Z)(ue).getInstance().getLogger(i),de.on(u.Z.ATTEMPT_BACKGROUND_SYNC,j,i),i}Ni.__dashjs_factory_name="TimeSyncController";var Ci=_.Z.getSingletonFactory(Ni);Ci.HTTP_TIMEOUT_MS=5e3,_.Z.updateSingletonFactory(Ni.__dashjs_factory_name,Ci);var bo=Ci;function aa(){var i,r,l,E,R,A=this.context,h=(0,p.Z)(A).getInstance();return i={attachMediaSource:function(w){var L=window.URL.createObjectURL(r);return w.setSource(L),E==="managedMediaSource"&&(w.setDisableRemotePlayback(!0),r.addEventListener("startstreaming",function(){h.trigger(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),r.addEventListener("endstreaming",function(){h.trigger(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),L},createMediaSource:function(){var w="WebKitMediaSource"in window,L="MediaSource"in window;return"ManagedMediaSource"in window?(r=new ManagedMediaSource,E="managedMediaSource",R.info("Created ManagedMediaSource")):L?(r=new MediaSource,E="mediaSource",R.info("Created MediaSource")):w&&(r=new WebKitMediaSource,R.info("Created WebkitMediaSource")),r},detachMediaSource:function(w){w.setSource(null)},setConfig:function(w){w&&w.settings&&(l=w.settings)},setDuration:function w(L){r&&r.readyState==="open"&&(L===null&&isNaN(L)||r.duration!==L&&(L!==1/0||l.get().streaming.buffer.mediaSourceDurationInfinity||(L=Math.pow(2,32)),function(Y){for(var B=Y.sourceBuffers,N=0;N<B.length;N++)if(B[N].updating)return!0;return!1}(r)?setTimeout(w.bind(null,L),50):(R.info("Set MediaSource duration:"+L),r.duration=L)))},setSeekable:function(w,L){r&&typeof r.setLiveSeekableRange=="function"&&typeof r.clearLiveSeekableRange=="function"&&r.readyState==="open"&&w>=0&&w<L&&(r.clearLiveSeekableRange(),r.setLiveSeekableRange(w,L))},signalEndOfStream:function(w){if(w&&w.readyState==="open"){for(var L=w.sourceBuffers,Y=0;Y<L.length;Y++)if(L[Y].updating||L[Y].buffered.length===0)return;R.info("call to mediaSource endOfStream"),w.endOfStream()}}},R=(0,m.Z)(A).getInstance().getLogger(i),i}aa.__dashjs_factory_name="MediaSourceController";var Ao=_.Z.getSingletonFactory(aa);function oa(){var i,r,l,E,R,A,h,w,L,Y,B,N="urn:mpeg:dash:event:2012",U="discarded",Z="updated",ce="added",te=this.context,ue=(0,p.Z)(te).getInstance();function de(){if(!h||!w)throw new Error("setConfig function has to be called previously")}function G(){B=!1,l={},E={},R=null,Y=!1,A=Date.now()/1e3}function ie(){try{if(!Y){Y=!0;var z=w.getTime(),oe=z-A;oe=A>0?Math.max(0,oe):0,j(E,oe,z),j(l,oe,z),le(E),le(l),A=z,Y=!1}}catch(Q){Y=!1,r.error(Q)}}function j(z,oe,Q){try{D(z,function(x){if(x!==void 0){var J=isNaN(x.duration)?0:x.duration;x.calculatedPresentationTime<=Q&&x.calculatedPresentationTime+oe+J>=Q?ne(x,n.Z.EVENT_MODE_ON_START):(b(Q,J+oe,x.calculatedPresentationTime)||function(he){try{var Ne=he.eventStream.period.start+he.eventStream.period.duration;return he.calculatedPresentationTime>Ne}catch(Te){return r.error(Te),!1}}(x))&&(r.debug("Removing event ".concat(x.id," from period ").concat(x.eventStream.period.id," as it is expired or invalid")),function(he,Ne){try{var Te=Ne.eventStream.schemeIdUri,Ce=Ne.eventStream.period.id,Ie=Ne.eventStream.value,et=Ne.id;he[Ce][Te]=he[Ce][Te].filter(function(nt){return Ie&&nt.eventStream.value&&nt.eventStream.value!==Ie||nt.id!==et}),he[Ce][Te].length===0&&delete he[Ce][Te]}catch(nt){r.error(nt)}}(z,x))}})}catch(x){r.error(x)}}function le(z){try{for(var oe in z)z.hasOwnProperty(oe)&&Object.keys(z[oe]).length===0&&delete z[oe]}catch(Q){r.error(Q)}}function g(z,oe){var Q=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=z.eventStream.schemeIdUri,J=z.eventStream.value,he=z.id,Ne=U;oe[x]||(oe[x]=[]);var Te=oe[x].findIndex(function(Ie){return(!J||Ie.eventStream.value&&Ie.eventStream.value===J)&&Ie.id===he});if(Te===-1)oe[x].push(z),z.triggeredReceivedEvent=!1,z.triggeredStartEvent=!1,Ne=ce;else if(Q){var Ce=oe[x][Te];z.triggeredReceivedEvent=Ce.triggeredReceivedEvent,z.triggeredStartEvent=Ce.triggeredStartEvent,oe[x][Te]=z,Ne=Z}return Ne}function M(z){try{if(z.eventStream.value==1){var oe,Q=z.calculatedPresentationTime;oe=z.calculatedPresentationTime==4294967295?NaN:z.calculatedPresentationTime+z.duration,ue.trigger(n.Z.MANIFEST_VALIDITY_CHANGED,{id:z.id,validUntil:Q,newDuration:oe,newManifestValidAfter:NaN},{mode:n.Z.EVENT_MODE_ON_START})}}catch(x){r.error(x)}}function C(z){try{var oe=w.getTime();D(z,function(Q){var x=Q.eventStream&&Q.eventStream.period&&!isNaN(Q.eventStream.period.duration)?Q.eventStream.period.duration:NaN,J=Q.eventStream&&Q.eventStream.period&&!isNaN(Q.eventStream.period.start)?Q.eventStream.period.start:NaN;if(!isNaN(x)&&!isNaN(J)){var he=Q.calculatedPresentationTime;Math.abs(he-oe)<300&&ne(Q,n.Z.EVENT_MODE_ON_START)}})}catch(Q){r.error(Q)}}function D(z,oe){try{if(z)for(var Q=Object.keys(z),x=0;x<Q.length;x++)for(var J=z[Q[x]],he=Object.keys(J),Ne=0;Ne<he.length;Ne++)J[he[Ne]].forEach(function(Te){Te!==void 0&&oe(Te)})}catch(Te){r.error(Te)}}function b(z,oe,Q){try{return z-oe>Q}catch(x){return r.error(x),!1}}function ne(z,oe){try{var Q=w.getTime(),x=z.id;if(oe===n.Z.EVENT_MODE_ON_RECEIVE&&!z.triggeredReceivedEvent)return r.debug("Received event ".concat(x)),z.triggeredReceivedEvent=!0,void ue.trigger(z.eventStream.schemeIdUri,{event:z},{mode:oe});z.triggeredStartEvent||(z.eventStream.schemeIdUri===N&&z.eventStream.value==1?z.duration===0&&z.presentationTimeDelta===0||(r.debug("Starting manifest refresh event ".concat(x," at ").concat(Q)),function(){try{de(),h.refreshManifest()}catch(J){r.error(J)}}()):z.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&z.eventStream.value==1?(r.debug("Starting callback event ".concat(x," at ").concat(Q)),function(J){try{(0,Ft.Z)(te).create({}).load({method:"get",url:J,request:{responseType:"arraybuffer"}})}catch(he){r.error(he)}}(z.messageData)):(r.debug("Starting event ".concat(x," from period ").concat(z.eventStream.period.id," at ").concat(Q)),ue.trigger(z.eventStream.schemeIdUri,{event:z},{mode:oe})),z.triggeredStartEvent=!0)}catch(J){r.error(J)}}return i={addInlineEvents:function(z,oe){try{if(de(),l[oe]||(l[oe]={}),z)for(var Q=0;Q<z.length;Q++){var x=z[Q];if(!b(w.getTime(),isNaN(x.duration)?0:x.duration,x.calculatedPresentationTime)){var J=g(x,l[oe],!0);J===ce?(r.debug("Added inline event with id ".concat(x.id," from period ").concat(oe)),ne(x,n.Z.EVENT_MODE_ON_RECEIVE)):J===Z&&r.debug("Updated inline event with id ".concat(x.id," from period ").concat(oe))}}}catch(he){throw he}},addInbandEvents:function(z,oe){try{de(),E[oe]||(E[oe]={});for(var Q=0;Q<z.length;Q++){var x=z[Q];b(w.getTime(),isNaN(x.duration)?0:x.duration,x.calculatedPresentationTime)||(g(x,E[oe],!1)===ce?(x.eventStream.schemeIdUri===N&&M(x),r.debug("Added inband event with id ".concat(x.id," from period ").concat(oe)),ne(x,n.Z.EVENT_MODE_ON_RECEIVE)):r.debug("Inband event with scheme_id_uri ".concat(x.eventStream.schemeIdUri,", value ").concat(x.eventStream.value,", period id ").concat(oe," and event id ").concat(x.id," was ignored because it has been added before.")))}ie()}catch(J){throw J}},getInbandEvents:function(){return E},getInlineEvents:function(){return l},start:function(){try{de(),r.debug("Start Event Controller");var z=L.get().streaming.eventControllerRefreshDelay;B||isNaN(z)||(B=!0,R=setInterval(ie,z))}catch(oe){throw oe}},setConfig:function(z){try{if(!z)return;z.manifestUpdater&&(h=z.manifestUpdater),z.playbackController&&(w=z.playbackController),z.settings&&(L=z.settings)}catch(oe){throw oe}},reset:function(){(function(){try{R!==null&&B&&(clearInterval(R),R=null,B=!1,function(){try{C(E),C(l)}catch(z){r.error(z)}}())}catch(z){throw z}})(),G()}},r=(0,m.Z)(te).getInstance().getLogger(i),G(),i}oa.__dashjs_factory_name="EventController";var Io=_.Z.getSingletonFactory(oa),xr={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Di(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function sa(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie,j,le,g,M,C,D,b,ne,z,oe,Q,x,J,he,Ne,Te,Ce,Ie,et,nt,We,Xe,Mt,Ee,Fe,lt,qe,ht,gt=this.context,st=(0,p.Z)(gt).getInstance();function qt(){if(!(A&&A.hasOwnProperty("load")&&j&&j.hasOwnProperty("initialize")&&j.hasOwnProperty("reset")&&j.hasOwnProperty("getClientTimeOffset")&&h&&ie&&L&&J))throw new Error(t.Z.MISSING_CONFIG_ERROR)}function Gt(){if(!R||!R.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function an(){(function(){try{var Ke=w.getStreamsInfo();if(!g&&Ke.length===0)throw new Error("There are no periods in the MPD");g&&Ke.length>0&&L.updateManifestUpdateInfo({currentTime:J.getTime(),buffered:x.getBufferRange(),presentationStartTime:Ke[0].start,clientTimeOffset:j.getClientTimeOffset()}),le.length>0&&function(mn){mn.length!==0?le=le.filter(function(cn){var Mn=mn.filter(function(In){return In.id===cn.getId()}).length>0||cn.getId()===g.getId();return Mn||(r.debug("Removing stream ".concat(cn.getId())),cn.reset(!0)),Mn}):r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Ke);for(var Rt=[],Qt=0,on=Ke.length;Qt<on;Qt++){var hn=Ke[Qt];Rt.push(Be(hn)),L.addManifestUpdateStreamInfo(hn)}Promise.all(Rt).then(function(){return new Promise(function(mn,cn){g?mn():ft(Ke,mn,cn)})}).then(function(){st.trigger(u.Z.STREAMS_COMPOSED),Nt()}).catch(function(mn){throw mn})}catch(mn){ie.error(new re.Z(X.MANIFEST_ERROR_ID_NOSTREAMS_CODE,mn.message+" nostreamscomposed",h.getValue())),oe=!0,_r()}})()}function un(){Fe=!0}function Be(Ke){var Rt=Kr(Ke.id);return Rt?Rt.updateData(Ke):(Rt=Tr(gt).create({manifestModel:h,mediaPlayerModel:Ne,dashMetrics:L,manifestUpdater:R,adapter:w,timelineConverter:j,capabilities:l,capabilitiesFilter:E,errHandler:ie,baseURLController:U,segmentBaseController:Z,textController:C,abrController:te,playbackController:J,eventController:de,mediaController:ue,protectionController:M,videoModel:x,streamInfo:Ke,settings:Ee}),le.push(Rt),Rt.initialize(),Promise.resolve())}function ft(Ke,Rt,Qt){try{jt();var on=L.getCurrentDVRInfo().range;if(on.end<on.start){lt&&clearTimeout(lt);var hn=Math.min(1e3*(-1*(on.end-on.start)+2),2147483647);return r.debug("Waiting for ".concat(hn," ms before playback can start")),st.trigger(u.Z.AST_IN_FUTURE,{delay:hn}),void(lt=setTimeout(function(){ft(Ke,Rt,Qt)},hn))}Ee.get().streaming.applyProducerReferenceTime&&he.calculateProducerReferenceTimeOffsets(Ke);var mn=Ke[0].manifestInfo;if(Ee.get().streaming.applyServiceDescription&&he.applyServiceDescription(mn),w.getIsDynamic()){var cn=br(Ke,mn);J.computeAndSetLiveDelay(cn,mn)}(Ee.get().streaming.applyContentSteering&&N.shouldQueryBeforeStart()?N.loadSteeringData():Promise.resolve()).then(function(){var Mn=h.getValue();Mn&&U.update(Mn),$e(),Rt()}).catch(function(Mn){r.error(Mn),$e(),Rt()})}catch(Mn){Qt(Mn)}}function $e(){var Ke=function(){var on;if(w.getIsDynamic()){var hn=L.getCurrentDVRInfo();on=(hn&&hn.range?hn.range.end:0)-J.getOriginalLiveDelay();var mn=hn?hn.range:null;if(mn){if(isNaN(qe)&&qe.toString().indexOf("posix:")===-1){var cn=Jn(!0);isNaN(cn)||(r.info("Start time from URI parameters: ".concat(cn)),on=Math.min(on,cn))}else{r.info("Start time provided by the app: ".concat(qe));var Mn=Gn(!0,qe);isNaN(Mn)||(on=Math.min(on,Mn))}var In=Ee.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;on=Math.max(on,mn.start+In)}}else if(on=Rr()[0].getStreamInfo().start,isNaN(qe)){var hr=Jn(!1);isNaN(hr)||(r.info("Start time from URI parameters: ".concat(hr)),on=Math.max(on,hr))}else{r.info("Start time provided by the app: ".concat(qe));var Br=Gn(!1,qe);isNaN(Br)||(on=Math.max(on,Br))}return on}(),Rt=kt(Ke),Qt=Rt!==null?Rt:le[0];st.trigger(u.Z.INITIAL_STREAM_SWITCH,{startTime:Ke}),vt(Qt,null,Ke),nt||(nt=setInterval(function(){!ne&&J.getTimeToStreamEnd()<=0&&!J.isSeeking()&&st.trigger(u.Z.PLAYBACK_ENDED,{isLast:sr().isLast})},200))}function vt(Ke,Rt,Qt){try{if(ne||!Ke||Rt===Ke&&Ke.getIsActive())return;ne=!0,st.trigger(u.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:Rt?Rt.getStreamInfo():null,toStreamInfo:Ke.getStreamInfo()});var on=!1;g=Ke,Rt&&(on=Dt(Ke,Rt),Rt.deactivate(on)),Qt=isNaN(Qt)?!on&&Rt?Ke.getStreamInfo().start:NaN:Qt,r.info("Switch to stream ".concat(Ke.getId(),". Seektime is ").concat(Qt,", current playback time is ").concat(J.getTime(),". Seamless period switch is set to ").concat(on)),Xe=Xe.filter(function(hn){return hn.getId()!==g.getId()}),J.initialize(sr(),!!Rt),x.getElement()?wt(Qt,on,!1):Ht(Qt,on)}catch{ne=!1}}function wt(Ke,Rt){var Qt,on=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function hn(){if(Q&&Q.readyState==="open"){r.debug("MediaSource is open!"),window.URL.revokeObjectURL(Qt),Q.removeEventListener("sourceopen",hn),Q.removeEventListener("webkitsourceopen",hn),Sn();var cn=L.getCurrentDVRInfo();Y.setSeekable(cn.range.start,cn.range.end),on?(isNaN(Ke)||J.seek(Ke,!0,!0),g.setMediaSource(Q).then(function(){g.initializeForTextWithMediaSource(Q)})):Ht(Ke,Rt)}}function mn(){Q.addEventListener("sourceopen",hn,!1),Q.addEventListener("webkitsourceopen",hn,!1),Qt=Y.attachMediaSource(x),r.debug("MediaSource attached to element.  Waiting on open...")}Q?Rt?Ht(Ke,Rt):(Y.detachMediaSource(x),mn()):(Q=Y.createMediaSource(),mn())}function Ht(Ke,Rt){g.activate(Q,Rt?We:void 0,Ke).then(function(Qt){if(Qt){var on=Object.keys(Qt);on.length>0&&Qt[on[0]].getBuffer().changeType&&(Mt=!0),We=Qt}isNaN(Ke)||(st.trigger(u.Z.SEEK_TARGET,{time:Ke},{streamId:g.getId()}),J.seek(Ke,!1,!0),g.startScheduleControllers()),ne=!1,st.trigger(u.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:sr()})})}function Yt(Ke){var Rt=kt(Ke.seekTime);Rt&&Rt!==g?Rt&&Rt!==g&&(Kt(),function(Qt,on){var hn=Qt&&!isNaN(Qt.seekTime)?Qt.seekTime:NaN,mn=g.getProcessors().map(function(cn){return cn.prepareOuterPeriodPlaybackSeeking(Qt)});Promise.all(mn).then(function(){vt(on,g,hn)}).catch(function(cn){ie.error(cn)})}(Ke,Rt)):(Kt(),function(Qt){g.getProcessors().forEach(function(on){return on.prepareInnerPeriodPlaybackSeeking(Qt)}),$n(be.USER_REQUEST_STOP_REASON)}(Ke)),vr(De.SEEK_START_REASON)}function Kt(){Jt()}function Jt(){Xe&&Xe.length>0&&(Xe.forEach(function(Ke){Ke.deactivate(!0)}),Xe=[])}function ut(Ke){if(Ke.newMediaInfo.streamInfo.id===g.getId()){if(Jt(),Ee.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Ke.oldMediaInfo&&Ke.oldMediaInfo.codec!==Ke.newMediaInfo.codec){var Rt=J.getTime();return g.deactivate(!1),void wt(Rt,!1,!1)}g.prepareTrackChange(Ke)}}function Dt(Ke,Rt){try{return Ee.get().streaming.buffer.reuseExistingSourceBuffers&&(Rt.isProtectionCompatible(Ke)||Fe)&&(Mt&&Ee.get().streaming.buffer.useChangeTypeForTrackSwitch||Rt.isMediaCodecCompatible(Ke,Rt))}catch{return!1}}function xt(Ke){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Q&&!Ke.getPreloaded()){var Qt=Dt(Ke,Rt);Qt&&Ke.startPreloading(Q,We).then(function(){Xe.push(Ke)})}}function kt(Ke){if(isNaN(Ke))return null;for(var Rt=le.length,Qt=0;Qt<Rt;Qt++){var on=le[Qt];if(Ke<parseFloat((on.getStartTime()+on.getDuration()).toFixed(5)))return on}return null}function jt(){try{var Ke=w.getIsDynamic(),Rt=w.getStreamsInfo()[0].manifestInfo,Qt=J.getTime(),on=j.calcTimeShiftBufferWindow(le,Ke),hn=bn();if(on.start===void 0||on.end===void 0)return;hn&&hn.length!==0?hn.forEach(function(mn){L.addDVRInfo(mn.getType(),Qt,Rt,on)}):L.addDVRInfo(t.Z.VIDEO,Qt,Rt,on)}catch{}}function Ge(Ke){if(Ie&&b){var Rt=Ne.getInitialBufferLevel(),Qt=[t.Z.TEXT];(isNaN(Rt)||Rt<=J.getBufferLevel(Qt)||w.getIsDynamic()&&Rt>J.getLiveDelay())&&(Ie=!1,vr(De.INITIAL_PLAYOUT_START_REASON),J.play())}Ke&&Ke.mediaType&&L.addBufferLevel(Ke.mediaType,new Date,1e3*Ke.bufferLevel)}function Re(Ke){Ke.streamInfo.id===g.getId()&&Ke.reason&&Ke.reason.forceReplace&&Jt(),Kr(Ke.streamInfo.id).prepareQualityChange(Ke)}function rt(){if(w.getIsDynamic()&&J.getOriginalLiveDelay()!==0&&g){var Ke=w.getStreamsInfo();if(Ke.length>0){var Rt=Ke[0].manifestInfo,Qt=br(Ke,Rt);J.computeAndSetLiveDelay(Qt,Rt)}}}function fe(){if(fr()){var Ke=x.getPlaybackQuality();Ke&&L.addDroppedFrames(Ke)}}function pe(){r.debug("[onPlaybackStarted]"),!Ie&&Ce&&vr(De.RESUME_FROM_PAUSE_START_REASON),Ie&&(Ie=!1),et&&(et=!1,Ee.get().streaming.applyContentSteering&&!N.shouldQueryBeforeStart()&&N.loadSteeringData()),Ce=!1}function Ve(Ke){r.debug("[onPlaybackPaused]"),Ke.ended||(Ce=!0,$n(be.USER_REQUEST_STOP_REASON))}function St(Ke){r.debug("Stream with id ".concat(Ke.streamInfo.id," finished buffering"));var Rt=Ke.streamInfo.isLast;Q&&Rt?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),Y.signalEndOfStream(Q)):Nt()}function Nt(){if(g&&g.getHasFinishedBuffering())for(var Ke=function(){var hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var mn=hn||g||null;if(mn){var cn=mn.getStreamInfo();return le.filter(function(Mn){var In=Mn.getStreamInfo();return In.start>cn.start&&cn.id!==In.id})}}catch{return[]}}(g),Rt=0;Rt<Ke.length;){var Qt=Ke[Rt],on=Rt===0?g:Ke[Rt-1];!Qt.getPreloaded()&&on.getHasFinishedBuffering()&&Q&&xt(Qt,on),Rt+=1}}function ln(){nt&&(clearInterval(nt),nt=null)}function bn(){return g?g.getProcessors():[]}function Zn(Ke){if(g&&!g.getIsEndedEventSignaled()){g.setIsEndedEventSignaled(!0);var Rt=function(){var Qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,on=Qt||g||null;if(!on)return null;for(var hn=on.getStreamInfo(),mn=hn.start,cn=0,Mn=-1,In=NaN;cn<le.length;){var hr=le[cn].getStreamInfo(),Br=hr.start-mn;Br>0&&(isNaN(In)||Br<In)&&hn.id!==hr.id&&(In=Br,Mn=cn),cn+=1}return Mn>=0?le[Mn]:null}();Rt?(r.debug("StreamController onEnded, found next stream with id ".concat(Rt.getStreamInfo().id,". Switching from ").concat(g.getStreamInfo().id," to ").concat(Rt.getStreamInfo().id)),vt(Rt,g,NaN)):(r.debug("StreamController no next stream found"),g.setIsEndedEventSignaled(!1)),$n(Rt?be.END_OF_PERIOD_STOP_REASON:be.END_OF_CONTENT_STOP_REASON)}Ke&&Ke.isLast&&(ln(),N.stopSteeringRequestTimer())}function Sn(Ke){var Rt=Ke||sr().manifestInfo.duration;Y.setDuration(Rt)}function Jn(Ke){var Rt=ce.getURIFragmentData();if(!Rt||!Rt.t)return NaN;var Qt=Rr()[0].getStreamInfo().start;return Rt.t=Rt.t.split(",")[0],Er(Ke,Rt.t,Qt)}function Gn(Ke,Rt){var Qt=0;return Ke||(Qt=Rr()[0].getStreamInfo().start),Er(Ke,Rt,Qt)}function Er(Ke,Rt,Qt){var on=w.getRegularPeriods()[0],hn=Rt.toString(),mn=hn.indexOf("posix:")!==-1?hn.substring(6)==="now"?Date.now()/1e3:parseFloat(hn.substring(6)):NaN;return Ke&&!isNaN(mn)?j.calcPresentationTimeFromWallTime(new Date(1e3*mn),on):parseFloat(hn)+Qt}function br(Ke,Rt){try{var Qt=NaN;if(Rt&&!isNaN(Rt.maxFragmentDuration)&&isFinite(Rt.maxFragmentDuration))return Rt.maxFragmentDuration;if(Ke&&Ke.length===1){var on=Ke[0],hn=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT].reduce(function(cn,Mn){var In=w.getMediaInfoForType(on,Mn);return In&&In.isFragmented!==!1&&cn.push(In),cn},[]).reduce(function(cn,Mn){var In=w.getVoRepresentations(Mn);return In&&In.length>0&&In.forEach(function(hr){hr&&cn.push(hr)}),cn},[]).reduce(function(cn,Mn){var In=w.convertRepresentationToRepresentationInfo(Mn);return In&&In.fragmentDuration&&!isNaN(In.fragmentDuration)&&cn.push(In.fragmentDuration),cn},[]);Qt=Math.max.apply(Math,function(cn){if(Array.isArray(cn))return Di(cn)}(mn=hn)||function(cn){if(typeof Symbol<"u"&&Symbol.iterator in Object(cn))return Array.from(cn)}(mn)||function(cn,Mn){if(cn){if(typeof cn=="string")return Di(cn,Mn);var In=Object.prototype.toString.call(cn).slice(8,-1);return In==="Object"&&cn.constructor&&(In=cn.constructor.name),In==="Map"||In==="Set"?Array.from(cn):In==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(In)?Di(cn,Mn):void 0}}(mn)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())}return isFinite(Qt)?Qt:NaN}catch{return NaN}var mn}function Ar(Ke){if(Ke.error)oe=!0,_r();else{r.info("Manifest updated... updating data system wide.");var Rt=Ke.manifest;w.updatePeriods(Rt);var Qt=w.getUTCTimingSources();!w.getIsDynamic()||Qt&&Qt.length!==0||st.trigger(n.Z.CONFORMANCE_VIOLATION,{level:xr.LEVELS.WARNING,event:xr.EVENTS.NO_UTC_TIMING_ELEMENT});var on=w.getIsDynamic()?Qt.concat(Te.getUTCTimingSources()):Qt;E.filterUnsupportedFeatures(Rt).then(function(){U.initialize(Rt),B.attemptSync(on,w.getIsDynamic())})}}function fr(){return!!g&&g.getHasVideoTrack()}function gr(){return!!g&&g.getHasAudioTrack()}function $n(Ke,Rt){Rt=Rt||new Date,bn().forEach(function(Qt){Qt.finalisePlayList(Rt,Ke)}),L.addPlayList()}function vr(Ke){L.createPlaylistMetrics(1e3*J.getTime(),Ke)}function Ir(Ke){if(Ke.error){var Rt="";switch(Ke.error.code){case 1:Rt="MEDIA_ERR_ABORTED";break;case 2:Rt="MEDIA_ERR_NETWORK";break;case 3:Rt="MEDIA_ERR_DECODE",ht.counts.mediaErrorDecode+=1;break;case 4:Rt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Rt="MEDIA_ERR_ENCRYPTED";break;default:Rt="UNKNOWN"}Rt==="MEDIA_ERR_DECODE"&&Ee.get().errors.recoverAttempts.mediaErrorDecode>=ht.counts.mediaErrorDecode?function(){r.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Qt=J.getTime();g.deactivate(!1),r.warn("MediaSource has been resetted. Resuming playback from time ".concat(Qt)),wt(Qt,!1,!1)}():(z=!0,Ke.error.message&&(Rt+=" ("+Ke.error.message+")"),Ke.error.msExtendedCode&&(Rt+=" (0x"+(Ke.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+Rt),Ke.error&&r.fatal(Ke.error),ie.error(new re.Z(Ke.error.code,Rt)),_r())}}function sr(){return g?g.getStreamInfo():null}function Kr(Ke){for(var Rt=0,Qt=le.length;Rt<Qt;Rt++)if(le[Rt].getId()===Ke)return le[Rt];return null}function _i(Ke){isNaN(Ke.newDuration)||Sn(Ke.newDuration)}function Ti(){le=[],qe=NaN,M=null,ne=!1,g=null,z=!1,oe=!1,Ie=!0,et=!0,Ce=!1,b=!0,nt=null,Fe=!1,Mt=!1,Xe=[],lt=null,ht={counts:{mediaErrorDecode:0}}}function _r(){qt(),B.reset(),$n(z||oe?be.FAILURE_STOP_REASON:be.USER_REQUEST_STOP_REASON);for(var Ke=0,Rt=le?le.length:0;Ke<Rt;Ke++)le[Ke].reset(z);st.off(n.Z.PLAYBACK_TIME_UPDATED,fe,i),st.off(n.Z.PLAYBACK_SEEKING,Yt,i),st.off(n.Z.PLAYBACK_ERROR,Ir,i),st.off(n.Z.PLAYBACK_STARTED,pe,i),st.off(n.Z.PLAYBACK_PAUSED,Ve,i),st.off(n.Z.PLAYBACK_ENDED,Zn,i),st.off(n.Z.METRIC_ADDED,Si,i),st.off(n.Z.MANIFEST_VALIDITY_CHANGED,_i,i),st.off(n.Z.BUFFER_LEVEL_UPDATED,Ge,i),st.off(n.Z.QUALITY_CHANGE_REQUESTED,Re,i),u.Z.KEY_SESSION_UPDATED&&st.off(u.Z.KEY_SESSION_UPDATED,un,i),st.off(u.Z.MANIFEST_UPDATED,Ar,i),st.off(u.Z.STREAM_BUFFERING_COMPLETED,St,i),st.off(u.Z.TIME_SYNCHRONIZATION_COMPLETED,an,i),st.off(u.Z.CURRENT_TRACK_CHANGED,ut,i),st.off(u.Z.SETTING_UPDATED_LIVE_DELAY,rt,i),st.off(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,rt,i),U.reset(),R.reset(),de.reset(),L.clearAllCurrentMetrics(),h.setValue(null),A.reset(),j.reset(),G.reset(),Q&&(Y.detachMediaSource(x),Q=null),x=null,M&&(M=null,D=null,h.getValue()&&st.trigger(u.Z.PROTECTION_DESTROYED,{data:h.getValue().url})),ln(),st.trigger(u.Z.STREAM_TEARDOWN_COMPLETE),Ti()}function Si(Ke){if(Ke.metric===y.Z.DVR_INFO){var Rt=gr()?t.Z.AUDIO:t.Z.VIDEO;Ke.mediaType===Rt&&Y.setSeekable(Ke.value.range.start,Ke.value.range.end)}}function Rr(){return le}return i={initialize:function(Ke,Rt){qt(),b=Ke,D=Rt,j.initialize(),(R=ia(gt).create()).setConfig({manifestModel:h,adapter:w,manifestLoader:A,errHandler:ie,settings:Ee,contentSteeringController:N}),R.initialize(),(de=Io(gt).getInstance()).setConfig({manifestUpdater:R,playbackController:J,settings:Ee}),de.start(),B.setConfig({dashMetrics:L,baseURLController:U,errHandler:ie,settings:Ee}),B.initialize(),Y.setConfig({settings:Ee}),M&&(st.trigger(u.Z.PROTECTION_CREATED,{controller:M}),M.setMediaElement(x.getElement()),D&&M.setProtectionData(D)),st.on(n.Z.PLAYBACK_TIME_UPDATED,fe,i),st.on(n.Z.PLAYBACK_SEEKING,Yt,i),st.on(n.Z.PLAYBACK_ERROR,Ir,i),st.on(n.Z.PLAYBACK_STARTED,pe,i),st.on(n.Z.PLAYBACK_PAUSED,Ve,i),st.on(n.Z.PLAYBACK_ENDED,Zn,i),st.on(n.Z.METRIC_ADDED,Si,i),st.on(n.Z.MANIFEST_VALIDITY_CHANGED,_i,i),st.on(n.Z.BUFFER_LEVEL_UPDATED,Ge,i),st.on(n.Z.QUALITY_CHANGE_REQUESTED,Re,i),u.Z.KEY_SESSION_UPDATED&&st.on(u.Z.KEY_SESSION_UPDATED,un,i),st.on(u.Z.MANIFEST_UPDATED,Ar,i),st.on(u.Z.STREAM_BUFFERING_COMPLETED,St,i),st.on(u.Z.TIME_SYNCHRONIZATION_COMPLETED,an,i),st.on(u.Z.CURRENT_TRACK_CHANGED,ut,i),st.on(u.Z.SETTING_UPDATED_LIVE_DELAY,rt,i),st.on(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,rt,i)},getActiveStreamInfo:sr,addDVRMetric:jt,hasVideoTrack:fr,hasAudioTrack:gr,getStreamById:Kr,getStreamForTime:kt,getTimeRelativeToStreamId:function(Ke,Rt){for(var Qt=null,on=0,hn=0,mn=null,cn=0;cn<le.length;cn++){if(hn=(Qt=le[cn]).getStartTime(),mn=Qt.getDuration(),Number.isFinite(hn)&&(on=hn),Qt.getId()===Rt)return Ke-on;Number.isFinite(mn)&&(on+=mn)}return null},load:function(Ke){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;qt(),qe=Rt,A.load(Ke)},loadWithManifest:function(Ke){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Gt(),qe=Rt,R.setManifest(Ke)},getActiveStreamProcessors:bn,setConfig:function(Ke){Ke&&(Ke.capabilities&&(l=Ke.capabilities),Ke.capabilitiesFilter&&(E=Ke.capabilitiesFilter),Ke.manifestLoader&&(A=Ke.manifestLoader),Ke.manifestModel&&(h=Ke.manifestModel),Ke.mediaPlayerModel&&(Ne=Ke.mediaPlayerModel),Ke.customParametersModel&&(Te=Ke.customParametersModel),Ke.protectionController&&(M=Ke.protectionController),Ke.adapter&&(w=Ke.adapter),Ke.dashMetrics&&(L=Ke.dashMetrics),Ke.errHandler&&(ie=Ke.errHandler),Ke.timelineConverter&&(j=Ke.timelineConverter),Ke.videoModel&&(x=Ke.videoModel),Ke.playbackController&&(J=Ke.playbackController),Ke.serviceDescriptionController&&(he=Ke.serviceDescriptionController),Ke.contentSteeringController&&(N=Ke.contentSteeringController),Ke.textController&&(C=Ke.textController),Ke.abrController&&(te=Ke.abrController),Ke.mediaController&&(ue=Ke.mediaController),Ke.settings&&(Ee=Ke.settings),Ke.baseURLController&&(U=Ke.baseURLController),Ke.uriFragmentModel&&(ce=Ke.uriFragmentModel),Ke.segmentBaseController&&(Z=Ke.segmentBaseController),Ke.manifestUpdater&&(R=Ke.manifestUpdater))},setProtectionData:function(Ke){D=Ke,M&&M.setProtectionData(D)},getIsStreamSwitchInProgress:function(){return ne},switchToVideoElement:function(Ke){g&&(J.initialize(sr()),wt(Ke,!1,!0))},getHasMediaOrInitialisationError:function(){return z||oe},getStreams:Rr,getActiveStream:function(){return g},getInitialPlayback:function(){return Ie},getAutoPlay:function(){return b},refreshManifest:function(){R.getIsUpdating()||R.refreshManifest()},reset:_r},r=(0,m.Z)(gt).getInstance().getLogger(i),B=bo(gt).getInstance(),Y=Ao(gt).getInstance(),G=ve(gt).getInstance(),Ti(),i}sa.__dashjs_factory_name="StreamController";var ua=_.Z.getSingletonFactory(sa);function la(){var i,r,l,E,R,A,h,w,L,Y,B,N,U=this.context,Z=(0,p.Z)(U).getInstance();function ce(){N.debug("Stopping the gap controller"),R&&(clearInterval(R),R=null),function(){Z.off(u.Z.WALLCLOCK_TIME_UPDATED,ie,this),Z.off(u.Z.INITIAL_STREAM_SWITCH,G,this),Z.off(u.Z.PLAYBACK_SEEKING,te,this),Z.off(u.Z.BUFFER_REPLACEMENT_STARTED,ue,i),Z.off(u.Z.TRACK_CHANGE_RENDERED,de,i)}(),R=null,A=NaN,E=0,Y=null,B={}}function te(){Y&&(clearTimeout(Y),Y=null)}function ue(D){try{if(D.streamId!==w.getActiveStreamInfo().id||D.mediaType!==t.Z.VIDEO&&D.mediaType!==t.Z.AUDIO)return;D.streamId===w.getActiveStreamInfo().id&&(B[D.mediaType]=!0)}catch(b){N.error(b)}}function de(D){D&&D.mediaType&&(B[D.mediaType]=!1)}function G(){R||function(){try{R||(N.debug("Starting the gap controller"),R=setInterval(function(){j()&&C(h.getTime())},100))}catch{}}()}function ie(){if(j(l.get().streaming.gaps.enableSeekFix)&&++E>=10){var D=h.getTime();r===D?C(D,!0):(r=D,A=NaN),E=0}}function j(){var D=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!w.getActiveStream())return!1;var b=Object.keys(B).some(function(z){return B[z]}),ne=!!D&&le();return!b&&l.get().streaming.gaps.jumpGaps&&w.getActiveStreamProcessors().length>0&&(!h.isSeeking()||ne)&&!h.isPaused()&&!w.getIsStreamSwitchInProgress()&&!w.getHasMediaOrInitialisationError()}function le(){var D=w.getActiveStream(),b=parseFloat((D.getStartTime()+D.getDuration()).toFixed(5));return h.getTime()+l.get().streaming.gaps.threshold>=b}function g(D,b){try{if(!D||D.length<=1&&b>0)return NaN;for(var ne=NaN,z=0;isNaN(ne)&&z<D.length;){var oe=z>0?D.end(z-1):0;b<D.start(z)&&oe-b<l.get().streaming.gaps.threshold&&(ne=z),z+=1}return ne}catch{return null}}function M(D,b){for(var ne=0,z=D.length;ne<z;ne++)if(b>=D.start(ne)&&b<=D.end(ne))return!0;return!1}function C(D){var b,ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1],z=l.get().streaming.gaps.enableStallFix,oe=l.get().streaming.gaps.stallSeek,Q=l.get().streaming.gaps.smallGapLimit,x=l.get().streaming.gaps.jumpLargeGaps,J=L.getBufferRange(),he=NaN,Ne=!1;if(b=g(J,D),!isNaN(b)){var Te=J.start(b),Ce=Te-D;Ce>0&&(Ce<=Q||x)&&(he=Te)}var Ie=h.getTimeToStreamEnd();if(isNaN(he)&&ne&&isFinite(Ie)&&!isNaN(Ie)&&Ie<Q&&(he=parseFloat(h.getStreamEndTime().toFixed(5)),Ne=!0),z&&isNaN(he)&&ne&&isNaN(b)&&M(J,D)&&(oe===0?(N.warn("Toggle play pause to break stall"),L.pause(),L.play()):(N.warn("Jumping ".concat(oe,"s to break stall")),he=D+oe)),he>0&&A!==he&&he>D&&!Y){var et=he-D;if(Ne){var nt=w.getStreamForTime(he),We=nt&&!!nt.getPreloaded();N.warn("Jumping to end of stream because of gap from ".concat(D," to ").concat(he,". Gap duration: ").concat(et)),h.seek(he,!0,We)}else{var Xe=h.getIsDynamic(),Mt=b>0?J.end(b-1):D,Ee=Xe?1e3*Math.max(0,et-.1):0;Y=window.setTimeout(function(){h.seek(he,!0,!0),N.warn("Jumping gap occuring in period ".concat(w.getActiveStream().getStreamId()," starting at ").concat(Mt," and ending at ").concat(he,". Jumping by: ").concat(he-Mt)),Y=null},Ee)}A=he}}return i={reset:ce,setConfig:function(D){D&&(D.settings&&(l=D.settings),D.playbackController&&(h=D.playbackController),D.streamController&&(w=D.streamController),D.videoModel&&(L=D.videoModel))},initialize:function(){(function(){Z.on(u.Z.WALLCLOCK_TIME_UPDATED,ie,this),Z.on(u.Z.INITIAL_STREAM_SWITCH,G,this),Z.on(u.Z.PLAYBACK_SEEKING,te,this),Z.on(u.Z.BUFFER_REPLACEMENT_STARTED,ue,i),Z.on(u.Z.TRACK_CHANGE_RENDERED,de,i)})()}},N=(0,m.Z)(U).getInstance().getLogger(i),ce(),i}la.__dashjs_factory_name="GapController";var Ro=_.Z.getSingletonFactory(la);function ca(){var i,r,l,E,R,A,h,w,L,Y,B=this.context,N=(0,p.Z)(B).getInstance();function U(){r=!1;var le=pt.Z.parseUserAgent();l=le&&le.browser&&le.browser.name&&le.browser.name.toLowerCase()==="safari"}function Z(){r=!1}function ce(le){if(le.streamId===A.getActiveStreamInfo().id&&L){var g=h.getLiveDelay();h.getBufferLevel()>g/2&&(L=!1)}}function te(le){le.streamId===A.getActiveStreamInfo().id&&(L=le.state===y.Z.BUFFER_EMPTY)}function ue(){w.getCatchupModeEnabled()||E.setPlaybackRate(1)}function de(){h.getIsDynamic()&&w.getCatchupModeEnabled()&&(w.getCatchupPlaybackRates().max>0||w.getCatchupPlaybackRates().min<0)&&!h.isPaused()&&!h.isSeeking()&&function(){try{return!(!h.getTime()>0||r)&&(ie()===t.Z.LIVE_CATCHUP_MODE_LOLP?function(le,g){try{return Math.abs(G())>0||le<g}catch{return!1}}(h.getBufferLevel(),R.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(G())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!r&&E){var le,g=E.getPlaybackRate(),M=w.getCatchupPlaybackRates(),C=h.getBufferLevel(),D=G(),b=w.getCatchupMaxDrift();if(!isNaN(b)&&b>0&&D>b)Y.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,h.seekToCurrentLive(!0,!1);else{var ne=h.getCurrentLiveLatency(),z=h.getLiveDelay();le=ie()===t.Z.LIVE_CATCHUP_MODE_LOLP?function(Q,x,J,he,Ne){var Te;if(Ne<he){var Ce=Math.abs(Q.min),Ie=5*(Ne-he);Te=1-Ce+2*Ce/(1+Math.pow(Math.E,-Ie)),Y.debug("[LoL+ playback control_buffer-based] bufferLevel: "+Ne+", newRate: "+Te)}else{if(Math.abs(x-J)<=.02*J)Te=1;else{var et=x-J,nt=et<0?Math.abs(Q.min):Q.max,We=5*et;Te=1-nt+2*nt/(1+Math.pow(Math.E,-We))}Y.debug("[LoL+ playback control_latency-based] latency: "+x+", newRate: "+Te)}return Te}(M,ne,z,R.get().streaming.liveCatchup.playbackBufferMin,C):function(Q,x,J,he){if(L)return 1;var Ne=x-J,Te=Ne<0?Math.abs(Q.min):Q.max,Ce=5*Ne,Ie=1-Te+2*Te/(1+Math.pow(Math.E,-Ce));return h.getPlaybackStalled()&&he<=J/2&&Ne>0&&(Ie=1),Ie}(M,ne,z,C);var oe=l?.25:.02/(.5/M.max);le&&Math.abs(g-le)>=oe&&(Y.debug("[CatchupController]: Setting playback rate to ".concat(le)),E.setPlaybackRate(le))}}}()}function G(){return h.getCurrentLiveLatency()-h.getLiveDelay()}function ie(){var le=R.get().streaming.liveCatchup.playbackBufferMin;return R.get().streaming.liveCatchup.mode!==t.Z.LIVE_CATCHUP_MODE_LOLP||le===null||isNaN(le)?t.Z.LIVE_CATCHUP_MODE_DEFAULT:t.Z.LIVE_CATCHUP_MODE_LOLP}function j(){w.getCatchupPlaybackRates(!0)}return i={reset:function(){N.off(n.Z.BUFFER_LEVEL_UPDATED,ce,i),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,te,i),N.off(n.Z.PLAYBACK_PROGRESS,de,i),N.off(n.Z.PLAYBACK_TIME_UPDATED,de,i),N.off(n.Z.PLAYBACK_SEEKED,Z,i),N.off(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,ue,i),N.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,j,i),N.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,j,i),N.off(n.Z.STREAM_INITIALIZED,j,i),U(),E.setPlaybackRate(1,!0)},setConfig:function(le){le&&(le.settings&&(R=le.settings),le.videoModel&&(E=le.videoModel),le.streamController&&(A=le.streamController),le.playbackController&&(h=le.playbackController),le.mediaPlayerModel&&(w=le.mediaPlayerModel))},initialize:function(){N.on(n.Z.BUFFER_LEVEL_UPDATED,ce,i),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,te,i),N.on(n.Z.PLAYBACK_PROGRESS,de,i),N.on(n.Z.PLAYBACK_TIME_UPDATED,de,i),N.on(n.Z.PLAYBACK_SEEKED,Z,i),N.on(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,ue,i),N.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,j,i),N.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,j,i),N.on(n.Z.STREAM_INITIALIZED,j,i),j()}},Y=(0,m.Z)(B).getInstance().getLogger(i),U(),i}ca.__dashjs_factory_name="CatchupController";var wo=_.Z.getSingletonFactory(ca),No=[t.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],fa="video",da="audio";function ga(){var i,r,l,E,R,A=this.context;function h(){r={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},l=[]}function w(L,Y,B){try{r[L][Y]=B/1e3}catch(N){E.error(N)}}return i={getServiceDescriptionSettings:function(){return r},getProducerReferenceTimeOffsets:function(){return l},calculateProducerReferenceTimeOffsets:function(L){try{var Y=[];if(L&&L.length>0){var B=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT],N=R.getAvailabilityStartTime()/1e3;L.forEach(function(U){var Z=B.reduce(function(ce,te){return ce.concat(R.getAllMediaInfoForType(U,te))},[]).reduce(function(ce,te){return R.getProducerReferenceTimes(U,te).forEach(function(ue){var de=R.getVoRepresentations(te);if(de&&de.length>0&&de[0].adaptation&&de[0].segmentInfoType===e.Z.SEGMENT_TEMPLATE){var G=de[0],ie=new Date(ue[e.Z.WALL_CLOCK_TIME]).getTime()/1e3-(ue[e.Z.PRESENTATION_TIME]/G[e.Z.TIMESCALE]-G[e.Z.PRESENTATION_TIME_OFFSET]+U.start),j=N-ie;ce.push({id:ue[e.Z.ID],to:j})}}),ce},[]);Y=Y.concat(Z)})}l=Y}catch(U){E.error(U),l=[]}},applyServiceDescription:function(L){if(L&&L.serviceDescriptions){var Y=L.serviceDescriptions.filter(function(U){return No.includes(U.schemeIdUri)}),B=L.serviceDescriptions.filter(function(U){return U.schemeIdUri==null}),N=Y.length>0?Y[Y.length-1]:B[B.length-1];N&&(N.latency&&N.latency.target>0&&function(U){var Z;if(U.schemeIdUri,t.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,Z=function(de){return{liveDelay:de.latency.target/1e3,maxDrift:!isNaN(de.latency.max)&&de.latency.max>de.latency.target?(de.latency.max-de.latency.target+500)/1e3:NaN,referenceId:de.latency.referenceId||NaN}}(U),l.length>0){var ce=function(de){var G,ie=0,j=l.filter(function(le){return le.id===de.referenceId});return j.length===0?(ie=l.length>0?l[0].to:0,G=l[0].id||NaN):(ie=j[0].to||0,G=j[0].id||NaN),{to:ie,id:G}}(Z),te=ce.to,ue=ce.id;r.liveDelay=Z.liveDelay-te,r.liveCatchup.maxDrift=Z.maxDrift,E.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(te," from ProducerReferenceTime element with id ").concat(ue,`.
                Live Delay: `).concat(Z.liveDelay-te,", Live catchup max drift: ").concat(Z.maxDrift,`
            `))}else r.liveDelay=Z.liveDelay,r.liveCatchup.maxDrift=Z.maxDrift,E.debug("Found latency properties coming from service description: Live Delay: ".concat(Z.liveDelay,", Live catchup max drift: ").concat(Z.maxDrift))}(N),N.playbackRate&&function(U){var Z=U.playbackRate.min?Math.round(1e3*(U.playbackRate.min-1))/1e3:NaN,ce=U.playbackRate.max?Math.round(1e3*(U.playbackRate.max-1))/1e3:NaN;r.liveCatchup.playbackRate.min=Z,r.liveCatchup.playbackRate.max=ce,E.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(Z)),E.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(ce))}(N),N.operatingQuality,N.operatingBandwidth&&function(U){if(U&&U.operatingBandwidth&&U.operatingBandwidth.mediaType&&U.operatingBandwidth.mediaType!=="all"){var Z={};Z.minBandwidth=U.operatingBandwidth.min,Z.maxBandwidth=U.operatingBandwidth.max,Z.targetBandwidth=U.operatingBandwidth.target;var ce=[];U.operatingBandwidth.mediaType===fa||U.operatingBandwidth.mediaType===da?ce.push(U.operatingBandwidth.mediaType):U.operatingBandwidth.mediaType==="any"&&(ce.push(da),ce.push(fa)),ce.forEach(function(te){isNaN(Z.minBandwidth)||w("minBitrate",te,Z.minBandwidth),isNaN(Z.maxBandwidth)||w("maxBitrate",te,Z.maxBandwidth),isNaN(Z.targetBandwidth)||w("initialBitrate",te,Z.targetBandwidth)})}}(N),N.contentSteering&&function(U){r.contentSteering=U.contentSteering}(N))}},reset:function(){h()},setConfig:function(L){L&&L.adapter&&(R=L.adapter)}},E=(0,m.Z)(A).getInstance().getLogger(i),h(),i}ga.__dashjs_factory_name="ServiceDescriptionController";var Co=_.Z.getSingletonFactory(ga),Do=P(3973),oi=P.n(Do),ha=P(3039);function Oi(){var i,r,l,E,R,A,h,w,L=this.context,Y=(0,p.Z)(L).getInstance();function B(x,J){return x&&l[J]&&l[J][x]?l[J][x].list:[]}function N(x,J){return x&&l[J]&&l[J][x]?l[J][x].current:null}function U(x){var J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(x&&x.streamInfo){var he=x.type,Ne=x.streamInfo,Te=Ne.id,Ce=N(he,Te);if(l[Te]&&l[Te][he]&&(l[Te][he].current=x,l[Te][he].current&&(he!==t.Z.TEXT&&!te(x,Ce)||he===t.Z.TEXT&&x.isFragmented)&&Y.trigger(u.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Ce,newMediaInfo:x,switchMode:E.get().streaming.trackSwitchMode[he]},{streamId:Te}),!J)){var Ie=de(x);if(!Ie||!l[Te][he].storeLastSettings)return;Ie.roles&&(Ie.role=Ie.roles[0],delete Ie.roles),Ie.accessibility&&(Ie.accessibility=Ie.accessibility[0]),Ie.audioChannelConfiguration&&(Ie.audioChannelConfiguration=Ie.audioChannelConfiguration[0]),A[he]=Ie,w.setSavedMediaSettings(he,Ie)}}}function Z(x,J){x&&J&&(R[x]=J)}function ce(x){return x?R[x]:null}function te(x,J){if(!x&&!J)return!0;if(!x||!J)return!1;var he=x.id===J.id,Ne=x.viewpoint===J.viewpoint,Te=JSON.stringify(x.viewpointsWithSchemeIdUri)===JSON.stringify(J.viewpointsWithSchemeIdUri),Ce=x.lang===J.lang,Ie=x.codec===J.codec,et=x.roles.toString()===J.roles.toString(),nt=JSON.stringify(x.rolesWithSchemeIdUri)===JSON.stringify(J.rolesWithSchemeIdUri),We=x.accessibility.toString()===J.accessibility.toString(),Xe=JSON.stringify(x.accessibilitiesWithSchemeIdUri)===JSON.stringify(J.accessibilitiesWithSchemeIdUri),Mt=x.audioChannelConfiguration.toString()===J.audioChannelConfiguration.toString(),Ee=JSON.stringify(x.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(J.audioChannelConfigurationsWithSchemeIdUri);return he&&Ie&&Ne&&Te&&Ce&&et&&nt&&We&&Xe&&Mt&&Ee}function ue(){l={},A={},R={audio:null,video:null,text:null}}function de(x){var J={lang:x.lang,viewpoint:x.viewpoint,roles:x.roles,accessibility:x.accessibility,audioChannelConfiguration:x.audioChannelConfiguration,codec:x.codec};return J.lang||J.viewpoint||J.role&&J.role.length>0||J.accessibility&&J.accessibility.length>0||J.audioChannelConfiguration&&J.audioChannelConfiguration.length>0?J:null}function G(x,J,he){var Ne=[];return x.forEach(function(Te){J(he,Te)&&Ne.push(Te)}),Ne.length!==0?Ne:x}function ie(x,J){try{return!x.lang||x.lang instanceof RegExp?J.lang.match(x.lang):J.lang!==""&&(0,ha.extendedFilter)(J.lang,oi()(x.lang)).length>0}catch{return!1}}function j(x,J){return x.index===void 0||x.index===null||J.index===x.index}function le(x,J){return!x.viewpoint||x.viewpoint===J.viewpoint}function g(x,J){var he=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Ne=!x.role||!!J.roles.filter(function(Te){return Te===x.role})[0];return Ne||J.type===t.Z.AUDIO&&he}function M(x,J){return x.accessibility?!!J.accessibility.filter(function(he){return he===x.accessibility})[0]:!J.accessibility.length}function C(x,J){return!x.audioChannelConfiguration||!!J.audioChannelConfiguration.filter(function(he){return he===x.audioChannelConfiguration})[0]}function D(x,J){return!x.codec||x.codec===J.codec}function b(x){var J,he=0,Ne=[];return x.forEach(function(Te){(J=Math.max.apply(Math,Te.bitrateList.map(function(Ce){return Ce.bandwidth})))>he?(he=J,Ne=[Te]):J===he&&Ne.push(Te)}),Ne}function ne(x){var J,he=1/0,Ne=[];return x.forEach(function(Te){var Ce=Te.bitrateList.reduce(function(Ie,et){var nt=Math.max(1,et.width*et.height);return Ie+et.bandwidth/nt},0);(J=Ce/Te.bitrateList.length)<he?(he=J,Ne=[Te]):J===he&&Ne.push(Te)}),Ne}function z(x){var J,he=0,Ne=[];return x.forEach(function(Te){(J=Te.representationCount)>he?(he=J,Ne=[Te]):J===he&&Ne.push(Te)}),Ne}function oe(x,J){if(x===t.Z.TEXT)return J[0];var he,Ne=E.get().streaming.selectionModeForInitialTrack,Te=h.getCustomInitialTrackSelectionFunction();if(Te&&typeof Te=="function")he=Te(J);else switch(Ne){case t.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:he=function(Ce){var Ie,et,nt=(Ie=0,et=[],Ce.forEach(function(We){isNaN(We.selectionPriority)||(We.selectionPriority>Ie?(Ie=We.selectionPriority,et=[We]):We.selectionPriority===Ie&&et.push(We))}),et);return nt.length>1&&(nt=b(nt)),nt.length>1&&(nt=z(nt)),nt}(J);break;case t.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:he=function(Ce){var Ie=b(Ce);return Ie.length>1&&(Ie=z(Ie)),Ie}(J);break;case t.Z.TRACK_SELECTION_MODE_FIRST_TRACK:he=Q(J);break;case t.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:he=function(Ce){var Ie=ne(Ce);return Ie.length>1&&(Ie=b(Ie)),Ie}(J);break;case t.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:he=function(Ce){var Ie=z(Ce);return Ie.length>1&&(Ie=b(Ce)),Ie}(J);break;default:r.warn("Track selection mode ".concat(Ne," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),he=Q(J)}return he.length>0?he[0]:J[0]}function Q(x){return x[0]}return i={setInitialMediaSettingsForType:function(x,J){var he=A[x]||ce(x),Ne=B(x,J.id),Te=[];he||((he=w.getSavedMediaSettings(x))&&delete he.codec,Z(x,he)),Ne&&Ne.length!==0&&(he&&(Te=G(Te=Array.from(Ne),ie,he),Te=G(Te,j,he),Te=G(Te,le,he),x===t.Z.AUDIO&&A[x]||(Te=G(Te,g,he)),Te=G(Te,M,he),Te=G(Te,C,he),Te=G(Te,D,he)),Te.length===0?U(oe(x,Ne),!0):Te.length>1?U(oe(x,Te)):U(Te[0]))},addTrack:function(x){if(x){var J=x.type;if((he=J)===t.Z.AUDIO||he===t.Z.VIDEO||he===t.Z.TEXT||he===t.Z.IMAGE){var he,Ne,Te=x.streamInfo.id;l[Te]||(l[Te]={audio:{list:[],storeLastSettings:Ne=E.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:Ne,current:null},text:{list:[],storeLastSettings:Ne,current:null},image:{list:[],storeLastSettings:Ne,current:null}});for(var Ce=l[Te][J].list,Ie=0,et=Ce.length;Ie<et;++Ie)if(te(Ce[Ie],x))return;Ce.push(x)}}},getTracksFor:B,getCurrentTrackFor:N,isCurrentTrack:function(x){if(!x)return!1;var J=x.type,he=x.streamInfo.id;return l[he]&&l[he][J]&&te(l[he][J].current,x)},setTrack:U,selectInitialTrack:oe,setInitialSettings:Z,getInitialSettings:ce,getTracksWithHighestBitrate:b,getTracksWithHighestEfficiency:ne,getTracksWithWidestRange:z,isTracksEqual:te,matchSettings:function(x,J){var he=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var Ne=!1;if(x.lang){if(x.lang instanceof RegExp)Ne=J.lang.match(x.lang);else if(J.lang!==""){var Te=oi()(x.lang);Te&&(Ne=(0,ha.extendedFilter)(J.lang,Te).length>0)}}else Ne=!0;var Ce=x.index===void 0||x.index===null||J.index===x.index,Ie=!x.viewpoint||x.viewpoint===J.viewpoint,et=!x.role||!!J.roles.filter(function(Xe){return Xe===x.role})[0],nt=!x.accessibility||!!J.accessibility.filter(function(Xe){return Xe===x.accessibility})[0],We=!x.audioChannelConfiguration||!!J.audioChannelConfiguration.filter(function(Xe){return Xe===x.audioChannelConfiguration})[0];return Ne&&Ce&&Ie&&(et||J.type===t.Z.AUDIO&&he)&&nt&&We}catch{return!1}},matchSettingsLang:ie,matchSettingsIndex:j,matchSettingsViewPoint:le,matchSettingsRole:g,matchSettingsAccessibility:M,matchSettingsAudioChannelConfig:C,saveTextSettingsDisabled:function(){w.setSavedMediaSettings(t.Z.TEXT,null)},setConfig:function(x){x&&(x.domStorage&&(w=x.domStorage),x.settings&&(E=x.settings),x.customParametersModel&&(h=x.customParametersModel))},reset:ue},r=(0,m.Z)(L).getInstance().getLogger(i),ue(),i}Oi.__dashjs_factory_name="MediaController";var ma=_.Z.getSingletonFactory(Oi);_.Z.updateSingletonFactory(Oi.__dashjs_factory_name,ma);var Oo=ma,si=NaN,pa=function i(r,l){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.data={baseUrls:r||null,selectedIdx:l||si},this.children=[]};function ya(){var i,r,l,E,R=this.context,A=Ot(R).getInstance();function h(B,N,U){var Z=w(U);B[N]?A.areEqual(Z,B[N].data.baseUrls)||(B[N].data.baseUrls=Z,B[N].data.selectedIdx=si):B[N]=new pa(Z)}function w(B){var N=l.getBaseURLsFromElement(B),U=E.getSynthesizedBaseUrlElements(N);return U&&U.length>0&&(N=N.concat(U)),N}function L(B,N){var U=N||r;B(U.data),U.children&&U.children.forEach(function(Z){return L(B,Z)})}function Y(){r=new pa}return i={reset:Y,update:function(B){(function(N){(function(){if(!l||!l.hasOwnProperty("getBaseURLsFromElement")||!l.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var U=w(N);A.areEqual(U,r.data.baseUrls)||(r.data.baseUrls=U,r.data.selectedIdx=si),N&&N.Period_asArray&&N.Period_asArray.forEach(function(Z,ce){h(r.children,ce,Z),Z.AdaptationSet_asArray&&Z.AdaptationSet_asArray.forEach(function(te,ue){h(r.children[ce].children,ue,te),te.Representation_asArray&&te.Representation_asArray.sort(l.getRepresentationSortFunction()).forEach(function(de,G){h(r.children[ce].children[ue].children,G,de)})})})})(B)},getForPath:function(B){var N=r,U=[N.data];return B&&B.forEach(function(Z){(N=N.children[Z])&&U.push(N.data)}),U.filter(function(Z){return Z.baseUrls.length})},invalidateSelectedIndexes:function(B){L(function(N){isNaN(N.selectedIdx)||B===N.baseUrls[N.selectedIdx].serviceLocation&&(N.selectedIdx=si)})},setConfig:function(B){B.adapter&&(l=B.adapter),B.contentSteeringController&&(E=B.contentSteeringController)},getBaseUrls:function(B){return w(B)}},Y(),i}ya.__dashjs_factory_name="BaseURLTreeModel";var Mo=_.Z.getClassFactory(ya);function Ea(i){var r=(i=i||{}).blacklistController;return{select:function(l){return l&&function(R){var A,h,w=0,L=[],Y=0;if((h=R.sort(function(B,N){var U=B.dvbPriority-N.dvbPriority;return isNaN(U)?0:U}).filter(function(B,N,U){return!N||U[0].dvbPriority&&B.dvbPriority&&U[0].dvbPriority===B.dvbPriority})).length)return h.length>1&&(h.forEach(function(B){w+=B.dvbWeight,L.push(w)}),A=Math.floor(Math.random()*(w-1)),L.every(function(B,N){return Y=N,!(A<B)})),h[Y]}((E=[],l.filter(function(R){return!r.contains(R.serviceLocation)||(R.dvbPriority&&E.push(R.dvbPriority),!1)}).filter(function(R){return!E.length||!R.dvbPriority||E.indexOf(R.dvbPriority)===-1})));var E}}}Ea.__dashjs_factory_name="DVBSelector";var Po=_.Z.getClassFactory(Ea);function va(i){var r=(i=i||{}).blacklistController;return{select:function(l){var E,R=0;return l&&l.some(function(A,h){return R=h,!r.contains(A.serviceLocation)})&&(E=l[R]),E}}}va.__dashjs_factory_name="BasicSelector";var Lo=_.Z.getClassFactory(va);function _a(){var i,r,l,E=this.context;function R(){for(var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],w=0,L=NaN,Y=function(){var N=A[w],U=h.findIndex(function(Z){return Z.serviceLocation&&Z.serviceLocation===N});if(U!==-1&&!l.contains(h[U].serviceLocation))return L=U,"break";w+=1};w<A.length;){var B=Y();if(B==="break")break}return L}return i={selectBaseUrlIndex:function(A){var h=NaN;if(isNaN(A.selectedIdx)){var w=r.getSteeringDataFromManifest();w&&w.defaultServiceLocationArray.length>0&&(h=R(w.defaultServiceLocationArray,A.baseUrls))}var L=r.getCurrentSteeringResponseData();return A.baseUrls&&A.baseUrls.length&&L&&L.pathwayPriority&&L.pathwayPriority.length&&(h=R(L.pathwayPriority,A.baseUrls)),h},setConfig:function(A){A.blacklistController&&(l=A.blacklistController),A.contentSteeringController&&(r=A.contentSteeringController)}},r=or(E).getInstance(),i}_a.__dashjs_factory_name="ContentSteeringSelector";var Fo=_.Z.getClassFactory(_a);function Ta(){var i,r,l,E,R,A,h=this.context,w=(0,p.Z)(h).getInstance(),L=(0,Ae.Z)(h).getInstance();function Y(){r.reset()}return i={chooseSelector:function(B){(0,W.PS)(B,"boolean"),A=B?E:l},select:function(B){if(B){if(L.get().streaming.applyContentSteering){var N=R.selectBaseUrlIndex(B);isNaN(N)||N===-1||(B.selectedIdx=N)}if(!isNaN(B.selectedIdx))return B.baseUrls[B.selectedIdx];var U=A.select(B.baseUrls);return U?(B.selectedIdx=B.baseUrls.indexOf(U),U):(w.trigger(u.Z.URL_RESOLUTION_FAILED,{error:new re.Z(X.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,X.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(A===l&&Y()))}},reset:Y,setConfig:function(B){B.selector&&(A=B.selector),B.contentSteeringSelector&&(R=B.contentSteeringSelector)}},r=Lr(h).create({updateEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),l=Lo(h).create({blacklistController:r}),E=Po(h).create({blacklistController:r}),(R=Fo(h).create()).setConfig({blacklistController:r}),A=l,i}Ta.__dashjs_factory_name="BaseURLSelector";var xo=_.Z.getClassFactory(Ta);function Sa(){var i,r,l,E,R,A=this.context,h=(0,p.Z)(A).getInstance(),w=(0,ze.Z)(A).getInstance();function L(B){l.update(B),E.chooseSelector(r.getIsDVB(B)),h.trigger(n.Z.BASE_URLS_UPDATED,{baseUrls:Y(B)})}function Y(B){return l.getBaseUrls(B)}return i={reset:function(){l.reset(),E.reset()},initialize:function(B){l.setConfig({adapter:r,contentSteeringController:R}),L(B)},resolve:function(B){var N=l.getForPath(B).reduce(function(U,Z){var ce=E.select(Z);return ce?(w.isRelative(ce.url)?U.url=w.resolve(ce.url,U.url):(U.url=ce.url,U.serviceLocation=ce.serviceLocation),U.availabilityTimeOffset=ce.availabilityTimeOffset,U.availabilityTimeComplete=ce.availabilityTimeComplete,U.queryParams=ce.queryParams,U):new rr},new rr);if(!w.isRelative(N.url))return N},setConfig:function(B){B.baseURLTreeModel&&(l=B.baseURLTreeModel),B.baseURLSelector&&(E=B.baseURLSelector),B.adapter&&(r=B.adapter),B.contentSteeringController&&(R=B.contentSteeringController)},getBaseUrls:Y,update:L},l=Mo(A).create(),E=xo(A).create(),h.on(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(B){l.invalidateSelectedIndexes(B.entry)},i),i}Sa.__dashjs_factory_name="BaseURLController";var ko=_.Z.getClassFactory(Sa);function Mi(i){return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mi(i)}function Pi(i,r){return Pi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Pi(i,r)}function Zo(i,r){return!r||Mi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function ui(i){return ui=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ui(i)}var ba=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Pi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=ui(r);if(l){var w=ui(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Zo(this,A)});function R(A,h){var w;return function(L,Y){if(!(L instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,R),(w=E.call(this)).url=A||null,w.type=h||null,w.mediaType=t.Z.STREAM,w.responseType="",w}return R}(I.Z);function Aa(i){i=i||{};var r=this.context,l=(0,p.Z)(r).getInstance(),E=Wn(r).create({errHandler:i.errHandler,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,errors:X});return{load:function(R,A,h){var w=function(Y,B){A.resolved=!0,A.resolvedContent=Y||null,l.trigger(u.Z.XLINK_ELEMENT_LOADED,{element:A,resolveObject:h,error:Y||B?null:new re.Z(X.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,X.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+R)})};if(R==="urn:mpeg:dash:resolve-to-zero:2013")w(null,!0);else{var L=new ba(R,Le.w.XLINK_EXPANSION_TYPE);E.load({request:L,success:function(Y){w(Y)},error:function(){w(null)}})}},reset:function(){E&&(E.abort(),E=null)}}}Aa.__dashjs_factory_name="XlinkLoader";var Uo=_.Z.getClassFactory(Aa),Ia=function(i){(i=i||{}).escapeMode===void 0&&(i.escapeMode=!0),i.attributePrefix===void 0&&(i.attributePrefix="_"),i.arrayAccessForm=i.arrayAccessForm||"none",i.emptyNodeForm=i.emptyNodeForm||"text",i.enableToStringFunc===void 0&&(i.enableToStringFunc=!0),i.arrayAccessFormPaths=i.arrayAccessFormPaths||[],i.skipEmptyTextNodesForObj===void 0&&(i.skipEmptyTextNodesForObj=!0),i.stripWhitespaces===void 0&&(i.stripWhitespaces=!0),i.datetimeAccessFormPaths=i.datetimeAccessFormPaths||[],i.useDoubleQuotes===void 0&&(i.useDoubleQuotes=!1),i.xmlElementsFilter=i.xmlElementsFilter||[],i.jsonPropertiesFilter=i.jsonPropertiesFilter||[],i.keepCData===void 0&&(i.keepCData=!1),i.ignoreRoot===void 0&&(i.ignoreRoot=!1);function r(G){var ie=G.localName;return ie==null&&(ie=G.baseName),ie!=null&&ie!=""||(ie=G.nodeName),ie}function l(G){return typeof G=="string"?G.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):G}function E(G,ie,j,le){for(var g=0;g<G.length;g++){var M=G[g];if(typeof M=="string"){if(M==le)break}else if(M instanceof RegExp){if(M.test(le))break}else if(typeof M=="function"&&M(ie,j,le))break}return g!=G.length}function R(G,ie,j){i.arrayAccessForm==="property"&&(G[ie]instanceof Array?G[ie+"_asArray"]=G[ie]:G[ie+"_asArray"]=[G[ie]]),!(G[ie]instanceof Array)&&i.arrayAccessFormPaths.length>0&&E(i.arrayAccessFormPaths,G,ie,j)&&(G[ie]=[G[ie]])}function A(G){var ie=G.split(/[-T:+Z]/g),j=new Date(ie[0],ie[1]-1,ie[2]),le=ie[5].split(".");if(j.setHours(ie[3],ie[4],le[0]),le.length>1&&j.setMilliseconds(le[1]),ie[6]&&ie[7]){var g=60*ie[6]+Number(ie[7]);g=0+((/\d\d-\d\d:\d\d$/.test(G)?"-":"+")=="-"?-1*g:g),j.setMinutes(j.getMinutes()-g-j.getTimezoneOffset())}else G.indexOf("Z",G.length-1)!==-1&&(j=new Date(Date.UTC(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds())));return j}function h(G,ie,j,le){return!(ie==1&&i.xmlElementsFilter.length>0)||E(i.xmlElementsFilter,G,j,le)}function w(G,ie){if(G.nodeType==9){for(var j=new Object,le=G.childNodes,g=0;g<le.length;g++)(C=le[g]).nodeType==1&&(i.ignoreRoot?j=w(C):(j={})[D=r(C)]=w(C));return j}if(G.nodeType==1){(j=new Object).__cnt=0;var M=[];for(le=G.childNodes,g=0;g<le.length;g++){var C,D=r(C=le[g]);if(C.nodeType!=8){var b=ie+"."+D;if(h(j,C.nodeType,D,b))if(j.__cnt++,j[D]==null){var ne=w(C,b);(D!="#text"||/[^\s]/.test(ne))&&((z={})[D]=ne,M.push(z)),j[D]=ne,R(j,D,b)}else{var z;j[D]!=null&&(j[D]instanceof Array||(j[D]=[j[D]],R(j,D,b))),ne=w(C,b),(D!="#text"||/[^\s]/.test(ne))&&((z={})[D]=ne,M.push(z)),j[D][j[D].length]=ne}}}j.__children=M;for(var oe=r(G),Q=0;Q<G.attributes.length;Q++){var x=G.attributes[Q];j.__cnt++;for(var J=x.value,he=0,Ne=i.matchers.length;he<Ne;he++){var Te=i.matchers[he];Te.test(x,oe)&&(J=Te.converter(x.value))}j[i.attributePrefix+x.name]=J}var Ce=function(Ie){return Ie.prefix}(G);return Ce!=null&&Ce!=""&&(j.__cnt++,j.__prefix=Ce),j["#text"]!=null&&(j.__text=j["#text"],j.__text instanceof Array&&(j.__text=j.__text.join(`
`)),i.stripWhitespaces&&(j.__text=j.__text.trim()),delete j["#text"],i.arrayAccessForm=="property"&&delete j["#text_asArray"],j.__text=function(Ie,et,nt){if(i.datetimeAccessFormPaths.length>0){var We=nt.split(".#")[0];return E(i.datetimeAccessFormPaths,Ie,et,We)?A(Ie):Ie}return Ie}(j.__text,D,ie+"."+D)),j["#cdata-section"]!=null&&(j.__cdata=j["#cdata-section"],delete j["#cdata-section"],i.arrayAccessForm=="property"&&delete j["#cdata-section_asArray"]),j.__cnt==0&&i.emptyNodeForm=="text"?j="":j.__cnt==1&&j.__text!=null?j=j.__text:j.__cnt!=1||j.__cdata==null||i.keepCData?j.__cnt>1&&j.__text!=null&&i.skipEmptyTextNodesForObj&&(i.stripWhitespaces&&j.__text==""||j.__text.trim()=="")&&delete j.__text:j=j.__cdata,delete j.__cnt,!i.enableToStringFunc||j.__text==null&&j.__cdata==null||(j.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),j}if(G.nodeType==3||G.nodeType==4)return G.nodeValue}function L(G,ie,j,le){var g="<"+(G!=null&&G.__prefix!=null?G.__prefix+":":"")+ie;if(j!=null)for(var M=0;M<j.length;M++){var C=j[M],D=G[C];i.escapeMode&&(D=l(D)),g+=" "+C.substr(i.attributePrefix.length)+"=",i.useDoubleQuotes?g+='"'+D+'"':g+="'"+D+"'"}return g+(le?"/>":">")}function Y(G,ie){return"</"+(G.__prefix!=null?G.__prefix+":":"")+ie+">"}function B(G,ie){return i.arrayAccessForm=="property"&&(le="_asArray",(j=ie.toString()).indexOf(le,j.length-le.length)!==-1)||ie.toString().indexOf(i.attributePrefix)==0||ie.toString().indexOf("__")==0||G[ie]instanceof Function;var j,le}function N(G){var ie=0;if(G instanceof Object)for(var j in G)B(G,j)||ie++;return ie}function U(G,ie,j){return i.jsonPropertiesFilter.length==0||j==""||E(i.jsonPropertiesFilter,G,ie,j)}function Z(G){var ie=[];if(G instanceof Object)for(var j in G)j.toString().indexOf("__")==-1&&j.toString().indexOf(i.attributePrefix)==0&&ie.push(j);return ie}function ce(G){var ie="";return G instanceof Object?ie+=function(j){var le="";return j.__cdata!=null&&(le+="<![CDATA["+j.__cdata+"]]>"),j.__text!=null&&(i.escapeMode?le+=l(j.__text):le+=j.__text),le}(G):G!=null&&(i.escapeMode?ie+=l(G):ie+=G),ie}function te(G,ie){return G===""?ie:G+"."+ie}function ue(G,ie,j,le){var g="";if(G.length==0)g+=L(G,ie,j,!0);else for(var M=0;M<G.length;M++)g+=L(G[M],ie,Z(G[M]),!1),g+=de(G[M],te(le,ie)),g+=Y(G[M],ie);return g}function de(G,ie){var j="";if(N(G)>0){for(var le in G)if(!B(G,le)&&(ie==""||U(G,le,te(ie,le)))){var g=G[le],M=Z(g);g==null||g==null?j+=L(g,le,M,!0):g instanceof Object?g instanceof Array?j+=ue(g,le,M,ie):g instanceof Date?(j+=L(g,le,M,!1),j+=g.toISOString(),j+=Y(g,le)):N(g)>0||g.__text!=null||g.__cdata!=null?(j+=L(g,le,M,!1),j+=de(g,te(ie,le)),j+=Y(g,le)):j+=L(g,le,M,!0):(j+=L(g,le,M,!1),j+=ce(g),j+=Y(g,le))}}return j+ce(G)}this.parseXmlString=function(G){var ie;if(G===void 0)return null;if(window.DOMParser){var j=new window.DOMParser;try{(ie=j.parseFromString(G,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ie=null)}catch{ie=null}}else G.indexOf("<?")==0&&(G=G.substr(G.indexOf("?>")+2)),(ie=new ActiveXObject("Microsoft.XMLDOM")).async="false",ie.loadXML(G);return ie},this.asArray=function(G){return G===void 0||G==null?[]:G instanceof Array?G:[G]},this.toXmlDateTime=function(G){return G instanceof Date?G.toISOString():typeof G=="number"?new Date(G).toISOString():null},this.asDateTime=function(G){return typeof G=="string"?A(G):G},this.xml2json=function(G){return w(G)},this.xml_str2json=function(G){var ie=this.parseXmlString(G);return ie!=null?this.xml2json(ie):null},this.json2xml_str=function(G){return de(G,"")},this.json2xml=function(G){var ie=this.json2xml_str(G);return this.parseXmlString(ie)},this.getVersion=function(){return"1.2.0"}},kr="onLoad";function Ra(i){i=i||{};var r,l,E,R,A,h,w=this.context,L=(0,p.Z)(w).getInstance(),Y=(0,ze.Z)(w).getInstance();function B(te,ue,de){var G,ie,j={};j.elements=te,j.type=ue,j.resolveType=de,j.elements.length===0&&U(j);for(var le=0;le<j.elements.length;le++)G=j.elements[le],ie=Y.isHTTPURL(G.url)?G.url:G.originalContent.BaseURL+G.url,h.load(ie,G,j)}function N(te){var ue,de,G="";if(ue=te.element,de=te.resolveObject,ue.resolvedContent){var ie=0;ue.resolvedContent.indexOf("<?xml")===0&&(ie=ue.resolvedContent.indexOf("?>")+2),G=ue.resolvedContent.substr(0,ie)+"<response>"+ue.resolvedContent.substr(ie)+"</response>",ue.resolvedContent=A.xml_str2json(G)}(function(j){var le;for(le=0;le<j.elements.length;le++)if(j.elements[le].resolved===!1)return!1;return!0})(de)&&U(de)}function U(te){var ue,de,G=[];if(function(ie){var j,le,g,M,C,D,b=[];for(M=ie.elements.length-1;M>=0;M--){if(le=(j=ie.elements[M]).type+"_asArray",j.resolvedContent){if(j.resolvedContent)for(C=0;C<j.resolvedContent[le].length;C++)g=j.resolvedContent[le][C],b.push(g)}else delete j.originalContent["xlink:actuate"],delete j.originalContent["xlink:href"],b.push(j.originalContent);for(j.parentElement[le].splice(j.index,1),D=0;D<b.length;D++)j.parentElement[le].splice(j.index+D,0,b[D]);b=[]}ie.elements.length>0&&E.run(R)}(te),te.resolveType==="onActuate"&&L.trigger(u.Z.XLINK_READY,{manifest:R}),te.resolveType===kr)switch(te.type){case e.Z.PERIOD:for(ue=0;ue<R[e.Z.PERIOD+"_asArray"].length;ue++)(de=R[e.Z.PERIOD+"_asArray"][ue]).hasOwnProperty(e.Z.ADAPTATION_SET+"_asArray")&&(G=G.concat(Z(de[e.Z.ADAPTATION_SET+"_asArray"],de,e.Z.ADAPTATION_SET,kr))),de.hasOwnProperty(e.Z.EVENT_STREAM+"_asArray")&&(G=G.concat(Z(de[e.Z.EVENT_STREAM+"_asArray"],de,e.Z.EVENT_STREAM,kr)));B(G,e.Z.ADAPTATION_SET,kr);break;case e.Z.ADAPTATION_SET:L.trigger(u.Z.XLINK_READY,{manifest:R})}}function Z(te,ue,de,G){var ie,j,le,g=[];for(j=te.length-1;j>=0;j--)(ie=te[j]).hasOwnProperty("xlink:href")&&ie["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&te.splice(j,1);for(j=0;j<te.length;j++)(ie=te[j]).hasOwnProperty("xlink:href")&&ie.hasOwnProperty("xlink:actuate")&&ie["xlink:actuate"]===G&&(le=ce(ie["xlink:href"],ue,de,j,G,ie),g.push(le));return g}function ce(te,ue,de,G,ie,j){return{url:te,parentElement:ue,type:de,index:G,resolveType:ie,originalContent:j,resolvedContent:null,resolved:!1}}return r={resolveManifestOnLoad:function(te){A=new Ia({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:l}),(R=te).Period_asArray?B(Z(R.Period_asArray,R,e.Z.PERIOD,kr),e.Z.PERIOD,kr):L.trigger(u.Z.XLINK_READY,{manifest:R})},setMatchers:function(te){te&&(l=te)},setIron:function(te){te&&(E=te)},reset:function(){L.off(u.Z.XLINK_ELEMENT_LOADED,N,r),h&&(h.reset(),h=null)}},L.on(u.Z.XLINK_ELEMENT_LOADED,N,r),h=Uo(w).create({errHandler:i.errHandler,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,settings:i.settings}),r}Ra.__dashjs_factory_name="XlinkController";var Bo=_.Z.getClassFactory(Ra);function jr(i){return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jr(i)}function wa(i){function r(R,A){for(var h in R)A.hasOwnProperty(h)||(A[h]=R[h])}function l(R,A,h){for(var w=0,L=R.length;w<L;++w){var Y=R[w];if(A[Y.name])if(h[Y.name]){if(Y.merge){var B=A[Y.name],N=h[Y.name];jr(B)==="object"&&jr(N)==="object"?r(B,N):h[Y.name]=B+N}}else h[Y.name]=A[Y.name]}}function E(R,A){for(var h=0,w=R.children.length;h<w;++h){var L=R.children[h],Y=A[L.name+"_asArray"];if(Y)for(var B=0,N=Y.length;B<N;++B){var U=Y[B];l(R.properties,A,U),E(L,U)}}}return{run:function(R){if(R===null||jr(R)!=="object")return R;if(R.Period_asArray&&"period"in i)for(var A=i.period,h=R.Period_asArray,w=0,L=h.length;w<L;++w){var Y=h[w];if(E(A,Y),"adaptationset"in i){var B=Y.AdaptationSet_asArray;if(B)for(var N=i.adaptationset,U=0,Z=B.length;U<Z;++U)E(N,B[U])}}return R}}}wa.__dashjs_factory_name="ObjectIron";var Go=_.Z.getClassFactory(wa);function qo(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Hr=function(){function i(E,R){(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this._test=E,this._converter=R}var r,l;return r=i,(l=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&qo(r.prototype,l),i}();function Li(i){return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Li(i)}function On(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Fi(i,r){return Fi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Fi(i,r)}function Yo(i,r){return!r||Li(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function li(i){return li=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},li(i)}var jo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Fi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=li(r);if(l){var w=li(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Yo(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A,h){var w,L=(On(w={},e.Z.MPD,[e.Z.ID,e.Z.PROFILES]),On(w,e.Z.PERIOD,[e.Z.ID]),On(w,e.Z.BASE_URL,[e.Z.SERVICE_LOCATION,e.Z.BYTE_RANGE]),On(w,e.Z.SEGMENT_BASE,[e.Z.INDEX_RANGE]),On(w,e.Z.INITIALIZATION,[e.Z.RANGE]),On(w,e.Z.REPRESENTATION_INDEX,[e.Z.RANGE]),On(w,e.Z.SEGMENT_LIST,[e.Z.INDEX_RANGE]),On(w,e.Z.BITSTREAM_SWITCHING,[e.Z.RANGE]),On(w,e.Z.SEGMENT_URL,[e.Z.MEDIA_RANGE,e.Z.INDEX_RANGE]),On(w,e.Z.SEGMENT_TEMPLATE,[e.Z.INDEX_RANGE,e.Z.MEDIA,e.Z.INDEX,e.Z.INITIALIZATION_MINUS,e.Z.BITSTREAM_SWITCHING_MINUS]),On(w,e.Z.ASSET_IDENTIFIER,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.EVENT_STREAM,[e.Z.VALUE]),On(w,e.Z.ADAPTATION_SET,[e.Z.PROFILES,e.Z.MIME_TYPE,e.Z.SEGMENT_PROFILES,e.Z.CODECS,e.Z.CONTENT_TYPE]),On(w,e.Z.FRAME_PACKING,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.AUDIO_CHANNEL_CONFIGURATION,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.CONTENT_PROTECTION,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.ESSENTIAL_PROPERTY,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.SUPPLEMENTAL_PROPERTY,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.INBAND_EVENT_STREAM,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.ACCESSIBILITY,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.ROLE,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.RATING,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.VIEWPOINT,[e.Z.VALUE,e.Z.ID]),On(w,e.Z.CONTENT_COMPONENT,[e.Z.CONTENT_TYPE]),On(w,e.Z.REPRESENTATION,[e.Z.ID,e.Z.DEPENDENCY_ID,e.Z.MEDIA_STREAM_STRUCTURE_ID]),On(w,e.Z.SUBSET,[e.Z.ID]),On(w,e.Z.METRICS,[e.Z.METRICS_MINUS]),On(w,e.Z.REPORTING,[e.Z.VALUE,e.Z.ID]),w);if(L.hasOwnProperty(h)){var Y=L[h];return Y!==void 0&&Y.indexOf(A.name)>=0}return!1},function(A){return String(A)})}return R}(Hr);function xi(i){return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xi(i)}function ki(i,r){return ki=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ki(i,r)}function Ho(i,r){return!r||xi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function ci(i){return ci=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ci(i)}var Na=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Vo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ki(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=ci(r);if(l){var w=ci(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Ho(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A){for(var h=[e.Z.MIN_BUFFER_TIME,e.Z.MEDIA_PRESENTATION_DURATION,e.Z.MINIMUM_UPDATE_PERIOD,e.Z.TIMESHIFT_BUFFER_DEPTH,e.Z.MAX_SEGMENT_DURATION,e.Z.MAX_SUBSEGMENT_DURATION,e.Z.SUGGESTED_PRESENTATION_DELAY,e.Z.START,t.Z.START_TIME,e.Z.DURATION],w=h.length,L=0;L<w;L++)if(A.nodeName===h[L])return Na.test(A.value);return!1},function(A){var h=Na.exec(A),w=31536e3*parseFloat(h[3]||0)+2592e3*parseFloat(h[5]||0)+86400*parseFloat(h[7]||0)+3600*parseFloat(h[9]||0)+60*parseFloat(h[11]||0)+parseFloat(h[13]||0);return h[1]!==void 0&&(w=-w),w})}return R}(Hr);function Zi(i){return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zi(i)}function Ui(i,r){return Ui=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Ui(i,r)}function Ko(i,r){return!r||Zi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function fi(i){return fi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fi(i)}var Ca=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,zo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Ui(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=fi(r);if(l){var w=fi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Ko(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A){return Ca.test(A.value)},function(A){var h,w=Ca.exec(A);if(h=Date.UTC(parseInt(w[1],10),parseInt(w[2],10)-1,parseInt(w[3],10),parseInt(w[4],10),parseInt(w[5],10),w[6]&&parseInt(w[6],10)||0,w[7]&&1e3*parseFloat(w[7])||0),w[9]&&w[10]){var L=60*parseInt(w[9],10)+parseInt(w[10],10);h+=(w[8]==="+"?-1:1)*L*60*1e3}return new Date(h)})}return R}(Hr);function Bi(i){return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bi(i)}function Gi(i,r){return Gi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Gi(i,r)}function Wo(i,r){return!r||Bi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function di(i){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},di(i)}var Xo=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Qo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Gi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=di(r);if(l){var w=di(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Wo(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A){return Xo.test(A.value)},function(A){return parseFloat(A)})}return R}(Hr);function qi(i){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qi(i)}function Vr(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Yi(i,r){return Yi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Yi(i,r)}function Jo(i,r){return!r||qi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function gi(i){return gi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gi(i)}var $o=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Yi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=gi(r);if(l){var w=gi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Jo(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A,h){var w,L=(Vr(w={},e.Z.ADAPTATION_SET,[e.Z.LANG]),Vr(w,e.Z.REPRESENTATION,[e.Z.LANG]),Vr(w,e.Z.CONTENT_COMPONENT,[e.Z.LANG]),Vr(w,e.Z.LABEL,[e.Z.LANG]),Vr(w,e.Z.GROUP_LABEL,[e.Z.LANG]),w);if(L.hasOwnProperty(h)){var Y=L[h];return Y!==void 0&&Y.indexOf(A.name)>=0}return!1},function(A){return oi()(A)||String(A)})}return R}(Hr);function es(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var ts=function(){function i(E){var R;(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this._name=E,this._merge=(R=E)&&R.length&&R.charAt(0)===R.charAt(0).toUpperCase()}var r,l;return r=i,(l=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&es(r.prototype,l),i}();function ns(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Zr=function(){function i(E,R,A){var h=this;(function(w,L){if(!(w instanceof L))throw new TypeError("Cannot call a class as a function")})(this,i),this._name=E||"",this._properties=[],this._children=A||[],Array.isArray(R)&&R.forEach(function(w){h._properties.push(new ts(w))})}var r,l;return r=i,(l=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&ns(r.prototype,l),i}();function ji(i){return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ji(i)}function Hi(i,r){return Hi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Hi(i,r)}function rs(i,r){return!r||ji(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function hi(i){return hi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hi(i)}var is=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Hi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=hi(r);if(l){var w=hi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return rs(this,A)});function R(){(function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,R);var A=[e.Z.PROFILES,e.Z.WIDTH,e.Z.HEIGHT,e.Z.SAR,e.Z.FRAMERATE,e.Z.AUDIO_SAMPLING_RATE,e.Z.MIME_TYPE,e.Z.SEGMENT_PROFILES,e.Z.CODECS,e.Z.MAXIMUM_SAP_PERIOD,e.Z.START_WITH_SAP,e.Z.MAX_PLAYOUT_RATE,e.Z.CODING_DEPENDENCY,e.Z.SCAN_TYPE,e.Z.FRAME_PACKING,e.Z.AUDIO_CHANNEL_CONFIGURATION,e.Z.CONTENT_PROTECTION,e.Z.ESSENTIAL_PROPERTY,e.Z.ESSENTIAL_PROPERTY+"_asArray",e.Z.SUPPLEMENTAL_PROPERTY,e.Z.INBAND_EVENT_STREAM];return E.call(this,e.Z.ADAPTATION_SET,A,[new Zr(e.Z.REPRESENTATION,A,[new Zr(e.Z.SUB_REPRESENTATION,A)])])}return R}(Zr);function Vi(i){return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vi(i)}function Ki(i,r){return Ki=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Ki(i,r)}function as(i,r){return!r||Vi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function mi(i){return mi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},mi(i)}var os=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Ki(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=mi(r);if(l){var w=mi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return as(this,A)});function R(){(function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,R);var A=[e.Z.SEGMENT_BASE,e.Z.SEGMENT_TEMPLATE,e.Z.SEGMENT_LIST];return E.call(this,e.Z.PERIOD,A,[new Zr(e.Z.ADAPTATION_SET,A,[new Zr(e.Z.REPRESENTATION,A)])])}return R}(Zr);function Da(i){i=i||{};var r,l,E,R,A,h=this.context,w=i.debug;return r={parse:function(L){var Y,B=window.performance.now();if(!(Y=R.xml_str2json(L)))throw new Error("parsing the manifest failed");var N=window.performance.now();Y.Patch?((Y=Y.Patch).add_asArray&&Y.add_asArray.forEach(function(Z){return A.run(Z)}),Y.replace_asArray&&Y.replace_asArray.forEach(function(Z){return A.run(Z)})):(Y=Y.MPD,A.run(Y));var U=window.performance.now();return l.info("Parsing complete: ( xml2json: "+(N-B).toPrecision(3)+"ms, objectiron: "+(U-N).toPrecision(3)+"ms, total: "+((U-B)/1e3).toPrecision(3)+"s)"),Y.protocol="DASH",Y},getMatchers:function(){return E},getIron:function(){return A}},l=w.getLogger(r),E=[new Vo,new zo,new Qo,new $o,new jo],R=new Ia({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:E}),A=Go(h).create({adaptationset:new is,period:new os}),r}Da.__dashjs_factory_name="DashParser";var ss=_.Z.getClassFactory(Da);function Oa(i){i=i||{};var r,l,E,R,A,h=this.context,w=i.debug,L=i.settings,Y=(0,p.Z)(h).getInstance(),B=(0,ze.Z)(h).getInstance(),N=i.mssHandler,U=i.errHandler;function Z(te){Y.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:te.manifest})}function ce(te){var ue=null;return te.indexOf("SmoothStreamingMedia")>-1?(N&&(ue=N.createMssParser(),N.createMssFragmentProcessor(),N.registerEvents()),ue):te.indexOf("MPD")>-1||te.indexOf("Patch")>-1?ss(h).create({debug:w}):ue}return r={load:function(te){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,G=new Date,ie=new ba(te,Le.w.MPD_TYPE);ue&&(ie.serviceLocation=ue),de&&(ie.queryParams=de),ie.requestStartDate||(ie.requestStartDate=G),Y.trigger(u.Z.MANIFEST_LOADING_STARTED,{request:ie}),E.load({request:ie,success:function(j,le,g){var M,C,D;if(R)if(g&&g!==te?(C=B.parseBaseUrl(g),M=g):(B.isRelative(te)&&(te=B.resolve(te,window.location.href)),C=B.parseBaseUrl(te)),le!="No Content")if(A===null&&(A=ce(j)),A!==null){R.setMatchers(A.getMatchers()),R.setIron(A.getIron());try{D=A.parse(j)}catch{return void Y.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(te))})}if(D){if(D.url=M||te,D.originalUrl||(D.originalUrl=D.url),L&&L.get().streaming.enableManifestDurationMismatchFix&&D.mediaPresentationDuration&&D.Period_asArray.length>1){var b=D.Period_asArray.reduce(function(ne,z){return ne+z.duration},0);!isNaN(b)&&D.mediaPresentationDuration>b&&(l.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),D.mediaPresentationDuration=b)}D.baseUri=C,D.loadedTime=new Date,R.resolveManifestOnLoad(D),Y.trigger(u.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:j})}else Y.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(te))})}else Y.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(te))});else Y.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(j,le,g){Y.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(te,", ").concat(g))})}})},reset:function(){Y.off(u.Z.XLINK_READY,Z,r),N&&N.reset(),R&&(R.reset(),R=null),E&&(E.abort(),E=null)}},l=w.getLogger(r),Y.on(u.Z.XLINK_READY,Z,r),E=Wn(h).create({errHandler:i.errHandler,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,urlUtils:B,constants:t.Z,dashConstants:e.Z,errors:X,requestTimeout:i.settings.get().streaming.manifestRequestTimeout}),R=Bo(h).create({errHandler:U,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,settings:i.settings}),A=null,r}Oa.__dashjs_factory_name="ManifestLoader";var us=_.Z.getClassFactory(Oa);function Ma(){var i=this.context,r=(0,p.Z)(i).getInstance();return{error:function(l){r.trigger(u.Z.ERROR,{error:l})}}}Ma.__dashjs_factory_name="ErrorHandler";var ls=_.Z.getSingletonFactory(Ma),Pa=P(1715);function La(){var i,r,l,E,R,A,h=this.context,w=(0,p.Z)(h).getInstance();function L(Y,B){if(!B||!B.Period_asArray||B.Period_asArray.length===0)return Promise.resolve();var N=[];return B.Period_asArray.forEach(function(U){N.push(function(Z,ce){return new Promise(function(te){if(Z&&Z.AdaptationSet_asArray&&Z.AdaptationSet_asArray.length!==0){var ue=[];Z.AdaptationSet_asArray.forEach(function(de){r.getIsTypeOf(de,ce)&&ue.push(function(G,ie){return new Promise(function(j){if(G.Representation_asArray&&G.Representation_asArray.length!==0){var le=[],g=[];G.Representation_asArray.forEach(function(M,C){var D=r.getCodec(G,C,!1),b=function(ne,z,oe){switch(ne){case t.Z.VIDEO:return function(Q,x){return{codec:x,width:Q.width||null,height:Q.height||null,framerate:Q.frameRate||null,bitrate:Q.bandwidth||null}}(z,oe);case t.Z.AUDIO:return function(Q,x){var J=Q.audioSamplingRate||null;return{codec:x,bitrate:Q.bandwidth||null,samplerate:J}}(z,oe);default:return null}}(ie,M,D);g.push(b),le.push(l.supportsCodec(b,ie))}),Promise.all(le).then(function(M){G.Representation_asArray=G.Representation_asArray.filter(function(C,D){return M[D]||A.debug("[Stream] Codec ".concat(g[D].codec," not supported ")),M[D]}),j()}).catch(function(){j()})}else j()})}(de,ce))}),Promise.all(ue).then(function(){Z.AdaptationSet_asArray=Z.AdaptationSet_asArray.filter(function(de){var G=de.Representation_asArray&&de.Representation_asArray.length>0;return G||(w.trigger(u.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:de}),A.warn("AdaptationSet has been removed because of no supported Representation")),G}),te()}).catch(function(){te()})}else te()})}(U,Y))}),Promise.all(N)}return i={setConfig:function(Y){Y&&(Y.adapter&&(r=Y.adapter),Y.capabilities&&(l=Y.capabilities),Y.settings&&(E=Y.settings),Y.customParametersModel&&(R=Y.customParametersModel))},filterUnsupportedFeatures:function(Y){return new Promise(function(B){var N=[];N.push(L(t.Z.VIDEO,Y)),N.push(L(t.Z.AUDIO,Y)),Promise.all(N).then(function(){E.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(U){U&&U.Period_asArray&&U.Period_asArray.length!==0&&U.Period_asArray.forEach(function(Z){Z.AdaptationSet_asArray=Z.AdaptationSet_asArray.filter(function(ce){return!ce.Representation_asArray||ce.Representation_asArray.length===0||(ce.Representation_asArray=ce.Representation_asArray.filter(function(te){var ue=r.getEssentialPropertiesForRepresentation(te);if(ue&&ue.length>0)for(var de=0;de<ue.length;){if(!l.supportsEssentialProperty(ue[de]))return A.debug("[Stream] EssentialProperty not supported: "+ue[de].schemeIdUri),!1;de+=1}return!0}),ce.Representation_asArray&&ce.Representation_asArray.length>0)})})}(Y),function(U){var Z=R.getCustomCapabilitiesFilters();Z&&Z.length!==0&&U&&U.Period_asArray&&U.Period_asArray.length!==0&&U.Period_asArray.forEach(function(ce){ce.AdaptationSet_asArray=ce.AdaptationSet_asArray.filter(function(te){return!te.Representation_asArray||te.Representation_asArray.length===0||(te.Representation_asArray=te.Representation_asArray.filter(function(ue){return!Z.some(function(de){return!de(ue)})}),te.Representation_asArray&&te.Representation_asArray.length>0)})})}(Y),B()}).catch(function(){B()})})}},A=(0,m.Z)(h).getInstance().getLogger(i),i}La.__dashjs_factory_name="CapabilitiesFilter";var cs=_.Z.getSingletonFactory(La),fs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Fa(){var i;return{initialize:function(r){if(i=new fs,!r)return null;var l=r.indexOf("#");if(l!==-1)for(var E=r.substr(l+1).split("&"),R=0,A=E.length;R<A;++R){var h=E[R],w=h.indexOf("=");if(w!==-1){var L=h.substring(0,w);i.hasOwnProperty(L)&&(i[L]=h.substr(w+1))}}},getURIFragmentData:function(){return i}}}Fa.__dashjs_factory_name="URIFragmentModel";var ds=_.Z.getSingletonFactory(Fa);function xa(){var i,r=this.context,l=(0,p.Z)(r).getInstance();return{getValue:function(){return i},setValue:function(E){i=E,E&&l.trigger(u.Z.MANIFEST_LOADED,{data:E})}}}xa.__dashjs_factory_name="ManifestModel";var gs=_.Z.getSingletonFactory(xa),zi=-.5;function ka(){var i,r,l,E,R=this.context,A=(0,Ae.Z)(R).getInstance();function h(Y,B){return isNaN(Y)?0:Y>0?(B&&r.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Y<zi?(B&&r.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(zi,": ").concat(-50,"% playback speed.")),zi):Y}function w(Y,B){return isNaN(Y)?0:Y<0?(B&&r.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):Y>1?(B&&r.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):Y}function L(){var Y=A.get().streaming.buffer.stableBufferTime>0?A.get().streaming.buffer.stableBufferTime:A.get().streaming.buffer.fastSwitchEnabled?20:12,B=l.getLiveDelay();return!isNaN(B)&&B>0?Math.min(Y,B):Y}return i={getCatchupMaxDrift:function(){if(!isNaN(A.get().streaming.liveCatchup.maxDrift)&&A.get().streaming.liveCatchup.maxDrift>0)return A.get().streaming.liveCatchup.maxDrift;var Y=E.getServiceDescriptionSettings();return Y&&Y.liveCatchup&&!isNaN(Y.liveCatchup.maxDrift)&&Y.liveCatchup.maxDrift>0?Y.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return A.get().streaming.liveCatchup.enabled!==null?A.get().streaming.liveCatchup.enabled:l.getInitialCatchupModeActivated()},getStableBufferTime:L,getInitialBufferLevel:function(){var Y=A.get().streaming.buffer.initialBufferLevel;return isNaN(Y)||Y<0?0:Math.min(L(),Y)},getRetryAttemptsForType:function(Y){var B=isNaN(A.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:A.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return l.getLowLatencyModeEnabled()?A.get().streaming.retryAttempts[Y]*B:A.get().streaming.retryAttempts[Y]},getRetryIntervalsForType:function(Y){var B=isNaN(A.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:A.get().streaming.retryIntervals.lowLatencyReductionFactor;return l.getLowLatencyModeEnabled()?A.get().streaming.retryIntervals[Y]/B:A.get().streaming.retryIntervals[Y]},getCatchupPlaybackRates:function(Y){var B=A.get().streaming.liveCatchup.playbackRate;if(!isNaN(B.min)||!isNaN(B.max))return{min:h(B.min,Y),max:w(B.max,Y)};var N=E.getServiceDescriptionSettings();if(N&&N.liveCatchup&&(!isNaN(N.liveCatchup.playbackRate.min)||!isNaN(N.liveCatchup.playbackRate.max))){var U=N.liveCatchup.playbackRate;return{min:h(U.min,Y),max:w(U.max,Y)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(Y,B){try{var N=A.get().streaming.abr[Y][B];if(!isNaN(N)&&N!==-1)return N;var U=E.getServiceDescriptionSettings();return U&&U[Y]&&!isNaN(U[Y][B])?U[Y][B]:-1}catch{return-1}},setConfig:function(Y){Y.playbackController&&(l=Y.playbackController),Y.serviceDescriptionController&&(E=Y.serviceDescriptionController)},reset:function(){}},r=(0,m.Z)(R).getInstance().getLogger(i),i}ka.__dashjs_factory_name="MediaPlayerModel";var hs=_.Z.getSingletonFactory(ka),ms=P(1767);function Za(i){var r=(i=i||{}).abrController,l=i.switchHistory,E=i.droppedFramesHistory,R=i.currentRequest,A=i.useBufferOccupancyABR,h=i.useL2AABR,w=i.useLoLPABR,L=i.streamProcessor?i.streamProcessor.getScheduleController():null,Y=i.streamProcessor?i.streamProcessor.getRepresentationInfo():null,B=i.videoModel?i.videoModel:null;function N(){return Y?Y.mediaInfo:null}return{getMediaType:function(){var U=N();return U?U.type:null},getMediaInfo:N,getDroppedFramesHistory:function(){return E},getCurrentRequest:function(){return R},getSwitchHistory:function(){return l},getStreamInfo:function(){var U=N();return U?U.streamInfo:null},getScheduleController:function(){return L},getAbrController:function(){return r},getRepresentationInfo:function(){return Y},useBufferOccupancyABR:function(){return A},useL2AABR:function(){return h},useLoLPABR:function(){return w},getVideoModel:function(){return B}}}Za.__dashjs_factory_name="RulesContext";var Ua=_.Z.getClassFactory(Za),pi=P(2068);function Ba(){var i=[],r=[];return{push:function(l){l.newValue===pi.Z.NO_CHANGE&&(l.newValue=l.oldValue),i[l.oldValue]||(i[l.oldValue]={noDrops:0,drops:0,dropSize:0});var E=l.newValue-l.oldValue,R=E<0?1:0,A=R?-E:0,h=R?0:1;if(i[l.oldValue].drops+=R,i[l.oldValue].dropSize+=A,i[l.oldValue].noDrops+=h,r.push({idx:l.oldValue,noDrop:h,drop:R,dropSize:A}),r.length>8){var w=r.shift();i[w.idx].drops-=w.drop,i[w.idx].dropSize-=w.dropSize,i[w.idx].noDrops-=w.noDrop}},getSwitchRequests:function(){return i},reset:function(){i=[],r=[]}}}Ba.__dashjs_factory_name="SwitchRequestHistory";var ps=_.Z.getClassFactory(Ba);function Ga(){var i={},r={},l={};return{push:function(E,R,A){if(R){i[E]||(i[E]=[],r[E]=0,l[E]=0);var h=A&&A.droppedVideoFrames?A.droppedVideoFrames:0,w=A&&A.totalVideoFrames?A.totalVideoFrames:0,L=h-r[E];r[E]=h;var Y=w-l[E];l[E]=w;var B=i[E];isNaN(R)||(B[R]?(B[R].droppedVideoFrames+=L,B[R].totalVideoFrames+=Y):B[R]={droppedVideoFrames:L,totalVideoFrames:Y})}},getFrameHistory:function(E){return i[E]},clearForStream:function(E){try{delete i[E],delete r[E],delete l[E]}catch{}},reset:function(){i={},r={},l={}}}}Ga.__dashjs_factory_name="DroppedFramesHistory";var ys=_.Z.getClassFactory(Ga);function qa(i){var r,l,E,R,A,h=this.context,w=(i=i||{}).settings,L=(0,p.Z)(h).getInstance();function Y(te,ue,de,G){var ie=Math.pow(.5,de/G.fast);te.fastEstimate=(1-ie)*ue+ie*te.fastEstimate;var j=Math.pow(.5,de/G.slow);te.slowEstimate=(1-j)*ue+j*te.slowEstimate,te.totalWeight+=de}function B(te,ue,de){return w.get().streaming.abr.movingAverageMethod!==t.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(G,ie){var j=G?A.throughputHalfLife:A.latencyHalfLife,le=G?E[ie]:R[ie];if(!le||le.totalWeight<=0)return NaN;var g=le.fastEstimate/(1-Math.pow(.5,le.totalWeight/j.fast)),M=le.slowEstimate/(1-Math.pow(.5,le.totalWeight/j.slow));return G?Math.min(g,M):Math.max(g,M)}(te,ue):function(G,ie,j){var le=function(M,C,D){var b,ne;if(M?(b=r[C],ne=D?3:4):(b=l[C],ne=4),b){if(ne>=b.length)ne=b.length;else if(M)for(var z=1;z<ne;++z){var oe=b[b.length-z]/b[b.length-z-1];if((oe>=1.3||oe<=.7692307692307692)&&(ne+=1)===b.length)break}}else ne=0;return ne}(G,ie,j),g=(G?r:l)[ie];return le!==0&&g&&g.length!==0?(g=g.slice(-le)).reduce(function(M,C){return M+C})/g.length:NaN}(te,ue,de)}function N(te,ue){return B(!0,te,ue)}function U(te){r[te]=r[te]||[],l[te]=l[te]||[],E[te]=E[te]||{fastEstimate:0,slowEstimate:0,totalWeight:0},R[te]=R[te]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function Z(){r={},l={},E={},R={}}var ce={push:function(te,ue,de){if(ue.trace&&ue.trace.length){var G,ie=ue.tresponse.getTime()-ue.trequest.getTime()||1,j=ue._tfinish.getTime()-ue.tresponse.getTime()||1,le=ue.trace.reduce(function(D,b){return D+b.b[0]},0),g=0;if((G=ue._fileLoaderType&&ue._fileLoaderType===t.Z.FILE_LOADER_TYPES.FETCH?ue.trace.reduce(function(D,b){return D+b.d},0):de?j:ie+j)!==0&&(g=Math.round(8*le/G)),ue.cmsd){var M=ue.cmsd.dynamic&&ue.cmsd.dynamic.etp?ue.cmsd.dynamic.etp:null;if(M){var C=w.get().streaming.cmsd.abr.etpWeightRatio;C>0&&C<=1&&(g=g*(1-C)+M*C)}}if(U(te),function(D,b,ne){return D===t.Z.VIDEO?ne<w.get().streaming.cacheLoadThresholds[t.Z.VIDEO]:D===t.Z.AUDIO?ne<w.get().streaming.cacheLoadThresholds[t.Z.AUDIO]:void 0}(te,0,j)){if(r[te].length>0&&!r[te].hasCachedEntries)return;r[te].hasCachedEntries=!0}else r[te]&&r[te].hasCachedEntries&&function(D){delete r[D],delete l[D],delete E[D],delete R[D],U(D)}(te);r[te].push(g),L.trigger(n.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:g,mediaType:te,httpRequest:ue}),r[te].length>20&&r[te].shift(),l[te].push(ie),l[te].length>20&&l[te].shift(),Y(E[te],g,.001*j,A.throughputHalfLife),Y(R[te],ie,1,A.latencyHalfLife)}},getAverageThroughput:N,getSafeAverageThroughput:function(te,ue){var de=N(te,ue);return isNaN(de)||(de*=w.get().streaming.abr.bandwidthSafetyFactor),de},getAverageLatency:function(te){return B(!1,te)},reset:Z};return A={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},Z(),ce}qa.__dashjs_factory_name="ThroughputHistory";var Es=_.Z.getClassFactory(qa);function Wi(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie,j,le,g,M,C,D,b,ne=this.context,z=(0,m.Z)(ne).getInstance(),oe=(0,p.Z)(ne).getInstance();function Q(){R={},A={},w={},h={},ie={},g={},M={},C={},Y===void 0&&(Y=!1),j&&j.reset(),G=void 0,j=void 0,le=void 0,clearTimeout(L),L=null}function x(Ee){var Fe=Ee.request.mediaType,lt=Ee.streamId;if(Fe&&lt&&h[lt]&&b.get().streaming.abr.autoSwitchBitrate[Fe]){var qe=h[lt][Fe];if(qe){var ht=Ua(ne).create({abrController:i,streamProcessor:qe,currentRequest:Ee.request,useBufferOccupancyABR:g[Fe],useL2AABR:M[Fe],useLoLPABR:C[Fe],videoModel:Z}),gt=l.shouldAbandonFragment(ht,lt);gt.quality>pi.Z.NO_CHANGE&&qe.getFragmentModel().getRequests({state:K.FRAGMENT_MODEL_LOADING,index:Ee.request.index})[0]&&(w[lt][Fe].state=y.Z.ABANDON_LOAD,ie[lt][Fe].reset(),ie[lt][Fe].push({oldValue:Ce(Fe,lt),newValue:gt.quality,confidence:1,reason:gt.reason}),Ie(Fe,E.getActiveStreamInfo(),gt.quality,gt.reason),clearTimeout(L),L=setTimeout(function(){w[lt][Fe].state=y.Z.ALLOW_LOAD,L=null},b.get().streaming.abandonLoadTimeout))}}}function J(Ee){Ee.mediaType===t.Z.VIDEO&&(G!==void 0&&j.push(Ee.streamId,G,Z.getPlaybackQuality()),G=Ee.newQuality)}function he(Ee){var Fe,lt;Ee.metric!==y.Z.HTTP_REQUEST||!Ee.value||Ee.value.type!==Le.w.MEDIA_SEGMENT_TYPE||Ee.mediaType!==t.Z.AUDIO&&Ee.mediaType!==t.Z.VIDEO||le.push(Ee.mediaType,Ee.value,b.get().streaming.abr.useDeadTimeLatency),Ee.metric!==y.Z.BUFFER_LEVEL||Ee.mediaType!==t.Z.AUDIO&&Ee.mediaType!==t.Z.VIDEO||(Fe=Ee.mediaType,lt=.001*Ee.value.level,b.get().streaming.abr.ABRStrategy===t.Z.ABR_STRATEGY_DYNAMIC&&function(qe,ht){try{var gt=ce.getStableBufferTime(),st=gt,qt=.5*gt,Gt=g[qe],an=ht>(Gt?qt:st);g[qe]=an,an!==Gt&&(an?r.info("["+qe+"] switching from throughput to buffer occupancy ABR rule (buffer: "+ht.toFixed(3)+")."):r.info("["+qe+"] switching from buffer occupancy to throughput ABR rule (buffer: "+ht.toFixed(3)+")."))}catch(un){r.error(un)}}(Fe,lt))}function Ne(Ee,Fe){try{var lt;return R[Fe]=R[Fe]||{},R[Fe].hasOwnProperty(Ee)||(R[Fe][Ee]=0),lt=function(qe,ht){var gt=R[ht][qe],st=gt;if(!h[ht]||!h[ht][qe])return st;var qt=Te(qe,ht);qt!==void 0&&(st=Math.max(gt,qt));var Gt=function(an,un){try{var Be=ce.getAbrBitrateParameter("maxBitrate",an);return Be>-1?We(h[un][an].getMediaInfo(),Be,un):void 0}catch{return}}(qe,ht);return Gt!==void 0&&(st=Math.min(st,Gt)),st}(Ee,Fe),lt=function(qe,ht,gt){var st=R[gt][ht],qt=b.get().streaming.abr.maxRepresentationRatio[ht];return isNaN(qt)||qt>=1||qt<0?qe:Math.min(qe,Math.round(st*qt))}(lt,Ee,Fe),lt=function(qe,ht,gt){if(ht!==t.Z.VIDEO||!b.get().streaming.abr.limitBitrateByPortal||!h[gt]||!h[gt][ht])return qe;Y||Mt();var st=h[gt][ht].getStreamInfo(),qt=U.getAdaptationForType(st.index,ht,st).Representation_asArray,Gt=qe;if(B>0&&N>0){for(;Gt>0&&qt[Gt]&&B<qt[Gt].width&&B-qt[Gt-1].width<qt[Gt].width-B;)Gt-=1;for(;Gt<qt.length-1&&qt[Gt].width===qt[Gt+1].width;)Gt+=1}return Gt}(lt,Ee,Fe),b.get().streaming.cmsd.enabled&&b.get().streaming.cmsd.abr.applyMb&&(lt=function(qe,ht,gt){if(ht!=="video")return qe;var st=ue.getMaxBitrate(ht);if(st<0)return qe;var qt=nt(gt,"audio",Ce("audio",gt));st-=qt?qt.bitrate/1e3:0;var Gt=We(h[gt][ht].getMediaInfo(),st,gt);return r.debug("Stream ID: "+gt+" ["+ht+"] Apply max bit rate from CMSD: "+st),Math.min(qe,Gt)}(lt,Ee,Fe)),lt}catch{return}}function Te(Ee,Fe){try{return function(lt,qe){try{var ht=ce.getAbrBitrateParameter("minBitrate",lt);if(ht>-1){var gt=h[qe][lt].getMediaInfo(),st=Xe(gt),qt=We(gt,ht,qe);return st[qt]&&qt<st.length-1&&st[qt].bitrate<1e3*ht&&qt++,qt}return}catch{return}}(Ee,Fe)}catch{return}}function Ce(Ee){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return Fe||(Fe=E.getActiveStreamInfo().id),Ee&&h[Fe]&&h[Fe][Ee]&&Fe?(A[Fe]=A[Fe]||{},A[Fe].hasOwnProperty(Ee)||(A[Fe][Ee]=0),A[Fe][Ee]):0}catch{return 0}}function Ie(Ee,Fe,lt){var qe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Fe&&Fe.id&&Ee){var ht=Fe.id,gt=Ce(Ee,ht);(0,W.SE)(lt);var st=Ne(Ee,ht);lt!==gt&&lt>=0&&lt<=st&&et(Ee,gt,lt,st,qe,ht)}}function et(Ee,Fe,lt,qe,ht,gt){if(Ee&&h[gt]&&h[gt][Ee]){var st=h[gt][Ee].getStreamInfo(),qt=st&&st.manifestInfo&&st.manifestInfo.isDynamic,Gt=D.getCurrentBufferLevel(Ee);r.info("Stream ID: "+gt+" ["+Ee+"] switch from "+Fe+" to "+lt+"/"+qe+" (buffer: "+Gt+") "+(ht?JSON.stringify(ht):".")),A[gt]=A[gt]||{},A[gt][Ee]=lt;var an=nt(gt,Ee,lt);oe.trigger(u.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:Fe,newQuality:lt,reason:ht,streamInfo:st,bitrateInfo:an,maxIdx:qe,mediaType:Ee},{streamId:st.id,mediaType:Ee});var un=le.getAverageThroughput(Ee,qt);isNaN(un)||de.setSavedBitrateSettings(Ee,un)}}function nt(Ee,Fe,lt){if(Fe&&h&&h[Ee]&&h[Ee][Fe]){var qe=Xe(h[Ee][Fe].getMediaInfo());return qe[lt]?qe[lt]:null}return null}function We(Ee,Fe,lt){var qe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,ht=Ee&&Ee.type?h[lt][Ee.type].getRepresentationInfo():null;if(b.get().streaming.abr.useDeadTimeLatency&&qe&&ht&&ht.fragmentDuration){qe/=1e3;var gt=ht.fragmentDuration;if(qe>gt)return 0;var st=qe/gt;Fe*=1-st}for(var qt=Xe(Ee),Gt=qt.length-1;Gt>=0;Gt--){var an=qt[Gt];if(1e3*Fe>=an.bitrate)return Gt}return 0}function Xe(Ee){var Fe=[];if(!Ee||!Ee.bitrateList)return Fe;for(var lt,qe=Ee.bitrateList,ht=Ee.type,gt=0,st=qe.length;gt<st;gt++)(lt=new ei).mediaType=ht,lt.qualityIndex=gt,lt.bitrate=qe[gt].bandwidth,lt.width=qe[gt].width,lt.height=qe[gt].height,lt.scanType=qe[gt].scanType,Fe.push(lt);return Fe}function Mt(){if(Z){var Ee=b.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;B=Z.getClientWidth()*Ee,N=Z.getClientHeight()*Ee}}return i={initialize:function(){j=ys(ne).create(),le=Es(ne).create({settings:b}),(l=(0,ms.Z)(ne).create({dashMetrics:D,customParametersModel:te,mediaPlayerModel:ce,settings:b})).initialize(),oe.on(n.Z.QUALITY_CHANGE_RENDERED,J,i),oe.on(n.Z.METRIC_ADDED,he,i),oe.on(u.Z.LOADING_PROGRESS,x,i)},isPlayingAtTopQuality:function(Ee){var Fe=Ee?Ee.id:null,lt=Ce(t.Z.AUDIO,Fe),qe=Ce(t.Z.VIDEO,Fe);return lt===Ne(t.Z.AUDIO,Fe)&&qe===Ne(t.Z.VIDEO,Fe)},updateTopQualityIndex:function(Ee){var Fe=Ee.type,lt=Ee.streamInfo.id,qe=Ee.representationCount-1;return R[lt]=R[lt]||{},R[lt][Fe]=qe,qe},clearDataForStream:function(Ee){j&&j.clearForStream(Ee),h[Ee]&&delete h[Ee],ie[Ee]&&delete ie[Ee],w[Ee]&&delete w[Ee]},getThroughputHistory:function(){return le},getBitrateList:Xe,getQualityForBitrate:We,getTopBitrateInfoFor:function(Ee){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Fe||(Fe=E.getActiveStreamInfo().id),Ee&&h&&h[Fe]&&h[Fe][Ee]){var lt=Ne(Ee,Fe),qe=Xe(h[Fe][Ee].getMediaInfo());return qe[lt]?qe[lt]:null}return null},getMinAllowedIndexFor:Te,getMaxAllowedIndexFor:Ne,getInitialBitrateFor:function(Ee,Fe){if(function(){if(!de||!de.hasOwnProperty("getSavedBitrateSettings"))throw new Error(t.Z.MISSING_CONFIG_ERROR)}(),Ee===t.Z.TEXT)return NaN;var lt=de.getSavedBitrateSettings(Ee),qe=ce.getAbrBitrateParameter("initialBitrate",Ee),ht=b.get().streaming.abr.initialRepresentationRatio[Ee];if(qe===-1)if(ht>-1){var gt=h[Fe][Ee].getStreamInfo(),st=U.getAdaptationForType(gt.index,Ee,gt).Representation_asArray;qe=Array.isArray(st)?st[Math.max(Math.round(st.length*ht)-1,0)].bandwidth/1e3:0}else qe=isNaN(lt)?Ee===t.Z.VIDEO?1e3:100:lt;return qe},getQualityFor:Ce,getAbandonmentStateFor:function(Ee,Fe){return w[Ee]&&w[Ee][Fe]?w[Ee][Fe].state:null},setPlaybackQuality:Ie,checkPlaybackQuality:function(Ee,Fe){try{if(!(Ee&&h&&h[Fe]&&h[Fe][Ee]))return!1;if(j){var lt=Z.getPlaybackQuality();lt&&j.push(Fe,G,lt)}if(!b.get().streaming.abr.autoSwitchBitrate[Ee])return!1;var qe=Ce(Ee,Fe),ht=Ua(ne).create({abrController:i,switchHistory:ie[Fe][Ee],droppedFramesHistory:j,streamProcessor:h[Fe][Ee],currentValue:qe,useBufferOccupancyABR:g[Ee],useL2AABR:M[Ee],useLoLPABR:C[Ee],videoModel:Z}),gt=Te(Ee,Fe),st=Ne(Ee,Fe),qt=l.getMaxQuality(ht),Gt=qt.quality;return gt!==void 0&&(Gt>pi.Z.NO_CHANGE?Gt:qe)<gt&&(Gt=gt),Gt>st&&(Gt=st),ie[Fe][Ee].push({oldValue:qe,newValue:Gt}),Gt>pi.Z.NO_CHANGE&&Gt!==qe&&(w[Fe][Ee].state===y.Z.ALLOW_LOAD||Gt<qe)&&(et(Ee,qe,Gt,st,qt.reason,Fe),!0)}catch{return!1}},setElementSize:Mt,setWindowResizeEventCalled:function(Ee){Y=Ee},registerStreamType:function(Ee,Fe){var lt=Fe.getStreamInfo().id;h[lt]||(h[lt]={}),ie[lt]||(ie[lt]={}),w[lt]||(w[lt]={}),ie[lt][Ee]=ps(ne).create(),h[lt][Ee]=Fe,w[lt][Ee]={},w[lt][Ee].state=y.Z.ALLOW_LOAD,function(qe){var ht=b.get().streaming.abr.ABRStrategy;ht===t.Z.ABR_STRATEGY_L2A?(g[qe]=!1,C[qe]=!1,M[qe]=!0):ht===t.Z.ABR_STRATEGY_LoLP?(g[qe]=!1,C[qe]=!0,M[qe]=!1):ht===t.Z.ABR_STRATEGY_BOLA?(g[qe]=!0,C[qe]=!1,M[qe]=!1):ht===t.Z.ABR_STRATEGY_THROUGHPUT?(g[qe]=!1,C[qe]=!1,M[qe]=!1):ht===t.Z.ABR_STRATEGY_DYNAMIC&&(g[qe]=!(!g||!g[qe])&&g[qe],C[qe]=!1,M[qe]=!1)}(Ee),Ee===t.Z.VIDEO&&Mt()},unRegisterStreamType:function(Ee,Fe){try{h[Ee]&&h[Ee][Fe]&&delete h[Ee][Fe],ie[Ee]&&ie[Ee][Fe]&&delete ie[Ee][Fe],w[Ee]&&w[Ee][Fe]&&delete w[Ee][Fe]}catch{}},setConfig:function(Ee){Ee&&(Ee.streamController&&(E=Ee.streamController),Ee.domStorage&&(de=Ee.domStorage),Ee.mediaPlayerModel&&(ce=Ee.mediaPlayerModel),Ee.customParametersModel&&(te=Ee.customParametersModel),Ee.cmsdModel&&(ue=Ee.cmsdModel),Ee.dashMetrics&&(D=Ee.dashMetrics),Ee.adapter&&(U=Ee.adapter),Ee.videoModel&&(Z=Ee.videoModel),Ee.settings&&(b=Ee.settings))},reset:function(){Q(),oe.off(u.Z.LOADING_PROGRESS,x,i),oe.off(n.Z.QUALITY_CHANGE_RENDERED,J,i),oe.off(n.Z.METRIC_ADDED,he,i),l&&l.reset()}},r=z.getLogger(i),Q(),i}Wi.__dashjs_factory_name="AbrController";var Xi=_.Z.getSingletonFactory(Wi);Xi.QUALITY_DEFAULT=0,_.Z.updateSingletonFactory(Wi.__dashjs_factory_name,Xi);var vs=Xi,_s=new Map([[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Ya(){var i,r,l,E,R,A,h,w,L=this.context,Y=(0,p.Z)(L).getInstance(),B=[];function N(){l&&(l.playbackRate=1,l.removeEventListener("canplay",N))}function U(){return B.length>0}function Z(){if(l&&U()&&l.playbackRate===0){var j=document.createEvent("Event");j.initEvent("waiting",!0,!1),l.dispatchEvent(j)}}function ce(j,le){l&&l.addEventListener(j,le)}function te(j,le){l&&l.removeEventListener(j,le)}function ue(){return l?l.readyState:NaN}function de(){return l?l.buffered:null}function G(j,le,g,M,C){if(l){for(var D=0;D<l.textTracks.length;D++)if(l.textTracks[D].kind===j&&(!le||l.textTracks[D].label==le)&&l.textTracks[D].language===g&&l.textTracks[D].isTTML===M&&l.textTracks[D].isEmbedded===C)return l.textTracks[D]}return null}function ie(j,le){return j===t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||ue()>=j?(le(),null):function(g,M){var C=function D(){te(g,D),M(g)};return ce(g,C),{func:C,event:g}}(_s.get(j),le)}return i={addEventListener:ce,addTextTrack:function(j,le,g,M,C){if(!l)return null;var D=G(j,le,g,M,C);return D||((D=l.addTextTrack(j,le,g)).isEmbedded=C,D.isTTML=M),D},appendChild:function(j){l&&(l.appendChild(j),j.isTTML!==void 0&&(l.textTracks[l.textTracks.length-1].isTTML=j.isTTML,l.textTracks[l.textTracks.length-1].isEmbedded=j.isEmbedded))},getBufferRange:de,getClientHeight:function(){return l?l.clientHeight:NaN},getClientWidth:function(){return l?l.clientWidth:NaN},getElement:function(){return l},getEnded:function(){return l?l.ended:null},getPlaybackQuality:function(){if(!l)return null;var j="webkitDroppedFrameCount"in l&&"webkitDecodedFrameCount"in l,le=null;return"getVideoPlaybackQuality"in l?le=l.getVideoPlaybackQuality():j&&(le={droppedVideoFrames:l.webkitDroppedFrameCount,totalVideoFrames:l.webkitDroppedFrameCount+l.webkitDecodedFrameCount,creationTime:new Date}),le},getPlaybackRate:function(){return l?l.playbackRate:null},getPlayedRanges:function(){return l?l.played:null},getReadyState:ue,getSource:function(){return l?l.src:null},getTTMLRenderingDiv:function(){return A},getTextTrack:G,getTextTracks:function(){return l?l.textTracks:[]},getTime:function(){return l?isNaN(E)?l.currentTime:E:null},getVideoHeight:function(){return l?l.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(l){var j=l.parentNode.host||l.parentNode;return j?l.getBoundingClientRect().left-j.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(l){var j=l.parentNode.host||l.parentNode;return j?l.getBoundingClientRect().top-j.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return l?l.videoWidth:NaN},getVttRenderingDiv:function(){return h},initialize:function(){Y.on(u.Z.PLAYBACK_PLAYING,Z,this)},isPaused:function(){return l?l.paused:null},isSeeking:function(){return l?l.seeking||!isNaN(E):null},isStalled:U,pause:function(){l&&(l.pause(),l.autoplay=!1)},play:function(){if(l){l.autoplay=!0;var j=l.play();j&&j.catch&&typeof Promise<"u"&&j.catch(function(le){le.name==="NotAllowedError"&&Y.trigger(u.Z.PLAYBACK_NOT_ALLOWED),r.warn("Caught pending play exception - continuing (".concat(le,")"))})}},removeChild:function(j){l&&l.removeChild(j)},removeEventListener:te,reset:function(){clearTimeout(w),Y.off(u.Z.PLAYBACK_PLAYING,Z,this)},setCurrentTime:function(j,le){l&&(R&&R.func&&R.event&&te(R.event,R.func),E=j,R=ie(t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(l)if(l.currentTime!==E)try{E=le?function(g){var M=de(),C=g,D=9999999999;if(M)for(var b=0;b<M.length;b++){var ne=M.start(b),z=M.end(b),oe=Math.abs(ne-g),Q=Math.abs(z-g);if(g>=ne&&g<=z)return g;oe<D&&(D=oe,C=ne),Q<D&&(D=Q,C=z)}return C}(E):E,isNaN(E)||(l.currentTime=E),E=NaN}catch(g){l.readyState===0&&g.code===g.INVALID_STATE_ERR&&(w=setTimeout(function(){l.currentTime=E,E=NaN},400))}else E=NaN}))},setElement:function(j){if(!(j==null||j&&/^(VIDEO|AUDIO)$/i.test(j.nodeName)))throw"element is not video or audio DOM type!";(l=j)&&(l.preload="auto")},setPlaybackRate:function(j){var le=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l&&(!le&&l.readyState<=2&&j>0?l.addEventListener("canplay",N):l.playbackRate=j)},setSource:function(j){l&&(j?l.src=j:(l.removeAttribute("src"),l.load()))},setStallState:function(j,le){(function(g,M){M?function(C){C!==null&&l&&!l.seeking&&B.indexOf(C)===-1&&B.push(C)}(g):function(C){var D=B.indexOf(C);C!==null&&D!==-1&&B.splice(D,1)}(g)})(j,le)},setTTMLRenderingDiv:function(j){(A=j).style.position="absolute",A.style.display="flex",A.style.overflow="hidden",A.style.pointerEvents="none",A.style.top=0,A.style.left=0},setVttRenderingDiv:function(j){h=j},waitForReadyState:ie,setDisableRemotePlayback:function(j){l&&(l.disableRemotePlayback=j)}},r=(0,m.Z)(L).getInstance().getLogger(i),E=NaN,i}Ya.__dashjs_factory_name="VideoModel";var Ts=_.Z.getSingletonFactory(Ya),Ss=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],ja="dashjs_?_bitrate",Ha="dashjs_?_settings",Ur="localStorage",Va="lastBitrate",Ka="lastMediaSettings";function za(i){i=i||{};var r,l,E,R=this.context,A=i.settings;function h(B){if(E!==void 0)return E;var N;E=!1;try{typeof window<"u"&&(N=window[B])}catch(U){return l.warn("DOMStorage access denied: "+U.message),E}if(!N||B!==Ur)return E;try{N.setItem("1","1"),N.removeItem("1"),E=!0}catch(U){l.warn("DOMStorage is supported, but cannot be used: "+U.message)}return E}function w(){var B=6e5;return Math.round(new Date().getTime()/B)*B}function L(B,N){return h(B)&&A.get().streaming[N+"CachingInfo"].enabled}function Y(){if(!A)throw new Error(t.Z.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(B){if(Y(),!A.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var N=NaN;if(L(Ur,Va)){var U=ja.replace(/\?/,B);try{var Z=JSON.parse(localStorage.getItem(U))||{},ce=new Date().getTime()-parseInt(Z.timestamp,10)>=A.get().streaming.lastBitrateCachingInfo.ttl||!1,te=parseFloat(Z.bitrate);isNaN(te)||ce?ce&&localStorage.removeItem(U):(N=te,l.debug("Last saved bitrate for "+B+" was "+te))}catch{return null}}return N},setSavedBitrateSettings:function(B,N){if(L(Ur,Va)&&N){var U=ja.replace(/\?/,B);try{localStorage.setItem(U,JSON.stringify({bitrate:N.toFixed(3),timestamp:w()}))}catch(Z){l.error(Z.message)}}},getSavedMediaSettings:function(B){if(Y(),!A.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var N=null;if(L(Ur,Ka)){var U=Ha.replace(/\?/,B);try{var Z=JSON.parse(localStorage.getItem(U))||{},ce=new Date().getTime()-parseInt(Z.timestamp,10)>=A.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;N=Z.settings,ce&&(localStorage.removeItem(U),N=null)}catch{return null}}return N},setSavedMediaSettings:function(B,N){if(L(Ur,Ka)){var U=Ha.replace(/\?/,B);try{localStorage.setItem(U,JSON.stringify({settings:N,timestamp:w()}))}catch(Z){l.error(Z.message)}}}},l=(0,m.Z)(R).getInstance().getLogger(r),h(Ur)&&Ss.forEach(function(B){var N=localStorage.getItem(B.oldKey);if(N){localStorage.removeItem(B.oldKey);try{localStorage.setItem(B.newKey,N)}catch(U){l.error(U.message)}}}),r}za.__dashjs_factory_name="DOMStorage";var bs=_.Z.getSingletonFactory(za),As=P(2032),Wa=P(2011);function Xa(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z=this.context;function ce(G,ie,j,le){var g=null,M=G?U.resolve(G.path):null,C=le||{init:!0,url:M?M.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ie};r.debug("Start searching for initialization.");var D=de(C);w.load({request:D,success:function(b){if(C.bytesLoaded=C.range.end,!(g=E.findInitRange(b)))return C.range.end=C.bytesLoaded+C.bytesToLoad,ce(G,ie,j,C);G.range=g,j(G)},error:function(){j(G)}}),r.debug("Perform init search: "+C.url)}function te(G,ie,j,le,g,M){if(j&&(j.start===void 0||j.end===void 0)){var C=j?j.toString().split("-"):null;j=C?{start:parseFloat(C[0]),end:parseFloat(C[1])}:null}g=g||ue;var D=null,b=null,ne=!!j,z=G?U.resolve(G.path):null,oe={init:!1,url:z?z.url:void 0,range:ne?j:{start:0,end:1500},searching:!ne,bytesLoaded:M?M.bytesLoaded:0,bytesToLoad:1500,mediaType:ie},Q=de(oe);w.load({request:Q,success:function(x){var J=oe.bytesToLoad,he=x.byteLength;if(oe.bytesLoaded=oe.range.end-oe.range.start,D=E.parse(x),(b=D.getBox("sidx"))&&b.isComplete){var Ne,Te,Ce=b.references;if(Ce!=null&&Ce.length>0&&(Ne=Ce[0].reference_type===1),Ne){var Ie,et,nt,We;r.debug("Initiate multiple SIDX load."),oe.range.end=oe.range.start+b.size;var Xe=[],Mt=0,Ee=(b.offset||oe.range.start)+b.size,Fe=function(qe){qe?(Xe=Xe.concat(qe),++Mt>=et&&(Xe.sort(function(ht,gt){return ht.startTime-gt.startTime<0?-1:0}),g(Xe,G,le))):g(null,G,le)};for(Ie=0,et=Ce.length;Ie<et;Ie++)nt=Ee,We=Ee+Ce[Ie].referenced_size-1,Ee+=Ce[Ie].referenced_size,te(G,ie,{start:nt,end:We},le,Fe,oe)}else r.debug("Parsing segments from SIDX. representation "+ie+" - id: "+G.id+" for range : "+oe.range.start+" - "+oe.range.end),Te=function(qe,ht){for(var gt,st,qt,Gt,an=qe.references,un=an.length,Be=qe.timescale,ft=qe.earliest_presentation_time,$e=ht.range.start+qe.offset+qe.first_offset+qe.size,vt=[],wt=0;wt<un;wt++)qt=an[wt].subsegment_duration,Gt=an[wt].referenced_size,(gt=new Wa.Z).duration=qt,gt.startTime=ft,gt.timescale=Be,st=$e+Gt-1,gt.mediaRange=$e+"-"+st,vt.push(gt),ft+=qt,$e+=Gt;return vt}(b,oe),g(Te,G,le)}else{if(b)oe.range.start=b.offset||oe.range.start,oe.range.end=oe.range.start+(b.size||J);else{if(he<oe.bytesLoaded)return void g(null,G,le);var lt=D.getLastBox();lt&&lt.size?(oe.range.start=lt.offset+lt.size,oe.range.end=oe.range.start+J):oe.range.end+=J}te(G,ie,oe.range,le,null,oe)}},error:function(){g(null,G,le)}}),r.debug("Perform SIDX load for type ".concat(ie," : ").concat(oe.url," with range ").concat(oe.range.start," - ").concat(oe.range.end))}function ue(G,ie,j){j({segments:G,representation:ie,error:G?void 0:new re.Z(L.SEGMENT_BASE_LOADER_ERROR_CODE,L.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function de(G){if(G.url){var ie=new I.Z;return ie.setInfo(G),ie}}return i={setConfig:function(G){G.baseURLController&&(U=G.baseURLController),G.dashMetrics&&(A=G.dashMetrics),G.mediaPlayerModel&&(h=G.mediaPlayerModel),G.errHandler&&(l=G.errHandler),G.boxParser&&(E=G.boxParser),G.debug&&(r=G.debug.getLogger(i)),G.requestModifier&&(R=G.requestModifier),G.errors&&(L=G.errors),G.urlUtils&&(N=G.urlUtils),G.constants&&(Y=G.constants),G.dashConstants&&(B=G.dashConstants)},initialize:function(){w=Wn(Z).create({errHandler:l,dashMetrics:A,mediaPlayerModel:h,requestModifier:R,boxParser:E,errors:L,urlUtils:N,constants:Y,dashConstants:B})},loadInitialization:function(G,ie){return new Promise(function(j){ce(G,ie,j)})},loadSegments:function(G,ie,j){return new Promise(function(le){te(G,ie,j,le)})},reset:function(){w&&(w.abort(),w=null)}}}Xa.__dashjs_factory_name="SegmentBaseLoader";var Is=_.Z.getSingletonFactory(Xa);function Qa(i){var r;i=i||{};var l=new DataView(i.data),E=0;function R(h,w){var L=!0,Y=0;if(w===void 0&&(w=!1),h.tag>16777215?(l.getUint32(E)!==h.tag&&(L=!1),Y=4):h.tag>65535?(256*l.getUint16(E)+l.getUint8(E+2)!==h.tag&&(L=!1),Y=3):h.tag>255?(l.getUint16(E)!==h.tag&&(L=!1),Y=2):(l.getUint8(E)!==h.tag&&(L=!1),Y=1),!L&&h.required&&!w)throw new Error("required tag not found");return L&&(E+=Y),L}function A(h){var w=1,L=128,Y=-1,B=0,N=l.getUint8(E),U=0;for(U=0;U<8;U+=1){if((N&L)===L){B=h===void 0?N&~L:N,Y=U;break}L>>=1}for(U=0;U<Y;U+=1,w+=1)B=B<<8|255&l.getUint8(E+w);return E+=w,B}return r={getPos:function(){return E},setPos:function(h){E=h},consumeTag:R,consumeTagAndSize:function(h,w){var L=R(h,w);return L&&A(),L},parseTag:function(h){var w;return R(h),w=A(),r[h.parse](w)},skipOverElement:function(h,w){var L,Y=R(h,w);return Y&&(L=A(),E+=L),Y},getMatroskaCodedNum:A,getMatroskaFloat:function(h){var w;switch(h){case 4:w=l.getFloat32(E),E+=4;break;case 8:w=l.getFloat64(E),E+=8}return w},getMatroskaUint:function(h){if(h>4)return function(Y){for(var B=Math.floor(Number.MAX_SAFE_INTEGER/256),N=0,U=0;U<Y;U+=1){if(N>B)throw new Error("Value exceeds safe integer limit");N*=256;var Z=l.getUint8(E+U);if(N>Number.MAX_SAFE_INTEGER-Z)throw new Error("Value exceeds safe integer limit");N+=Z}return E+=Y,N}(h);for(var w=0,L=0;L<h;L+=1)w<<=8,w|=255&l.getUint8(E+L);return E+=h,w>>>0},moreData:function(){return E<l.byteLength}}}Qa.__dashjs_factory_name="EBMLParser";var Ja=_.Z.getClassFactory(Qa);function $a(){var i,r,l,E,R,A,h,w,L,Y,B=this.context;function N(U){var Z=new I.Z;return Z.setInfo(U),Z}return i={setConfig:function(U){if(!(U.baseURLController&&U.dashMetrics&&U.mediaPlayerModel&&U.errHandler))throw new Error(t.Z.MISSING_CONFIG_ERROR);Y=U.baseURLController,A=U.dashMetrics,h=U.mediaPlayerModel,E=U.errHandler,L=U.errors,r=U.debug.getLogger(i),R=U.requestModifier},initialize:function(){w=Wn(B).create({errHandler:E,dashMetrics:A,mediaPlayerModel:h,requestModifier:R,errors:L})},loadInitialization:function(U,Z){return new Promise(function(ce){var te=null,ue=U?Y.resolve(U.path):null,de=U?U.range.split("-"):null,G={range:{start:de?parseFloat(de[0]):null,end:de?parseFloat(de[1]):null},request:te,url:ue?ue.url:void 0,init:!0,mediaType:Z};r.info("Start loading initialization."),te=N(G),w.load({request:te,success:function(){ce(U)},error:function(){ce(U)}}),r.debug("Perform init load: "+G.url)})},loadSegments:function(U,Z,ce){return new Promise(function(te){var ue=null,de=U?Y.resolve(U.path):null,G=de?de.url:void 0;ue=N({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:ue,url:G,init:!1,mediaType:Z}),r.debug("Parsing ebml header"),w.load({request:ue,success:function(ie){(function(j,le,g,M){if(j&&j.byteLength!==0){var C,D,b,ne,z=Ja(B).create({data:j}),oe=g?g.split("-"):null,Q=null,x={url:le,range:{start:oe?parseFloat(oe[0]):null,end:oe?parseFloat(oe[1]):null},request:Q};for(r.debug("Parse EBML header: "+x.url),z.skipOverElement(l.EBML),z.consumeTag(l.Segment),b=z.getMatroskaCodedNum(),b+=z.getPos(),ne=z.getPos();z.moreData()&&!z.consumeTagAndSize(l.Segment.Info,!0);)if(!(z.skipOverElement(l.Segment.SeekHead,!0)||z.skipOverElement(l.Segment.Tracks,!0)||z.skipOverElement(l.Segment.Cues,!0)||z.skipOverElement(l.Void,!0)))throw new Error("no valid top level element found");for(;C===void 0;){var J=z.getMatroskaCodedNum(!0),he=z.getMatroskaCodedNum();J===l.Segment.Info.Duration.tag?C=z[l.Segment.Info.Duration.parse](he):z.setPos(z.getPos()+he)}Q=N(x),w.load({request:Q,success:function(Ne){D=function(Te,Ce,Ie,et){var nt,We,Xe,Mt,Ee,Fe,lt,qe;for(Xe=[],Ee=0,Fe=(We=function(ht){var gt,st,qt=[],Gt=Ja(B).create({data:ht});for(Gt.consumeTagAndSize(l.Segment.Cues);Gt.moreData()&&Gt.consumeTagAndSize(l.Segment.Cues.CuePoint,!0);){for((gt={}).CueTime=Gt.parseTag(l.Segment.Cues.CuePoint.CueTime),gt.CueTracks=[];Gt.moreData()&&Gt.consumeTag(l.Segment.Cues.CuePoint.CueTrackPositions,!0);){var an=Gt.getMatroskaCodedNum(),un=Gt.getPos();if((st={}).Track=Gt.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),st.Track===0)throw new Error("Cue track cannot be 0");st.ClusterPosition=Gt.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),gt.CueTracks.push(st),Gt.setPos(un+an)}if(gt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");qt.push(gt)}if(qt.length===0)throw new Error("mandatory cuepoint not found");return qt}(Te)).length;Ee<Fe;Ee+=1)Mt=new Wa.Z,nt=Ee<We.length-1?We[Ee+1].CueTime-We[Ee].CueTime:et-We[Ee].CueTime,Mt.duration=nt,Mt.startTime=We[Ee].CueTime,Mt.timescale=1e3,lt=We[Ee].CueTracks[0].ClusterPosition+Ce,qe=Ee<We.length-1?We[Ee+1].CueTracks[0].ClusterPosition+Ce-1:Ie-1,Mt.mediaRange=lt+"-"+qe,Xe.push(Mt);return r.debug("Parsed cues: "+Xe.length+" cues."),Xe}(Ne,ne,b,C),M(D)},error:function(){r.error("Download Error: Cues "+x.url),M(null)}}),r.debug("Perform cues load: "+x.url+" bytes="+x.range.start+"-"+x.range.end)}else M(null)})(ie,G,ce,function(j){te({segments:j,representation:U,error:j?void 0:new re.Z(L.SEGMENT_BASE_LOADER_ERROR_CODE,L.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){te({representation:U,error:new re.Z(L.SEGMENT_BASE_LOADER_ERROR_CODE,L.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){w&&(w.abort(),w=null)}},l={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},i}$a.__dashjs_factory_name="WebmSegmentBaseLoader";var Rs=_.Z.getSingletonFactory($a);function eo(i){i=i||{};var r,l,E,R=this.context,A=i.eventBus,h=i.events,w=i.dashMetrics,L=i.mediaPlayerModel,Y=i.errHandler,B=i.baseURLController,N=i.debug,U=i.boxParser,Z=i.requestModifier,ce=i.errors;function te(ue){return(ue?ue.split("/")[1]:"").toLowerCase()==="webm"}return r={initialize:function(){l.initialize(),E.initialize()},getSegmentBaseInitSegment:function(ue){return te(ue.representation.mimeType)?E.loadInitialization(ue.representation,ue.mediaType):l.loadInitialization(ue.representation,ue.mediaType)},getSegmentList:function(ue){return te(ue.mimeType)?E.loadSegments(ue.representation,ue.mediaType,ue.representation?ue.representation.indexRange:null):l.loadSegments(ue.representation,ue.mediaType,ue.representation?ue.representation.indexRange:null)},reset:function(){l.reset(),E.reset()}},l=Is(R).getInstance(),E=Rs(R).getInstance(),l.setConfig({baseURLController:B,dashMetrics:w,mediaPlayerModel:L,errHandler:Y,eventBus:A,events:h,errors:ce,debug:N,boxParser:U,requestModifier:Z}),E.setConfig({baseURLController:B,dashMetrics:w,mediaPlayerModel:L,errHandler:Y,eventBus:A,events:h,errors:ce,debug:N,requestModifier:Z}),r}eo.__dashjs_factory_name="SegmentBaseController";var ws=_.Z.getSingletonFactory(eo),to=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Qi=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},no=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Ns=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Cs(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Ds=function(){function i(E){var R=this;(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this.valid=E[0]=="/",this.path=E.split("/").filter(function(A){return A.length!==0}).map(function(A){var h={name:A},w=A.indexOf("[");if(w!=-1){h.name=A.substring(0,w);var L=A.substring(w+1,A.length-1);R.valid=R.valid&&L.indexOf("[")==-1;var Y=L.indexOf("=");Y!=-1?(h.attribute={name:L.substring(1,Y),value:L.substring(Y+1)},["'",'"'].indexOf(h.attribute.value[0])!=-1&&(h.attribute.value=h.attribute.value.substring(1,h.attribute.value.length-1))):h.position=parseInt(L,10)-1}return h})}var r,l;return r=i,(l=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(E,R){for(var A=null,h=E,w=1,L="MPD";w<this.path.length&&h!==null;){A=h;var Y=this.path[w];if(L=Y.name,w!==this.path.length-1||!L.startsWith("@")&&L!=="text()"){var B=A[L+"_asArray"]||[];B.length===0&&A[L]&&B.push(A[L]),Y.position?h=B[Y.position]||null:Y.attribute?function(){var N=Y.attribute;h=B.filter(function(U){return U[N.name]==N.value})[0]||null}():h=B[0]||null}w++}return h===null?null:L.startsWith("@")?{name:L.substring(1),leaf:h,target:h}:L==="text()"?{name:"__text",leaf:h,target:h}:{name:L,leaf:h,target:R?A:h}}}])&&Cs(r.prototype,l),i}();function Os(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Ms=function(){function i(E,R,A){(function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),this.action=E,this.xpath=R,this.value=A,this.position=null}var r,l;return r=i,(l=[{key:"getMpdTarget",value:function(E){var R=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(E,R)}}])&&Os(r.prototype,l),i}();function ro(){var i,r,l=this.context;return i={getIsPatch:function(E){return E&&E.hasOwnProperty(e.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(E){return E&&E.hasOwnProperty(e.Z.PUBLISH_TIME)?new Date(E[e.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(E){return E&&E.hasOwnProperty(e.Z.ORIGINAL_PUBLISH_TIME)?new Date(E[e.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(E){return E&&E[e.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(E){return E?(E.__children||[]).map(function(R){var A=Object.keys(R)[0];if(A!=="add"&&A!=="remove"&&A!=="replace")return r.warn("Ignoring node of invalid action: ".concat(A)),null;var h=R[A],w=h.sel;if(A==="add"&&h.type){if(!h.type.startsWith("@"))return r.warn("Ignoring add action for prefixed namespace declaration: ".concat(h.type,"=").concat(h.__text)),null;w="".concat(w,"/").concat(h.type)}var L=new Ds(w);if(!L.isValid())return r.warn("Ignoring action with invalid selector: ".concat(A," - ").concat(w)),null;var Y=null;L.findsAttribute()||L.findsTextReplace()?Y=h.__text||"":A!=="remove"&&(Y=h.__children.reduce(function(N,U){var Z=Object.keys(U)[0];return Z!=="#text"&&(N[Z]=N[Z]||[],N[Z].push(U[Z])),N},{}));var B=new Ms(A,L,Y);return A==="add"&&(B.position=h.pos),B}).filter(function(R){return!!R}):[]}},r=(0,m.Z)(l).getInstance().getLogger(i),i}ro.__dashjs_factory_name="PatchManifestModel";var Ps=_.Z.getSingletonFactory(ro);function io(){var i,r,l,E,R,A,h,w=this.context;function L(C,D,b){var ne,z=r.getAdaptationsForType(E[0].mpd.manifest,C,D);if(!z||z.length===0)return null;if(z.length>1&&b){var oe=N(b,D);if(R[b.id]&&R[b.id][D]){for(var Q=0,x=z.length;Q<x;Q++)if(Y(R[b.id][D],oe[Q]))return z[Q]}for(var J=0,he=z.length;J<he;J++)if(ne=z[J],r.getRolesForAdaptation(ne).filter(function(Ne){return Ne.value===e.Z.MAIN})[0])return z[J]}return z[0]}function Y(C,D){if(!C||!D)return!1;var b=C.id===D.id,ne=C.codec===D.codec,z=C.viewpoint===D.viewpoint,oe=JSON.stringify(C.viewpointsWithSchemeIdUri)===JSON.stringify(D.viewpointsWithSchemeIdUri),Q=C.lang===D.lang,x=C.roles.toString()===D.roles.toString(),J=JSON.stringify(C.rolesWithSchemeIdUri)===JSON.stringify(D.rolesWithSchemeIdUri),he=C.accessibility.toString()===D.accessibility.toString(),Ne=JSON.stringify(C.accessibilitiesWithSchemeIdUri)===JSON.stringify(D.accessibilitiesWithSchemeIdUri),Te=C.audioChannelConfiguration.toString()===D.audioChannelConfiguration.toString(),Ce=JSON.stringify(C.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(D.audioChannelConfigurationsWithSchemeIdUri);return b&&ne&&z&&oe&&Q&&x&&J&&he&&Ne&&Te&&Ce}function B(C,D,b,ne,z,oe){var Q,x,J,he,Ne,Te,Ce=[];if(!ne||ne.length===0)return[];var Ie=r.getAdaptationsForPeriod(D);for(he=0,Te=ne.length;he<Te;he++)if(Q=ne[he],x=G(Ie[J=r.getIndexForAdaptation(Q,C,b.index)]),oe){var et=x.accessibility.length;for(Ne=0;Ne<et;Ne++)if(x){var nt=x.accessibility[Ne];if(nt.indexOf("cea-608:")===0){var We=nt.substring(8).split(";");if(We[0].substring(0,2)==="CC")for(Ne=0;Ne<We.length;Ne++)x||(x=G.call(this,Ie[J])),ie(x,We[Ne].substring(0,3),We[Ne].substring(4)),Ce.push(x),x=null;else for(Ne=0;Ne<We.length;Ne++)x||(x=G.call(this,Ie[J])),ie(x,"CC"+(Ne+1),We[Ne]),Ce.push(x),x=null}else nt.indexOf("cea-608")===0&&(ie(x,A.CC1,"eng"),Ce.push(x),x=null)}}else z===A.IMAGE?(x.type=A.IMAGE,Ce.push(x),x=null):x&&Ce.push(x);return Ce}function N(C,D,b){var ne=E,z=b,oe=[];if(z)le(),ne=U(z);else{if(!(E.length>0))return oe;z=E[0].mpd.manifest}var Q=de(C,ne),x=r.getAdaptationsForType(z,C?C.index:null,D);return oe=B(z,Q,C,x,D),D===A.TEXT&&(x=r.getAdaptationsForType(z,C?C.index:null,A.VIDEO),oe=oe.concat(B(z,Q,C,x,D,!0))),oe}function U(C){var D=Z(C);return r.getRegularPeriods(D)}function Z(C){var D=te(C);return r.getMpd(D)}function ce(){E=[],R={}}function te(C){return C||(E.length>0?E[0].mpd.manifest:null)}function ue(C){try{var D=de(C.streamInfo,E),b=r.getAdaptationsForPeriod(D);return C&&C.streamInfo&&C.streamInfo.id!==void 0&&b?b[C.index]:null}catch{return null}}function de(C,D){for(var b=D.length,ne=0;ne<b;ne++){var z=D[ne];if(C&&C.id===z.id)return z}return null}function G(C){if(!C)return null;var D,b,ne,z,oe,Q=new Qi,x=C.period.mpd.manifest.Period_asArray[C.period.index].AdaptationSet_asArray[C.index];if(Q.id=C.id,Q.index=C.index,Q.type=C.type,Q.streamInfo=j(C.period),Q.representationCount=r.getRepresentationCount(x),Q.labels=r.getLabelsForAdaptation(x),Q.lang=r.getLanguageForAdaptation(x),Q.segmentAlignment=r.getSegmentAlignment(x),Q.subSegmentAlignment=r.getSubSegmentAlignment(x),D=r.getViewpointForAdaptation(x),Q.viewpoint=D.length?D[0].value:void 0,Q.viewpointsWithSchemeIdUri=D,oe=r.getAccessibilityForAdaptation(x),Q.accessibility=oe.map(function(Ce){var Ie=Ce.value,et=Ie;return Ce.schemeIdUri&&Ce.schemeIdUri.search("cea-608")>=0&&h!==void 0&&(et=Ie?"cea-608:"+Ie:"cea-608",Q.embeddedCaptions=!0),et}),Q.accessibilitiesWithSchemeIdUri=oe,b=r.getAudioChannelConfigurationForAdaptation(x),Q.audioChannelConfiguration=b.map(function(Ce){return Ce.value}),Q.audioChannelConfigurationsWithSchemeIdUri=b,Q.audioChannelConfiguration.length===0&&Array.isArray(x.Representation_asArray)&&x.Representation_asArray.length>0&&(ne=r.getAudioChannelConfigurationForRepresentation(x.Representation_asArray[0]),Q.audioChannelConfiguration=ne.map(function(Ce){return Ce.value}),Q.audioChannelConfigurationsWithSchemeIdUri=ne),z=r.getRolesForAdaptation(x),Q.roles=z.map(function(Ce){return Ce.value}),Q.rolesWithSchemeIdUri=z,Q.codec=r.getCodec(x),Q.mimeType=r.getMimeType(x),Q.contentProtection=r.getContentProtectionData(x),Q.bitrateList=r.getBitrateListForAdaptation(x),Q.selectionPriority=r.getSelectionPriority(x),Q.contentProtection){var J=Q.contentProtection.map(function(Ce){return r.getKID(Ce)}).filter(function(Ce){return Ce!==null});if(J.length){var he=J[0];Q.contentProtection.forEach(function(Ce){Ce.keyId=he})}}if(Q.isText=r.getIsText(x),Q.supplementalProperties=r.getSupplementalPropertiesForAdaptation(x),(!Q.supplementalProperties||Object.keys(Q.supplementalProperties).length===0)&&Array.isArray(x.Representation_asArray)&&x.Representation_asArray.length>0){var Ne=x.Representation_asArray.map(function(Ce){return r.getSupplementalPropertiesForRepresentation(Ce)});Ne.every(function(Ce){return JSON.stringify(Ce)===JSON.stringify(Ne[0])})&&(Q.supplementalProperties=Ne[0])}if(Q.supplementalPropertiesAsArray=r.getSupplementalPropertiesAsArrayForAdaptation(x),(!Q.supplementalPropertiesAsArray||Q.supplementalPropertiesAsArray.length===0)&&Array.isArray(x.Representation_asArray)&&x.Representation_asArray.length>0){var Te=x.Representation_asArray.map(function(Ce){return r.getSupplementalPropertiesAsArrayForRepresentation(Ce)});Te.every(function(Ce){return JSON.stringify(Ce)===JSON.stringify(Te[0])})&&(Q.supplementalPropertiesAsArray=Te[0])}return Q.essentialProperties=r.getEssentialPropertiesForAdaptation(x),Q.essentialPropertiesAsArray=r.getEssentialPropertiesAsArrayForAdaptation(x),Q.isFragmented=r.getIsFragmented(x),Q.isEmbedded=!1,Q}function ie(C,D,b){C.id=D,C.index=100+parseInt(D.substring(2,3)),C.type=A.TEXT,C.codec="cea-608-in-SEI",C.isEmbedded=!0,C.isFragmented=!1;var ne=oi()(b);C.lang=ne||b,C.roles=["caption"],C.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function j(C){var D,b,ne=new no;return ne.id=C.id,ne.index=C.index,ne.start=C.start,ne.duration=C.duration,ne.manifestInfo=(D=C.mpd,(b=new Ns).dvrWindowSize=D.timeShiftBufferDepth,b.loadedTime=D.manifest.loadedTime,b.availableFrom=D.availabilityStartTime,b.minBufferTime=D.manifest.minBufferTime,b.maxFragmentDuration=D.maxSegmentDuration,b.duration=r.getDuration(D.manifest),b.isDynamic=r.getIsDynamic(D.manifest),b.serviceDescriptions=r.getServiceDescriptions(D.manifest),b.protocol=D.manifest.protocol,b),ne.isLast=C.mpd.manifest.Period_asArray.length===1||Math.abs(ne.start+ne.duration-ne.manifestInfo.duration)<1,ne}function le(){if(!A)throw new Error("setConfig function has to be called previously")}function g(C){return E.length>0?E[0].mpd.manifest.Period_asArray[C]:null}function M(C,D,b){var ne,z,oe,Q,x;if(C){for(ne=C.AdaptationSet_asArray,Q=0;Q<ne.length;Q+=1)for(oe=ne[Q].Representation_asArray,x=0;x<oe.length;x+=1)if(D===(z=oe[x]).id)return b?x:z}return null}return i={getBandwidthForRepresentation:function(C,D){var b;return(b=M(g(D),C))?b.bandwidth:null},getIndexForRepresentation:function(C,D){return function(b,ne){var z=M(b,ne,!0);return z!==null?z:-1}(g(D),C)},getMaxIndexForBufferType:function(C,D){return function(b,ne){var z,oe,Q,x;if(!b||!ne)return-1;for(oe=b.AdaptationSet_asArray,x=0;x<oe.length;x+=1)if(Q=(z=oe[x]).Representation_asArray,r.getIsTypeOf(z,ne))return Q.length;return-1}(g(D),C)},convertRepresentationToRepresentationInfo:function(C){if(C){var D=new to,b=C.adaptation.period.mpd.manifest.Period_asArray[C.adaptation.period.index].AdaptationSet_asArray[C.adaptation.index],ne=r.getRepresentationFor(C.index,b);return D.id=C.id,D.quality=C.index,D.bandwidth=r.getBandwidth(ne),D.fragmentDuration=C.segmentDuration||(C.segments&&C.segments.length>0?C.segments[0].duration:NaN),D.MSETimeOffset=C.MSETimeOffset,D.mediaInfo=G(C.adaptation),D}return null},getStreamsInfo:function(C,D){var b=[],ne=E;if(C&&(le(),ne=U(C)),ne.length>0){(!D||D>ne.length)&&(D=ne.length);for(var z=0;z<D;z++)b.push(j(ne[z]))}return b},getMediaInfoForType:function(C,D){if(E.length===0||!C)return null;var b=de(C,E);if(!b)return null;var ne=r.getAdaptationsForPeriod(b),z=L(C.index,D,C);return z?G(ne[r.getIndexForAdaptation(z,E[0].mpd.manifest,C.index)]):null},getAllMediaInfoForType:N,getAdaptationForType:L,getRealAdaptation:function(C,D){var b,ne,z=de(C,E);return b=D?D.id:null,E.length>0&&z&&(ne=b?r.getAdaptationForId(b,E[0].mpd.manifest,z.index):r.getAdaptationForIndex(D?D.index:null,E[0].mpd.manifest,z.index)),ne},getProducerReferenceTimes:function(C,D){var b,ne,z=de(C,E);return b=D?D.id:null,E.length>0&&z&&(ne=b?r.getAdaptationForId(b,E[0].mpd.manifest,z.index):r.getAdaptationForIndex(D?D.index:null,E[0].mpd.manifest,z.index)),ne?r.getProducerReferenceTimesForAdaptation(ne):[]},getRealPeriodByIndex:function(C){return r.getRealPeriodForIndex(C,E[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(C){try{return r.getEssentialPropertiesForRepresentation(C)}catch{return[]}},getVoRepresentations:function(C){var D=ue(C);return r.getRepresentationsForAdaptation(D)},getEventsFor:function(C,D,b){var ne=[];if(E.length>0){var z=E[0].mpd.manifest;if(C instanceof no){var oe=de(C,E);ne=r.getEventsForPeriod(oe)}else if(C instanceof Qi){var Q=de(b,E);ne=r.getEventStreamForAdaptationSet(z,ue(C),Q)}else if(C instanceof to){var x=de(b,E);ne=r.getEventStreamForRepresentation(z,D,x)}}return ne},getEvent:function(C,D,b,ne){try{if(!C||!D||isNaN(b)||!ne)return null;var z=C.scheme_id_uri,oe=C.value;if(!D[z+"/"+oe])return null;var Q,x=new Kn,J=C.timescale||1,he=ne.adaptation.period.start,Ne=D[z+"/"+oe],Te=isNaN(ne.presentationTimeOffset)?isNaN(Ne.presentationTimeOffset)?0:Ne.presentationTimeOffset:ne.presentationTimeOffset,Ce=C.presentation_time_delta/J;Q=C.version===0?he+b-Te+Ce:he-Te+Ce;var Ie=C.event_duration/J,et=C.id,nt=C.message_data;return x.eventStream=Ne,x.eventStream.value=oe,x.eventStream.timescale=J,x.duration=Ie,x.id=et,x.calculatedPresentationTime=Q,x.messageData=nt,x.presentationTimeDelta=Ce,x}catch{return null}},getMpd:Z,setConfig:function(C){C&&(C.constants&&(A=C.constants),C.cea608parser&&(h=C.cea608parser),C.errHandler&&r.setConfig({errHandler:C.errHandler}),C.BASE64&&r.setConfig({BASE64:C.BASE64}))},updatePeriods:function(C){if(!C)return null;le(),E=U(C)},getIsTextTrack:function(C){return r.getIsText(C)},getUTCTimingSources:function(){var C=te();return r.getUTCTimingSources(C)},getSuggestedPresentationDelay:function(){var C=E.length>0?E[0].mpd:null;return r.getSuggestedPresentationDelay(C)},getAvailabilityStartTime:function(C){var D=Z(C);return r.getAvailabilityStartTime(D)},getIsTypeOf:function(C,D){return r.getIsTypeOf(C,D)},getIsDynamic:function(C){var D=te(C);return r.getIsDynamic(D)},getDuration:function(C){var D=te(C);return r.getDuration(D)},getRegularPeriods:U,getContentSteering:function(C){return r.getContentSteering(C)},getLocation:function(C){return r.getLocation(C)},getPatchLocation:function(C){var D=r.getPatchLocation(C),b=r.getPublishTime(C);return D&&D.length!==0&&b?D.filter(function(ne){return isNaN(ne.ttl)||b.getTime()+ne.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.getManifestUpdatePeriod(C,D)},getPublishTime:function(C){return r.getPublishTime(C)},getIsDVB:function(C){return r.hasProfile(C,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(C){return l.getIsPatch(C)},getBaseURLsFromElement:function(C){return r.getBaseURLsFromElement(C)},getRepresentationSortFunction:function(){return r.getRepresentationSortFunction()},getCodec:function(C,D,b){return r.getCodec(C,D,b)},getPeriodById:function(C){if(!C||E.length===0)return null;var D=E.filter(function(b){return b.id===C});return D&&D.length>0?D[0]:null},setCurrentMediaInfo:function(C,D,b){R[C]=R[C]||{},R[C][D]=R[C][D]||{},R[C][D]=b},isPatchValid:function(C,D){var b=r.getId(C),ne=l.getMpdId(D),z=r.getPublishTime(C),oe=l.getPublishTime(D),Q=l.getOriginalPublishTime(D);return!!(b&&ne&&b==ne&&z&&Q&&z.getTime()==Q.getTime()&&oe&&z.getTime()<oe.getTime())},applyPatchToManifest:function(C,D){l.getPatchOperations(D).forEach(function(b){var ne=b.getMpdTarget(C);if(ne!==null){var z=ne.name,oe=ne.target,Q=ne.leaf;if(b.xpath.findsAttribute()||z==="__text")switch(b.action){case"add":case"replace":oe[z]=b.value;break;case"remove":delete oe[z]}else{var x=(oe[z+"_asArray"]||[]).indexOf(Q),J=b.position==="prepend"||b.position==="before";if((b.action==="remove"||b.action==="replace")&&(delete oe[z],x!=-1)){var he=oe[z+"_asArray"];he.splice(x,1),he.length>1?oe[z]=he:he.length==1?oe[z]=he[0]:delete oe[z+"_asArray"]}b.action!=="add"&&b.action!=="replace"||Object.keys(b.value).forEach(function(Ne){var Te=b.value[Ne],Ce=oe[Ne+"_asArray"]||[];if(Ce.length===0&&oe[Ne]&&Ce.push(oe[Ne]),Ce.length===0)Ce=Te;else{var Ie=Ce.length;Ie=Ne==z&&x!=-1?x+(J?0:1)+(b.action=="replace"?-1:0):J?0:Ce.length,Ce.splice.apply(Ce,[Ie,0].concat(Te))}oe[Ne+"_asArray"]=Ce,oe[Ne]=Ce.length==1?Ce[0]:Ce})}}})},areMediaInfosEqual:Y,reset:ce},r=$t(w).getInstance(),l=Ps(w).getInstance(),ce(),i}io.__dashjs_factory_name="DashAdapter";var Ls=_.Z.getSingletonFactory(io);function Fs(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var xs=function(){function i(){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i)}var r,l;return r=i,l=[{key:"round10",value:function(E,R){return function(A,h,w){return w===void 0||+w==0?Math[A](h):(w=+w,(h=+h)===null||isNaN(h)||typeof w!="number"||w%1!=0?NaN:(h=h.toString().split("e"),+((h=(h=Math[A](+(h[0]+"e"+(h[1]?+h[1]-w:-w)))).toString().split("e"))[0]+"e"+(h[1]?+h[1]+w:w))))}("round",E,R)}}],l&&Fs(r,l),i}(),ks=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Zs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.t=null,this.mt=null,this.to=null,this.lto=null},Us=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.t=null,this.level=null},Bs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.target=null,this.state=y.Z.BUFFER_EMPTY},Gs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.time=null,this.range=null,this.manifestInfo=null},qs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.time=null,this.droppedFrames=null};function Ji(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}var Ys=function i(){Ji(this,i),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},js=function i(){Ji(this,i),this.id=null,this.index=null,this.start=null,this.duration=null},Hs=function i(){Ji(this,i),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Vs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ks=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.loadingRequests=[],this.executedRequests=[]};function ao(i){var r,l,E=(i=i||{}).settings,R=this.context,A=(0,p.Z)(R).getInstance();function h(){A.trigger(u.Z.METRICS_CHANGED)}function w(Z){A.trigger(u.Z.METRIC_CHANGED,{mediaType:Z}),h()}function L(Z,ce,te){A.trigger(u.Z.METRIC_UPDATED,{mediaType:Z,metric:ce,value:te}),w(Z)}function Y(Z,ce,te){A.trigger(u.Z.METRIC_ADDED,{mediaType:Z,metric:ce,value:te}),w(Z)}function B(Z,ce){var te=null;return Z&&(l.hasOwnProperty(Z)?te=l[Z]:ce||(te=new ks,l[Z]=te)),te}function N(Z,ce,te){var ue=B(Z);ue!==null&&(ue[ce].push(te),ue[ce].length>E.get().streaming.metrics.maxListDepth&&ue[ce].shift())}function U(Z,ce,te){N(Z,ce,te),Y(Z,ce,te)}return r={clearCurrentMetricsForType:function(Z){delete l[Z],w(Z)},clearAllCurrentMetrics:function(){l={},h()},getMetricsFor:B,addHttpRequest:function Z(ce,te,ue,de,G,ie,j,le,g,M,C,D,b,ne,z,oe,Q){var x=new Le.w;ie!=null&&ie!==de&&(Z(ce,null,ue,de,G,null,null,le,g,null,null,null,b,null,null,oe,Q),x.actualurl=ie),x.tcpid=te,x.type=ue,x.url=de,x.range=le,x.trequest=g,x.tresponse=M,x.responsecode=D,x.cmsd=Q,x._tfinish=C,x._stream=ce,x._mediaduration=b,x._quality=G,x._responseHeaders=ne,x._serviceLocation=j,x._fileLoaderType=oe,z?z.forEach(function(J){(function(he,Ne,Te,Ce){var Ie=new Le.O;Ie.s=Ne,Ie.d=Te,Ie.b=Ce,he.trace.push(Ie),he.interval||(he.interval=0),he.interval+=Te})(x,J.s,J.d,J.b)}):(delete x.interval,delete x.trace),U(ce,y.Z.HTTP_REQUEST,x)},addRepresentationSwitch:function(Z,ce,te,ue,de){var G=new Zs;G.t=ce,G.mt=te,G.to=ue,de?G.lto=de:delete G.lto,U(Z,y.Z.TRACK_SWITCH,G)},addBufferLevel:function(Z,ce,te){var ue=new Us;ue.t=ce,ue.level=te,U(Z,y.Z.BUFFER_LEVEL,ue)},addBufferState:function(Z,ce,te){var ue=new Bs;ue.target=te,ue.state=ce,U(Z,y.Z.BUFFER_STATE,ue)},addDVRInfo:function(Z,ce,te,ue){var de=new Gs;de.time=ce,de.range=ue,de.manifestInfo=te,U(Z,y.Z.DVR_INFO,de)},addDroppedFrames:function(Z,ce){var te=new qs,ue=B(Z).DroppedFrames;ce&&(te.time=ce.creationTime,te.droppedFrames=ce.droppedVideoFrames,ue.length>0&&ue[ue.length-1]==te||U(Z,y.Z.DROPPED_FRAMES,te))},addSchedulingInfo:function(Z,ce,te,ue,de,G,ie,j,le){var g=new Vs;g.mediaType=Z,g.t=ce,g.type=te,g.startTime=ue,g.availabilityStartTime=de,g.duration=G,g.quality=ie,g.range=j,g.state=le,U(Z,y.Z.SCHEDULING_INFO,g)},addRequestsQueue:function(Z,ce,te){var ue=new Ks;ue.loadingRequests=ce,ue.executedRequests=te,B(Z).RequestsQueue=ue,Y(Z,y.Z.REQUESTS_QUEUE,ue)},addManifestUpdate:function(Z,ce,te,ue,de,G,ie,j,le,g){var M=new Ys;M.mediaType=Z,M.type=ce,M.requestTime=te,M.fetchTime=ue,M.availabilityStartTime=de,M.presentationStartTime=G,M.clientTimeOffset=ie,M.currentTime=j,M.buffered=le,M.latency=g,N(t.Z.STREAM,y.Z.MANIFEST_UPDATE,M),Y(Z,y.Z.MANIFEST_UPDATE,M)},updateManifestUpdateInfo:function(Z,ce){if(Z){for(var te in ce)Z[te]=ce[te];L(Z.mediaType,y.Z.MANIFEST_UPDATE,Z)}},addManifestUpdateStreamInfo:function(Z,ce,te,ue,de){if(Z){var G=new js;G.id=ce,G.index=te,G.start=ue,G.duration=de,Z.streamInfo.push(G),L(Z.mediaType,y.Z.MANIFEST_UPDATE_STREAM_INFO,Z)}},addManifestUpdateRepresentationInfo:function(Z,ce,te,ue,de,G,ie,j){if(Z&&Z.representationInfo){var le=new Hs;le.id=ce,le.index=te,le.streamIndex=ue,le.mediaType=de,le.startNumber=ie,le.fragmentInfoType=j,le.presentationTimeOffset=G,Z.representationInfo.push(le),L(Z.mediaType,y.Z.MANIFEST_UPDATE_TRACK_INFO,Z)}},addPlayList:function(Z){Z.trace&&Array.isArray(Z.trace)?Z.trace.forEach(function(ce){ce.hasOwnProperty("subreplevel")&&!ce.subreplevel&&delete ce.subreplevel}):delete Z.trace,U(t.Z.STREAM,y.Z.PLAY_LIST,Z)},addDVBErrors:function(Z){U(t.Z.STREAM,y.Z.DVB_ERRORS,Z)}},l={},r}ao.__dashjs_factory_name="MetricsModel";var zs=_.Z.getSingletonFactory(ao);function oo(i){i=i||{};var r,l,E,R,A=this.context,h=i.metricsModel;function w(B){var N=h.getMetricsFor(B,!0);if(!N)return null;var U,Z=N.HttpList,ce=null;if(!Z||Z.length<=0)return null;for(U=Z.length-1;U>=0;){if(Z[U].responsecode){ce=Z[U];break}U--}return ce}function L(B){var N=h.getMetricsFor(B,!0);return N&&N.HttpList?N.HttpList:[]}function Y(B,N){if(!B)return null;var U=B[N];return U&&U.length!==0?U[U.length-1]:null}return r={getCurrentRepresentationSwitch:function(B){return Y(h.getMetricsFor(B,!0),y.Z.TRACK_SWITCH)},getCurrentBufferState:function(B){return Y(h.getMetricsFor(B,!0),y.Z.BUFFER_STATE)},getCurrentBufferLevel:function(B){var N=Y(h.getMetricsFor(B,!0),y.Z.BUFFER_LEVEL);return N?xs.round10(N.level/1e3,-3):0},getCurrentHttpRequest:w,getHttpRequests:L,getCurrentDroppedFrames:function(){return Y(h.getMetricsFor(t.Z.VIDEO,!0),y.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(B){return Y(h.getMetricsFor(B,!0),y.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(B){return Y(B?h.getMetricsFor(B,!0):h.getMetricsFor(t.Z.VIDEO,!0)||h.getMetricsFor(t.Z.AUDIO,!0),y.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return Y(h.getMetricsFor(t.Z.STREAM),y.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(B,N){if(!N)return null;var U={},Z=w(B);Z&&(U=pt.Z.parseHttpHeaders(Z._responseHeaders));var ce=U[N.toLowerCase()];return ce===void 0?null:ce},getLatestMPDRequestHeaderValueByID:function(B){if(!B)return null;var N,U,Z,ce={};for(Z=(N=L(t.Z.STREAM)).length-1;Z>=0;Z--)if((U=N[Z]).type===Le.w.MPD_TYPE){ce=pt.Z.parseHttpHeaders(U._responseHeaders);break}var te=ce[B.toLowerCase()];return te===void 0?null:te},addRepresentationSwitch:function(B,N,U,Z,ce){h.addRepresentationSwitch(B,N,U,Z,ce)},addDVRInfo:function(B,N,U,Z){h.addDVRInfo(B,N,U,Z)},updateManifestUpdateInfo:function(B){var N=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(N,B)},addManifestUpdateStreamInfo:function(B){if(B){var N=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(N,B.id,B.index,B.start,B.duration)}},addManifestUpdateRepresentationInfo:function(B,N){if(B){var U=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(U,B.id,B.index,B.streamIndex,N,B.presentationTimeOffset,B.startNumber,B.fragmentInfoType)}},addManifestUpdate:function(B){h.addManifestUpdate(t.Z.STREAM,B.type,B.requestStartDate,B.requestEndDate)},addHttpRequest:function(B,N,U,Z,ce,te){h.addHttpRequest(B.mediaType,null,B.type,B.url,B.quality,N,B.serviceLocation||null,B.range||null,B.requestStartDate,B.firstByteDate,B.requestEndDate,U,B.duration,Z,ce,B.fileLoaderType,te)},addSchedulingInfo:function(B,N){h.addSchedulingInfo(B.mediaType,new Date,B.type,B.startTime,B.availabilityStartTime,B.duration,B.quality,B.range,N)},addRequestsQueue:function(B,N,U){h.addRequestsQueue(B,N,U)},addBufferLevel:function(B,N,U){h.addBufferLevel(B,N,U)},addBufferState:function(B,N,U){h.addBufferState(B,N,U)},addDroppedFrames:function(B){h.addDroppedFrames(t.Z.VIDEO,B)},addPlayList:function(){R&&(h.addPlayList(R),R=null)},addDVBErrors:function(B){h.addDVBErrors(B)},createPlaylistMetrics:function(B,N){(R=new De).start=new Date,R.mstart=B,R.starttype=N},createPlaylistTraceMetrics:function(B,N,U){l===!0&&(l=!1,(E=new be).representationid=B,E.start=new Date,E.mstart=N,E.playbackspeed=U!==null?U.toString():null)},updatePlayListTraceMetrics:function(B){if(E)for(var N in E)E[N]=B[N]},pushPlayListTraceMetrics:function(B,N){if(l===!1&&R&&E&&E.start){var U=E.start,Z=B.getTime()-U.getTime();E.duration=Z,E.stopreason=N,R.trace.push(E),l=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||zs(A).getInstance({settings:i.settings}),l=!0,E=null,R=null,r}oo.__dashjs_factory_name="DashMetrics";var Ws=_.Z.getSingletonFactory(oo);function so(){var i,r,l,E,R=this.context,A=(0,p.Z)(R).getInstance(),h=(0,Ae.Z)(R).getInstance();function w(de){E=de}function L(de,G,ie,j){var le,g=G.adaptation.period.mpd,M=g.availabilityStartTime;if(j)le=ie&&g.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(M.getTime()+1e3*(de+g.timeShiftBufferDepth)):g.availabilityEndTime;else if(ie){var C=G.availabilityTimeOffset;le=new Date(M.getTime()+1e3*(de-C))}else le=M;return le}function Y(de,G){return(de.getTime()-G.mpd.availabilityStartTime.getTime()+1e3*E)/1e3}function B(de,G){return de+(G.adaptation.period.start-G.presentationTimeOffset)}function N(de){var G={start:NaN,end:NaN},ie=de[0].getAdapter().getRegularPeriods()[0],j=Y(new Date,ie);if(!de||de.length===0)return{range:G,now:j};de.forEach(function(g){var M=g.getAdapter(),C=M.getMediaInfoForType(g.getStreamInfo(),t.Z.VIDEO)||M.getMediaInfoForType(g.getStreamInfo(),t.Z.AUDIO),D=M.getVoRepresentations(C)[0],b={start:NaN,end:NaN};if(D)if(D.segmentInfoType===e.Z.SEGMENT_TIMELINE)b=function(z){var oe,Q,x,J,he=z.adaptation.period.mpd.manifest.Period_asArray[z.adaptation.period.index].AdaptationSet_asArray[z.adaptation.index],Ne=r.getRepresentationFor(z.index,he),Te=Ne.SegmentTemplate||Ne.SegmentList,Ce=Te.SegmentTimeline,Ie=Te.timescale,et=Ce.S_asArray,nt={start:0,end:0},We=et[0].t,Xe=!isNaN(We),Mt=Xe?We:0,Ee=0;for(Xe&&(nt.start=B(Mt/Ie,z)),x=0,J=et.length;x<J;x++)Q=0,(oe=et[x]).hasOwnProperty("r")&&(Q=oe.r),Ee+=oe.d*(1+Q);return nt.end=B((Mt+Ee)/Ie,z),nt}(D);else{var ne=D.adaptation.period;b.start=ne.start,b.end=Math.max(j,ne.start+ne.duration)}!isNaN(b.start)&&(isNaN(G.start)||G.start>b.start)&&(G.start=b.start),!isNaN(b.end)&&(isNaN(G.end)||G.end<b.end)&&(G.end=b.end)}),G.end=Math.min(j,G.end);var le=Z(de,G.end,!0);return G.end=isNaN(le)?G.end:le,G.start=ie&&ie.mpd&&ie.mpd.timeShiftBufferDepth&&!isNaN(ie.mpd.timeShiftBufferDepth)&&!isNaN(G.end)?Math.max(G.end-ie.mpd.timeShiftBufferDepth,G.start):G.start,G.start=Z(de,G.start),{range:G,now:j}}function U(de,G){l=de-G.end}function Z(de,G){var ie=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var j=0,le=!1,g=NaN;!le&&j<de.length;){var M=de[j].getStreamInfo();M.start<=G&&(!isFinite(M.duration)||M.start+M.duration>=G)?(g=G,le=!0):!ie&&M.start>G&&(isNaN(g)||M.start<g)?g=M.start:ie&&M.start+M.duration<G&&(isNaN(g)||M.start+M.duration>g)&&(g=M.start+M.duration),j+=1}return g}catch{return G}}function ce(de){de.offset===void 0||isNaN(de.offset)||w(de.offset/1e3)}function te(){E=0,l=0}function ue(){A.off(u.Z.UPDATE_TIME_SYNC_OFFSET,ce,this),te()}return i={initialize:function(){te(),A.on(u.Z.UPDATE_TIME_SYNC_OFFSET,ce,this)},getClientTimeOffset:function(){return E},setClientTimeOffset:w,getClientReferenceTime:function(){return Date.now()-1e3*l+1e3*E},calcAvailabilityStartTimeFromPresentationTime:function(de,G,ie){return L(de,G,ie)},calcAvailabilityEndTimeFromPresentationTime:function(de,G,ie){return L(de,G,ie,!0)},calcPresentationTimeFromWallTime:Y,calcPresentationTimeFromMediaTime:B,calcPeriodRelativeTimeFromMpdRelativeTime:function(de,G){return G-de.adaptation.period.start},calcMediaTimeFromPresentationTime:function(de,G){return de-G.adaptation.period.start+G.presentationTimeOffset},calcWallTimeForSegment:function(de,G){var ie,j,le;return G&&(ie=de.representation.adaptation.period.mpd.suggestedPresentationDelay,j=de.presentationStartTime+ie,le=new Date(de.availabilityStartTime.getTime()+1e3*j)),le},calcTimeShiftBufferWindow:function(de,G){if(!G)return function(j){var le={start:NaN,end:NaN},g=0,M=NaN;return j.forEach(function(C){var D=C.getStreamInfo();g+=D.duration,(isNaN(M)||D.start<M)&&(M=D.start)}),le.start=M,le.end=M+g,le}(de);if(h.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ie=N(de);return U(ie.now,ie.range),ie.range}return function(j){var le={start:NaN,end:NaN};if(!j||j.length===0)return le;var g=j[0].getAdapter().getRegularPeriods()[0],M=Y(new Date,g),C=g.mpd.timeShiftBufferDepth,D=isNaN(C)?0:M-C;if(le.start=Z(j,D),le.end=!isNaN(le.start)&&M<le.start?M:Z(j,M,!0),!isNaN(C)&&le.end<M-C&&(le.end=NaN),h.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var b=N(j);if(b.range.end<le.start)return A.trigger(n.Z.CONFORMANCE_VIOLATION,{level:xr.LEVELS.WARNING,event:xr.EVENTS.INVALID_DVR_WINDOW}),U(b.now,b.range),b.range}return le}(de)},reset:ue},r=$t(R).getInstance(),ue(),i}so.__dashjs_factory_name="TimelineConverter";var Xs=_.Z.getSingletonFactory(so),$i=P(4593),yi=P(6934);function ea(i){return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ea(i)}function ta(i,r){return ta=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ta(i,r)}function Qs(i,r){return!r||ea(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function Ei(i){return Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ei(i)}var Js=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ta(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=Ei(r);if(l){var w=Ei(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Qs(this,A)});function R(){var A;return function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}(this,R),(A=E.call(this)).captionData=null,A.label=null,A.defaultTrack=!1,A.kind=null,A.isFragmented=!1,A.isEmbedded=!1,A.isTTML=null,A}return R}(Qi),$s=P(2295);function uo(){var i=0;function r(w){for(var L="",Y=0;Y<w.length;++Y)L+=w[Y].uchar;return L.length-L.replace(/^\s+/,"").length}function l(w){return"left: "+3.125*w.x+"%; top: "+6.66*w.y1+"%; width: "+(100-3.125*w.x)+"%; height: "+6.66*Math.max(w.y2-1-w.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function E(w){return w==="red"?"rgb(255, 0, 0)":w==="green"?"rgb(0, 255, 0)":w==="blue"?"rgb(0, 0, 255)":w==="cyan"?"rgb(0, 255, 255)":w==="magenta"?"rgb(255, 0, 255)":w==="yellow"?"rgb(255, 255, 0)":w==="white"?"rgb(255, 255, 255)":w==="black"?"rgb(0, 0, 0)":w}function R(w,L){var Y=w.videoHeight/15;return L?"font-size: "+Y+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(L.foreground?E(L.foreground):"rgb(255, 255, 255)")+"; font-style: "+(L.italics?"italic":"normal")+"; text-decoration: "+(L.underline?"underline":"none")+"; white-space: pre; background-color: "+(L.background?E(L.background):"transparent")+";":"font-size: "+Y+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function A(w){return w.replace(/^\s+/g,"")}function h(w){return w.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(w,L,Y,B){var N,U,Z=null,ce=!1,te=-1,ue={start:L,end:Y,spans:[]},de="style_cea608_white_black",G={},ie={},j=[];for(N=0;N<15;++N){var le=B.rows[N],g="",M=null;if(le.isEmpty()===!1){var C=r(le.chars);Z===null&&(Z={x:C,y1:N,y2:N+1,p:[]}),C!==te&&ce&&(Z.p.push(ue),ue={start:L,end:Y,spans:[]},Z.y2=N,Z.name="region_"+Z.x+"_"+Z.y1+"_"+Z.y2,G.hasOwnProperty(Z.name)===!1?(j.push(Z),G[Z.name]=Z):G[Z.name].p.contat(Z.p),Z={x:C,y1:N,y2:N+1,p:[]});for(var D=0;D<le.chars.length;++D){var b=le.chars[D],ne=b.penState;if(M===null||!ne.equals(M)){g.trim().length>0&&(ue.spans.push({name:de,line:g,row:N}),g="");var z="style_cea608_"+ne.foreground+"_"+ne.background;ne.underline&&(z+="_underline"),ne.italics&&(z+="_italics"),ie.hasOwnProperty(z)||(ie[z]=JSON.parse(JSON.stringify(ne))),M=ne,de=z}g+=b.uchar}g.trim().length>0&&ue.spans.push({name:de,line:g,row:N}),ce=!0,te=C}else ce=!1,te=-1,Z&&(Z.p.push(ue),ue={start:L,end:Y,spans:[]},Z.y2=N,Z.name="region_"+Z.x+"_"+Z.y1+"_"+Z.y2,G.hasOwnProperty(Z.name)===!1?(j.push(Z),G[Z.name]=Z):G[Z.name].p.contat(Z.p),Z=null)}Z&&(Z.p.push(ue),Z.y2=N+1,Z.name="region_"+Z.x+"_"+Z.y1+"_"+Z.y2,G.hasOwnProperty(Z.name)===!1?(j.push(Z),G[Z.name]=Z):G[Z.name].p.contat(Z.p),Z=null);var oe=[];for(N=0;N<j.length;++N){var Q=j[N],x="sub_cea608_"+i++,J=document.createElement("div");J.id=x;var he=l(Q);J.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+he;var Ne=document.createElement("div");Ne.className="paragraph bodyStyle",Ne.style.cssText=R(w);var Te=document.createElement("div");Te.className="cueUniWrapper",Te.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Ce=0;Ce<Q.p.length;++Ce){var Ie=Q.p[Ce],et=0;for(U=0;U<Ie.spans.length;++U){var nt=Ie.spans[U];if(nt.line.length>0){if(U!==0&&et!=nt.row){var We=document.createElement("br");We.className="lineBreak",Te.appendChild(We)}var Xe=!1;et===nt.row&&(Xe=!0),et=nt.row;var Mt=ie[nt.name],Ee=document.createElement("span");Ee.className="spanPadding "+nt.name+" customSpanColor",Ee.style.cssText=R(w,Mt),U!==0&&Xe?U===Ie.spans.length-1?Ee.textContent=h(nt.line):Ee.textContent=nt.line:Ie.spans.length>1&&U<Ie.spans.length-1&&nt.row===Ie.spans[U+1].row?Ee.textContent=A(nt.line):Ee.textContent=nt.line.trim(),Te.appendChild(Ee)}}}Ne.appendChild(Te),J.appendChild(Ne);var Fe={bodyStyle:["%",90]};for(var lt in ie)ie.hasOwnProperty(lt)&&(Fe[lt]=["%",90]);oe.push({type:"html",start:L,end:Y,cueHTMLElement:J,cueID:x,cellResolution:[32,15],isFromCEA608:!0,fontSize:Fe,lineHeight:{},linePadding:{}})}return oe}}}uo.__dashjs_factory_name="EmbeddedTextHtmlRender";var eu=_.Z.getSingletonFactory(uo);function lo(i){var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G=i.errHandler,ie=i.manifestModel,j=i.mediaController,le=i.videoModel,g=i.textTracks,M=i.vttParser,C=i.vttCustomRenderingParser,D=i.ttmlParser,b=i.streamInfo,ne=i.settings,z=this.context,oe=(0,p.Z)(z).getInstance(),Q=!1;function x(){h=null,L=NaN,Y=[],B=null,w=!1,A=[],R=null}function J(We){var Xe=new Js;for(var Mt in We)Xe[Mt]=We[Mt];Xe.labels=We.labels,Xe.defaultTrack=function(Ee){var Fe=!1;return U.length>1&&Ee.isEmbedded?Fe=Ee.id&&Ee.id===t.Z.CC1:U.length===1?Ee.id&&typeof Ee.id=="string"&&Ee.id.substring(0,2)==="CC"&&(Fe=!0):U.length===0&&(Fe=Ee.index===A[0].index),Fe}(We),Xe.isFragmented=We.isFragmented,Xe.isEmbedded=!!We.isEmbedded,Xe.isTTML=function(Ee){return Ee.codec&&Ee.codec.search(t.Z.STPP)>=0||Ee.mimeType&&Ee.mimeType.search(t.Z.TTML)>=0}(We),Xe.kind=function(Ee,Fe){var lt=Ee.roles&&Ee.roles.length>0?Fe[Ee.roles[0]]:Fe.caption;return lt=lt===Fe.caption||lt===Fe.subtitle?lt:Fe.caption}(We,{subtitle:"subtitles",caption:"captions"}),g.addTextTrack(Xe)}function he(We){var Xe=We.chunk;Xe.mediaInfo.embeddedCaptions&&Te(Xe.bytes,Xe)}function Ne(We){N=We}function Te(We,Xe){var Mt=Xe.mediaInfo,Ee=Mt.type,Fe=Mt.mimeType,lt=Mt.codec||Fe;lt?Mt.codec.indexOf("application/mp4")!==-1?function(qe,ht,gt){var st;if(ht.segmentType==="InitializationSegment")w=!0,L=E.getMediaTimescaleFromMoov(qe);else{if(!w)return;(st=E.getSamplesInfo(qe).sampleList).length>0&&(B=st[0].cts-ht.start*L),gt.search(t.Z.STPP)>=0?function(qt,Gt,an){var un,Be;for(R=R!==null?R:et(an),un=0;un<Gt.length;un++){var ft=Gt[un],$e=ft.cts,vt=Ie(),wt=vt+$e/L,Ht=wt+ft.duration/L;r.buffered.add(wt,Ht);var Yt=new DataView(qt,ft.offset,ft.subSizes[0]),Kt=yi.Utils.dataViewToString(Yt,t.Z.UTF8),Jt=[],ut=ft.offset+ft.subSizes[0];for(Be=1;Be<ft.subSizes.length;Be++){var Dt=new Uint8Array(qt,ut,ft.subSizes[Be]),xt=String.fromCharCode.apply(null,Dt);Jt.push(xt),ut+=ft.subSizes[Be]}try{var kt=ie.getValue().ttmlTimeIsRelative?$e/L:0,jt=R.parse(Kt,kt,$e/L,($e+ft.duration)/L,Jt);g.addCaptions(N,vt,jt)}catch(Ge){h.removeExecutedRequestsBeforeTime(),this.remove(),l.error("TTML parser error: "+Ge.message)}}}(qe,st,gt):function(qt,Gt){var an,un,Be,ft=[];for(an=0;an<Gt.length;an++){var $e=Gt[an];$e.cts-=B;var vt=Ie()+$e.cts/L,wt=vt+$e.duration/L;r.buffered.add(vt,wt);var Ht=qt.slice($e.offset,$e.offset+$e.size),Yt=yi.parseBuffer(Ht);for(un=0;un<Yt.boxes.length;un++){var Kt=Yt.boxes[un];if(l.debug("VTT box1: "+Kt.type),Kt.type!=="vtte"&&Kt.type==="vttc"){l.debug("VTT vttc boxes.length = "+Kt.boxes.length);var Jt={styles:{}};for(Be=0;Be<Kt.boxes.length;Be++){var ut=Kt.boxes[Be];if(l.debug("VTT box2: "+ut.type),ut.type==="payl")Jt.start=$e.cts/L,Jt.end=($e.cts+$e.duration)/L,Jt.data=ut.cue_text;else if(ut.type==="sttg"&&ut.settings&&ut.settings!=="")try{var Dt=ut.settings.split(" ");Jt.styles=M.getCaptionStyles(Dt)}catch{}}Jt&&Jt.data&&(ft.push(Jt),l.debug("VTT  ".concat(Jt.start," - ").concat(Jt.end," :  ").concat(Jt.data)))}}}ft.length>0&&g.addCaptions(N,0,ft)}(qe,st)}}(We,Xe,lt):Ee===t.Z.VIDEO?function(qe,ht){var gt,st;if(ht.segmentType===Le.w.INIT_SEGMENT_TYPE)Z===0&&(Z=E.getMediaTimescaleFromMoov(qe));else if(ht.segmentType===Le.w.MEDIA_SEGMENT_TYPE){if(Z===0)return void l.warn("CEA-608: No timescale for embeddedTextTrack yet");var qt=(st=E.getSamplesInfo(qe)).lastSequenceNumber,Gt=Math.trunc(ht.start),an=Math.trunc(ht.end);if(ue[0]||ue[1]||function(){for(var vt,wt=0;wt<U.length;wt++){if((vt=g.getTrackIdxForId(U[wt].id))===-1)return void l.warn("CEA-608: data before track is ready.");var Ht=Ce(vt);ue[wt]=new(T()).Cea608Parser(wt+1,{newCue:Ht},null)}}(),Z){if(function(vt,wt,Ht,Yt,Kt){return vt!==null&&wt!==null&&Yt!==null&&Kt!==null&&(wt===vt?Yt!==Kt:wt!==vt+Ht)}(ce,qt,st.numSequences,te,Gt))for(gt=0;gt<ue.length;gt++)ue[gt]&&ue[gt].reset();for(var un=function(vt,wt){if(wt.length===0)return null;for(var Ht={splits:[],fields:[[],[]]},Yt=new DataView(vt),Kt=0;Kt<wt.length;Kt++)for(var Jt=wt[Kt],ut=T().findCea608Nalus(Yt,Jt.offset,Jt.size),Dt=null,xt=0,kt=0;kt<ut.length;kt++)for(var jt=T().extractCea608DataFromRange(Yt,ut[kt]),Ge=0;Ge<2;Ge++)if(jt[Ge].length>0){Jt.cts!==Dt?xt=0:xt+=1;var Re=Ie();Ht.fields[Ge].push([Jt.cts+Re*Z,jt[Ge],xt]),Dt=Jt.cts}return Ht.fields.forEach(function(rt){rt.sort(function(fe,pe){return fe[0]===pe[0]?fe[2]-pe[2]:fe[0]-pe[0]})}),Ht}(qe,st.sampleList),Be=0;Be<ue.length;Be++){var ft=un.fields[Be],$e=ue[Be];if($e)for(gt=0;gt<ft.length;gt++)$e.addData(ft[gt][0]/Z,ft[gt][1])}ce=qt,te=an}}}(We,Xe):function(qe,ht,gt){var st,qt,Gt=new DataView(qe,0,qe.byteLength);qt=yi.Utils.dataViewToString(Gt,t.Z.UTF8);try{st=et(gt).parse(qt,0),g.addCaptions(g.getCurrentTrackIdx(),0,st),r.buffered&&r.buffered.add(ht.start,ht.end)}catch(an){G.error(new re.Z(X.TIMED_TEXT_ERROR_ID_PARSE_CODE,X.TIMED_TEXT_ERROR_MESSAGE_PARSE+an.message,qt))}}(We,Xe,lt):l.error("No text type defined")}function Ce(We){return function(Xe,Mt,Ee){var Fe;(Fe=le.getTTMLRenderingDiv()?de.createHTMLCaptionsFromScreen(le.getElement(),Xe,Mt,Ee):[{start:Xe,end:Mt,data:Ee.getDisplayText(),styles:{}}])&&g.addCaptions(We,0,Fe)}}function Ie(){return isNaN(r.timestampOffset)?0:r.timestampOffset}function et(We){var Xe;return We.search(t.Z.VTT)>=0?Xe=ne.get().streaming.text.webvtt.customRenderingEnabled&&C?C:M:(We.search(t.Z.TTML)>=0||We.search(t.Z.STPP)>=0)&&(Xe=D),Xe}function nt(We){U.forEach(function(Xe){var Mt=g.getTrackIdxForId(Xe.id);Mt>=0&&g.deleteCuesFromTrackIdx(Mt,We.from,We.to)})}return r={initialize:function(){Q||(U=[],N=null,Z=0,ue=[],ce=null,te=null,Q=!0,de=eu(z).getInstance(),oe.on(u.Z.VIDEO_CHUNK_RECEIVED,he,r),oe.on(u.Z.BUFFER_CLEARED,nt,r))},addMediaInfos:function(We,Xe,Mt){if(A=A.concat(Xe),We===t.Z.TEXT&&Xe[0].isFragmented&&!Xe[0].isEmbedded){h=Mt,r.buffered=(0,$s.Z)(z).create(),Y=j.getTracksFor(t.Z.TEXT,b.id).filter(function(qe){return qe.isFragmented});for(var Ee=j.getCurrentTrackFor(t.Z.TEXT,b.id),Fe=0;Fe<Y.length;Fe++)if(Y[Fe]===Ee){Ne(Fe);break}}for(var lt=0;lt<Xe.length;lt++)J(Xe[lt])},resetMediaInfos:function(){A=[]},getStreamId:function(){return b.id},append:Te,abort:function(){},addEmbeddedTrack:function(We){if(Q&&We)if(We.id===t.Z.CC1||We.id===t.Z.CC3){for(var Xe=0;Xe<U.length;Xe++)if(U[Xe].id===We.id)return;U.push(We)}else l.warn("Embedded track "+We.id+" not supported!")},resetEmbedded:function(){oe.off(u.Z.VIDEO_CHUNK_RECEIVED,he,r),oe.off(u.Z.BUFFER_CLEARED,nt,r),g&&g.deleteAllTextTracks(),Q=!1,U=[],ue=[null,null],ce=null,te=null},getConfig:function(){return{fragmentModel:h,fragmentedTracks:Y,videoModel:le}},setCurrentFragmentedTrackIdx:Ne,remove:function(We,Xe){We===void 0&&We===Xe&&(We=r.buffered.start(0),Xe=r.buffered.end(r.buffered.length-1)),r.buffered.remove(We,Xe),g.deleteCuesFromTrackIdx(N,We,Xe)},reset:function(){x(),A=[],E=null}},l=(0,m.Z)(z).getInstance().getLogger(r),E=(0,Yr.Z)(z).getInstance(),x(),r}lo.__dashjs_factory_name="TextSourceBuffer";var tu=_.Z.getClassFactory(lo),na=P(4403);function co(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}var nu=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function fo(i){var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie,j,le=this.context,g=(0,p.Z)(le).getInstance(),M=i.videoModel,C=i.streamInfo,D=i.settings;function b(Be,ft,$e,vt,wt,Ht){var Yt=0,Kt=0;Be/ft>$e/vt?Yt=(Kt=ft)/vt*$e:Kt=(Yt=Be)/$e*vt;var Jt,ut,Dt=0,xt=0;return Yt/Kt>wt?(xt=Kt,Dt=Kt*wt):(Dt=Yt,xt=Yt/wt),Jt=(Be-Dt)/2,ut=(ft-xt)/2,Ht?{x:Jt+.1*Dt,y:ut+.1*xt,w:.8*Dt,h:.8*xt}:{x:Jt,y:ut,w:Dt,h:xt}}function ne(Be,ft){var $e=M.getClientWidth(),vt=M.getClientHeight(),wt=M.getVideoWidth(),Ht=M.getVideoHeight(),Yt=M.getVideoRelativeOffsetTop(),Kt=M.getVideoRelativeOffsetLeft();if(wt!==0&&Ht!==0){var Jt=wt/Ht,ut=!1;Be.isFromCEA608&&(Jt=1.1666666666666667,ut=!0);var Dt=b.call(this,$e,vt,wt,Ht,Jt,ut),xt=Dt.w,kt=Dt.h,jt=Dt.x,Ge=Dt.y;if(xt!=Y||kt!=B||jt!=w||Ge!=L||ft){if(w=jt+Kt,L=Ge+Yt,Y=xt,B=kt,N){var Re=N.style;Re&&(Re.left=w+"px",Re.top=L+"px",Re.width=Y+"px",Re.height=B+"px",Re.zIndex=ce&&document[ce]||te?de:null,g.trigger(n.Z.CAPTION_CONTAINER_RESIZE))}var rt=Be.activeCues;if(rt)for(var fe=rt.length,pe=0;pe<fe;++pe){var Ve=rt[pe];Ve.scaleCue(Ve)}}}}function z(Be){var ft,$e,vt,wt,Ht,Yt=Y,Kt=B;if(Be.cellResolution){var Jt=[Yt/Be.cellResolution[0],Kt/Be.cellResolution[1]];if(Be.linePadding){for(ft in Be.linePadding)if(Be.linePadding.hasOwnProperty(ft)){$e=(Be.linePadding[ft]*Jt[0]).toString();for(var ut=document.getElementsByClassName("spanPadding"),Dt=0;Dt<ut.length;Dt++)ut[Dt].style.cssText=ut[Dt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e),ut[Dt].style.cssText=ut[Dt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e)}}if(Be.fontSize){for(ft in Be.fontSize)if(Be.fontSize.hasOwnProperty(ft)){Be.fontSize[ft][0]==="%"?vt=Be.fontSize[ft][1]/100:Be.fontSize[ft][0]==="c"&&(vt=Be.fontSize[ft][1]),$e=(vt*Jt[1]).toString(),Ht=ft!=="defaultFontSize"?document.getElementsByClassName(ft):document.getElementsByClassName("paragraph");for(var xt=0;xt<Ht.length;xt++)Ht[xt].style.cssText=Ht[xt].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e)}if(Be.lineHeight){for(ft in Be.lineHeight)if(Be.lineHeight.hasOwnProperty(ft)){Be.lineHeight[ft][0]==="%"?wt=Be.lineHeight[ft][1]/100:Be.fontSize[ft][0]==="c"&&(wt=Be.lineHeight[ft][1]),$e=(wt*Jt[1]).toString(),Ht=document.getElementsByClassName(ft);for(var kt=0;kt<Ht.length;kt++)Ht[kt].style.cssText=Ht[kt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e)}}}}if(Be.isd){var jt=document.getElementById(Be.cueID);jt&&N.removeChild(jt),Q(Be)}}function oe(Be,ft){var $e=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,vt=/^#(.*)$/;if($e.test(ft)){var wt=$e.exec(ft),Ht=parseInt(wt[4],10)-1;return"data:image/png;base64,"+btoa(Be.images[Ht])}if(vt.test(ft)){var Yt=vt.exec(ft)[1];return"data:image/png;base64,"+Be.embeddedImages[Yt]}return ft}function Q(Be){if(N){un.call(this);var ft=document.createElement("div");N.appendChild(ft),ue=(0,na.renderHTML)(Be.isd,ft,function($e){return oe(Be,$e)},N.clientHeight,N.clientWidth,D.get().streaming.text.imsc.displayForcedOnlyMode,function($e){l.info("renderCaption :",$e)},ue,D.get().streaming.text.imsc.enableRollUp),ft.id=Be.cueID,g.trigger(n.Z.CAPTION_RENDERED,{captionDiv:ft,currentTrackIdx:h})}}function x(Be,ft){return!!ft&&ft.endTime>=Be.startTime}function J(Be,ft){return!!D.get().streaming.text.extendSegmentedCues&&!!function($e,vt,wt){for(var Ht=0;Ht<wt.length;Ht++){var Yt=wt[Ht];if(JSON.stringify($e[Yt])!==JSON.stringify(vt[Yt]))return!1}return!0}(ft,Be,nu)&&(ft.endTime=Math.max(ft.endTime,Be.endTime),!0)}function he(Be,ft){ft&&ft.forEach(function($e){$e.kind&&$e.kind==="image"&&($e.src=oe(Be,$e.src)),he(Be,$e.contents)})}function Ne(Be,ft,$e){var vt=Fe(Be),wt=D.get().streaming.text.dispatchForManualRendering;if(vt&&Array.isArray($e)&&$e.length!==0)for(var Ht=0;Ht<$e.length;Ht++){var Yt=null,Kt=$e[Ht];vt.cellResolution=Kt.cellResolution,vt.isFromCEA608=Kt.isFromCEA608,isNaN(Kt.start)||isNaN(Kt.end)||(wt?Yt=Te(Kt,ft):We(Kt)&&N?Yt=et(Kt,ft,vt):Kt.data&&(Yt=nt(Kt,ft,vt)));try{if(Yt){if(!ht(vt,Yt))if(D.get().streaming.text.webvtt.customRenderingEnabled)vt.manualCueList||(vt.manualCueList=[]),vt.manualCueList.push(Yt);else{var Jt=void 0;vt.cues&&vt.cues.length!==0&&(Jt=vt.cues[vt.cues.length-1]),x(Yt,Jt)?J(Yt,Jt)||(Jt.isd&&(Jt.onexit=function(){}),vt.mode!==t.Z.TEXT_DISABLED&&vt.addCue(Yt)):vt.mode!==t.Z.TEXT_DISABLED&&vt.addCue(Yt)}var ut=D.get().streaming.buffer.bufferToKeep;st(vt,0,M.getTime()-ut)}else l.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Dt){throw qt(vt),vt.addCue(Yt),Dt}}}function Te(Be,ft){var $e=Xe(Be,ft);return $e.onenter=function(){We(Be)&&j&&j.cueID!==$e.cueID&&Ie(j),delete $e.type,j=$e,Ce($e)},$e.onexit=function(){Ie($e),j=null},$e}function Ce(Be){g.trigger(n.Z.CUE_ENTER,Be)}function Ie(Be){g.trigger(n.Z.CUE_EXIT,{cueID:Be.cueID})}function et(Be,ft,$e){var vt=this,wt=Xe(Be,ft);return N.style.left=w+"px",N.style.top=L+"px",N.style.width=Y+"px",N.style.height=B+"px",wt.onenter=function(){var Ht=this;$e.mode===t.Z.TEXT_SHOWING&&(this.isd?(ie?requestAnimationFrame(function(){return Q(Ht)}):Q(this),l.debug("Cue enter id:"+this.cueID)):(N.appendChild(this.cueHTMLElement),z.call(vt,this),g.trigger(n.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:h})))},wt.onexit=function(){if(N)for(var Ht=N.childNodes,Yt=0;Yt<Ht.length;++Yt)Ht[Yt].id===this.cueID&&(l.debug("Cue exit id:"+Ht[Yt].id),N.removeChild(Ht[Yt]),--Yt)},wt}function nt(Be,ft,$e){var vt=Xe(Be,ft);if(vt.isActive=!1,Be.styles)try{Be.styles.align!==void 0&&"align"in vt&&(vt.align=Be.styles.align),Be.styles.line!==void 0&&"line"in vt&&(vt.line=Be.styles.line),Be.styles.snapToLines!==void 0&&"snapToLines"in vt&&(vt.snapToLines=Be.styles.snapToLines),Be.styles.position!==void 0&&"position"in vt&&(vt.position=Be.styles.position),Be.styles.size!==void 0&&"size"in vt&&(vt.size=Be.styles.size)}catch(wt){l.error(wt)}return vt.onenter=function(){$e.mode===t.Z.TEXT_SHOWING&&g.trigger(n.Z.CAPTION_RENDERED,{currentTrackIdx:h})},vt}function We(Be){return Be.type==="html"}function Xe(Be,ft){return We(Be)?function($e,vt){var wt=new E($e.start+vt,$e.end+vt,"");return wt.cueHTMLElement=$e.cueHTMLElement,wt.isd=$e.isd,wt.images=$e.images,wt.embeddedImages=$e.embeddedImages,wt.cueID=$e.cueID,wt.scaleCue=z.bind(self),wt.cellResolution=$e.cellResolution,wt.lineHeight=$e.lineHeight,wt.linePadding=$e.linePadding,wt.fontSize=$e.fontSize,wt.isd&&he(wt,wt.isd.contents),wt}(Be,ft):function($e,vt){var wt=new E($e.start-vt,$e.end-vt,$e.data);return wt.cueID="".concat(wt.startTime,"_").concat(wt.endTime),wt}(Be,ft)}function Mt(Be){if(U)for(var ft=U.childNodes,$e=0;$e<ft.length;++$e)ft[$e].id===Be.cueID&&(U.removeChild(ft[$e]),--$e)}function Ee(){var Be,ft=[],$e=function(wt,Ht){var Yt;if(typeof Symbol>"u"||wt[Symbol.iterator]==null){if(Array.isArray(wt)||(Yt=function(kt,jt){if(kt){if(typeof kt=="string")return co(kt,jt);var Ge=Object.prototype.toString.call(kt).slice(8,-1);return Ge==="Object"&&kt.constructor&&(Ge=kt.constructor.name),Ge==="Map"||Ge==="Set"?Array.from(kt):Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge)?co(kt,jt):void 0}}(wt))||Ht){Yt&&(wt=Yt);var Kt=0,Jt=function(){};return{s:Jt,n:function(){return Kt>=wt.length?{done:!0}:{done:!1,value:wt[Kt++]}},e:function(kt){throw kt},f:Jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ut,Dt=!0,xt=!1;return{s:function(){Yt=wt[Symbol.iterator]()},n:function(){var kt=Yt.next();return Dt=kt.done,kt},e:function(kt){xt=!0,ut=kt},f:function(){try{Dt||Yt.return==null||Yt.return()}finally{if(xt)throw ut}}}}(M.getTextTracks());try{for($e.s();!(Be=$e.n()).done;){var vt=Be.value;vt.manualMode===t.Z.TEXT_SHOWING&&ft.push(vt)}}catch(wt){$e.e(wt)}finally{$e.f()}return ft}function Fe(Be){return Be>=0&&R[Be]?M.getTextTrack(R[Be].kind,R[Be].id,R[Be].lang,R[Be].isTTML,R[Be].isEmbedded):null}function lt(Be){var ft=this;if(Be!==h){var $e=Fe(h=Be);qe.call(this,$e),Z&&(clearInterval(Z),Z=null),$e&&$e.renderingType==="html"&&(ne.call(this,$e,!0),window.ResizeObserver?(G=new window.ResizeObserver(function(){ne.call(ft,$e,!0)})).observe(M.getElement()):Z=setInterval(ne.bind(this,$e),500))}}function qe(Be){un.call(this),Be&&Be.renderingType==="html"?Gt.call(this):an.call(this)}function ht(Be,ft){if(!Be.cues)return!1;for(var $e=0;$e<Be.cues.length;$e++)if(Be.cues[$e].startTime===ft.startTime&&Be.cues[$e].endTime===ft.endTime)return!0;return!1}function gt(Be,ft,$e){var vt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!Be&&(isNaN(ft)||(vt?Be.startTime:Be.endTime)>=ft)&&(isNaN($e)||(vt?Be.endTime:Be.startTime)<=$e)}function st(Be,ft,$e){var vt,wt;if(!($e<ft)&&Be&&(Be.cues||Be.manualCueList)){var Ht=Be.cues&&Be.cues.length>0?"native":"custom",Yt=Ht==="native"?Be.cues:Be.manualCueList;if(!Yt||Yt.length===0)return;for(var Kt=Yt.length-1;Kt>=0;Kt--)!gt(Yt[Kt],ft,$e,!0)||(vt=Yt[Kt],wt=M.getTime(),vt.startTime>=wt&&vt.endTime<=wt)||(Ht==="native"?Be.removeCue(Yt[Kt]):(Mt(Yt[Kt]),delete Be.manualCueList[Kt]))}}function qt(Be,ft,$e){var vt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Be&&(Be.cues||Be.manualCueList)){var wt=Be.cues&&Be.cues.length>0?"native":"custom",Ht=wt==="native"?Be.cues:Be.manualCueList;if(!Ht||Ht.length===0)return;for(var Yt=Ht.length-1,Kt=Yt;Kt>=0;Kt--)gt(Ht[Kt],ft,$e,vt)&&(wt==="native"?(Ht[Kt].onexit&&Ht[Kt].onexit(),Be.removeCue(Ht[Kt])):(Mt(Ht[Kt]),delete Be.manualCueList[Kt]))}}function Gt(){var Be=document.getElementById("native-cue-style");if(!Be){(Be=document.createElement("style")).id="native-cue-style",document.head.appendChild(Be);var ft=Be.sheet,$e=M.getElement();try{$e&&($e.id?ft.insertRule("#"+$e.id+"::cue {background: transparent}",0):$e.classList.length!==0?ft.insertRule("."+$e.className+"::cue {background: transparent}",0):ft.insertRule("video::cue {background: transparent}",0))}catch(vt){l.info(""+vt.message)}}}function an(){var Be=document.getElementById("native-cue-style");Be&&document.head.removeChild(Be)}function un(){if(N)for(;N.firstChild;)N.removeChild(N.firstChild)}return r={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(E=window.VTTCue||window.TextTrackCue,R=[],A=[],h=-1,w=0,L=0,Y=0,B=0,N=null,U=null,Z=null,te=!1,de=2147483647,ue=null,ie="requestAnimationFrame"in window,document.fullscreenElement!==void 0?ce="fullscreenElement":document.webkitIsFullScreen!==void 0?ce="webkitIsFullScreen":document.msFullscreenElement?ce="msFullscreenElement":document.mozFullScreen&&(ce="mozFullScreen"))},getStreamId:function(){return C.id},addTextTrack:function(Be){R.push(Be)},addCaptions:Ne,createTracks:function(){var Be=D.get().streaming.text.dispatchForManualRendering;R.sort(function(jt,Ge){return jt.index-Ge.index}),N=M.getTTMLRenderingDiv(),U=M.getVttRenderingDiv();for(var ft,$e,vt,wt,Ht,Yt,Kt=-1,Jt=0;Jt<R.length;Jt++){var ut=($e=(ft=R[Jt]).kind,vt=ft.id!==void 0?ft.id:ft.lang,wt=ft.lang,Ht=ft.isTTML,Yt=ft.isEmbedded,M.addTextTrack($e,vt,wt,Ht,Yt));A.push(ut),R[Jt].defaultTrack&&(ut.default=!0,Kt=Jt);var Dt=Fe(Jt);Dt&&(Dt.mode=t.Z.TEXT_SHOWING,N&&(R[Jt].isTTML||R[Jt].isEmbedded)?Dt.renderingType="html":Dt.renderingType="default"),Ne(Jt,0,R[Jt].captionData),g.trigger(n.Z.TEXT_TRACK_ADDED)}if(lt.call(this,Kt),Kt>=0){g.on(n.Z.PLAYBACK_METADATA_LOADED,function jt(){var Ge=Fe(Kt);Ge&&Ge.renderingType==="html"&&ne.call(this,Ge,!0),g.off(n.Z.PLAYBACK_METADATA_LOADED,jt,this)},this);for(var xt=0;xt<R.length;xt++){var kt=Fe(xt);kt&&(kt.mode=xt!==Kt||Be?t.Z.TEXT_HIDDEN:t.Z.TEXT_SHOWING,kt.manualMode=xt===Kt?t.Z.TEXT_SHOWING:t.Z.TEXT_HIDDEN)}}g.trigger(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:h,tracks:R,streamId:C.id})},getCurrentTrackIdx:function(){return h},setCurrentTrackIdx:lt,getTrackIdxForId:function(Be){for(var ft=-1,$e=0;$e<R.length;$e++)if(R[$e].id===Be){ft=$e;break}return ft},getCurrentTrackInfo:function(){return R[h]},setModeForTrackIdx:function(Be,ft){var $e=Fe(Be);$e&&$e.mode!==ft&&($e.mode=ft),$e&&$e.manualMode!==ft&&($e.manualMode=ft)},deleteCuesFromTrackIdx:function(Be,ft,$e){var vt=Fe(Be);vt&&qt(vt,ft,$e)},deleteAllTextTracks:function(){for(var Be=A?A.length:0,ft=0;ft<Be;ft++){var $e=Fe(ft);$e&&qt.call(this,$e,C.start,C.start+C.duration,!1)}A=[],R=[],Z&&(clearInterval(Z),Z=null),G&&M&&(G.unobserve(M.getElement()),G=null),h=-1,un.call(this)},manualCueProcessing:function(Be){var ft=Ee();if(ft&&ft.length>0){var $e=ft[0].manualCueList;$e&&$e.length>0&&$e.forEach(function(vt){vt.startTime<=Be&&vt.endTime>=Be&&!vt.isActive?(vt.isActive=!0,D.get().streaming.text.dispatchForManualRendering?Ce(vt):WebVTT.processCues(window,[vt],U,vt.cueID)):vt.isActive&&(vt.startTime>Be||vt.endTime<Be)&&(vt.isActive=!1,D.get().streaming.text.dispatchForManualRendering?Ie(vt):Mt(vt))})}},disableManualTracks:function(){var Be=Ee();if(Be&&Be.length>0){var ft=Be[0].manualCueList;ft&&ft.length>0&&ft.forEach(function($e){if($e.isActive){if($e.isActive=!1,D.get().streaming.text.dispatchForManualRendering)Ie($e);else if(U)for(var vt=U.childNodes,wt=0;wt<vt.length;++wt)vt[wt].id===$e.cueID&&(U.removeChild(vt[wt]),--wt)}})}}},l=(0,m.Z)(le).getInstance().getLogger(r),r}fo.__dashjs_factory_name="TextTracks";var ru=_.Z.getClassFactory(fo);function go(){var i,r,l,E,R,A,h=this.context;function w(N){var U=N.split(":"),Z=U.length-1;return N=60*parseInt(U[Z-1],10)+parseFloat(U[Z]),Z===2&&(N+=3600*parseInt(U[0],10)),N}function L(N){var U=N.split(E),Z=U[1].split(A);return Z.shift(),U[1]=Z[0],Z.shift(),{cuePoints:U,styles:Y(Z)}}function Y(N){var U={};return N.forEach(function(Z){if(Z.split(/:/).length>1){var ce=Z.split(/:/)[1],te=!1;ce&&ce.search(/%/)!=-1&&(te=!0,ce=parseInt(ce.replace(/%/,""),10)),(Z.match(/align/)||Z.match(/A/))&&(U.align=ce),(Z.match(/line/)||Z.match(/L/))&&(U.line=ce==="auto"?ce:parseInt(ce,10),te&&(U.snapToLines=!1)),(Z.match(/position/)||Z.match(/P/))&&(U.position=ce),(Z.match(/size/)||Z.match(/S/))&&(U.size=ce)}}),U}function B(N,U){for(var Z,ce=U,te="",ue="";N[ce]!==""&&ce<N.length;)ce++;if((Z=ce-U)>1)for(var de=0;de<Z;de++){if((ue=N[U+de]).match(E)){te="";break}te+=ue,de!==Z-1&&(te+=`
`)}else(ue=N[U]).match(E)||(te=ue);return te}return i={parse:function(N){var U,Z,ce=[];if(!N)return ce;U=(N=N.split(l)).length,Z=-1;for(var te=0;te<U;te++){var ue=N[te];if(ue.length>0&&ue!=="WEBVTT"&&ue.match(E)){var de=L(ue),G=de.cuePoints,ie=de.styles,j=B(N,te+1),le=w(G[0].replace(R,"")),g=w(G[1].replace(R,""));!isNaN(le)&&!isNaN(g)&&le>=Z&&g>le?j!==""?(Z=le,ce.push({start:le,end:g,data:j,styles:ie})):r.error("Skipping cue due to empty/malformed cue text"):r.error("Skipping cue due to incorrect cue timing")}}return ce},getCaptionStyles:Y},r=(0,m.Z)(h).getInstance().getLogger(i),l=/(?:\r\n|\r|\n)/gm,E=/-->/,R=/(^[\s]+|[\s]+$)/g,A=/\s\b/g,i}go.__dashjs_factory_name="VTTParser";var iu=_.Z.getSingletonFactory(go);function ho(){var i,r;return i={parse:function(l){var E=[];return r.oncue=function(R){R.start=R.startTime,R.end=R.endTime,R.data=R.text,R.styles={align:R.align,line:R.line,position:R.position,size:R.size},E.push(R)},r.parse(l),E}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(r=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),i}ho.__dashjs_factory_name="VttCustomRenderingParser";var au=_.Z.getSingletonFactory(ho);function mo(){var i,r,l=this.context,E=(0,p.Z)(l).getInstance(),R=0;return i={parse:function(A,h,w,L,Y){var B,N,U,Z="",ce=[],te={},ue={},de="",G="",ie={onOpenTag:function(C,D,b){if(b[" imagetype"]&&!b[" imageType"]&&(E.trigger(n.Z.CONFORMANCE_VIOLATION,{level:xr.LEVELS.ERROR,event:xr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),b[" imageType"]=b[" imagetype"]),D==="image"&&(C==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||C==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!b[" imageType"]||b[" imageType"].value!=="PNG")return void r.warn("smpte-tt imageType != PNG. Discarded");de=b["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){de&&(ue[de]=G.trim()),G="",de=""},onText:function(C){de&&(G+=C)}};if(!A)throw Z="no ttml data to parse",new Error(Z);te.data=A,E.trigger(u.Z.TTML_TO_PARSE,te);var j=(0,na.fromXML)(te.data,function(C){Z=C},ie);E.trigger(u.Z.TTML_PARSED,{ttmlString:te.data,ttmlDoc:j});var le,g=j.getMediaTimeEvents();for(U=0;U<g.length;U++){var M=(0,na.generateISD)(j,g[U],function(C){Z=C});M.contents.some(function(C){return C.contents.length})&&(B=g[U]+h)<(N=g[U+1]+h)&&ce.push({start:B,end:N,type:"html",cueID:(le="cue_TTML_"+R,R++,le),isd:M,images:Y,embeddedImages:ue})}if(Z!=="")throw r.error(Z),new Error(Z);return ce}},r=(0,m.Z)(l).getInstance().getLogger(i),i}mo.__dashjs_factory_name="TTMLParser";var ou=_.Z.getSingletonFactory(mo);function po(i,r){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(i);r&&(E=E.filter(function(R){return Object.getOwnPropertyDescriptor(i,R).enumerable})),l.push.apply(l,E)}return l}function yo(i){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?po(Object(l),!0).forEach(function(E){su(i,E,l[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):po(Object(l)).forEach(function(E){Object.defineProperty(i,E,Object.getOwnPropertyDescriptor(l,E))})}return i}function su(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Eo(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function vo(i){var r,l,E,R=this.context,A=(0,p.Z)(R).getInstance(),h=(0,ze.Z)(R).getInstance(),w=i.adapter,L=i.baseURLController;function Y(U,Z){var ce,te,ue=!1;if(L.resolve()){var de=w.getVoRepresentations(U);de&&de.length>0&&(ce=L.resolve(de[0].path).url)}var G=U.essentialPropertiesAsArray.filter(function(j){return j.schemeIdUri&&j.schemeIdUri===t.Z.FONT_DOWNLOAD_DVB_SCHEME}),ie=U.supplementalPropertiesAsArray.filter(function(j){return j.schemeIdUri&&j.schemeIdUri===t.Z.FONT_DOWNLOAD_DVB_SCHEME});G.length>0?(ue=!0,te=G):te=ie,te.forEach(function(j){if(function(C){return!(!(C.value&&C.value==="1"&&C.dvbUrl&&C.dvbUrl.length>0&&C.dvbFontFamily&&C.dvbFontFamily.length>0&&C.dvbMimeType)||C.dvbMimeType!==t.Z.OFF_MIMETYPE&&C.dvbMimeType!==t.Z.WOFF_MIMETYPE)}(j)){var le=(g=j.dvbUrl,M=ce,h.isPathAbsolute(g)?g:h.isRelative(g)?M?h.resolve(g,M):h.resolve(g):g);E.push({fontFamily:j.dvbFontFamily,url:le,mimeType:j.dvbMimeType,trackId:U.id,streamId:Z,isEssential:ue,status:"unloaded",fontFace:new FontFace(j.dvbFontFamily,"url(".concat(le,")"),{display:"swap"})})}var g,M})}function B(U,Z){var ce=E[U];E[U]=yo(yo({},ce),{},{status:Z})}function N(){E=[]}return r={addFontsFromTracks:function(U,Z){if(U&&Array.isArray(U)&&Z)for(var ce=0;ce<U.length;ce++)Y(U[ce],Z)},downloadFonts:function(){for(var U=function(ce){var te=E[ce];document.fonts.add(te.fontFace),A.trigger(n.Z.DVB_FONT_DOWNLOAD_ADDED,te),te.fontFace.load().then(function(){B(ce,"loaded"),A.trigger(n.Z.DVB_FONT_DOWNLOAD_COMPLETE,te)},function(ue){B(ce,"error"),l.debug("Font download error: ",ue),A.trigger(n.Z.DVB_FONT_DOWNLOAD_FAILED,te)})},Z=0;Z<E.length;Z++)U(Z)},getFonts:function(){return E},getFontsForTrackId:function(U){return E.filter(function(Z){return Z.trackId&&Z.trackId===U})},reset:function(){(function(){var U,Z=function(ue,de){var G;if(typeof Symbol>"u"||ue[Symbol.iterator]==null){if(Array.isArray(ue)||(G=function(C,D){if(C){if(typeof C=="string")return Eo(C,D);var b=Object.prototype.toString.call(C).slice(8,-1);return b==="Object"&&C.constructor&&(b=C.constructor.name),b==="Map"||b==="Set"?Array.from(C):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Eo(C,D):void 0}}(ue))||de){G&&(ue=G);var ie=0,j=function(){};return{s:j,n:function(){return ie>=ue.length?{done:!0}:{done:!1,value:ue[ie++]}},e:function(C){throw C},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,g=!0,M=!1;return{s:function(){G=ue[Symbol.iterator]()},n:function(){var C=G.next();return g=C.done,C},e:function(C){M=!0,le=C},f:function(){try{g||G.return==null||G.return()}finally{if(M)throw le}}}}(E);try{for(Z.s();!(U=Z.n()).done;){var ce=U.value,te=document.fonts.delete(ce.fontFace);l.debug("Removal of fontFamily: ".concat(ce.fontFamily," was ").concat(te?"successful":"unsuccessful"))}}catch(ue){Z.e(ue)}finally{Z.f()}})(),N()}},l=(0,m.Z)(R).getInstance().getLogger(r),N(),r}vo.__dashjs_factory_name="DVBFonts";var uu=_.Z.getClassFactory(vo);function _o(i){var r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te=this.context,ue=i.adapter,de=i.errHandler,G=i.manifestModel,ie=i.mediaController,j=i.baseURLController,le=i.videoModel,g=i.settings;function M(J){if(ce.error("Could not download ".concat(J.isEssential?"an essential":"a"," font - fontFamily: ").concat(J.fontFamily,", url: ").concat(J.url)),J.isEssential){var he=R[J.streamId].getTrackIdxForId(J.trackId);R[J.streamId].setModeForTrackIdx(he,t.Z.TEXT_DISABLED)}}function C(J){if(ce.debug("Successfully downloaded ".concat(J.isEssential?"an essential":"a"," font - fontFamily: ").concat(J.fontFamily,", url: ").concat(J.url)),J.isEssential){var he=R[J.streamId].getTrackIdxForId(J.trackId);he===R[J.streamId].getCurrentTrackIdx()?R[J.streamId].setModeForTrackIdx(he,t.Z.TEXT_SHOWING):R[J.streamId].setModeForTrackIdx(he,t.Z.TEXT_HIDDEN)}}function D(J){var he=J.tracks,Ne=J.index,Te=J.streamId;if(g.get().streaming.text.defaultEnabled===!1&&!z()||U)oe(Te,-1);else{var Ce=ie.getCurrentTrackFor(t.Z.TEXT,Te);if(Ce){var Ie={lang:Ce.lang,role:Ce.roles[0],index:Ce.index,codec:Ce.codec,accessibility:Ce.accessibility[0]};he.some(function(et,nt){if(ie.matchSettings(Ie,et))return oe(Te,nt),Ne=nt,!0})}Y=!1}l[Te].lastEnabledIndex=Ne,L.trigger(n.Z.TEXT_TRACKS_ADDED,{enabled:z(),index:Ne,tracks:he,streamId:Te}),N=!0,Z.addFontsFromTracks(he,Te),Z.getFonts().forEach(function(et){if(et.isEssential){var nt=R[et.streamId].getTrackIdxForId(et.trackId);R[et.streamId].setModeForTrackIdx(nt,t.Z.TEXT_DISABLED)}}),Z.downloadFonts()}function b(J){try{var he=J.streamId;if(!R[he]||isNaN(J.time))return;R[he].manualCueProcessing(J.time)}catch{}}function ne(J){try{var he=J.streamId;if(!R[he])return;R[he].disableManualTracks()}catch{}}function z(){var J=!0;return Y&&!B&&(J=!1),J}function oe(J,he){(Y=he===-1)&&ie&&ie.saveTextSettingsDisabled();var Ne=Q(J);if(Ne!==he&&R[J]){R[J].disableManualTracks();var Te=R[J].getCurrentTrackInfo(),Ce=Te?le.getTextTrack(Te.kind,Te.id,Te.lang,Te.isTTML,Te.isEmbedded):null;Ce&&Ce.mode!==t.Z.TEXT_DISABLED&&R[J].setModeForTrackIdx(Ne,t.Z.TEXT_HIDDEN),R[J].setCurrentTrackIdx(he),Te=R[J].getCurrentTrackInfo();var Ie=g.get().streaming.text.dispatchForManualRendering;Te&&!Ie&&Te.mode!==t.Z.TEXT_DISABLED&&R[J].setModeForTrackIdx(he,t.Z.TEXT_SHOWING),Te&&Te.isFragmented&&!Te.isEmbedded?function(et,nt,We){if(E[et])for(var Xe=E[et].getConfig().fragmentedTracks,Mt=0;Mt<Xe.length;Mt++){var Ee=Xe[Mt];if(nt.lang===Ee.lang&&(Ee.id?nt.id===Ee.id:nt.index===Ee.index)){var Fe=ie.getCurrentTrackFor(t.Z.TEXT,et);(Ee.id?Fe.id!==Ee.id:Fe.index!==Ee.index)?(R[et].deleteCuesFromTrackIdx(We),E[et].setCurrentFragmentedTrackIdx(Mt)):We===-1&&L.trigger(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:et,mediaType:t.Z.TEXT})}}}(J,Te,Ne):Te&&!Te.isFragmented&&function(et,nt){L.trigger(u.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:nt},{streamId:et,mediaType:t.Z.TEXT})}(J,Te),ie.setTrack(Te)}}function Q(J){return R[J].getCurrentTrackIdx()}function x(){E={},R={},l={},Y=!0,N=!1,U=!1}return r={deactivateStream:function(J){if(J){var he=J.id;E[he]&&E[he].resetMediaInfos(),R[he]&&R[he].deleteAllTextTracks()}},initialize:function(){Z=uu(te).create({adapter:ue,baseURLController:j}),L.on(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,D,r),L.on(u.Z.DVB_FONT_DOWNLOAD_FAILED,M,r),L.on(u.Z.DVB_FONT_DOWNLOAD_COMPLETE,C,r),g.get().streaming.text.webvtt.customRenderingEnabled&&(L.on(u.Z.PLAYBACK_TIME_UPDATED,b,r),L.on(u.Z.PLAYBACK_SEEKING,ne,r))},initializeForStream:function(J){var he=J.id,Ne=ru(te).create({videoModel:le,settings:g,streamInfo:J});Ne.initialize(),R[he]=Ne;var Te=tu(te).create({errHandler:de,adapter:ue,dvbFonts:Z,manifestModel:G,mediaController:ie,videoModel:le,textTracks:Ne,vttParser:A,vttCustomRenderingParser:h,ttmlParser:w,streamInfo:J,settings:g});Te.initialize(),E[he]=Te,l[he]={},l[he].lastEnabledIndex=-1},createTracks:function(J){var he=J.id;R[he]&&R[he].createTracks()},getTextSourceBuffer:function(J){var he=J.id;if(E&&E[he])return E[he]},getAllTracksAreDisabled:function(){return Y},addEmbeddedTrack:function(J,he){var Ne=J.id;E[Ne]&&E[Ne].addEmbeddedTrack(he)},enableText:function(J,he){return(0,W.PS)(he,"boolean"),z()!==he&&(he&&oe(J,l[J].lastEnabledIndex),he||(l[J].lastEnabledIndex=Q(J),N?oe(J,-1):U=!0)),!0},isTextEnabled:z,setTextTrack:oe,getCurrentTrackIdx:Q,enableForcedTextStreaming:function(J){return(0,W.PS)(J,"boolean"),B=J,!0},addMediaInfosToBuffer:function(J,he,Ne){var Te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Ce=J.id;E[Ce]&&E[Ce].addMediaInfos(he,Ne,Te)},reset:function(){Z.reset(),x(),L.off(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,D,r),L.off(u.Z.DVB_FONT_DOWNLOAD_FAILED,M,r),L.off(u.Z.DVB_FONT_DOWNLOAD_COMPLETE,C,r),g.get().streaming.text.webvtt.customRenderingEnabled&&(L.off(u.Z.PLAYBACK_TIME_UPDATED,b,r),L.off(u.Z.PLAYBACK_SEEKING,ne,r)),Object.keys(E).forEach(function(J){E[J].resetEmbedded(),E[J].reset()})}},B=!1,N=!1,U=!1,A=iu(te).getInstance(),h=au(te).getInstance(),w=ou(te).getInstance(),L=(0,p.Z)(te).getInstance(),ce=(0,m.Z)(te).getInstance().getLogger(r),x(),r}_o.__dashjs_factory_name="TextController";var lu=_.Z.getClassFactory(_o);function ra(){var i,r,l,E,R,A,h,w,L,Y,B,N,U,Z,ce,te,ue,de,G,ie,j,le,g,M,C,D,b,ne,z,oe,Q,x,J,he,Ne,Te,Ce,Ie,et,nt="You must first call initialize() and set a source before calling this method",We="You must first call initialize() and set a valid source and view before calling this method",Xe="You must first call attachView() to set the video element before calling this method",Mt="You must first call attachSource() with a valid source before calling this method",Ee="MediaPlayer not initialized!",Fe=this.context,lt=(0,p.Z)(Fe).getInstance(),qe=(0,Ae.Z)(Fe).getInstance(),ht=(0,m.Z)(Fe).getInstance({settings:qe});function gt(){Jt(null),Yt(null),E=null,Z&&(Z.reset(),Z=null),ce&&(ce.reset(),ce=null),ie&&ie.reset(),qe.reset(),ue&&(ue.reset(),ue=null)}function st(){return!!l&&!!Te.getElement()}function qt(){return(0,As.e)()}function Gt(){if(!h)throw We;return ne.isPaused()}function an(){if(!h)throw We;return ne.getIsDynamic()}function un(fe){var pe=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ve=x.getCurrentDVRInfo(pe);if(!Ve)return 0;var St=ne.getOriginalLiveDelay(),Nt=Ve.range.start+fe;return Nt>Ve.range.end-St&&(Nt=Ve.range.end-St),Nt}function Be(fe){if(!h)throw We;var pe=Ht().currentTime;if(fe!==void 0)pe=C.getTimeRelativeToStreamId(pe,fe);else if(ne.getIsDynamic()){var Ve=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,St=x.getCurrentDVRInfo(Ve);pe=St===null||pe===0?0:Math.max(0,pe-St.range.start)}return pe}function ft(){if(!h)throw We;var fe=Ht().duration;if(ne.getIsDynamic()){var pe=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ve=x.getCurrentDVRInfo(pe);fe=Ve?Ve.range.end-Ve.range.start:0}return fe}function $e(fe){(0,W.PS)(fe,"boolean"),w=fe}function vt(){ie.restoreDefaultUTCTimingSources()}function wt(){return x}function Ht(){if(!Te.getElement())throw Xe;return Te.getElement()}function Yt(fe){if(!R)throw Ee;Te.setElement(fe),fe&&(jt(),function(){if(!ce){var pe=dashjs.MetricsReporting;if(typeof pe=="function"){var Ve=pe(Fe).create();ce=Ve.createMetricsReporting({debug:ht,eventBus:lt,mediaElement:Ht(),adapter:de,dashMetrics:x,mediaPlayerModel:G,events:u.Z,constants:t.Z,metricsConstants:y.Z})}}}(),function(){if(!te){var pe=dashjs.MssHandler;typeof pe=="function"&&(X.extend(pe.errors),te=pe(Fe).create({eventBus:lt,mediaPlayerModel:G,dashMetrics:x,manifestModel:J,playbackController:ne,streamController:C,protectionController:Z,baseURLController:le,errHandler:j,events:u.Z,constants:t.Z,debug:ht,initSegmentType:Le.w.INIT_SEGMENT_TYPE,BASE64:$i,ISOBoxer:yi,settings:qe}))}}(),C&&C.switchToVideoElement(L)),h&&Dt(),rt(L)}function Kt(fe){if(!A)throw nt;var pe=C.getActiveStreamInfo();return pe?U.getTracksFor(fe,pe.id):[]}function Jt(fe){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!R)throw Ee;typeof fe=="string"&&Ce.initialize(fe),pe==null&&(pe=NaN),isNaN(pe)||(pe=Math.max(0,pe)),L=pe,l=fe,(A||h)&&Dt(),st()&&rt(L)}function ut(){if(!A)throw nt;var fe=C.getActiveStreamInfo();return fe?C.getStreamById(fe.id):null}function Dt(){h=!1,A=!1,de.reset(),C.reset(),b.reset(),Q.reset(),ne.reset(),z.reset(),oe.reset(),Y.reset(),U.reset(),et.reset(),Z&&(qe.get().streaming.protection.keepProtectionMediaKeys?Z.stop():(Z.reset(),Z=null,jt())),D.reset(),he.reset(),Ne.reset()}function xt(){var fe=kt();C||(C=ua(Fe).getInstance()),D||(D=lu(Fe).create({errHandler:j,manifestModel:J,adapter:de,mediaController:U,baseURLController:le,videoModel:Te,settings:qe})),M.setConfig({capabilities:g,customParametersModel:ie,adapter:de,settings:qe,manifestModel:J,errHandler:j}),C.setConfig({capabilities:g,capabilitiesFilter:M,manifestLoader:fe,manifestModel:J,mediaPlayerModel:G,customParametersModel:ie,protectionController:Z,textController:D,adapter:de,dashMetrics:x,errHandler:j,timelineConverter:N,videoModel:Te,playbackController:ne,serviceDescriptionController:z,contentSteeringController:oe,abrController:Y,mediaController:U,settings:qe,baseURLController:le,uriFragmentModel:Ce,segmentBaseController:et}),b.setConfig({settings:qe,playbackController:ne,streamController:C,videoModel:Te,timelineConverter:N,adapter:de}),ne.setConfig({streamController:C,serviceDescriptionController:z,dashMetrics:x,adapter:de,videoModel:Te,timelineConverter:N,settings:qe}),Q.setConfig({streamController:C,playbackController:ne,mediaPlayerModel:G,videoModel:Te,settings:qe}),Y.setConfig({streamController:C,domStorage:Ie,mediaPlayerModel:G,customParametersModel:ie,cmsdModel:Ne,dashMetrics:x,adapter:de,videoModel:Te,settings:qe}),he.setConfig({abrController:Y,dashMetrics:x,playbackController:ne}),Ne.setConfig({}),Y.initialize(),C.initialize(w,E),D.initialize(),b.initialize(),Q.initialize(),he.initialize(),Ne.initialize(),oe.initialize(),et.initialize()}function kt(){return us(Fe).create({debug:ht,errHandler:j,dashMetrics:x,mediaPlayerModel:G,requestModifier:(0,Se.Z)(Fe).getInstance(),mssHandler:te,settings:qe})}function jt(){if(Z)return Z;var fe=dashjs.Protection;if(typeof fe=="function"){var pe=fe(Fe).create();return u.Z.extend(fe.events),n.Z.extend(fe.events,{publicOnly:!0}),X.extend(fe.errors),g||(g=(0,Pa.Z)(Fe).getInstance()),Z=pe.createProtectionSystem({debug:ht,errHandler:j,videoModel:Te,customParametersModel:ie,capabilities:g,eventBus:lt,events:u.Z,BASE64:$i,constants:t.Z,cmcdModel:he,settings:qe})}return null}function Ge(){if(!R)throw Ee;if(ue)return ue;var fe=dashjs.OfflineController;if(typeof fe=="function"){u.Z.extend(fe.events),n.Z.extend(fe.events,{publicOnly:!0}),X.extend(fe.errors);var pe=kt(),Ve=ia(Fe).create();return Ve.setConfig({manifestModel:J,adapter:de,manifestLoader:pe,errHandler:j,contentSteeringController:oe}),ue=fe(Fe).create({debug:ht,manifestUpdater:Ve,baseURLController:le,manifestLoader:pe,manifestModel:J,mediaPlayerModel:G,abrController:Y,playbackController:ne,adapter:de,errHandler:j,dashMetrics:x,timelineConverter:N,segmentBaseController:et,schemeLoaderFactory:B,eventBus:lt,events:u.Z,errors:X,constants:t.Z,settings:qe,dashConstants:e.Z,urlUtils:(0,ze.Z)(Fe).getInstance()})}return null}function Re(fe){var pe=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ve=x.getCurrentDVRInfo(pe);return Ve?fe+(Ve.manifestInfo.availableFrom.getTime()/1e3+Ve.range.start):0}function rt(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;ue&&ue.resetRecords(),!A&&l&&(A=!0,r.info("Streaming Initialized"),xt(),typeof l=="string"?C.load(l,fe):C.loadWithManifest(l,fe)),!h&&st()&&(h=!0,r.info("Playback Initialized"))}return i={initialize:function(fe,pe,Ve){var St=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;g||(g=(0,Pa.Z)(Fe).getInstance()).setConfig({settings:qe}),j||(j=ls(Fe).getInstance()),g.supportsMediaSource()?(R||(R=!0,N=Xs(Fe).getInstance(),Y||(Y=vs(Fe).getInstance()).setConfig({settings:qe}),B||(B=kn(Fe).getInstance()),ne||(ne=d(Fe).getInstance()),U||(U=Oo(Fe).getInstance()),C||(C=ua(Fe).getInstance()),b||(b=Ro(Fe).getInstance()),Q||(Q=wo(Fe).getInstance()),z||(z=Co(Fe).getInstance()),oe||(oe=or(Fe).getInstance()),M||(M=cs(Fe).getInstance()),de=Ls(Fe).getInstance(),J=gs(Fe).getInstance(),he=sn(Fe).getInstance(),Ne=Ct(Fe).getInstance(),x=Ws(Fe).getInstance({settings:qe}),Ie=bs(Fe).getInstance({settings:qe}),de.setConfig({constants:t.Z,cea608parser:T(),errHandler:j,BASE64:$i}),le||(le=ko(Fe).create()),le.setConfig({adapter:de,contentSteeringController:oe}),z.setConfig({adapter:de}),et||(et=ws(Fe).getInstance({dashMetrics:x,mediaPlayerModel:G,errHandler:j,baseURLController:le,events:u.Z,eventBus:lt,debug:ht,boxParser:(0,Yr.Z)(Fe).getInstance(),requestModifier:(0,Se.Z)(Fe).getInstance(),errors:X})),U.setConfig({domStorage:Ie,settings:qe,customParametersModel:ie}),G.setConfig({playbackController:ne,serviceDescriptionController:z}),oe.setConfig({adapter:de,errHandler:j,dashMetrics:x,mediaPlayerModel:G,manifestModel:J,serviceDescriptionController:z,eventBus:lt,requestModifier:(0,Se.Z)(Fe).getInstance()}),vt(),$e(Ve===void 0||Ve),Ge()),fe&&Yt(fe),pe&&Jt(pe,St),r.info("[dash.js "+qt()+"] MediaPlayer has been initialized")):j.error(new re.Z(X.CAPABILITY_MEDIASOURCE_ERROR_CODE,X.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(fe){fe&&(fe.capabilities&&(g=fe.capabilities),fe.capabilitiesFilter&&(M=fe.capabilitiesFilter),fe.streamController&&(C=fe.streamController),fe.textController&&(D=fe.textController),fe.gapController&&(b=fe.gapController),fe.playbackController&&(ne=fe.playbackController),fe.serviceDescriptionController&&(z=fe.serviceDescriptionController),fe.contentSteeringController&&(oe=fe.contentSteeringController),fe.catchupController&&(Q=fe.catchupController),fe.mediaPlayerModel&&(G=fe.mediaPlayerModel),fe.customParametersModel&&(ie=fe.customParametersModel),fe.abrController&&(Y=fe.abrController),fe.schemeLoaderFactory&&(B=fe.schemeLoaderFactory),fe.mediaController&&(U=fe.mediaController),fe.settings&&(qe=fe.settings))},on:function(fe,pe,Ve,St){lt.on(fe,pe,Ve,St)},off:function(fe,pe,Ve){lt.off(fe,pe,Ve)},extend:function(fe,pe,Ve){_.Z.extend(fe,pe,Ve,Fe)},attachView:Yt,attachSource:Jt,refreshManifest:function(fe){if(!R)throw Ee;if(!st())return fe(null,Mt);var pe=this;typeof fe=="function"&&lt.on(u.Z.INTERNAL_MANIFEST_LOADED,function Ve(St){lt.off(u.Z.INTERNAL_MANIFEST_LOADED,Ve,pe),St.error?fe(null,St.error):fe(St.manifest)},pe),C.refreshManifest()},isReady:st,preload:function(){if(!Te.getElement()&&!A){if(!l)throw Mt;rt(L)}},play:function(){if(!h)throw We;(!w||Gt()&&h)&&ne.play(!0)},isPaused:Gt,pause:function(){if(!h)throw We;ne.pause()},isSeeking:function(){if(!h)throw We;return ne.isSeeking()},isDynamic:an,getLowLatencyModeEnabled:function(){if(!h)throw We;return ne.getLowLatencyModeEnabled()},seek:function(fe){if(!h)throw We;if((0,W.PS)(fe,"number"),isNaN(fe))throw t.Z.BAD_ARGUMENT_ERROR;fe<0&&(fe=0);var pe=ne.getIsDynamic()?un(fe):fe,Ve=Ht();!ne.getIsDynamic()&&Ve.duration&&(pe=Math.min(Ve.duration,pe)),ne.seek(pe,!1,!1,!0)},seekToOriginalLive:function(){h&&an()&&ne.seekToOriginalLive()},setPlaybackRate:function(fe){Ht().playbackRate=fe},getPlaybackRate:function(){return Ht().playbackRate},setMute:function(fe){(0,W.PS)(fe,"boolean"),Ht().muted=fe},isMuted:function(){return Ht().muted},setVolume:function(fe){if(typeof fe!="number"||isNaN(fe)||fe<0||fe>1)throw t.Z.BAD_ARGUMENT_ERROR;Ht().volume=fe},getVolume:function(){return Ht().volume},time:Be,duration:ft,timeAsUTC:function(){if(!h)throw We;return Be()<0?NaN:Re(Be())},durationAsUTC:function(){if(!h)throw We;return Re(ft())},getActiveStream:ut,getDVRWindowSize:function(){var fe=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,pe=x.getCurrentDVRInfo(fe);return pe?pe.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:un,getAvailableBaseUrls:function(){var fe=J.getValue();return fe?le.getBaseUrls(fe):[]},getAvailableLocations:function(){var fe=J.getValue();if(!fe)return[];var pe=de.getLocation(fe),Ve=oe.getSynthesizedLocationElements(pe);return pe.concat(Ve)},getTargetLiveDelay:function(){if(!h)throw We;return ne.getOriginalLiveDelay()},convertToTimeCode:function(fe){fe=Math.max(fe,0);var pe=Math.floor(fe/3600),Ve=Math.floor(fe%3600/60),St=Math.floor(fe%3600%60);return(pe===0?"":pe<10?"0"+pe.toString()+":":pe.toString()+":")+(Ve<10?"0"+Ve.toString():Ve.toString())+":"+(St<10?"0"+St.toString():St.toString())},formatUTC:function(fe,pe,Ve){var St=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Nt=new Date(1e3*fe),ln=Nt.toLocaleDateString(pe),bn=Nt.toLocaleTimeString(pe,{hour12:Ve});return St?bn+" "+ln:bn},getVersion:qt,getDebug:function(){return ht},getBufferLength:function(fe){var pe=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT];if(fe)return pe.indexOf(fe)!==-1?wt().getCurrentBufferLevel(fe)||NaN:(r.warn("getBufferLength requested for invalid type"),NaN);var Ve=pe.map(function(St){return Kt(St).length>0?wt().getCurrentBufferLevel(St):Number.MAX_VALUE}).reduce(function(St,Nt){return Math.min(St,Nt)});return Ve===Number.MAX_VALUE?NaN:Ve},getTTMLRenderingDiv:function(){return Te?Te.getTTMLRenderingDiv():null},getVideoElement:Ht,getSource:function(){if(!l)throw Mt;return l},updateSource:function(fe){l=fe,C.load(l)},getCurrentLiveLatency:function(){if(!R)throw Ee;return h?ne.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(fe){if(!A)throw nt;return Y.getTopBitrateInfoFor(fe)},setAutoPlay:$e,getAutoPlay:function(){return w},getDashMetrics:wt,getQualityFor:function(fe){if(!A)throw nt;if(fe===t.Z.IMAGE){var pe=ut();if(!pe)return-1;var Ve=pe.getThumbnailController();return Ve?Ve.getCurrentTrackIndex():-1}return Y.getQualityFor(fe)},setQualityFor:function(fe,pe){var Ve=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!A)throw nt;if(fe===t.Z.IMAGE){var St=ut();if(!St)return;var Nt=St.getThumbnailController();Nt&&Nt.setTrackByIndex(pe)}Y.setPlaybackQuality(fe,C.getActiveStreamInfo(),pe,{forceReplace:Ve})},updatePortalSize:function(){Y.setElementSize(),Y.setWindowResizeEventCalled(!0)},enableText:function(fe){var pe=C.getActiveStreamInfo();return!(!pe||!D)&&D.enableText(pe.id,fe)},enableForcedTextStreaming:function(fe){return!(!C.getActiveStreamInfo()||!D)&&D.enableForcedTextStreaming(fe)},isTextEnabled:function(){var fe=C.getActiveStreamInfo();return!(!fe||!D)&&D.isTextEnabled(fe)},setTextTrack:function(fe){if(!h)throw We;var pe=C.getActiveStreamInfo();pe&&D&&D.setTextTrack(pe.id,fe)},getBitrateInfoListFor:function(fe){if(!A)throw nt;var pe=ut();return pe?pe.getBitrateListFor(fe):[]},getStreamsFromManifest:function(fe){if(!A)throw nt;return de.getStreamsInfo(fe)},getTracksFor:Kt,getTracksForTypeFromManifest:function(fe,pe,Ve){if(!A)throw nt;return(Ve=Ve||de.getStreamsInfo(pe,1)[0])?de.getAllMediaInfoForType(Ve,fe,pe):[]},getCurrentTrackFor:function(fe){if(!A)throw nt;var pe=C.getActiveStreamInfo();return U.getCurrentTrackFor(fe,pe.id)},setInitialMediaSettingsFor:function(fe,pe){if(!R)throw Ee;U.setInitialSettings(fe,pe)},getInitialMediaSettingsFor:function(fe){if(!R)throw Ee;return U.getInitialSettings(fe)},setCurrentTrack:function(fe){var pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!A)throw nt;U.setTrack(fe,pe)},addABRCustomRule:function(fe,pe,Ve){ie.addAbrCustomRule(fe,pe,Ve)},removeABRCustomRule:function(fe){ie.removeAbrCustomRule(fe)},removeAllABRCustomRule:function(){ie.removeAllAbrCustomRule()},getABRCustomRules:function(){return ie.getAbrCustomRules()},getAverageThroughput:function(fe){var pe=Y.getThroughputHistory(),Ve=ne.getIsDynamic();return pe?pe.getAverageThroughput(fe,Ve):0},retrieveManifest:function(fe,pe){var Ve=kt(),St=this;lt.on(u.Z.INTERNAL_MANIFEST_LOADED,function Nt(ln){ln.error?pe(null,ln.error):pe(ln.manifest),lt.off(u.Z.INTERNAL_MANIFEST_LOADED,Nt,St),Ve.reset()},St),Ce.initialize(fe),Ve.load(fe)},addUTCTimingSource:function(fe,pe){ie.addUTCTimingSource(fe,pe)},removeUTCTimingSource:function(fe,pe){ie.removeUTCTimingSource(fe,pe)},clearDefaultUTCTimingSources:function(){ie.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:vt,setXHRWithCredentialsForType:function(fe,pe){ie.setXHRWithCredentialsForType(fe,pe)},getXHRWithCredentialsForType:function(fe){return ie.getXHRWithCredentialsForType(fe)},getProtectionController:function(){return jt()},attachProtectionController:function(fe){Z=fe},setProtectionData:function(fe){E=fe,C&&C.setProtectionData(E)},registerLicenseRequestFilter:function(fe){ie.registerLicenseRequestFilter(fe)},registerLicenseResponseFilter:function(fe){ie.registerLicenseResponseFilter(fe)},unregisterLicenseRequestFilter:function(fe){ie.unregisterLicenseRequestFilter(fe)},unregisterLicenseResponseFilter:function(fe){ie.unregisterLicenseResponseFilter(fe)},registerCustomCapabilitiesFilter:function(fe){ie.registerCustomCapabilitiesFilter(fe)},unregisterCustomCapabilitiesFilter:function(fe){ie.unregisterCustomCapabilitiesFilter(fe)},setCustomInitialTrackSelectionFunction:function(fe){ie.setCustomInitialTrackSelectionFunction(fe)},resetCustomInitialTrackSelectionFunction:function(){ie.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(fe){if(!Te.getElement())throw Xe;Te.setTTMLRenderingDiv(fe)},attachVttRenderingDiv:function(fe){if(!Te.getElement())throw Xe;Te.setVttRenderingDiv(fe)},getCurrentTextTrackIndex:function(){var fe=C.getActiveStreamInfo();if(fe&&D)return D.getCurrentTrackIdx(fe.id)},provideThumbnail:function(fe,pe){if(typeof pe=="function")if(fe<0)pe(null);else{var Ve=ne.getIsDynamic()?un(fe):fe,St=C.getStreamForTime(Ve);if(St!==null){var Nt=St.getThumbnailController();if(Nt)return Nt.provide(Ve,pe);pe(null)}else pe(null)}},getDashAdapter:function(){return de},getOfflineController:function(){return Ge()},triggerSteeringRequest:function(){if(oe)return oe.loadSteeringData()},getCurrentSteeringResponseData:function(){if(oe)return oe.getCurrentSteeringResponseData()},getSettings:function(){return qe.get()},updateSettings:function(fe){qe.update(fe)},resetSettings:function(){qe.reset()},reset:gt,destroy:function(){gt(),_.Z.deleteSingletonInstances(Fe)}},r=ht.getLogger(i),R=!1,h=!1,A=!1,w=!0,L=NaN,Z=null,ue=null,E=null,de=null,et=null,u.Z.extend(n.Z),G=hs(Fe).getInstance(),ie=(0,Ln.Z)(Fe).getInstance(),Te=Ts(Fe).getInstance(),Ce=ds(Fe).getInstance(),i}ra.__dashjs_factory_name="MediaPlayer";var vi=_.Z.getClassFactory(ra);vi.events=n.Z,vi.errors=X,_.Z.updateClassFactory(ra.__dashjs_factory_name,vi);var cu=vi},8825:function(at,we,P){function ae(p){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ae(p)}function T(p,u){return T=Object.setPrototypeOf||function(_,m){return _.__proto__=m,_},T(p,u)}function t(p,u){return!u||ae(u)!=="object"&&typeof u!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=new(function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,_,m=(u=n,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(_){var I=e(this).constructor;c=Reflect.construct(d,arguments,I)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,n),(c=m.call(this)).AST_IN_FUTURE="astInFuture",c.BASE_URLS_UPDATED="baseUrlsUpdated",c.BUFFER_EMPTY="bufferStalled",c.BUFFER_LOADED="bufferLoaded",c.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",c.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",c.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",c.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",c.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",c.DYNAMIC_TO_STATIC="dynamicToStatic",c.ERROR="error",c.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",c.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",c.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",c.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",c.LOG="log",c.MANIFEST_LOADING_STARTED="manifestLoadingStarted",c.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",c.MANIFEST_LOADED="manifestLoaded",c.METRICS_CHANGED="metricsChanged",c.METRIC_CHANGED="metricChanged",c.METRIC_ADDED="metricAdded",c.METRIC_UPDATED="metricUpdated",c.PERIOD_SWITCH_STARTED="periodSwitchStarted",c.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",c.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",c.QUALITY_CHANGE_RENDERED="qualityChangeRendered",c.TRACK_CHANGE_RENDERED="trackChangeRendered",c.STREAM_INITIALIZING="streamInitializing",c.STREAM_UPDATED="streamUpdated",c.STREAM_ACTIVATED="streamActivated",c.STREAM_DEACTIVATED="streamDeactivated",c.STREAM_INITIALIZED="streamInitialized",c.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",c.TEXT_TRACKS_ADDED="allTextTracksAdded",c.TEXT_TRACK_ADDED="textTrackAdded",c.CUE_ENTER="cueEnter",c.CUE_EXIT="cueExit",c.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",c.TTML_PARSED="ttmlParsed",c.TTML_TO_PARSE="ttmlToParse",c.CAPTION_RENDERED="captionRendered",c.CAPTION_CONTAINER_RESIZE="captionContainerResize",c.CAN_PLAY="canPlay",c.CAN_PLAY_THROUGH="canPlayThrough",c.PLAYBACK_ENDED="playbackEnded",c.PLAYBACK_ERROR="playbackError",c.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",c.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",c.PLAYBACK_LOADED_DATA="playbackLoadedData",c.PLAYBACK_PAUSED="playbackPaused",c.PLAYBACK_PLAYING="playbackPlaying",c.PLAYBACK_PROGRESS="playbackProgress",c.PLAYBACK_RATE_CHANGED="playbackRateChanged",c.PLAYBACK_SEEKED="playbackSeeked",c.PLAYBACK_SEEKING="playbackSeeking",c.PLAYBACK_STALLED="playbackStalled",c.PLAYBACK_STARTED="playbackStarted",c.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",c.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",c.PLAYBACK_WAITING="playbackWaiting",c.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",c.EVENT_MODE_ON_START="eventModeOnStart",c.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",c.CONFORMANCE_VIOLATION="conformanceViolation",c.REPRESENTATION_SWITCH="representationSwitch",c.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",c.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",c.INBAND_PRFT="inbandPrft",c.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",c.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",c}return n}(P(8342).Z));we.Z=y},3393:function(at,we){function P(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var ae=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&P(t.prototype,e),T}());we.Z=ae},3860:function(at,we){function P(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var ae=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&P(t.prototype,e),T}());we.Z=ae},8080:function(at,we,P){P.d(we,{default:function(){return v}});var ae=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};ae.SSL_CONNECTION_FAILED_PREFIX="SSL",ae.DNS_RESOLUTION_FAILED="C00",ae.HOST_UNREACHABLE="C01",ae.CONNECTION_REFUSED="C02",ae.CONNECTION_ERROR="C03",ae.CORRUPT_MEDIA_ISOBMFF="M00",ae.CORRUPT_MEDIA_OTHER="M01",ae.BASE_URL_CHANGED="F00",ae.BECAME_REPORTER="S00";var T=ae,t=P(1180);function e(S){var W,V,Se=(S=S||{}).eventBus,ze=S.dashMetrics,Me=S.metricsConstants,De=S.events;function be(It){var Ft=new T;if(V){for(var Pt in It)It.hasOwnProperty(Pt)&&(Ft[Pt]=It[Pt]);Ft.mpdurl||(Ft.mpdurl=V.originalUrl||V.url),Ft.terror||(Ft.terror=new Date),ze.addDVBErrors(Ft)}}function xe(It){It.error||(V=It.manifest)}function Qe(It){be({errorcode:T.BASE_URL_CHANGED,servicelocation:It.entry})}function mt(){be({errorcode:T.BECAME_REPORTER})}function it(It){var Ft;It.metric===Me.HTTP_REQUEST&&((Ft=It.value).responsecode===0||Ft.responsecode==null||Ft.responsecode>=400||Ft.responsecode<100||Ft.responsecode>=600)&&be({errorcode:Ft.responsecode||T.CONNECTION_ERROR,url:Ft.url,terror:Ft.tresponse,servicelocation:Ft._serviceLocation})}function Ut(It){var Ft;switch(It.error?It.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Ft=T.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Ft=T.CORRUPT_MEDIA_OTHER;break;default:return}be({errorcode:Ft})}return W={initialize:function(){Se.on(De.MANIFEST_UPDATED,xe,W),Se.on(De.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Qe,W),Se.on(De.METRIC_ADDED,it,W),Se.on(De.METRIC_UPDATED,it,W),Se.on(De.PLAYBACK_ERROR,Ut,W),Se.on(t.Z.BECAME_REPORTING_PLAYER,mt,W)},reset:function(){Se.off(De.MANIFEST_UPDATED,xe,W),Se.off(De.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Qe,W),Se.off(De.METRIC_ADDED,it,W),Se.off(De.METRIC_UPDATED,it,W),Se.off(De.PLAYBACK_ERROR,Ut,W),Se.off(t.Z.BECAME_REPORTING_PLAYER,mt,W)}}}e.__dashjs_factory_name="DVBErrorsTranslator";var y=dashjs.FactoryMaker.getSingletonFactory(e),p=P(2295);function u(S){S=S||{};var W,V,Se=!1,ze=this.context,Me=S.mediaElement;return W={initialize:function(De){De&&De.length&&(De.forEach(function(be){var xe=be.starttime,Qe=xe+be.duration;V.add(xe,Qe)}),Se=!!De[0]._useWallClockTime)},reset:function(){V.clear()},isEnabled:function(){var De,be=V.length;if(!be)return!0;De=Se?new Date().getTime()/1e3:Me.currentTime;for(var xe=0;xe<be;xe+=1){var Qe=V.start(xe),mt=V.end(xe);if(Qe<=De&&De<mt)return!0}return!1}},V=(0,p.Z)(ze).create(),W}u.__dashjs_factory_name="RangeController";var _=dashjs.FactoryMaker.getClassFactory(u);function m(){return{serialise:function S(W){var V,Se,ze=[],Me=[];for(V in W)if(W.hasOwnProperty(V)&&V.indexOf("_")!==0){if((Se=W[V])==null&&(Se=""),Array.isArray(Se)){if(!Se.length)continue;Me=[],Se.forEach(function(De){var be=Object.prototype.toString.call(De).slice(8,-1)!=="Object";Me.push(be?De:S(De))}),Se=Me.map(encodeURIComponent).join(",")}else typeof Se=="string"?Se=encodeURIComponent(Se):Se instanceof Date?Se=Se.toISOString():typeof Se=="number"&&(Se=Math.round(Se));ze.push(V+"="+Se)}return ze.join("&")}}}m.__dashjs_factory_name="MetricSerialiser";var n=dashjs.FactoryMaker.getSingletonFactory(m);function c(){var S,W,V,Se=window.crypto||window.msCrypto,ze=Uint32Array,Me=Math.pow(2,8*ze.BYTES_PER_ELEMENT)-1;function De(){Se&&(S||(S=new ze(10)),Se.getRandomValues(S),W=0)}return V={random:function(be,xe){var Qe;return be||(be=0),xe||(xe=1),Se?(W===S.length&&De(),Qe=S[W]/Me,W+=1):Qe=Math.random(),Qe*(xe-be)+be}},De(),V}c.__dashjs_factory_name="RNG";var d=dashjs.FactoryMaker.getSingletonFactory(c),I=P(5717);function k(S){var W;S=S||{};var V,Se,ze,Me,De,be,xe,Qe=this.context,mt=[],it=S.metricsConstants;function Ut(){Me=!1,De=!1,be=null,xe=null}return W={report:function(It,Ft){Array.isArray(Ft)||(Ft=[Ft]),De&&xe.isEnabled()&&Ft.forEach(function(Pt){var tn=V.serialise(Pt);It!==it.DVB_ERRORS&&(tn="metricname=".concat(It,"&").concat(tn)),function(dn,An,_n){var Rn=new XMLHttpRequest;Rn.withCredentials=Se.getXHRWithCredentialsForType(it.HTTP_REQUEST_DVB_REPORTING_TYPE);var qn=function(){var yn=mt.indexOf(Rn);yn!==-1&&(mt.splice(yn,1),!(Rn.status>=200&&Rn.status<300)&&_n&&_n())};mt.push(Rn);try{Rn.open("GET",dn),Rn.onloadend=qn,Rn.onerror=qn,Rn.send()}catch{Rn.onerror()}}(tn="".concat(be,"?").concat(tn),0,function(){De=!1})})},initialize:function(It,Ft){var Pt;if(xe=Ft,!(be=It.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");Me||((Pt=It.dvbProbability)&&(Pt===1e3||Pt/1e3>=ze.random())&&(De=!0),Me=!0)},reset:function(){Ut()}},V=n(Qe).getInstance(),ze=d(Qe).getInstance(),Se=(0,I.Z)(Qe).getInstance(),Ut(),W}k.__dashjs_factory_name="DVBReporting";var q=dashjs.FactoryMaker.getClassFactory(k);function F(S){S=S||{};var W,V={"urn:dvb:dash:reporting:2014":q},Se=this.context,ze=S.debug?S.debug.getLogger(W):{},Me=S.metricsConstants,De=S.mediaPlayerModel||{};return{create:function(be,xe){var Qe;try{(Qe=V[be.schemeIdUri](Se).create({metricsConstants:Me,mediaPlayerModel:De})).initialize(be,xe)}catch(mt){Qe=null,ze.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(be.schemeIdUri," (").concat(mt.message,")"))}return Qe},register:function(be,xe){V[be]=xe},unregister:function(be){delete V[be]}}}F.__dashjs_factory_name="ReportingFactory";var $=dashjs.FactoryMaker.getSingletonFactory(F);function O(S){var W=[],V=$(this.context).getInstance(S);return{initialize:function(Se,ze){Se.some(function(Me){var De=V.create(Me,ze);if(De)return W.push(De),!0})},reset:function(){W.forEach(function(Se){return Se.reset()}),W=[]},report:function(Se,ze){W.forEach(function(Me){return Me.report(Se,ze)})}}}O.__dashjs_factory_name="ReportingController";var K=dashjs.FactoryMaker.getClassFactory(O);function re(){return{reconstructFullMetricName:function(S,W,V){var Se=S;return W&&(Se+="("+W,V&&V.length&&(Se+=","+V),Se+=")"),Se},validateN:function(S){if(!S)throw new Error("missing n");if(isNaN(S))throw new Error("n is NaN");if(S<0)throw new Error("n must be positive");return S}}}re.__dashjs_factory_name="HandlerHelpers";var H=dashjs.FactoryMaker.getSingletonFactory(re);function ee(S){var W,V,Se,ze,Me;S=S||{};var De=this.context,be=H(De).getInstance(),xe=[],Qe=S.metricsConstants;function mt(){var it=function(){try{return Object.keys(xe).map(function(Ut){return xe[Ut]}).reduce(function(Ut,It){return Ut.level<It.level?Ut:It})}catch{return}}();it&&Me!==it.t&&(Me=it.t,W.report(Se,it))}return{initialize:function(it,Ut,It){Ut&&(V=be.validateN(It),W=Ut,Se=be.reconstructFullMetricName(it,It),ze=setInterval(mt,V))},reset:function(){clearInterval(ze),ze=null,V=0,W=null,Me=null},handleNewMetric:function(it,Ut,It){it===Qe.BUFFER_LEVEL&&(xe[It]=Ut)}}}ee.__dashjs_factory_name="BufferLevelHandler";var se=dashjs.FactoryMaker.getClassFactory(ee),_e=dashjs.FactoryMaker.getClassFactory(function(S){var W,V=(S=S||{}).eventBus,Se=S.metricsConstants;function ze(){V.off(t.Z.METRICS_INITIALISATION_COMPLETE,ze,this),V.trigger(t.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(Me,De){De&&(W=De,V.on(t.Z.METRICS_INITIALISATION_COMPLETE,ze,this))},reset:function(){W=null},handleNewMetric:function(Me,De){Me===Se.DVB_ERRORS&&W&&W.report(Me,De)}}});function X(S){var W,V,Se,ze,Me;S=S||{};var De=[],be=H(this.context).getInstance(),xe=S.metricsConstants;function Qe(){var mt=De;mt.length&&W&&W.report(ze,mt),De=[]}return{initialize:function(mt,it,Ut,It){it&&(V=be.validateN(Ut),W=it,It&&It.length&&(Se=It),ze=be.reconstructFullMetricName(mt,Ut,It),Me=setInterval(Qe,V))},reset:function(){clearInterval(Me),Me=null,V=null,Se=null,De=[],W=null},handleNewMetric:function(mt,it){mt===xe.HTTP_REQUEST&&(Se&&Se!==it.type||De.push(it))}}}X.__dashjs_factory_name="HttpListHandler";var Ae=dashjs.FactoryMaker.getClassFactory(X);function Le(){var S,W;return{initialize:function(V,Se){S=V,W=Se},reset:function(){W=null,S=void 0},handleNewMetric:function(V,Se){V===S&&W&&W.report(S,Se)}}}Le.__dashjs_factory_name="GenericMetricHandler";var Ye=dashjs.FactoryMaker.getClassFactory(Le);function ye(S){var W,V=(S=S||{}).debug?S.debug.getLogger(W):{},Se=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,ze=this.context,Me={BufferLevel:se,DVBErrors:_e,HttpList:Ae,PlayList:Ye,RepSwitchList:Ye,TcpList:Ye};return{create:function(De,be){var xe,Qe=De.match(Se);if(Qe){try{(xe=Me[Qe[1]](ze).create({eventBus:S.eventBus,metricsConstants:S.metricsConstants})).initialize(Qe[1],be,Qe[3],Qe[5])}catch(mt){xe=null,V.error("MetricsHandlerFactory: Could not create handler for type ".concat(Qe[1]," with args ").concat(Qe[3],", ").concat(Qe[5]," (").concat(mt.message,")"))}return xe}},register:function(De,be){Me[De]=be},unregister:function(De){delete Me[De]}}}ye.__dashjs_factory_name="MetricsHandlerFactory";var Pe=dashjs.FactoryMaker.getSingletonFactory(ye);function He(S){S=S||{};var W,V=[],Se=this.context,ze=S.eventBus,Me=S.events,De=Pe(Se).getInstance({debug:S.debug,eventBus:S.eventBus,metricsConstants:S.metricsConstants});function be(xe){V.forEach(function(Qe){Qe.handleNewMetric(xe.metric,xe.value,xe.mediaType)})}return W={initialize:function(xe,Qe){xe.split(",").forEach(function(mt,it,Ut){var It;if(mt.indexOf("(")!==-1&&mt.indexOf(")")===-1){var Ft=Ut[it+1];Ft&&Ft.indexOf("(")===-1&&Ft.indexOf(")")!==-1&&(mt+=","+Ft,delete Ut[it+1])}(It=De.create(mt,Qe))&&V.push(It)}),ze.on(Me.METRIC_ADDED,be,W),ze.on(Me.METRIC_UPDATED,be,W)},reset:function(){ze.off(Me.METRIC_ADDED,be,W),ze.off(Me.METRIC_UPDATED,be,W),V.forEach(function(xe){return xe.reset()}),V=[]}}}He.__dashjs_factory_name="MetricsHandlersController";var tt=dashjs.FactoryMaker.getClassFactory(He);function ve(S){var W,V,Se;S=S||{};var ze=this.context;function Me(){W&&W.reset(),V&&V.reset(),Se&&Se.reset()}return{initialize:function(De){try{(Se=_(ze).create({mediaElement:S.mediaElement})).initialize(De.Range),(V=K(ze).create({debug:S.debug,metricsConstants:S.metricsConstants,mediaPlayerModel:S.mediaPlayerModel})).initialize(De.Reporting,Se),(W=tt(ze).create({debug:S.debug,eventBus:S.eventBus,metricsConstants:S.metricsConstants,events:S.events})).initialize(De.metrics,V)}catch(be){throw Me(),be}},reset:Me}}ve.__dashjs_factory_name="MetricsController";var Oe=dashjs.FactoryMaker.getClassFactory(ve),_t=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.metrics="",this.Range=[],this.Reporting=[]},dt=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},ke=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Je(S){var W=(S=S||{}).adapter,V=S.constants;return{getMetrics:function(Se){var ze=[];return Se&&Se.Metrics_asArray&&Se.Metrics_asArray.forEach(function(Me){var De=new _t,be=W.getIsDynamic(Se);Me.hasOwnProperty("metrics")&&(De.metrics=Me.metrics,Me.Range_asArray&&Me.Range_asArray.forEach(function(xe){var Qe=new dt;Qe.starttime=function(mt,it,Ut){var It,Ft,Pt=0;return it?Pt=W.getAvailabilityStartTime(mt)/1e3:(It=W.getRegularPeriods(mt)).length&&(Pt=It[0].start),Ft=Pt,Ut&&Ut.hasOwnProperty(V.START_TIME)&&(Ft+=Ut.starttime),Ft}(Se,be,xe),xe.hasOwnProperty("duration")?Qe.duration=xe.duration:Qe.duration=W.getDuration(Se),Qe._useWallClockTime=be,De.Range.push(Qe)}),Me.Reporting_asArray&&(Me.Reporting_asArray.forEach(function(xe){var Qe=new ke;xe.hasOwnProperty(V.SCHEME_ID_URI)&&(Qe.schemeIdUri=xe.schemeIdUri,xe.hasOwnProperty("value")&&(Qe.value=xe.value),xe.hasOwnProperty(V.DVB_REPORTING_URL)&&(Qe.dvbReportingUrl=xe[V.DVB_REPORTING_URL]),xe.hasOwnProperty(V.DVB_PROBABILITY)&&(Qe.dvbProbability=xe[V.DVB_PROBABILITY]),De.Reporting.push(Qe))}),ze.push(De)))}),ze}}}Je.__dashjs_factory_name="ManifestParsing";var ge=dashjs.FactoryMaker.getSingletonFactory(Je);function me(S){var W;S=S||{};var V={},Se=this.context,ze=S.eventBus,Me=S.events;function De(xe){if(!xe.error){var Qe=Object.keys(V);ge(Se).getInstance({adapter:S.adapter,constants:S.constants}).getMetrics(xe.manifest).forEach(function(mt){var it=JSON.stringify(mt);if(V.hasOwnProperty(it))Qe.splice(it,1);else try{var Ut=Oe(Se).create(S);Ut.initialize(mt),V[it]=Ut}catch{}}),Qe.forEach(function(mt){V[mt].reset(),delete V[mt]}),ze.trigger(t.Z.METRICS_INITIALISATION_COMPLETE)}}function be(){Object.keys(V).forEach(function(xe){V[xe].reset()}),V={}}return W={reset:function(){ze.off(Me.MANIFEST_UPDATED,De,W),ze.off(Me.STREAM_TEARDOWN_COMPLETE,be,W)}},ze.on(Me.MANIFEST_UPDATED,De,W),ze.on(Me.STREAM_TEARDOWN_COMPLETE,be,W),W}me.__dashjs_factory_name="MetricsCollectionController";var Ue=dashjs.FactoryMaker.getClassFactory(me);function f(){var S=this.context;return{createMetricsReporting:function(W){return y(S).getInstance({eventBus:W.eventBus,dashMetrics:W.dashMetrics,metricsConstants:W.metricsConstants,events:W.events}).initialize(),Ue(S).create(W)},getReportingFactory:function(){return $(S).getInstance()},getMetricsHandlerFactory:function(){return Pe(S).getInstance()}}}f.__dashjs_factory_name="MetricsReporting";var o=dashjs.FactoryMaker.getClassFactory(f);o.events=t.Z,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,o);var v=o},1180:function(at,we,P){function ae(p){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ae(p)}function T(p,u){return T=Object.setPrototypeOf||function(_,m){return _.__proto__=m,_},T(p,u)}function t(p,u){return!u||ae(u)!=="object"&&typeof u!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=new(function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,_,m=(u=n,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(_){var I=e(this).constructor;c=Reflect.construct(d,arguments,I)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,n),(c=m.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",c.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",c.CMCD_DATA_GENERATED="cmcdDataGenerated",c}return n}(P(8342).Z));we.Z=y},5717:function(at,we,P){var ae=P(2610),T=P(5448),t=P(1264),e=P(3106),y=P(1767),p=P(3393);function u(){var _,m,n,c,d,I,k,q,F=this.context,$=(0,t.Z)(F).getInstance();function O(){c=[],d=[],I=[],q=[],k=null,m=[]}function K(se,_e){var X=-1;se.some(function(Ae,Le){if(Ae===_e)return X=Le,!0}),X<0||se.splice(X,1)}function re(se){var _e;for(_e=0;_e<q.length;_e++)if(q[_e].rulename===se)return _e;return-1}function H(se,_e){ee(se,_e);var X=new ae.Z;X.schemeIdUri=se,X.value=_e,m.push(X)}function ee(se,_e){(0,e.PS)(se,"string"),(0,e.PS)(_e,"string"),m.forEach(function(X,Ae){X.schemeIdUri===se&&X.value===_e&&m.splice(Ae,1)})}return _={getCustomInitialTrackSelectionFunction:function(){return k},setCustomInitialTrackSelectionFunction:function(se){k=se},resetCustomInitialTrackSelectionFunction:function(){k=null},getLicenseResponseFilters:function(){return d},getLicenseRequestFilters:function(){return c},getCustomCapabilitiesFilters:function(){return I},registerCustomCapabilitiesFilter:function(se){I.push(se)},registerLicenseResponseFilter:function(se){d.push(se)},registerLicenseRequestFilter:function(se){c.push(se)},unregisterCustomCapabilitiesFilter:function(se){K(I,se)},unregisterLicenseResponseFilter:function(se){K(d,se)},unregisterLicenseRequestFilter:function(se){K(c,se)},addAbrCustomRule:function(se,_e,X){if(typeof se!="string"||se!==y.Z.ABANDON_FRAGMENT_RULES&&se!==y.Z.QUALITY_SWITCH_RULES||typeof _e!="string")throw p.Z.BAD_ARGUMENT_ERROR;var Ae=re(_e);Ae===-1?q.push({type:se,rulename:_e,rule:X}):(q[Ae].type=se,q[Ae].rule=X)},removeAllAbrCustomRule:function(){q=[]},removeAbrCustomRule:function(se){if(se){var _e=re(se);_e!==-1&&q.splice(_e,1)}else q=[]},getAbrCustomRules:function(){return q},addUTCTimingSource:H,removeUTCTimingSource:ee,getUTCTimingSources:function(){return m},clearDefaultUTCTimingSources:function(){m=[]},restoreDefaultUTCTimingSources:function(){var se=$.get().streaming.utcSynchronization.defaultTimingSource;H(se.scheme,se.value)},setXHRWithCredentialsForType:function se(_e,X){_e?n[_e]=!!X:Object.keys(n).forEach(function(Ae){se(Ae,X)})},getXHRWithCredentialsForType:function(se){var _e=n[se];return _e===void 0?n.default:_e},setConfig:function(){},reset:function(){O()}},n={default:!1},O(),_}u.__dashjs_factory_name="CustomParametersModel",we.Z=T.Z.getSingletonFactory(u)},9032:function(at,we,P){var ae=P(5448),T=P(7473);function t(y){var p=(y=y||{}).requestModifier;function u(_){var m=new Date,n=_.request,c=new XMLHttpRequest;if(c.open(_.method,_.url,!0),n.responseType&&(c.responseType=n.responseType),n.range&&c.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=m),p&&p.modifyRequestHeader&&(c=p.modifyRequestHeader(c,{url:_.url})),_.headers)for(var d in _.headers){var I=_.headers[d];I&&c.setRequestHeader(d,I)}c.withCredentials=_.withCredentials,c.onload=_.onload,c.onloadend=_.onend,c.onerror=_.onerror,c.onprogress=_.progress,c.onabort=_.onabort,c.ontimeout=_.ontimeout,c.timeout=_.timeout,c.send(),_.response=c}return{load:function(_){p&&p.modifyRequest?(0,T.k)(_,p).then(function(){return u(_)}):u(_)},abort:function(_){var m=_.response;m.onloadend=m.onerror=m.onprogress=void 0,m.abort()}}}t.__dashjs_factory_name="XHRLoader";var e=ae.Z.getClassFactory(t);we.Z=e},1737:function(at,we,P){function ae(bt,Et){for(var Tt=0;Tt<Et.length;Tt++){var Ze=Et[Tt];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(bt,Ze.key,Ze)}}P.d(we,{default:function(){return Cr}});var T={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},t=function(){function bt(){(function(Ze,ct){if(!(Ze instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt)}var Et,Tt;return Et=bt,Tt=[{key:"findCencContentProtection",value:function(Ze){for(var ct=null,je=0;je<Ze.length;++je){var ot=Ze[je];ot.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||ot.value.toLowerCase()!=="cenc"&&ot.value.toLowerCase()!=="cbcs"||(ct=ot)}return ct}},{key:"getPSSHData",value:function(Ze){var ct=8,je=new DataView(Ze),ot=je.getUint8(ct);return ct+=20,ot>0&&(ct+=4+16*je.getUint32(ct)),ct+=4,Ze.slice(ct)}},{key:"getPSSHForKeySystem",value:function(Ze,ct){var je=bt.parsePSSHList(ct);return Ze&&je.hasOwnProperty(Ze.uuid.toLowerCase())?je[Ze.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(Ze,ct){return"pssh"in Ze?(Ze.pssh.__text=Ze.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),ct.decodeArray(Ze.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(Ze){if(Ze==null)return[];for(var ct=new DataView(Ze.buffer||Ze),je={},ot=0;;){var Ot,Lt,Wt=void 0,Xt=ot;if(ot>=ct.buffer.byteLength)break;if(Ot=ot+ct.getUint32(ot),ot+=4,ct.getUint32(ot)===1886614376)if(ot+=4,(Lt=ct.getUint8(ot))===0||Lt===1){ot++,ot+=3,Wt="";var Bt=void 0,yt=void 0;for(Bt=0;Bt<4;Bt++)Wt+=(yt=ct.getUint8(ot+Bt).toString(16)).length===1?"0"+yt:yt;for(ot+=4,Wt+="-",Bt=0;Bt<2;Bt++)Wt+=(yt=ct.getUint8(ot+Bt).toString(16)).length===1?"0"+yt:yt;for(ot+=2,Wt+="-",Bt=0;Bt<2;Bt++)Wt+=(yt=ct.getUint8(ot+Bt).toString(16)).length===1?"0"+yt:yt;for(ot+=2,Wt+="-",Bt=0;Bt<2;Bt++)Wt+=(yt=ct.getUint8(ot+Bt).toString(16)).length===1?"0"+yt:yt;for(ot+=2,Wt+="-",Bt=0;Bt<6;Bt++)Wt+=(yt=ct.getUint8(ot+Bt).toString(16)).length===1?"0"+yt:yt;ot+=6,ot+=4,je[Wt=Wt.toLowerCase()]=ct.buffer.slice(Xt,Ot),ot=Ot}else ot=Ot;else ot=Ot}return je}},{key:"getLicenseServerUrlFromMediaInfo",value:function(Ze,ct){try{if(!Ze||Ze.length===0)return null;for(var je=0,ot=null;je<Ze.length&&!ot;){var Ot=Ze[je];if(Ot&&Ot.contentProtection&&Ot.contentProtection.length>0){var Lt=Ot.contentProtection.filter(function(rn){return rn.schemeIdUri&&rn.schemeIdUri===ct});if(Lt&&Lt.length>0)for(var Wt=0;Wt<Lt.length&&!ot;){for(var Xt=Lt[Wt],Bt=0;Bt<T.attributes.length&&!ot;){for(var yt=0,zt=T.attributes[Bt];yt<T.prefixes.length&&!ot;){var Vt=T.prefixes[yt];Xt[zt]&&Xt[zt].__prefix&&Xt[zt].__prefix===Vt&&Xt[zt].__text&&(ot=Xt[zt].__text),yt+=1}Bt+=1}Wt+=1}}je+=1}return ot}catch{return null}}}],Tt&&ae(Et,Tt),bt}(),e=function bt(Et,Tt){(function(Ze,ct){if(!(Ze instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.contentType=Et,this.robustness=Tt},y=function bt(Et,Tt,Ze,ct,je){(function(ot,Ot){if(!(ot instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,bt),this.initDataTypes=["cenc"],Et&&Et.length&&(this.audioCapabilities=Et),Tt&&Tt.length&&(this.videoCapabilities=Tt),this.distinctiveIdentifier=Ze,this.persistentState=ct,this.sessionTypes=je};function p(bt){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},p(bt)}function u(bt,Et){return u=Object.setPrototypeOf||function(Tt,Ze){return Tt.__proto__=Ze,Tt},u(bt,Et)}function _(bt,Et){return!Et||p(Et)!=="object"&&typeof Et!="function"?function(Tt){if(Tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt}(bt):Et}function m(bt){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)},m(bt)}var n=new(function(bt){(function(je,ot){if(typeof ot!="function"&&ot!==null)throw new TypeError("Super expression must either be null or a function");je.prototype=Object.create(ot&&ot.prototype,{constructor:{value:je,writable:!0,configurable:!0}}),ot&&u(je,ot)})(ct,bt);var Et,Tt,Ze=(Et=ct,Tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var je,ot=m(Et);if(Tt){var Ot=m(this).constructor;je=Reflect.construct(ot,arguments,Ot)}else je=ot.apply(this,arguments);return _(this,je)});function ct(){var je;return function(ot,Ot){if(!(ot instanceof Ot))throw new TypeError("Cannot call a class as a function")}(this,ct),(je=Ze.call(this)).MEDIA_KEYERR_CODE=100,je.MEDIA_KEYERR_UNKNOWN_CODE=101,je.MEDIA_KEYERR_CLIENT_CODE=102,je.MEDIA_KEYERR_SERVICE_CODE=103,je.MEDIA_KEYERR_OUTPUT_CODE=104,je.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,je.MEDIA_KEYERR_DOMAIN_CODE=106,je.MEDIA_KEY_MESSAGE_ERROR_CODE=107,je.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,je.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,je.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,je.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,je.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,je.KEY_SESSION_CREATED_ERROR_CODE=113,je.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,je.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",je.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",je.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",je.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",je.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",je.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",je.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",je.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",je.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",je.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",je.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",je.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",je.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",je.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",je}return ct}(P(2230).Z)),c=P(5459),d=function bt(Et,Tt,Ze,ct,je,ot,Ot,Lt){(function(Wt,Xt){if(!(Wt instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,bt),this.url=Et,this.method=Tt,this.responseType=Ze,this.headers=ct,this.withCredentials=je,this.messageType=ot,this.sessionId=Ot,this.data=Lt},I=function bt(Et,Tt,Ze){(function(ct,je){if(!(ct instanceof je))throw new TypeError("Cannot call a class as a function")})(this,bt),this.url=Et,this.headers=Tt,this.data=Ze},k=P(7855),q=P(703),F=P(3393),$=P(5448);function O(bt){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},O(bt)}function K(bt){var Et,Tt,Ze,ct,je,ot,Ot,Lt,Wt,Xt,Bt,yt=(bt=bt||{}).protectionKeyController,zt=bt.protectionModel,Vt=bt.eventBus,rn=bt.events,gn=bt.debug,vn=bt.BASE64,$t=bt.constants,pt=[],At=bt.cmcdModel,Zt=bt.settings,nn=bt.customParametersModel;function sn(){if(!(Vt&&Vt.hasOwnProperty("on")&&yt&&yt.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function pn(Ct,en){Lt||Wt?Lt&&En():function(fn,Ln){if(!Wt){Wt=!0;var Tn,Bn=[];fn=fn.sort(function(kn,Dn){return(je&&je[kn.ks.systemString]&&je[kn.ks.systemString].priority>=0?je[kn.ks.systemString].priority:fn.length)-(je&&je[Dn.ks.systemString]&&je[Dn.ks.systemString].priority>=0?je[Dn.ks.systemString].priority:fn.length)});for(var wn=0;wn<fn.length;wn++){var tr=mr(fn[wn]);Bn.push({ks:fn[wn].ks,configs:[tr],protData:fn[wn].protData})}zt.requestKeySystemAccess(Bn).then(function(kn){var Dn=(Tn=kn.data).mksa&&Tn.mksa.selectedSystemString?Tn.mksa.selectedSystemString:Tn.keySystem.systemString;return Tt.info("DRM: KeySystem Access Granted for system string ("+Dn+")!  Selecting key system..."),zt.selectKeySystem(Tn)}).then(function(kn){if(Lt=kn,Wt=!1,zt){Vt.trigger(rn.KEY_SYSTEM_SELECTED,{data:Tn});var Dn=Un(Lt);Dn&&Dn.serverCertificate&&Dn.serverCertificate.length>0&&zt.setServerCertificate(vn.decodeArray(Dn.serverCertificate).buffer),En()}}).catch(function(kn){Lt=null,Wt=!1,Ln||Vt.trigger(rn.KEY_SYSTEM_SELECTED,{data:null,error:new c.Z(n.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,n.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+kn.error)})})}}(Ct,en)}function En(){for(var Ct,en=0;en<Ze.length;en++)for(Ct=0;Ct<Ze[en].length;Ct++)if(Lt===Ze[en][Ct].ks){Yn(Ze[en][Ct]);break}Ze=[]}function Yn(Ct){if(yt.isClearKey(Lt)&&Ct.protData&&Ct.protData.hasOwnProperty("clearkeys")&&Object.keys(Ct.protData.clearkeys).length!==0){var en={kids:Object.keys(Ct.protData.clearkeys)};Ct.initData=new TextEncoder().encode(JSON.stringify(en))}Ct.sessionId?jn(Ct):Ct.initData!==null&&Cn(Ct)}function jn(Ct){sn(),zt.loadKeySession(Ct)}function Cn(Ct){var en=t.getPSSHForKeySystem(Lt,Ct?Ct.initData:null);if(en){if(function(fn){if(!fn)return!1;try{for(var Ln=zt.getSessions(),Tn=0;Tn<Ln.length;Tn++)if(Ln[Tn].getKeyId()===fn)return!0;return!1}catch{return!1}}(Ct.keyId)||Pn(en))return;try{Ct.initData=en,zt.createKeySession(Ct)}catch(fn){Vt.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+fn.message)})}}else Ct&&Ct.initData?zt.createKeySession(Ct):Vt.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Lt?Lt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Un(Ct){if(Ct){var en=Ct.systemString;if(je)return en in je?je[en]:null}return null}function Pn(Ct){if(!Ct)return!1;try{for(var en=zt.getAllInitData(),fn=0;fn<en.length;fn++)if(yt.initDataEquals(Ct,en[fn]))return Tt.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Hn(Ct){sn(),Ct?(zt.setMediaElement(Ct),Vt.on(rn.NEED_KEY,Or,Et)):Ct===null&&(zt.setMediaElement(Ct),Vt.off(rn.NEED_KEY,Or,Et))}function mr(Ct){var en=Ct.protData,fn=[],Ln=[],Tn=en&&en.audioRobustness&&en.audioRobustness.length>0?en.audioRobustness:Ot,Bn=en&&en.videoRobustness&&en.videoRobustness.length>0?en.videoRobustness:Ot,wn=Ct.sessionType,tr=en&&en.distinctiveIdentifier?en.distinctiveIdentifier:"optional",kn=en&&en.persistentState?en.persistentState:wn==="temporary"?"optional":"required";return ct.forEach(function(Dn){Dn.type===$t.AUDIO?fn.push(new e(Dn.codec,Tn)):Dn.type===$t.VIDEO&&Ln.push(new e(Dn.codec,Bn))}),new y(fn,Ln,tr,kn,[wn])}function ir(Ct){Ct.error?Vt.trigger(rn.KEY_STATUSES_CHANGED,{data:null,error:Ct.error}):Tt.debug("DRM: key status = "+Ct.status)}function ur(Ct){Tt.debug("DRM: onKeyMessage");var en=Ct.data;Vt.trigger(rn.KEY_MESSAGE,{data:en});var fn=en.messageType?en.messageType:"license-request",Ln=en.message,Tn=en.sessionToken,Bn=Un(Lt),wn=yt.getLicenseServerModelInstance(Lt,Bn,fn),tr={sessionToken:Tn,messageType:fn};if(Ln&&Ln.byteLength!==0){if(!wn)return Tt.debug("DRM: License server request not required for this message (type = "+Ct.data.messageType+").  Session ID = "+Tn.getSessionId()),void zn(tr);if(yt.isClearKey(Lt)){var kn=yt.processClearKeyLicenseRequest(Lt,Bn,Ln);if(kn&&kn.keyPairs&&kn.keyPairs.length>0)return Tt.debug("DRM: ClearKey license request handled by application!"),zn(tr),void zt.updateKeySession(Tn,kn)}(function(Dn,Wn,Xn){var lr=Dn.sessionToken,ar=Dn.messageType?Dn.messageType:"license-request",cr={sessionToken:lr,messageType:ar},pr=Lt?Lt.systemString:null,qr=function(Nn,Tr,Fr,Sr,ri){var or=null,ii=Sr.message;if(Nn&&Nn.serverURL){var yr=Nn.serverURL;typeof yr=="string"&&yr!==""?or=yr:O(yr)==="object"&&yr.hasOwnProperty(Tr)&&(or=yr[Tr])}else if(Nn&&Nn.laURL&&Nn.laURL!=="")or=Nn.laURL;else if(!(or=t.getLicenseServerUrlFromMediaInfo(ct,Lt.schemeIdURI))&&!yt.isClearKey(Lt)){var ai=t.getPSSHData(Fr.initData);(or=Lt.getLicenseServerURLFromInitData(ai))||(or=Sr.laURL)}return or=ri.getServerURLFromMessage(or,ii,Tr)}(Xn,ar,lr,Dn,Wn);if(qr){var Mr={},Pr=!1;Xn&&Wr(Mr,Xn.httpRequestHeaders);var Jr=Dn.message;Wr(Mr,Lt.getRequestHeadersFromMessage(Jr)),Object.keys(Mr).forEach(function(Nn){Nn.toLowerCase()==="authorization"&&(Pr=!0)}),Xn&&typeof Xn.withCredentials=="boolean"&&(Pr=Xn.withCredentials);var $r=function(Nn){if(zt)if(Nn.status>=200&&Nn.status<=299){var Tr=q.Z.parseHttpHeaders(Nn.getAllResponseHeaders?Nn.getAllResponseHeaders():null),Fr=new I(Nn.responseURL,Tr,Nn.response);Qr(nn.getLicenseResponseFilters(),Fr).then(function(){var Sr=Wn.getLicenseMessage(Fr.data,pr,ar);Sr!==null?(zn(cr),zt.updateKeySession(lr,Sr)):Xr(Nn,cr,pr,ar,Wn)})}else Xr(Nn,cr,pr,ar,Wn)},Ai=function(Nn){zn(cr,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pr+' update, XHR aborted. status is "'+Nn.statusText+'" ('+Nn.status+"), readyState is "+Nn.readyState))},Ii=function(Nn){zn(cr,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pr+' update, XHR error. status is "'+Nn.statusText+'" ('+Nn.status+"), readyState is "+Nn.readyState))},ei=Lt.getLicenseRequestFromMessage(Jr),ti=Wn.getHTTPMethod(ar),Ri=Wn.getResponseType(pr,ar),Yr=Xn&&!isNaN(Xn.httpTimeout)?Xn.httpTimeout:8e3,ni=lr.getSessionId()||null,Lr=new d(qr,ti,Ri,Mr,Pr,ar,ni,ei),wi=isNaN(Zt.get().streaming.retryAttempts[k.w.LICENSE])?3:Zt.get().streaming.retryAttempts[k.w.LICENSE];Qr(nn.getLicenseRequestFilters(),Lr).then(function(){zr(Lr,wi,Yr,$r,Ai,Ii)})}else zn(cr,new c.Z(n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(en,wn,Bn)}else zn(tr,new c.Z(n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function zn(Ct,en){Vt.trigger(rn.LICENSE_REQUEST_COMPLETE,{data:Ct,error:en})}function zr(Ct,en,fn,Ln,Tn,Bn){var wn=new XMLHttpRequest;if(Zt.get().streaming.cmcd&&Zt.get().streaming.cmcd.enabled&&Zt.get().streaming.cmcd.mode===F.Z.CMCD_MODE_QUERY){var tr=At.getQueryParameter({url:Ct.url,type:k.w.LICENSE});tr&&(Ct.url=q.Z.addAditionalQueryParameterToUrl(Ct.url,[tr]))}for(var kn in wn.open(Ct.method,Ct.url,!0),wn.responseType=Ct.responseType,wn.withCredentials=Ct.withCredentials,fn>0&&(wn.timeout=fn),Ct.headers)wn.setRequestHeader(kn,Ct.headers[kn]);if(Zt.get().streaming.cmcd&&Zt.get().streaming.cmcd.enabled&&Zt.get().streaming.cmcd.mode===F.Z.CMCD_MODE_HEADER){var Dn=At.getHeaderParameters({url:Ct.url,type:k.w.LICENSE});if(Dn)for(var Wn in Dn){var Xn=Dn[Wn];Xn&&wn.setRequestHeader(Wn,Xn)}}var lr=function(){en--;var ar=isNaN(Zt.get().streaming.retryIntervals[k.w.LICENSE])?1e3:Zt.get().streaming.retryIntervals[k.w.LICENSE];Bt=setTimeout(function(){zr(Ct,en,fn,Ln,Tn,Bn)},ar)};wn.onload=function(){Xt=null,this.status>=200&&this.status<=299||en<=0?Ln(this):(Tt.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+en),lr())},wn.ontimeout=wn.onerror=function(){Xt=null,en<=0?Bn(this):(Tt.warn("License request network request failed . Retrying it... Pending retries: "+en),lr())},wn.onabort=function(){Tn(this)},Vt.trigger(rn.LICENSE_REQUEST_SENDING,{url:Ct.url,headers:Ct.headers,payload:Ct.data,sessionId:Ct.sessionId}),Xt=wn,wn.send(Ct.data)}function Dr(){Xt&&(Xt.onloadend=Xt.onerror=Xt.onprogress=void 0,Xt.abort(),Xt=null),Bt&&(clearTimeout(Bt),Bt=null)}function Wr(Ct,en){if(en)for(var fn in en)Ct[fn]=en[fn]}function Xr(Ct,en,fn,Ln,Tn){var Bn="NONE",wn=null;Ct.response&&(Bn=Tn.getErrorResponse(Ct.response,fn,Ln),wn={serverResponse:Ct.response||null,responseCode:Ct.status||null,responseText:Ct.statusText||null}),zn(en,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+fn+' update, XHR complete. status is "'+Ct.statusText+'" ('+Ct.status+"), readyState is "+Ct.readyState+".  Response is "+Bn,wn))}function Qr(Ct,en){return Ct?Ct.reduce(function(fn,Ln){return fn.then(function(){return Ln(en)})},Promise.resolve()):Promise.resolve()}function Or(Ct,en){if(!Zt.get().streaming.protection.ignoreEmeEncryptedEvent){if(Tt.debug("DRM: onNeedKey"),Ct.key.initDataType!=="cenc")return void Tt.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Ct.key.initDataType);if(ct.length===0&&(Tt.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(en=en===void 0?1:en+1)<5))return void pt.push(setTimeout(function(){Or(Ct,en)},500));var fn=Ct.key.initData;if(ArrayBuffer.isView(fn)&&(fn=fn.buffer),Lt){var Ln=t.getPSSHForKeySystem(Lt,fn);if(Ln&&Pn(Ln))return}Tt.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(fn)));var Tn=yt.getSupportedKeySystemsFromSegmentPssh(fn,je,ot);if(Tn.length===0)return void Tt.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bn){Ze.push(Bn),pn(Bn,!1)})(Tn)}}return Et={initializeForMedia:function(Ct){if(!Ct)throw new Error("mediaInfo can not be null or undefined");sn(),ct.push(Ct)},clearMediaInfoArray:function(){ct=[]},handleKeySystemFromManifest:function(){if(ct&&ct.length!==0){var Ct=[];ct.forEach(function(en){var fn=yt.getSupportedKeySystemsFromContentProtection(en.contentProtection,je,ot);fn.length>0&&(Ct.length===0&&(Ct=fn),Ze.push(fn))}),Ct&&Ct.length>0&&pn(Ct,!0)}},createKeySession:Cn,loadKeySession:jn,removeKeySession:function(Ct){sn(),zt.removeKeySession(Ct)},closeKeySession:function(Ct){sn(),zt.closeKeySession(Ct)},setServerCertificate:function(Ct){sn(),zt.setServerCertificate(Ct)},setMediaElement:Hn,setSessionType:function(Ct){ot=Ct},setRobustnessLevel:function(Ct){Ot=Ct},setProtectionData:function(Ct){je=Ct,yt.setProtectionData(Ct)},getSupportedKeySystemsFromContentProtection:function(Ct){return sn(),yt.getSupportedKeySystemsFromContentProtection(Ct,je,ot)},getKeySystems:function(){return yt?yt.getKeySystems():[]},setKeySystems:function(Ct){yt&&yt.setKeySystems(Ct)},stop:function(){Dr(),zt&&zt.stop()},reset:function(){Vt.off(rn.INTERNAL_KEY_MESSAGE,ur,Et),Vt.off(rn.INTERNAL_KEY_STATUS_CHANGED,ir,Et),sn(),Dr(),Hn(null),Lt=null,Wt=!1,zt&&(zt.reset(),zt=null),pt.forEach(function(Ct){return clearTimeout(Ct)}),pt=[],ct=[],Ze=[]}},Tt=gn.getLogger(Et),Ze=[],ct=[],ot="temporary",Ot="",Xt=null,Bt=null,Vt.on(rn.INTERNAL_KEY_MESSAGE,ur,Et),Vt.on(rn.INTERNAL_KEY_STATUS_CHANGED,ir,Et),Et}K.__dashjs_factory_name="ProtectionController";var re=$.Z.getClassFactory(K),H=function bt(Et,Tt){(function(Ze,ct){if(!(Ze instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.keyID=Et,this.key=Tt};function ee(bt,Et){for(var Tt=0;Tt<Et.length;Tt++){var Ze=Et[Tt];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(bt,Ze.key,Ze)}}var se=function(){function bt(Ze,ct){if(function(je,ot){if(!(je instanceof ot))throw new TypeError("Cannot call a class as a function")}(this,bt),ct&&ct!=="persistent"&&ct!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Ze,this.type=ct}var Et,Tt;return Et=bt,(Tt=[{key:"toJWK",value:function(){var Ze,ct=this.keyPairs.length,je={keys:[]};for(Ze=0;Ze<ct;Ze++){var ot={kty:"oct",alg:"A128KW",kid:this.keyPairs[Ze].keyID,k:this.keyPairs[Ze].key};je.keys.push(ot)}this.type&&(je.type=this.type);var Ot=JSON.stringify(je),Lt=Ot.length,Wt=new ArrayBuffer(Lt),Xt=new Uint8Array(Wt);for(Ze=0;Ze<Lt;Ze++)Xt[Ze]=Ot.charCodeAt(Ze);return Wt}}])&&ee(Et.prototype,Tt),bt}();function _e(bt,Et){for(var Tt=0;Tt<Et.length;Tt++){var Ze=Et[Tt];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(bt,Ze.key,Ze)}}var X=new(function(){function bt(){(function(Ze,ct){if(!(Ze instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.init()}var Et,Tt;return Et=bt,(Tt=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&_e(Et.prototype,Tt),bt}()),Ae="e2719d58-a985-b3c9-781a-b030af78d30e",Le=X.CLEARKEY_KEYSTEM_STRING,Ye="urn:uuid:"+Ae;function ye(bt){var Et=(bt=bt||{}).BASE64;return{uuid:Ae,schemeIdURI:Ye,systemString:Le,getInitData:function(Tt,Ze){try{var ct=t.parseInitDataFromContentProtection(Tt,Et);if(!ct&&Ze){var je={kids:[function(ot){try{var Ot=ot.replace(/-/g,"");return(Ot=btoa(Ot.match(/\w{2}/g).map(function(Lt){return String.fromCharCode(parseInt(Lt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Ze["cenc:default_KID"])]};ct=new TextEncoder().encode(JSON.stringify(je))}return ct}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(Tt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Tt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Tt,Ze){var ct=null;if(Tt){for(var je=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ze))),ot=[],Ot=0;Ot<je.kids.length;Ot++){var Lt=je.kids[Ot],Wt=Tt.clearkeys&&Tt.clearkeys.hasOwnProperty(Lt)?Tt.clearkeys[Lt]:null;if(!Wt)throw new Error("DRM: ClearKey keyID ("+Lt+") is not known!");ot.push(new H(Lt,Wt))}ct=new se(ot)}return ct}}}ye.__dashjs_factory_name="KeySystemClearKey";var Pe=dashjs.FactoryMaker.getSingletonFactory(ye),He="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",tt=X.CLEARKEY_KEYSTEM_STRING,ve="urn:uuid:"+He;function Oe(bt){var Et,Tt=bt.BASE64,Ze=bt.debug.getLogger(Et);return{uuid:He,schemeIdURI:ve,systemString:tt,getInitData:function(ct){return t.parseInitDataFromContentProtection(ct,Tt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(ct){return new Uint8Array(ct)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(ct,je){var ot=null;if(ct){for(var Ot=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(je))),Lt=[],Wt=0;Wt<Ot.kids.length;Wt++){var Xt=Ot.kids[Wt],Bt=ct.clearkeys&&ct.clearkeys.hasOwnProperty(Xt)?ct.clearkeys[Xt]:null;if(!Bt)throw new Error("DRM: ClearKey keyID ("+Xt+") is not known!");Lt.push(new H(Xt,Bt))}ot=new se(Lt),Ze.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return ot}}}Oe.__dashjs_factory_name="KeySystemW3CClearKey";var _t=dashjs.FactoryMaker.getSingletonFactory(Oe),dt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",ke=X.WIDEVINE_KEYSTEM_STRING,Je="urn:uuid:"+dt;function ge(bt){var Et=(bt=bt||{}).BASE64;return{uuid:dt,schemeIdURI:Je,systemString:ke,getInitData:function(Tt){return t.parseInitDataFromContentProtection(Tt,Et)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Tt){return new Uint8Array(Tt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}ge.__dashjs_factory_name="KeySystemWidevine";var me=dashjs.FactoryMaker.getSingletonFactory(ge),Ue="9a04f079-9840-4286-ab92-e65be0885f95",f=X.PLAYREADY_KEYSTEM_STRING,o="urn:uuid:"+Ue;function v(bt){var Et="utf-16",Tt=(bt=bt||{}).BASE64,Ze=bt.settings;function ct(){if(!Tt||!Tt.hasOwnProperty("decodeArray")||!Tt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Ue,schemeIdURI:o,systemString:f,getInitData:function(je){var ot,Ot,Lt,Wt,Xt,Bt=new Uint8Array([112,115,115,104,0,0,0,0]),yt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),zt=0,Vt=null;if(ct(),!je)return null;if("pssh"in je)return t.parseInitDataFromContentProtection(je,Tt);if("pro"in je)Vt=Tt.decodeArray(je.pro.__text);else{if(!("prheader"in je))return null;Vt=Tt.decodeArray(je.prheader.__text)}return ot=Vt.length,Ot=4+Bt.length+yt.length+4+ot,Lt=new ArrayBuffer(Ot),Wt=new Uint8Array(Lt),(Xt=new DataView(Lt)).setUint32(zt,Ot),zt+=4,Wt.set(Bt,zt),zt+=Bt.length,Wt.set(yt,zt),zt+=yt.length,Xt.setUint32(zt,ot),zt+=4,Wt.set(Vt,zt),zt+=ot,Wt.buffer},getRequestHeadersFromMessage:function(je){var ot,Ot,Lt={},Wt=new DOMParser;if(Ze&&Ze.get().streaming.protection.detectPlayreadyMessageFormat&&Et==="utf-16"&&je&&je.byteLength%2==1)return Lt["Content-Type"]="text/xml; charset=utf-8",Lt;var Xt=Et==="utf-16"?new Uint16Array(je):new Uint8Array(je);ot=String.fromCharCode.apply(null,Xt);for(var Bt=(Ot=Wt.parseFromString(ot,"application/xml")).getElementsByTagName("name"),yt=Ot.getElementsByTagName("value"),zt=0;zt<Bt.length;zt++)Lt[Bt[zt].childNodes[0].nodeValue]=yt[zt].childNodes[0].nodeValue;return Lt.hasOwnProperty("Content")&&(Lt["Content-Type"]=Lt.Content,delete Lt.Content),Lt.hasOwnProperty("Content-Type")||(Lt["Content-Type"]="text/xml; charset=utf-8"),Lt},getLicenseRequestFromMessage:function(je){var ot=null,Ot=new DOMParser;if(Ze&&Ze.get().streaming.protection.detectPlayreadyMessageFormat&&Et==="utf-16"&&je&&je.byteLength%2==1)return je;var Lt=Et==="utf-16"?new Uint16Array(je):new Uint8Array(je);ct();var Wt=String.fromCharCode.apply(null,Lt),Xt=Ot.parseFromString(Wt,"application/xml");if(!Xt.getElementsByTagName("PlayReadyKeyMessage")[0])return je;var Bt=Xt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Bt&&(ot=Tt.decode(Bt)),ot},getLicenseServerURLFromInitData:function(je){if(je)for(var ot=new DataView(je),Ot=ot.getUint16(4,!0),Lt=6,Wt=new DOMParser,Xt=0;Xt<Ot;Xt++){var Bt=ot.getUint16(Lt,!0);Lt+=2;var yt=ot.getUint16(Lt,!0);if(Lt+=2,Bt===1){var zt=je.slice(Lt,Lt+yt),Vt=String.fromCharCode.apply(null,new Uint16Array(zt)),rn=Wt.parseFromString(Vt,"application/xml");if(rn.getElementsByTagName("LA_URL")[0]){var gn=rn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(gn)return gn}if(rn.getElementsByTagName("LUI_URL")[0]){var vn=rn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(vn)return vn}}else Lt+=yt}return null},getCDMData:function(je){var ot,Ot,Lt,Wt;if(ct(),!je)return null;for(ot=[],Wt=0;Wt<je.length;++Wt)ot.push(je.charCodeAt(Wt)),ot.push(0);for(ot=String.fromCharCode.apply(null,ot),ot=Tt.encode(ot),Ot='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",ot),Lt=[],Wt=0;Wt<Ot.length;++Wt)Lt.push(Ot.charCodeAt(Wt)),Lt.push(0);return new Uint8Array(Lt).buffer},setPlayReadyMessageFormat:function(je){if(je!=="utf-8"&&je!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');Et=je}}}v.__dashjs_factory_name="KeySystemPlayReady";var S=dashjs.FactoryMaker.getSingletonFactory(v);function W(bt){var Et=(bt=bt||{}).BASE64,Tt={};return Tt[X.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Ze){return Et.decodeArray(Ze.license)},getErrorResponse:function(Ze){return Ze}},Tt[X.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Ze){return Ze},getErrorResponse:function(Ze){return String.fromCharCode.apply(null,new Uint8Array(Ze))}},{getServerURLFromMessage:function(Ze){return Ze},getHTTPMethod:function(){return"POST"},getResponseType:function(Ze){return Tt[Ze].responseType},getLicenseMessage:function(Ze,ct){return function(){if(!Et||!Et.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),Tt[ct].getLicenseMessage(Ze)},getErrorResponse:function(Ze,ct){return Tt[ct].getErrorResponse(Ze)}}}W.__dashjs_factory_name="DRMToday";var V=dashjs.FactoryMaker.getSingletonFactory(W);function Se(){var bt="http://schemas.xmlsoap.org/soap/envelope/";function Et(ct){var je=String.fromCharCode.apply(null,new Uint8Array(ct));return decodeURIComponent(escape(je))}function Tt(ct){if(window.DOMParser){var je=Et(ct),ot=new window.DOMParser().parseFromString(je,"text/xml"),Ot=ot?ot.getElementsByTagNameNS(bt,"Envelope")[0]:null,Lt=Ot?Ot.getElementsByTagNameNS(bt,"Body")[0]:null;if(Lt&&Lt.getElementsByTagNameNS(bt,"Fault")[0])return null}return ct}function Ze(ct){var je="",ot="",Ot="",Lt=-1,Wt=-1;if(window.DOMParser){var Xt=Et(ct),Bt=new window.DOMParser().parseFromString(Xt,"text/xml"),yt=Bt?Bt.getElementsByTagNameNS(bt,"Envelope")[0]:null,zt=yt?yt.getElementsByTagNameNS(bt,"Body")[0]:null,Vt=zt?zt.getElementsByTagNameNS(bt,"Fault")[0]:null,rn=Vt?Vt.getElementsByTagName("detail")[0]:null,gn=rn?rn.getElementsByTagName("Exception")[0]:null,vn=null;if(Vt===null)return Xt;je=(vn=Vt.getElementsByTagName("faultstring")[0].firstChild)?vn.nodeValue:null,gn!==null&&(ot=(vn=gn.getElementsByTagName("StatusCode")[0])?vn.firstChild.nodeValue:null,Lt=(Ot=(vn=gn.getElementsByTagName("Message")[0])?vn.firstChild.nodeValue:null)?Ot.lastIndexOf("[")+1:-1,Wt=Ot?Ot.indexOf("]"):-1,Ot=Ot?Ot.substring(Lt,Wt):"")}var $t="code: ".concat(ot,", name: ").concat(je);return Ot&&($t+=", message: ".concat(Ot)),$t}return{getServerURLFromMessage:function(ct){return ct},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(ct){return Tt.call(this,ct)},getErrorResponse:function(ct){return Ze.call(this,ct)}}}Se.__dashjs_factory_name="PlayReady";var ze=$.Z.getSingletonFactory(Se);function Me(){return{getServerURLFromMessage:function(bt){return bt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(bt){return bt},getErrorResponse:function(bt){return String.fromCharCode.apply(null,new Uint8Array(bt))}}}Me.__dashjs_factory_name="Widevine";var De=dashjs.FactoryMaker.getSingletonFactory(Me);function be(){return{getServerURLFromMessage:function(bt){return bt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(bt){if(!bt.hasOwnProperty("keys"))return null;for(var Et=[],Tt=0;Tt<bt.keys.length;Tt++){var Ze=bt.keys[Tt],ct=Ze.kid.replace(/=/g,""),je=Ze.k.replace(/=/g,"");Et.push(new H(ct,je))}return new se(Et)},getErrorResponse:function(bt){return String.fromCharCode.apply(null,new Uint8Array(bt))}}}be.__dashjs_factory_name="ClearKey";var xe=dashjs.FactoryMaker.getSingletonFactory(be);function Qe(){var bt,Et,Tt,Ze,ct,je,ot,Ot,Lt=this.context;function Wt(yt,zt){return zt&&yt in zt?zt[yt]:null}function Xt(yt,zt){return yt&&yt.sessionId?yt.sessionId:zt&&zt.sessionId?zt.sessionId:null}function Bt(yt,zt){return yt&&yt.sessionType?yt.sessionType:zt}return bt={initialize:function(){var yt;Ze=[],yt=S(Lt).getInstance({BASE64:ct,settings:je}),Ze.push(yt),yt=me(Lt).getInstance({BASE64:ct}),Ze.push(yt),yt=Pe(Lt).getInstance({BASE64:ct}),Ze.push(yt),ot=yt,yt=_t(Lt).getInstance({BASE64:ct,debug:Et}),Ze.push(yt),Ot=yt},setProtectionData:function(yt){for(var zt,Vt,rn=0;rn<Ze.length;rn++){var gn=Ze[rn];gn.hasOwnProperty("init")&&gn.init((zt=gn.systemString,Vt=void 0,Vt=null,yt&&(Vt=zt in yt?yt[zt]:null),Vt))}},isClearKey:function(yt){return yt===ot||yt===Ot},initDataEquals:function(yt,zt){if(yt.byteLength===zt.byteLength){for(var Vt=new Uint8Array(yt),rn=new Uint8Array(zt),gn=0;gn<Vt.length;gn++)if(Vt[gn]!==rn[gn])return!1;return!0}return!1},getKeySystems:function(){return Ze},setKeySystems:function(yt){Ze=yt},getKeySystemBySystemString:function(yt){for(var zt=0;zt<Ze.length;zt++)if(Ze[zt].systemString===yt)return Ze[zt];return null},getSupportedKeySystemsFromContentProtection:function(yt,zt,Vt){var rn,gn,vn,$t,pt=[];if(yt){var At=t.findCencContentProtection(yt);for(vn=0;vn<Ze.length;++vn){var Zt=Wt((gn=Ze[vn]).systemString,zt);for($t=0;$t<yt.length;++$t)if((rn=yt[$t]).schemeIdUri.toLowerCase()===gn.schemeIdURI){var nn=gn.getInitData(rn,At);pt.push({ks:Ze[vn],keyId:rn.keyId,initData:nn,protData:Zt,cdmData:gn.getCDMData(Zt?Zt.cdmData:null),sessionId:Xt(Zt,rn),sessionType:Bt(Zt,Vt)})}}}return pt},getSupportedKeySystemsFromSegmentPssh:function(yt,zt,Vt){for(var rn,gn=[],vn=t.parsePSSHList(yt),$t=0;$t<Ze.length;++$t){var pt=Wt((rn=Ze[$t]).systemString,zt);rn.uuid in vn&&gn.push({ks:rn,initData:vn[rn.uuid],protData:pt,cdmData:rn.getCDMData(pt?pt.cdmData:null),sessionId:Xt(pt),sessionType:Bt(pt,Vt)})}return gn},getLicenseServerModelInstance:function(yt,zt,Vt){if(Vt==="license-release"||Vt==="individualization-request")return null;var rn=null;return zt&&zt.hasOwnProperty("drmtoday")?rn=V(Lt).getInstance({BASE64:ct}):yt.systemString===X.WIDEVINE_KEYSTEM_STRING?rn=De(Lt).getInstance():yt.systemString===X.PLAYREADY_KEYSTEM_STRING?rn=ze(Lt).getInstance():yt.systemString===X.CLEARKEY_KEYSTEM_STRING&&(rn=xe(Lt).getInstance()),rn},processClearKeyLicenseRequest:function(yt,zt,Vt){try{return yt.getClearKeysFromProtectionData(zt,Vt)}catch{return Tt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(yt){yt&&(yt.debug&&(Et=yt.debug,Tt=Et.getLogger(bt)),yt.BASE64&&(ct=yt.BASE64),yt.settings&&(je=yt.settings))}},bt}Qe.__dashjs_factory_name="ProtectionKeyController";var mt=dashjs.FactoryMaker.getSingletonFactory(Qe);function it(bt){return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},it(bt)}function Ut(bt,Et){return Ut=Object.setPrototypeOf||function(Tt,Ze){return Tt.__proto__=Ze,Tt},Ut(bt,Et)}function It(bt,Et){return!Et||it(Et)!=="object"&&typeof Et!="function"?function(Tt){if(Tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt}(bt):Et}function Ft(bt){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)},Ft(bt)}var Pt=new(function(bt){(function(je,ot){if(typeof ot!="function"&&ot!==null)throw new TypeError("Super expression must either be null or a function");je.prototype=Object.create(ot&&ot.prototype,{constructor:{value:je,writable:!0,configurable:!0}}),ot&&Ut(je,ot)})(ct,bt);var Et,Tt,Ze=(Et=ct,Tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var je,ot=Ft(Et);if(Tt){var Ot=Ft(this).constructor;je=Reflect.construct(ot,arguments,Ot)}else je=ot.apply(this,arguments);return It(this,je)});function ct(){var je;return function(ot,Ot){if(!(ot instanceof Ot))throw new TypeError("Cannot call a class as a function")}(this,ct),(je=Ze.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",je.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",je.KEY_ADDED="public_keyAdded",je.KEY_ERROR="public_keyError",je.KEY_MESSAGE="public_keyMessage",je.KEY_SESSION_CLOSED="public_keySessionClosed",je.KEY_SESSION_CREATED="public_keySessionCreated",je.KEY_SESSION_REMOVED="public_keySessionRemoved",je.KEY_STATUSES_CHANGED="public_keyStatusesChanged",je.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",je.KEY_SYSTEM_SELECTED="public_keySystemSelected",je.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",je.LICENSE_REQUEST_SENDING="public_licenseRequestSending",je.NEED_KEY="needkey",je.PROTECTION_CREATED="public_protectioncreated",je.PROTECTION_DESTROYED="public_protectiondestroyed",je.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",je.TEARDOWN_COMPLETE="protectionTeardownComplete",je.VIDEO_ELEMENT_SELECTED="videoElementSelected",je.KEY_SESSION_UPDATED="public_keySessionUpdated",je}return ct}(P(8342).Z)),tn=function bt(Et,Tt){(function(Ze,ct){if(!(Ze instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.initData=Et,this.initDataType=Tt},dn=function bt(Et,Tt,Ze,ct){(function(je,ot){if(!(je instanceof ot))throw new TypeError("Cannot call a class as a function")})(this,bt),this.sessionToken=Et,this.message=Tt,this.defaultURL=Ze,this.messageType=ct||"license-request"},An=function bt(Et,Tt){(function(Ze,ct){if(!(Ze instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.keySystem=Et,this.ksConfiguration=Tt},_n={};function Rn(bt){bt=bt||{};var Et,Tt,Ze,ct,je,ot,Ot,Lt,Wt=this.context,Xt=bt.eventBus,Bt=bt.events,yt=bt.debug;function zt(pt,At,Zt,nn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var sn="Insecure origins are not allowed";return Xt.trigger(Bt.KEY_SYSTEM_ACCESS_COMPLETE,{error:sn}),void nn({error:sn})}var pn=pt[At].protData&&pt[At].protData.systemStringPriority?pt[At].protData.systemStringPriority:null,En=pt[At].configs,Yn=pt[At].ks,jn=Yn.systemString;(function(Cn,Un){return new Promise(function(Pn,Hn){Vt(Cn,Un,0,Pn,Hn)})})(pn||(_n[jn]?_n[jn]:[jn]),En).then(function(Cn){var Un=typeof Cn.getConfiguration=="function"?Cn.getConfiguration():null,Pn=new An(Yn,Un);Pn.mksa=Cn,Xt.trigger(Bt.KEY_SYSTEM_ACCESS_COMPLETE,{data:Pn}),Zt({data:Pn})}).catch(function(Cn){if(At+1<pt.length)zt(pt,At+1,Zt,nn);else{var Un="Key system access denied! ";Xt.trigger(Bt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Un+Cn.message}),nn({error:Un+Cn.message})}})}function Vt(pt,At,Zt,nn,sn){var pn=pt[Zt];Tt.debug("Requesting key system access for system string ".concat(pn)),navigator.requestMediaKeySystemAccess(pn,At).then(function(En){En.selectedSystemString=pn,nn(En)}).catch(function(En){Zt+1<pt.length?Vt(pt,At,Zt+1,nn,sn):sn(En)})}function rn(pt){if(!pt||!pt.session)return Promise.resolve;var At=pt.session;return At.removeEventListener("keystatuseschange",pt),At.removeEventListener("message",pt),At.close()}function gn(pt){for(var At=0;At<ot.length;At++)if(ot[At]===pt){ot.splice(At,1);break}}function vn(pt){var At,Zt;return pt&&pt.length>0&&(pt[0]&&(typeof pt[0]=="string"?At=pt[0]:Zt=pt[0]),pt[1]&&(typeof pt[1]=="string"?At=pt[1]:Zt=pt[1])),{status:At,keyId:Zt}}function $t(pt,At){var Zt={session:pt,keyId:At.keyId,initData:At.initData,sessionId:At.sessionId,sessionType:At.sessionType,handleEvent:function(nn){switch(nn.type){case"keystatuseschange":Xt.trigger(Bt.KEY_STATUSES_CHANGED,{data:this}),nn.target.keyStatuses.forEach(function(){var pn=vn(arguments);pn.status==="expired"?Xt.trigger(Bt.INTERNAL_KEY_STATUS_CHANGED,{error:new c.Z(n.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,n.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Xt.trigger(Bt.INTERNAL_KEY_STATUS_CHANGED,pn)});break;case"message":var sn=ArrayBuffer.isView(nn.message)?nn.message.buffer:nn.message;Xt.trigger(Bt.INTERNAL_KEY_MESSAGE,{data:new dn(this,sn,void 0,nn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return pt.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return pt.expiration},getKeyStatuses:function(){return pt.keyStatuses},getUsable:function(){var nn=!1;return pt.keyStatuses.forEach(function(){var sn=vn(arguments);sn.status==="usable"&&(nn=!0)}),nn}};return pt.addEventListener("keystatuseschange",Zt),pt.addEventListener("message",Zt),pt.closed.then(function(){gn(Zt),Tt.debug("DRM: Session closed.  SessionID = "+Zt.getSessionId()),Xt.trigger(Bt.KEY_SESSION_CLOSED,{data:Zt.getSessionId()})}),ot.push(Zt),Zt}return Et={getAllInitData:function(){for(var pt=[],At=0;At<ot.length;At++)ot[At].initData&&pt.push(ot[At].initData);return pt},getSessions:function(){return ot},requestKeySystemAccess:function(pt){return new Promise(function(At,Zt){zt(pt,0,At,Zt)})},selectKeySystem:function(pt){return new Promise(function(At,Zt){pt.mksa.createMediaKeys().then(function(nn){return Ze=pt.keySystem,je=nn,ct?ct.setMediaKeys(je):Promise.resolve()}).then(function(){At(Ze)}).catch(function(){Zt({error:"Error selecting keys system ("+pt.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(pt){ct!==pt&&(ct&&(ct.removeEventListener("encrypted",Ot),ct.setMediaKeys&&ct.setMediaKeys(null)),(ct=pt)&&(ct.addEventListener("encrypted",Ot),ct.setMediaKeys&&je&&ct.setMediaKeys(je)))},setServerCertificate:function(pt){if(!Ze||!je)throw new Error("Can not set server certificate until you have selected a key system");je.setServerCertificate(pt).then(function(){Tt.info("DRM: License server certificate successfully updated."),Xt.trigger(Bt.SERVER_CERTIFICATE_UPDATED)}).catch(function(At){Xt.trigger(Bt.SERVER_CERTIFICATE_UPDATED,{error:new c.Z(n.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,n.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+At.name)})})},createKeySession:function(pt){if(!Ze||!je)throw new Error("Can not create sessions until you have selected a key system");var At=je.createSession(pt.sessionType),Zt=$t(At,pt),nn=Ze.systemString===X.CLEARKEY_KEYSTEM_STRING&&(pt.initData||pt.protData&&pt.protData.clearkeys)?X.INITIALIZATION_DATA_TYPE_KEYIDS:X.INITIALIZATION_DATA_TYPE_CENC;At.generateRequest(nn,pt.initData).then(function(){Tt.debug("DRM: Session created.  SessionID = "+Zt.getSessionId()),Xt.trigger(Bt.KEY_SESSION_CREATED,{data:Zt})}).catch(function(sn){gn(Zt),Xt.trigger(Bt.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+sn.name)})})},updateKeySession:function(pt,At){var Zt=pt.session;Lt.isClearKey(Ze)&&(At=At.toJWK()),Zt.update(At).then(function(){Xt.trigger(Bt.KEY_SESSION_UPDATED)}).catch(function(nn){Xt.trigger(Bt.KEY_ERROR,{error:new c.Z(n.MEDIA_KEYERR_CODE,"Error sending update() message! "+nn.name,pt)})})},loadKeySession:function(pt){if(!Ze||!je)throw new Error("Can not load sessions until you have selected a key system");for(var At=pt.sessionId,Zt=0;Zt<ot.length;Zt++)if(At===ot[Zt].sessionId)return void Tt.warn("DRM: Ignoring session ID because we have already seen it!");var nn=je.createSession(pt.sessionType),sn=$t(nn,pt);nn.load(At).then(function(pn){pn?(Tt.debug("DRM: Session loaded.  SessionID = "+sn.getSessionId()),Xt.trigger(Bt.KEY_SESSION_CREATED,{data:sn})):(gn(sn),Xt.trigger(Bt.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+At+")")}))}).catch(function(pn){gn(sn),Xt.trigger(Bt.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+At+")! "+pn.name)})})},removeKeySession:function(pt){pt.session.remove().then(function(){Tt.debug("DRM: Session removed.  SessionID = "+pt.getSessionId()),Xt.trigger(Bt.KEY_SESSION_REMOVED,{data:pt.getSessionId()})},function(At){Xt.trigger(Bt.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+pt.getSessionId()+"). "+At.name})})},closeKeySession:function(pt){rn(pt).catch(function(At){gn(pt),Xt.trigger(Bt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+pt.getSessionId()+") "+At.name})})},stop:function(){for(var pt,At=0;At<ot.length;At++)(pt=ot[At]).getUsable()||(rn(pt),gn(pt))},reset:function(){var pt,At=ot.length;At!==0?function(){for(var Zt=function(sn){gn(sn),ot.length===0&&(ct?(ct.removeEventListener("encrypted",Ot),ct.setMediaKeys(null).then(function(){Xt.trigger(Bt.TEARDOWN_COMPLETE)})):Xt.trigger(Bt.TEARDOWN_COMPLETE))},nn=0;nn<At;nn++)(function(sn){rn(pt),Zt(sn)})(pt=ot[nn])}():Xt.trigger(Bt.TEARDOWN_COMPLETE)}},Tt=yt.getLogger(Et),Ze=null,ct=null,je=null,ot=[],Lt=mt(Wt).getInstance(),Ot={handleEvent:function(pt){if(pt.type==="encrypted"&&pt.initData){var At=ArrayBuffer.isView(pt.initData)?pt.initData.buffer:pt.initData;Xt.trigger(Bt.NEED_KEY,{key:new tn(At,pt.initDataType)})}}},Et}_n[X.PLAYREADY_KEYSTEM_STRING]=[X.PLAYREADY_KEYSTEM_STRING,X.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],_n[X.WIDEVINE_KEYSTEM_STRING]=[X.WIDEVINE_KEYSTEM_STRING],_n[X.CLEARKEY_KEYSTEM_STRING]=[X.CLEARKEY_KEYSTEM_STRING],Rn.__dashjs_factory_name="ProtectionModel_21Jan2015";var qn=dashjs.FactoryMaker.getClassFactory(Rn);function yn(bt){bt=bt||{};var Et,Tt,Ze,ct,je,ot,Ot,Lt,Wt,Xt=this.context,Bt=bt.eventBus,yt=bt.events,zt=bt.debug,Vt=bt.api;function rn(){try{for(var $t=0;$t<Ot.length;$t++)gn(Ot[$t]);Ze&&Ze.removeEventListener(Vt.needkey,Lt),Bt.trigger(yt.TEARDOWN_COMPLETE)}catch(pt){Bt.trigger(yt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+pt.message})}}function gn($t){var pt=$t.session;pt.removeEventListener(Vt.error,$t),pt.removeEventListener(Vt.message,$t),pt.removeEventListener(Vt.ready,$t),pt.removeEventListener(Vt.close,$t);for(var At=0;At<Ot.length;At++)if(Ot[At]===$t){Ot.splice(At,1);break}pt[Vt.release]()}function vn(){var $t=null,pt=function(){Ze.removeEventListener("loadedmetadata",$t),Ze[Vt.setMediaKeys](je),Bt.trigger(yt.VIDEO_ELEMENT_SELECTED)};Ze.readyState>=1?pt():($t=pt.bind(this),Ze.addEventListener("loadedmetadata",$t))}return Et={getAllInitData:function(){for(var $t=[],pt=0;pt<Ot.length;pt++)$t.push(Ot[pt].initData);return $t},getSessions:function(){return Ot},requestKeySystemAccess:function($t){return new Promise(function(pt,At){for(var Zt=!1,nn=0;nn<$t.length;nn++)for(var sn=$t[nn].ks.systemString,pn=$t[nn].configs,En=null,Yn=null,jn=0;jn<pn.length;jn++){var Cn=pn[jn].audioCapabilities,Un=pn[jn].videoCapabilities;if(Cn&&Cn.length!==0){En=[];for(var Pn=0;Pn<Cn.length;Pn++)window[Vt.MediaKeys].isTypeSupported(sn,Cn[Pn].contentType)&&En.push(Cn[Pn])}if(Un&&Un.length!==0){Yn=[];for(var Hn=0;Hn<Un.length;Hn++)window[Vt.MediaKeys].isTypeSupported(sn,Un[Hn].contentType)&&Yn.push(Un[Hn])}if(!(!En&&!Yn||En&&En.length===0||Yn&&Yn.length===0)){Zt=!0;var mr=new y(En,Yn),ir=Wt.getKeySystemBySystemString(sn),ur=new An(ir,mr);Bt.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ur}),pt({data:ur});break}}if(!Zt){var zn="Key system access denied! -- No valid audio/video content configurations detected!";Bt.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:zn}),At({error:zn})}})},selectKeySystem:function($t){return new Promise(function(pt,At){try{je=$t.mediaKeys=new window[Vt.MediaKeys]($t.keySystem.systemString),ct=$t.keySystem,ot=$t,Ze&&vn(),pt(ct)}catch{At({error:"Error selecting keys system ("+ct.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function($t){Ze!==$t&&(Ze&&Ze.removeEventListener(Vt.needkey,Lt),(Ze=$t)&&(Ze.addEventListener(Vt.needkey,Lt),je&&vn()))},createKeySession:function($t){if(!ct||!je||!ot)throw new Error("Can not create sessions until you have selected a key system");var pt=null;if(ot.ksConfiguration.videoCapabilities&&ot.ksConfiguration.videoCapabilities.length>0&&(pt=ot.ksConfiguration.videoCapabilities[0]),pt===null&&ot.ksConfiguration.audioCapabilities&&ot.ksConfiguration.audioCapabilities.length>0&&(pt=ot.ksConfiguration.audioCapabilities[0]),pt===null)throw new Error("Can not create sessions for unknown content types.");var At=pt.contentType,Zt=je.createSession(At,new Uint8Array($t.initData),$t.cdmData?new Uint8Array($t.cdmData):null),nn=function(sn,pn){return{session:sn,keyId:pn.keyId,initData:pn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(En){switch(En.type){case Vt.error:Bt.trigger(yt.KEY_ERROR,{error:new c.Z(n.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Vt.message:var Yn=ArrayBuffer.isView(En.message)?En.message.buffer:En.message;Bt.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new dn(this,Yn,En.destinationURL)});break;case Vt.ready:Tt.debug("DRM: Key added."),Bt.trigger(yt.KEY_ADDED);break;case Vt.close:Tt.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Bt.trigger(yt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Zt,$t);Zt.addEventListener(Vt.error,nn),Zt.addEventListener(Vt.message,nn),Zt.addEventListener(Vt.ready,nn),Zt.addEventListener(Vt.close,nn),Ot.push(nn),Tt.debug("DRM: Session created.  SessionID = "+nn.getSessionId()),Bt.trigger(yt.KEY_SESSION_CREATED,{data:nn})},updateKeySession:function($t,pt){var At=$t.session;Wt.isClearKey(ct)?At.update(new Uint8Array(pt.toJWK())):At.update(new Uint8Array(pt)),Bt.trigger(yt.KEY_SESSION_UPDATED)},closeKeySession:gn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:rn,reset:rn},Tt=zt.getLogger(Et),Ze=null,ct=null,je=null,ot=null,Ot=[],Wt=mt(Xt).getInstance(),Lt={handleEvent:function($t){if($t.type===Vt.needkey&&$t.initData){var pt=ArrayBuffer.isView($t.initData)?$t.initData.buffer:$t.initData;Bt.trigger(yt.NEED_KEY,{key:new tn(pt,"cenc")})}}},Et}yn.__dashjs_factory_name="ProtectionModel_3Feb2014";var Qn=dashjs.FactoryMaker.getClassFactory(yn);function xn(bt){bt=bt||{};var Et,Tt,Ze,ct,je,ot,Ot,Lt,Wt,Xt=this.context,Bt=bt.eventBus,yt=bt.events,zt=bt.debug,Vt=bt.api,rn=bt.errHandler;function gn(){Ze&&pt();for(var At=0;At<Ot.length;At++)vn(Ot[At]);Bt.trigger(yt.TEARDOWN_COMPLETE)}function vn(At){try{Ze[Vt.cancelKeyRequest](ct.systemString,At.sessionId)}catch(Zt){Bt.trigger(yt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+At.sessionId+") "+Zt.message})}}function $t(At,Zt){if(Zt&&At){for(var nn=At.length,sn=0;sn<nn;sn++)if(At[sn].sessionId==Zt)return At[sn];return null}return null}function pt(){Ze.removeEventListener(Vt.keyerror,Wt),Ze.removeEventListener(Vt.needkey,Wt),Ze.removeEventListener(Vt.keymessage,Wt),Ze.removeEventListener(Vt.keyadded,Wt)}return Et={getAllInitData:function(){for(var At=[],Zt=0;Zt<ot.length;Zt++)At.push(ot[Zt].initData);for(var nn=0;nn<Ot.length;nn++)At.push(Ot[nn].initData);return At},getSessions:function(){return Ot.concat(ot)},requestKeySystemAccess:function(At){return new Promise(function(Zt,nn){var sn=Ze;sn||(sn=document.createElement("video"));for(var pn=!1,En=0;En<At.length;En++)for(var Yn=At[En].ks.systemString,jn=At[En].configs,Cn=null,Un=0;Un<jn.length;Un++){var Pn=jn[Un].videoCapabilities;if(Pn&&Pn.length!==0){Cn=[];for(var Hn=0;Hn<Pn.length;Hn++)sn.canPlayType(Pn[Hn].contentType,Yn)!==""&&Cn.push(Pn[Hn])}if(Cn&&(!Cn||Cn.length!==0)){pn=!0;var mr=new y(null,Cn),ir=je.getKeySystemBySystemString(Yn),ur=new An(ir,mr);Bt.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ur}),Zt({data:ur});break}}if(!pn){var zn="Key system access denied! -- No valid audio/video content configurations detected!";Bt.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:zn}),nn({error:zn})}})},selectKeySystem:function(At){return ct=At.keySystem,Promise.resolve(ct)},setMediaElement:function(At){if(Ze!==At){if(Ze){pt();for(var Zt=0;Zt<Ot.length;Zt++)vn(Ot[Zt]);Ot=[]}(Ze=At)&&(Ze.addEventListener(Vt.keyerror,Wt),Ze.addEventListener(Vt.needkey,Wt),Ze.addEventListener(Vt.keymessage,Wt),Ze.addEventListener(Vt.keyadded,Wt),Bt.trigger(yt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(At){if(!ct)throw new Error("Can not create sessions until you have selected a key system");if(Lt||Ot.length===0){var Zt={sessionId:null,keyId:At.keyId,initData:At.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return ot.push(Zt),Ze[Vt.generateKeyRequest](ct.systemString,new Uint8Array(At.initData)),Zt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(At,Zt){var nn=At.sessionId;if(je.isClearKey(ct))for(var sn=0;sn<Zt.keyPairs.length;sn++)Ze[Vt.addKey](ct.systemString,Zt.keyPairs[sn].key,Zt.keyPairs[sn].keyID,nn);else Ze[Vt.addKey](ct.systemString,new Uint8Array(Zt),new Uint8Array(At.initData),nn);Bt.trigger(yt.KEY_SESSION_UPDATED)},closeKeySession:vn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:gn,reset:gn},Tt=zt.getLogger(Et),Ze=null,ct=null,ot=[],Ot=[],je=mt(Xt).getInstance(),Wt={handleEvent:function(At){var Zt=null;switch(At.type){case Vt.needkey:var nn=ArrayBuffer.isView(At.initData)?At.initData.buffer:At.initData;Bt.trigger(yt.NEED_KEY,{key:new tn(nn,"cenc")});break;case Vt.keyerror:if((Zt=$t(Ot,At.sessionId))||(Zt=$t(ot,At.sessionId)),Zt){var sn=n.MEDIA_KEYERR_CODE,pn="";switch(At.errorCode.code){case 1:sn=n.MEDIA_KEYERR_UNKNOWN_CODE,pn+="MEDIA_KEYERR_UNKNOWN - "+n.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:sn=n.MEDIA_KEYERR_CLIENT_CODE,pn+="MEDIA_KEYERR_CLIENT - "+n.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:sn=n.MEDIA_KEYERR_SERVICE_CODE,pn+="MEDIA_KEYERR_SERVICE - "+n.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:sn=n.MEDIA_KEYERR_OUTPUT_CODE,pn+="MEDIA_KEYERR_OUTPUT - "+n.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:sn=n.MEDIA_KEYERR_HARDWARECHANGE_CODE,pn+="MEDIA_KEYERR_HARDWARECHANGE - "+n.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:sn=n.MEDIA_KEYERR_DOMAIN_CODE,pn+="MEDIA_KEYERR_DOMAIN - "+n.MEDIA_KEYERR_DOMAIN_MESSAGE}pn+="  System Code = "+At.systemCode,Bt.trigger(yt.KEY_ERROR,{error:new c.Z(sn,pn,Zt)})}else Tt.error("No session token found for key error");break;case Vt.keyadded:(Zt=$t(Ot,At.sessionId))||(Zt=$t(ot,At.sessionId)),Zt?(Tt.debug("DRM: Key added."),Bt.trigger(yt.KEY_ADDED,{data:Zt})):Tt.debug("No session token found for key added");break;case Vt.keymessage:if((Lt=At.sessionId!==null&&At.sessionId!==void 0)?!(Zt=$t(Ot,At.sessionId))&&ot.length>0&&(Zt=ot.shift(),Ot.push(Zt),Zt.sessionId=At.sessionId,Bt.trigger(yt.KEY_SESSION_CREATED,{data:Zt})):ot.length>0&&(Zt=ot.shift(),Ot.push(Zt),ot.length!==0&&rn.error(new c.Z(n.MEDIA_KEY_MESSAGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Zt){var En=ArrayBuffer.isView(At.message)?At.message.buffer:At.message;Zt.keyMessage=En,Bt.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new dn(Zt,En,At.defaultURL)})}else Tt.warn("No session token found for key message")}}},Et}xn.__dashjs_factory_name="ProtectionModel_01b";var Vn=dashjs.FactoryMaker.getClassFactory(xn),er=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Kn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function nr(){var bt,Et=this.context;function Tt(Ze,ct){for(var je=0;je<ct.length;je++){var ot=ct[je];if(typeof Ze[ot[Object.keys(ot)[0]]]=="function")return ot}return null}return bt={createProtectionSystem:function(Ze){var ct=null,je=mt(Et).getInstance();je.setConfig({debug:Ze.debug,BASE64:Ze.BASE64,settings:Ze.settings}),je.initialize();var ot=function(Ot){var Lt=Ot.debug,Wt=Lt.getLogger(bt),Xt=Ot.eventBus,Bt=Ot.errHandler,yt=Ot.videoModel?Ot.videoModel.getElement():null;return yt&&yt.onencrypted===void 0||yt&&yt.mediaKeys===void 0?Tt(yt,Kn)?(Wt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Qn(Et).create({debug:Lt,eventBus:Xt,events:Ot.events,api:Tt(yt,Kn)})):Tt(yt,er)?(Wt.info("EME detected on this user agent! (ProtectionModel_01b)"),Vn(Et).create({debug:Lt,eventBus:Xt,errHandler:Bt,events:Ot.events,api:Tt(yt,er)})):(Wt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Wt.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),qn(Et).create({debug:Lt,eventBus:Xt,events:Ot.events}))}(Ze);return!ct&&ot&&(ct=re(Et).create({protectionModel:ot,protectionKeyController:je,eventBus:Ze.eventBus,debug:Ze.debug,events:Ze.events,BASE64:Ze.BASE64,constants:Ze.constants,cmcdModel:Ze.cmcdModel,customParametersModel:Ze.customParametersModel,settings:Ze.settings}),Ze.capabilities.setEncryptedMediaSupported(!0)),ct}}}nr.__dashjs_factory_name="Protection";var rr=dashjs.FactoryMaker.getClassFactory(nr);rr.events=Pt,rr.errors=n,dashjs.FactoryMaker.updateClassFactory(nr.__dashjs_factory_name,rr);var Cr=rr},2068:function(at,we,P){var ae=P(5448),T={DEFAULT:.5,STRONG:1,WEAK:0};function t(y,p,u){var _,m;return _=y===void 0?-1:y,m=function(n){var c=T.DEFAULT;return n!==T.DEFAULT&&n!==T.STRONG&&n!==T.WEAK||(c=n),c}(u),{quality:_,reason:p===void 0?null:p,priority:m}}t.__dashjs_factory_name="SwitchRequest";var e=ae.Z.getClassFactory(t);e.NO_CHANGE=-1,e.PRIORITY=T,ae.Z.updateClassFactory(t.__dashjs_factory_name,e),we.Z=e},1767:function(at,we,P){var ae=P(5628),T=P(6535),t=P(7423),e=P(895),y=P(6070),p=P(3112),u=P(1914),_=P(5435),m=P(5448),n=P(2068),c=P(3393),d="qualitySwitchRules",I="abandonFragmentRules";function k(F){F=F||{};var $,O,K=this.context,re=F.mediaPlayerModel,H=F.customParametersModel,ee=F.dashMetrics,se=F.settings;function _e(Ae){return Ae.filter(function(Le){return Le.quality>n.Z.NO_CHANGE})}function X(Ae){var Le,Ye,ye,Pe,He,tt={},ve=null;if(Ae.length!==0){for(tt[n.Z.PRIORITY.STRONG]={quality:n.Z.NO_CHANGE,reason:null},tt[n.Z.PRIORITY.WEAK]={quality:n.Z.NO_CHANGE,reason:null},tt[n.Z.PRIORITY.DEFAULT]={quality:n.Z.NO_CHANGE,reason:null},Le=0,Ye=Ae.length;Le<Ye;Le+=1)(ye=Ae[Le]).quality!==n.Z.NO_CHANGE&&(tt[ye.priority].quality===n.Z.NO_CHANGE||tt[ye.priority].quality>ye.quality)&&(tt[ye.priority].quality=ye.quality,tt[ye.priority].reason=ye.reason||null);return tt[n.Z.PRIORITY.WEAK].quality!==n.Z.NO_CHANGE&&(ve=tt[n.Z.PRIORITY.WEAK]),tt[n.Z.PRIORITY.DEFAULT].quality!==n.Z.NO_CHANGE&&(ve=tt[n.Z.PRIORITY.DEFAULT]),tt[n.Z.PRIORITY.STRONG].quality!==n.Z.NO_CHANGE&&(ve=tt[n.Z.PRIORITY.STRONG]),ve&&(Pe=ve.quality,He=ve.reason),(0,n.Z)(K).create(Pe,He)}}return{initialize:function(){$=[],O=[],se.get().streaming.abr.useDefaultABRRules&&(se.get().streaming.abr.ABRStrategy===c.Z.ABR_STRATEGY_L2A?$.push((0,u.Z)(K).create({dashMetrics:ee,settings:se})):se.get().streaming.abr.ABRStrategy===c.Z.ABR_STRATEGY_LoLP?$.push((0,_.Z)(K).create({dashMetrics:ee})):($.push((0,p.Z)(K).create({dashMetrics:ee,mediaPlayerModel:re,settings:se})),$.push((0,ae.Z)(K).create({dashMetrics:ee})),se.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&$.push((0,T.Z)(K).create({dashMetrics:ee,settings:se})),se.get().streaming.abr.additionalAbrRules.switchHistoryRule&&$.push((0,y.Z)(K).create()),se.get().streaming.abr.additionalAbrRules.droppedFramesRule&&$.push((0,e.Z)(K).create()),se.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&O.push((0,t.Z)(K).create({dashMetrics:ee,mediaPlayerModel:re,settings:se})))),H.getAbrCustomRules().forEach(function(Ae){Ae.type===d&&$.push(Ae.rule(K).create()),Ae.type===I&&O.push(Ae.rule(K).create())})},reset:function(){[$,O].forEach(function(Ae){Ae&&Ae.length&&Ae.forEach(function(Le){return Le.reset&&Le.reset()})}),$=[],O=[]},getMaxQuality:function(Ae){return X(_e($.map(function(Le){return Le.getMaxIndex(Ae)})))||(0,n.Z)(K).create()},getMinSwitchRequest:X,shouldAbandonFragment:function(Ae,Le){var Ye=X(_e(O.map(function(ye){return ye.shouldAbandon(Ae,Le)})));return Ye&&(Ye.reason.forceAbandon=!0),Ye||(0,n.Z)(K).create()},getQualitySwitchRules:function(){return $}}}k.__dashjs_factory_name="ABRRulesCollection";var q=m.Z.getClassFactory(k);q.QUALITY_SWITCH_RULES=d,q.ABANDON_FRAGMENT_RULES=I,m.Z.updateSingletonFactory(k.__dashjs_factory_name,q),we.Z=q},7423:function(at,we,P){var ae=P(2068),T=P(5448),t=P(6398);function e(y){y=y||{};var p,u,_,m,n,c=this.context,d=y.mediaPlayerModel,I=y.dashMetrics,k=y.settings;function q(){_={},m={},n=[]}return p={shouldAbandon:function(F){var $=(0,ae.Z)(c).create(ae.Z.NO_CHANGE,{name:e.__dashjs_factory_name});if(!(F&&F.hasOwnProperty("getMediaInfo")&&F.hasOwnProperty("getMediaType")&&F.hasOwnProperty("getCurrentRequest")&&F.hasOwnProperty("getRepresentationInfo")&&F.hasOwnProperty("getAbrController")))return $;var O,K,re=F.getMediaInfo(),H=F.getMediaType(),ee=F.getStreamInfo(),se=ee?ee.id:null,_e=F.getCurrentRequest();if(!isNaN(_e.index)){O=H,K=_e.index,_[O]=_[O]||{},_[O][K]=_[O][K]||{};var X=d.getStableBufferTime();if(I.getCurrentBufferLevel(H)>X)return $;var Ae=_[H][_e.index];if(Ae===null||_e.firstByteDate===null||m.hasOwnProperty(Ae.id))return $;if(Ae.firstByteTime===void 0&&(n[H]=[],Ae.firstByteTime=_e.firstByteDate.getTime(),Ae.segmentDuration=_e.duration,Ae.bytesTotal=_e.bytesTotal,Ae.id=_e.index),Ae.bytesLoaded=_e.bytesLoaded,Ae.elapsedTime=new Date().getTime()-Ae.firstByteTime,Ae.bytesLoaded>0&&Ae.elapsedTime>0&&function(Oe,_t){n[Oe]=n[Oe]||[],n[Oe].push(_t)}(H,Math.round(8*Ae.bytesLoaded/Ae.elapsedTime)),n[H].length>=k.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ae.elapsedTime>k.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ae.bytesLoaded<Ae.bytesTotal){var Le=n[H].reduce(function(Oe,_t){return Oe+_t},0);if(Ae.measuredBandwidthInKbps=Math.round(Le/n[H].length),Ae.estimatedTimeOfDownload=+(8*Ae.bytesTotal/Ae.measuredBandwidthInKbps/1e3).toFixed(2),Ae.estimatedTimeOfDownload<Ae.segmentDuration*k.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||F.getRepresentationInfo().quality===0)return $;if(!m.hasOwnProperty(Ae.id)){var Ye=F.getAbrController(),ye=Ae.bytesTotal-Ae.bytesLoaded,Pe=Ye.getBitrateList(re),He=Ye.getQualityForBitrate(re,Ae.measuredBandwidthInKbps*k.get().streaming.abr.bandwidthSafetyFactor,se),tt=Ye.getMinAllowedIndexFor(H,se),ve=tt!==void 0?Math.max(tt,He):He;ye>Ae.bytesTotal*Pe[ve].bitrate/Pe[Ye.getQualityFor(H,se)].bitrate&&($.quality=ve,$.reason.throughput=Ae.measuredBandwidthInKbps,$.reason.fragmentID=Ae.id,$.reason.rule=this.getClassName(),m[Ae.id]=Ae,u.debug("["+H+"] frag id",Ae.id," is asking to abandon and switch to quality to ",ve," measured bandwidth was",Ae.measuredBandwidthInKbps),delete _[H][Ae.id])}}else Ae.bytesLoaded===Ae.bytesTotal&&delete _[H][Ae.id]}return $},reset:q},u=(0,t.Z)(c).getInstance().getLogger(p),q(),p}e.__dashjs_factory_name="AbandonRequestsRule",we.Z=T.Z.getClassFactory(e)},3112:function(at,we,P){var ae=P(3860),T=P(2068),t=P(5448),e=P(7855),y=P(5595),p=P(8512),u=P(6398),_=P(8825),m=P(3393),n=10;function c(d){d=d||{};var I,k,q,F=this.context,$=d.dashMetrics,O=d.mediaPlayerModel,K=(0,y.Z)(F).getInstance();function re(ve,Oe,_t){var dt=_t.reduce(function(ge,me,Ue){return me>_t[ge]?Ue:ge},0);if(dt===0)return null;var ke=Math.max(ve,n+2*Oe.length),Je=(_t[dt]-1)/(ke/n-1);return{gp:Je,Vp:n/Je}}function H(ve){ve.placeholderBuffer=0,ve.mostAdvancedSegmentStart=NaN,ve.lastSegmentWasReplacement=!1,ve.lastSegmentStart=NaN,ve.lastSegmentDurationS=NaN,ve.lastSegmentRequestTimeMs=NaN,ve.lastSegmentFinishTimeMs=NaN}function ee(ve,Oe){var _t=O.getStableBufferTime();if(ve.stableBufferTime!==_t){var dt=re(_t,ve.bitrates,ve.utilities);if(dt.Vp!==ve.Vp||dt.gp!==ve.gp){var ke=$.getCurrentBufferLevel(Oe),Je=ke+ve.placeholderBuffer;Je-=n,Je*=dt.Vp/ve.Vp,Je+=n,ve.stableBufferTime=_t,ve.Vp=dt.Vp,ve.gp=dt.gp,ve.placeholderBuffer=Math.max(0,Je-ke)}}}function se(ve,Oe){return ve.Vp*(ve.utilities[Oe]+ve.gp)}function _e(ve,Oe){for(var _t=ve.bitrates[Oe],dt=ve.utilities[Oe],ke=0,Je=Oe-1;Je>=0;--Je)if(ve.utilities[Je]<ve.utilities[Oe]){var ge=ve.bitrates[Je],me=ve.utilities[Je],Ue=ve.Vp*(ve.gp+(_t*me-ge*dt)/(_t-ge));ke=Math.max(ke,Ue)}return ke}function X(ve){var Oe=ve.mediaType===m.Z.AUDIO?[m.Z.AUDIO]:q;for(var _t in Oe)q.hasOwnProperty(_t)&&q[_t].state===2&&(q[_t].placeholderBuffer=0)}function Ae(){for(var ve in q)if(q.hasOwnProperty(ve)){var Oe=q[ve];Oe.state!==0&&(Oe.state=1,H(Oe))}}function Le(ve){if(ve&&ve.chunk&&ve.chunk.mediaInfo){var Oe=q[ve.chunk.mediaInfo.type];if(Oe&&Oe.state!==0){var _t=ve.chunk.start;isNaN(Oe.mostAdvancedSegmentStart)||_t>Oe.mostAdvancedSegmentStart?(Oe.mostAdvancedSegmentStart=_t,Oe.lastSegmentWasReplacement=!1):Oe.lastSegmentWasReplacement=!0,Oe.lastSegmentStart=_t,Oe.lastSegmentDurationS=ve.chunk.duration,Oe.lastQuality=ve.chunk.quality,ye(Oe,ve.chunk.mediaInfo.type)}}}function Ye(ve){if(ve&&ve.metric===ae.Z.HTTP_REQUEST&&ve.value&&ve.value.type===e.w.MEDIA_SEGMENT_TYPE&&ve.value.trace&&ve.value.trace.length){var Oe=q[ve.mediaType];Oe&&Oe.state!==0&&(Oe.lastSegmentRequestTimeMs=ve.value.trequest.getTime(),Oe.lastSegmentFinishTimeMs=ve.value._tfinish.getTime(),ye(Oe,ve.mediaType))}}function ye(ve,Oe){if(!isNaN(ve.lastSegmentStart)&&!isNaN(ve.lastSegmentRequestTimeMs)&&!isNaN(ve.placeholderBuffer)){if(ve.placeholderBuffer*=.99,!isNaN(ve.lastSegmentFinishTimeMs)){var _t=$.getCurrentBufferLevel(Oe)+.001*(ve.lastSegmentFinishTimeMs-ve.lastSegmentRequestTimeMs),dt=se(ve,ve.lastQuality),ke=Math.max(0,dt-_t);ve.placeholderBuffer=Math.min(ke,ve.placeholderBuffer)}ve.lastSegmentWasReplacement&&!isNaN(ve.lastSegmentDurationS)&&(ve.placeholderBuffer+=ve.lastSegmentDurationS),ve.lastSegmentStart=NaN,ve.lastSegmentRequestTimeMs=NaN}}function Pe(ve){if(ve){var Oe=q[ve.mediaType];Oe&&Oe.state!==0&&(Oe.abrQuality=ve.newQuality)}}function He(ve){if(ve){var Oe=q[ve.mediaType];if(Oe&&Oe.state!==0){var _t,dt=$.getCurrentBufferLevel(ve.mediaType);_t=Oe.abrQuality>0?_e(Oe,Oe.abrQuality):n;var ke=Math.max(0,_t-dt);Oe.placeholderBuffer=Math.min(Oe.placeholderBuffer,ke)}}}function tt(){q={}}return I={getMaxIndex:function(ve){var Oe=(0,T.Z)(F).create();if(!(ve&&ve.hasOwnProperty("getMediaInfo")&&ve.hasOwnProperty("getMediaType")&&ve.hasOwnProperty("getScheduleController")&&ve.hasOwnProperty("getStreamInfo")&&ve.hasOwnProperty("getAbrController")&&ve.hasOwnProperty("useBufferOccupancyABR")))return Oe;var _t=ve.getMediaInfo(),dt=ve.getMediaType(),ke=ve.getScheduleController(),Je=ve.getStreamInfo(),ge=ve.getAbrController(),me=ge.getThroughputHistory(),Ue=Je?Je.id:null,f=Je&&Je.manifestInfo&&Je.manifestInfo.isDynamic,o=ve.useBufferOccupancyABR();if(Oe.reason=Oe.reason||{},!o)return Oe;ke.setTimeToLoadDelay(0);var v=function(be){var xe=be.getMediaType(),Qe=q[xe];return Qe?Qe.state!==0&&ee(Qe,xe):(Qe=function(mt){var it={},Ut=mt.getMediaInfo().bitrateList.map(function(tn){return tn.bandwidth}),It=function(tn){return tn.map(function(dn){return Math.log(dn)})}(Ut);It=It.map(function(tn){return tn-It[0]+1});var Ft=O.getStableBufferTime(),Pt=re(Ft,Ut,It);return Pt?(it.state=1,it.bitrates=Ut,it.utilities=It,it.stableBufferTime=Ft,it.Vp=Pt.Vp,it.gp=Pt.gp,it.lastQuality=0,H(it)):it.state=0,it}(be),q[xe]=Qe),Qe}(ve);if(v.state===0)return Oe;var S,W=$.getCurrentBufferLevel(dt),V=me.getAverageThroughput(dt,f),Se=me.getSafeAverageThroughput(dt,f),ze=me.getAverageLatency(dt);if(Oe.reason.state=v.state,Oe.reason.throughput=V,Oe.reason.latency=ze,isNaN(V))return Oe;switch(v.state){case 1:S=ge.getQualityForBitrate(_t,Se,Ue,ze),Oe.quality=S,Oe.reason.throughput=Se,v.placeholderBuffer=Math.max(0,_e(v,S)-W),v.lastQuality=S,!isNaN(v.lastSegmentDurationS)&&W>=v.lastSegmentDurationS&&(v.state=2);break;case 2:(function(be,xe){var Qe=Date.now();if(isNaN(be.lastSegmentFinishTimeMs)){if(!isNaN(be.lastCallTimeMs)){var mt=.001*(Qe-be.lastCallTimeMs);be.placeholderBuffer+=Math.max(0,mt)}}else{var it=.001*(Qe-be.lastSegmentFinishTimeMs);be.placeholderBuffer+=Math.max(0,it)}be.lastCallTimeMs=Qe,be.lastSegmentStart=NaN,be.lastSegmentRequestTimeMs=NaN,be.lastSegmentFinishTimeMs=NaN,ee(be,xe)})(v,dt),S=function(be,xe){for(var Qe=be.bitrates.length,mt=NaN,it=NaN,Ut=0;Ut<Qe;++Ut){var It=(be.Vp*(be.utilities[Ut]+be.gp)-xe)/be.bitrates[Ut];(isNaN(it)||It>=it)&&(it=It,mt=Ut)}return mt}(v,W+v.placeholderBuffer);var Me=ge.getQualityForBitrate(_t,Se,Ue,ze);S>v.lastQuality&&S>Me&&(S=Math.max(Me,v.lastQuality));var De=Math.max(0,W+v.placeholderBuffer-se(v,S));De<=v.placeholderBuffer?(v.placeholderBuffer-=De,De=0):(De-=v.placeholderBuffer,v.placeholderBuffer=0,S<ge.getMaxAllowedIndexFor(dt,Ue)?ke.setTimeToLoadDelay(1e3*De):De=0),Oe.quality=S,Oe.reason.throughput=V,Oe.reason.latency=ze,Oe.reason.bufferLevel=W,Oe.reason.placeholderBuffer=v.placeholderBuffer,Oe.reason.delay=De,v.lastQuality=S;break;default:k.debug("BOLA ABR rule invoked in bad state."),Oe.quality=ge.getQualityForBitrate(_t,Se,Ue,ze),Oe.reason.state=v.state,Oe.reason.throughput=Se,Oe.reason.latency=ze,v.state=1,H(v)}return Oe},reset:function(){tt(),K.off(_.Z.BUFFER_EMPTY,X,I),K.off(_.Z.PLAYBACK_SEEKING,Ae,I),K.off(_.Z.METRIC_ADDED,Ye,I),K.off(_.Z.QUALITY_CHANGE_REQUESTED,Pe,I),K.off(_.Z.FRAGMENT_LOADING_ABANDONED,He,I),K.off(p.Z.MEDIA_FRAGMENT_LOADED,Le,I)}},k=(0,u.Z)(F).getInstance().getLogger(I),tt(),K.on(_.Z.BUFFER_EMPTY,X,I),K.on(_.Z.PLAYBACK_SEEKING,Ae,I),K.on(_.Z.METRIC_ADDED,Ye,I),K.on(_.Z.QUALITY_CHANGE_REQUESTED,Pe,I),K.on(_.Z.FRAGMENT_LOADING_ABANDONED,He,I),K.on(p.Z.MEDIA_FRAGMENT_LOADED,Le,I),I}c.__dashjs_factory_name="BolaRule",we.Z=t.Z.getClassFactory(c)},895:function(at,we,P){var ae=P(5448),T=P(2068),t=P(6398);function e(){var y,p,u=this.context;return y={getMaxIndex:function(_){var m=(0,T.Z)(u).create();if(!_||!_.hasOwnProperty("getDroppedFramesHistory"))return m;var n=_.getDroppedFramesHistory(),c=_.getStreamInfo().id;if(n){var d=n.getFrameHistory(c);if(!d||d.length===0)return m;for(var I=0,k=0,q=T.Z.NO_CHANGE,F=1;F<d.length;F++)if(d[F]&&(I=d[F].droppedVideoFrames,(k=d[F].totalVideoFrames)>375&&I/k>.15)){q=F-1,p.debug("index: "+q+" Dropped Frames: "+I+" Total Frames: "+k);break}return(0,T.Z)(u).create(q,{droppedFrames:I})}return m}},p=(0,t.Z)(u).getInstance().getLogger(y),y}e.__dashjs_factory_name="DroppedFramesRule",we.Z=ae.Z.getClassFactory(e)},6535:function(at,we,P){var ae=P(5595),T=P(8512),t=P(5448),e=P(6398),y=P(2068),p=P(3393),u=P(3860),_=P(8825);function m(n){n=n||{};var c,d,I,k=this.context,q=(0,ae.Z)(k).getInstance(),F=n.dashMetrics;function $(){(I={})[p.Z.VIDEO]={ignoreCount:2},I[p.Z.AUDIO]={ignoreCount:2}}function O(){$()}function K(re){isNaN(re.startTime)||re.mediaType!==p.Z.AUDIO&&re.mediaType!==p.Z.VIDEO||I[re.mediaType].ignoreCount>0&&I[re.mediaType].ignoreCount--}return c={getMaxIndex:function(re){var H=(0,y.Z)(k).create();if(!re||!re.hasOwnProperty("getMediaType"))return H;(function(){if(!F||!F.hasOwnProperty("getCurrentBufferLevel")||!F.hasOwnProperty("getCurrentBufferState"))throw new Error(p.Z.MISSING_CONFIG_ERROR)})();var ee=re.getMediaType(),se=F.getCurrentBufferState(ee),_e=re.getRepresentationInfo().fragmentDuration,X=re.getStreamInfo(),Ae=X?X.id:null,Le=re.getScheduleController(),Ye=X&&X.manifestInfo&&X.manifestInfo.isDynamic;if(function(dt,ke){return!dt&&I[ke].ignoreCount>0}(Le.getPlaybackController().getLowLatencyModeEnabled(),ee)||!_e)return H;if(se&&se.state===u.Z.BUFFER_EMPTY)d.debug("["+ee+"] Switch to index 0; buffer is empty."),H.quality=0,H.reason="InsufficientBufferRule: Buffer is empty";else{var ye=re.getMediaInfo(),Pe=re.getAbrController(),He=Pe.getThroughputHistory(),tt=F.getCurrentBufferLevel(ee),ve=He.getAverageThroughput(ee,Ye),Oe=He.getAverageLatency(ee),_t=ve*(tt/_e)*.5;H.quality=Pe.getQualityForBitrate(ye,_t,Ae,Oe),H.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return H},reset:function(){$(),q.off(_.Z.PLAYBACK_SEEKING,O,c),q.off(T.Z.BYTES_APPENDED_END_FRAGMENT,K,c)}},d=(0,e.Z)(k).getInstance().getLogger(c),$(),q.on(_.Z.PLAYBACK_SEEKING,O,c),q.on(T.Z.BYTES_APPENDED_END_FRAGMENT,K,c),c}m.__dashjs_factory_name="InsufficientBufferRule",we.Z=t.Z.getClassFactory(m)},1914:function(at,we,P){var ae=P(3860),T=P(2068),t=P(5448),e=P(7855),y=P(5595),p=P(8512),u=P(6398),_=P(3393);function m(n){n=n||{};var c,d,I,k,q=this.context,F=n.dashMetrics,$=(0,y.Z)(q).getInstance();function O(Ae){Ae.placeholderBuffer=0,Ae.mostAdvancedSegmentStart=NaN,Ae.lastSegmentWasReplacement=!1,Ae.lastSegmentStart=NaN,Ae.lastSegmentDurationS=NaN,Ae.lastSegmentRequestTimeMs=NaN,Ae.lastSegmentFinishTimeMs=NaN,Ae.lastSegmentUrl=""}function K(){for(var Ae in d)if(d.hasOwnProperty(Ae)){var Le=d[Ae];Le.state!==0&&(Le.state=1,O(Le))}}function re(Ae){if(Ae&&Ae.chunk&&Ae.chunk.mediaInfo){var Le=d[Ae.chunk.mediaInfo.type],Ye=I[Ae.chunk.mediaInfo.type];if(Le&&Le.state!==0){var ye=Ae.chunk.start;isNaN(Le.mostAdvancedSegmentStart)||ye>Le.mostAdvancedSegmentStart?(Le.mostAdvancedSegmentStart=ye,Le.lastSegmentWasReplacement=!1):Le.lastSegmentWasReplacement=!0,Le.lastSegmentStart=ye,Le.lastSegmentDurationS=Ae.chunk.duration,Le.lastQuality=Ae.chunk.quality,ee(Le,Ye)}}}function H(Ae){if(Ae&&Ae.metric===ae.Z.HTTP_REQUEST&&Ae.value&&Ae.value.type===e.w.MEDIA_SEGMENT_TYPE&&Ae.value.trace&&Ae.value.trace.length){var Le=d[Ae.mediaType],Ye=I[Ae.mediaType];Le&&Le.state!==0&&(Le.lastSegmentRequestTimeMs=Ae.value.trequest.getTime(),Le.lastSegmentFinishTimeMs=Ae.value._tfinish.getTime(),ee(Le,Ye))}}function ee(Ae,Le){isNaN(Ae.lastSegmentStart)||isNaN(Ae.lastSegmentRequestTimeMs)||(Le.segment_request_start_s=.001*Ae.lastSegmentRequestTimeMs,Le.segment_download_finish_s=.001*Ae.lastSegmentFinishTimeMs,Ae.lastSegmentStart=NaN,Ae.lastSegmentRequestTimeMs=NaN)}function se(Ae){if(Ae&&Ae.mediaType){var Le=d[Ae.mediaType];Le&&Le.state!==0&&(Le.abrQuality=Ae.newQuality)}}function _e(Ae,Le){if(Ae.length!==Le.length)return-1;for(var Ye=0,ye=0;ye<Ae.length;ye++)Ye+=Ae[ye]*Le[ye];return Ye}function X(){d={},I={}}return c={getMaxIndex:function(Ae){var Le,Ye=(0,T.Z)(q).create(),ye=Math.pow(4,.99),Pe=Math.max(Math.pow(4,1),ye*Math.sqrt(4)),He=Ae.getMediaInfo(),tt=Ae.getMediaType(),ve=He.bitrateList.map(function(Pt){return Pt.bandwidth}),Oe=ve.length,_t=Ae.getScheduleController(),dt=Ae.getStreamInfo(),ke=Ae.getAbrController(),Je=ke.getThroughputHistory(),ge=dt&&dt.manifestInfo&&dt.manifestInfo.isDynamic,me=Ae.useL2AABR(),Ue=F.getCurrentBufferLevel(tt,!0),f=Je.getSafeAverageThroughput(tt,ge),o=Je.getAverageThroughput(tt,ge),v=Je.getAverageLatency(tt),S=Ae.getVideoModel().getPlaybackRate();if(!(Ae&&Ae.hasOwnProperty("getMediaInfo")&&Ae.hasOwnProperty("getMediaType")&&Ae.hasOwnProperty("getScheduleController")&&Ae.hasOwnProperty("getStreamInfo")&&Ae.hasOwnProperty("getAbrController")&&Ae.hasOwnProperty("useL2AABR"))||(Ye.reason=Ye.reason||{},!me||tt===_.Z.AUDIO))return Ye;_t.setTimeToLoadDelay(0);var W=function(Pt){var tn=Pt.getMediaType(),dn=d[tn];return dn||(dn=function(An){var _n={},Rn=An.getMediaInfo(),qn=Rn.bitrateList.map(function(yn){return yn.bandwidth/1e3});return _n.state=1,_n.bitrates=qn,_n.lastQuality=0,function(yn){yn&&yn.type&&(I[yn.type]={},I[yn.type].w=[],I[yn.type].prev_w=[],I[yn.type].Q=0,I[yn.type].segment_request_start_s=0,I[yn.type].segment_download_finish_s=0,I[yn.type].B_target=1.5)}(Rn),O(_n),_n}(Pt),d[tn]=dn),dn}(Ae);if(W.state===0)return Ye;var V=I[tt];if(!V||(Ye.reason.state=W.state,Ye.reason.throughput=o,Ye.reason.latency=v,isNaN(o)))return Ye;switch(W.state){case 1:if(Le=ke.getQualityForBitrate(He,f,dt.id,v),Ye.quality=Le,Ye.reason.throughput=f,W.lastQuality=Le,!isNaN(W.lastSegmentDurationS)&&Ue>=V.B_target){W.state=2,V.Q=ye;for(var Se=0;Se<Oe;++Se)Se===W.lastQuality?V.prev_w[Se]=1:V.prev_w[Se]=0}break;case 2:var ze=[],Me=F.getCurrentHttpRequest(tt).trace.reduce(function(Pt,tn){return Pt+tn.d},0),De=F.getCurrentHttpRequest(tt).trace.reduce(function(Pt,tn){return Pt+tn.b[0]},0),be=Math.round(8*De/Me),xe=F.getCurrentHttpRequest(tt);if(be<1&&(be=1),xe.url===W.lastSegmentUrl||xe.type===e.w.INIT_SEGMENT_TYPE)Le=W.lastQuality;else{for(var Qe=W.lastSegmentDurationS,mt=1,it=0;it<Oe;++it)ve[it]=ve[it]/1e3,S*ve[it]>be&&(mt=-1),V.w[it]=V.prev_w[it]+mt*(Qe/(2*Pe))*((V.Q+ye)*(S*ve[it]/be));V.w=function(Pt){for(var tn=Pt.length,dn=!1,An=[],_n=0;_n<tn;++_n)An[_n]=Pt[_n];for(var Rn=Pt.sort(function(er,Kn){return Kn-er}),qn=0,yn=0,Qn=[],xn=0;xn<tn-1;++xn)if((yn=((qn+=Rn[xn])-1)/(xn+1))>=Rn[xn+1]){dn=!0;break}dn||(yn=(qn+Rn[tn-1]-1)/tn);for(var Vn=0;Vn<tn;++Vn)Qn[Vn]=Math.max(An[Vn]-yn,0);return Qn}(V.w);for(var Ut=0;Ut<Oe;++Ut)ze[Ut]=V.w[Ut]-V.prev_w[Ut],V.prev_w[Ut]=V.w[Ut];V.Q=Math.max(0,V.Q-Qe+Qe*S*((_e(ve,V.prev_w)+_e(ve,ze))/be));for(var It=[],Ft=0;Ft<Oe;++Ft)It[Ft]=Math.abs(ve[Ft]-_e(V.w,ve));(Le=It.indexOf(Math.min.apply(Math,It)))>W.lastQuality&&ve[W.lastQuality+1]<=be&&(Le=W.lastQuality+1),ve[Le]>=be&&(V.Q=2*Math.max(ye,V.Q)),W.lastSegmentUrl=xe.url}Ye.quality=Le,Ye.reason.throughput=o,Ye.reason.latency=v,Ye.reason.bufferLevel=Ue,W.lastQuality=Ye.quality;break;default:k.debug("L2A ABR rule invoked in bad state."),Ye.quality=ke.getQualityForBitrate(He,f,dt.id,v),Ye.reason.state=W.state,Ye.reason.throughput=f,Ye.reason.latency=v,W.state=1,O(W)}return Ye},reset:function(){X(),$.off(p.Z.PLAYBACK_SEEKING,K,c),$.off(p.Z.MEDIA_FRAGMENT_LOADED,re,c),$.off(p.Z.METRIC_ADDED,H,c),$.off(p.Z.QUALITY_CHANGE_REQUESTED,se,c)}},k=(0,u.Z)(q).getInstance().getLogger(c),X(),$.on(p.Z.PLAYBACK_SEEKING,K,c),$.on(p.Z.MEDIA_FRAGMENT_LOADED,re,c),$.on(p.Z.METRIC_ADDED,H,c),$.on(p.Z.QUALITY_CHANGE_REQUESTED,se,c),c}m.__dashjs_factory_name="L2ARule",we.Z=t.Z.getClassFactory(m)},6070:function(at,we,P){var ae=P(5448),T=P(6398),t=P(2068);function e(){var y,p,u=this.context;return y={getMaxIndex:function(_){for(var m=_?_.getSwitchHistory():null,n=m?m.getSwitchRequests():[],c=0,d=0,I=0,k=(0,t.Z)(u).create(),q=0;q<n.length;q++)if(n[q]!==void 0&&(c+=n[q].drops,d+=n[q].noDrops,I+=n[q].dropSize,c+d>=6&&c/d>.075)){k.quality=q>0&&n[q].drops>0?q-1:q,k.reason={index:k.quality,drops:c,noDrops:d,dropSize:I},p.debug("Switch history rule index: "+k.quality+" samples: "+(c+d)+" drops: "+c);break}return k}},p=(0,T.Z)(u).getInstance().getLogger(y),y}e.__dashjs_factory_name="SwitchHistoryRule",we.Z=ae.Z.getClassFactory(e)},5628:function(at,we,P){var ae=P(5448),T=P(2068),t=P(3393),e=P(3860);function y(p){p=p||{};var u=this.context,_=p.dashMetrics;return{getMaxIndex:function(m){var n=(0,T.Z)(u).create();if(!(m&&m.hasOwnProperty("getMediaInfo")&&m.hasOwnProperty("getMediaType")&&m.hasOwnProperty("useBufferOccupancyABR")&&m.hasOwnProperty("getAbrController")&&m.hasOwnProperty("getScheduleController")))return n;(function(){if(!_||!_.hasOwnProperty("getCurrentBufferState"))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var c=m.getMediaInfo(),d=m.getMediaType(),I=_.getCurrentBufferState(d),k=m.getScheduleController(),q=m.getAbrController(),F=m.getStreamInfo(),$=F?F.id:null,O=F&&F.manifestInfo?F.manifestInfo.isDynamic:null,K=q.getThroughputHistory(),re=K.getSafeAverageThroughput(d,O),H=K.getAverageLatency(d),ee=m.useBufferOccupancyABR();return isNaN(re)||!I||ee||q.getAbandonmentStateFor($,d)!==e.Z.ABANDON_LOAD&&(I.state===e.Z.BUFFER_LOADED||O)&&(n.quality=q.getQualityForBitrate(c,re,$,H),k.setTimeToLoadDelay(0),n.reason={throughput:re,latency:H}),n},reset:function(){}}}y.__dashjs_factory_name="ThroughputRule",we.Z=ae.Z.getClassFactory(y)},4722:function(at,we,P){var ae=P(5448),T=P(6398);function t(){var e,y,p,u,_,m,n,c,d,I=this.context;function k(){p=null,u=1,_=100,m=0,n=null,c=null,d="dynamic_weight_selection"}function q(){var re=0;if(p)for(var H=0;H<p.length;H++){var ee=p[H];ee.state.throughput>re&&(re=ee.state.throughput)}return re}function F(re,H,ee){var se=re.map(function(_e,X){return ee[X]*Math.pow(_e-H[X],2)}).reduce(function(_e,X){return _e+X});return(se<0?-1:1)*Math.sqrt(Math.abs(se))}function $(re,H){return F([re.state.throughput,re.state.latency,re.state.rebuffer,re.state.switch],[H.state.throughput,H.state.latency,H.state.rebuffer,H.state.switch],[1,1,1,1])}function O(re,H,ee){for(var se=0;se<H.length;se++){var _e=H[se],X=$(_e,re);K(_e,ee,Math.exp(-1*Math.pow(X,2)/(2*Math.pow(.1,2))))}}function K(re,H,ee){var se=re.state,_e=[.01,.01,.01,.01];se.throughput=se.throughput+(H[0]-se.throughput)*_e[0]*ee,se.latency=se.latency+(H[1]-se.latency)*_e[1]*ee,se.rebuffer=se.rebuffer+(H[2]-se.rebuffer)*_e[2]*ee,se.switch=se.switch+(H[3]-se.switch)*_e[3]*ee}return e={getNextQuality:function(re,H,ee,se,_e,X,Ae){var Le=ee,Ye=se,ye=H,Pe=function(V){if(!p){p=[];var Se=V.bitrateList,ze=[];m=Se[0].bandwidth,Se.forEach(function(xe){ze.push(xe.bandwidth),xe.bandwidth<m&&(m=xe.bandwidth)}),be=ze.map(function(xe){return Math.pow(xe,2)}).reduce(function(xe,Qe){return xe+Qe}),u=Math.sqrt(be);for(var Me=0;Me<Se.length;Me++){var De={qualityIndex:Me,bitrate:Se[Me].bandwidth,state:{throughput:Se[Me].bandwidth/u,latency:0,rebuffer:0,switch:0}};p.push(De)}c=function(xe){var Qe=[],mt=function(Cr){for(var bt=[],Et=0;Et<Cr;Et++){var Tt=[Math.random()*q(),Math.random(),Math.random(),Math.random()];bt.push(Tt)}return bt}(Math.pow(xe.length,2));Qe.push(mt[0]);for(var it=[1,1,1,1],Ut=1;Ut<xe.length;Ut++){for(var It=null,Ft=null,Pt=0;Pt<mt.length;Pt++){for(var tn=mt[Pt],dn=null,An=0;An<Qe.length;An++){var _n=F(tn,Qe[An],it);(dn===null||_n<dn)&&(dn=_n)}(Ft===null||dn>Ft)&&(It=tn,Ft=dn)}Qe.push(It)}for(var Rn=null,qn=null,yn=0;yn<Qe.length;yn++){for(var Qn=0,xn=0;xn<Qe.length;xn++)yn!==xn&&(Qn+=F(Qe[yn],Qe[xn],it));(Rn===null||Qn>Rn)&&(Rn=Qn,qn=yn)}var Vn=[];for(Vn.push(Qe[qn]),Qe.splice(qn,1);Qe.length>0;){for(var er=null,Kn=null,nr=0;nr<Qe.length;nr++){var rr=F(Vn[0],Qe[nr],it);(er===null||rr<er)&&(er=rr,Kn=nr)}Vn.push(Qe[Kn]),Qe.splice(Kn,1)}return Vn}(p)}var be;return p}(re),He=H/u;He>1&&(He=q()),ee/=_,y.debug("getNextQuality called throughput:".concat(He," latency:").concat(ee," bufferSize:").concat(se," currentQualityIndex:").concat(X," playbackRate:").concat(_e));var tt=Pe[X],ve=tt.bitrate*Ae.getSegmentDuration()/ye,Oe=Math.max(0,ve-Ye);if(Ye-ve<Ae.getMinBuffer())return y.debug("Buffer is low for bitrate= ".concat(tt.bitrate," downloadTime=").concat(ve," currentBuffer=").concat(Ye," rebuffer=").concat(Oe)),function(V,Se){var ze=0,Me=V;if(p)for(var De=0;De<p.length;De++){var be=p[De];be.bitrate<V.bitrate&&be.bitrate>ze&&Se>be.bitrate&&(ze=be.bitrate,Me=be)}return Me}(tt,ye).qualityIndex;switch(d){case"manual_weight_selection":n=[.4,.4,.4,.4];break;case"random_weight_selection":(function(V){n=function(Se,ze){for(var Me=[],De=Math.sqrt(2/Se),be=0;be<4;be++)Me.push(Math.random()*De);return n=Me}(V.length)})(Pe);break;default:(function(V,Se,ze,Me,De,be,xe){n||(n=c[c.length-1]);var Qe=V.findWeightVector(Se,ze,Me,De,be,xe);Qe!==null&&Qe!==-1&&(n=Qe)})(Ae,Pe,Le,Ye,Oe,ye,_e)}for(var _t=null,dt=null,ke=null,Je=0;Je<Pe.length;Je++){var ge=Pe[Je],me=ge.state,Ue=[me.throughput,me.latency,me.rebuffer,me.switch],f=n.slice(),o=Ae.getNextBufferWithBitrate(ge.bitrate,Ye,ye),v=o<Ae.getMinBuffer();v&&y.debug("Buffer is low for bitrate=".concat(ge.bitrate," downloadTime=").concat(ve," currentBuffer=").concat(Ye," nextBuffer=").concat(o)),(ge.bitrate>H-1e4||v)&&ge.bitrate!==m&&(f[0]=100);var S=F(Ue,[He,0,0,0],f);(_t===null||S<_t)&&(_t=S,dt=ge.qualityIndex,ke=ge)}var W=Math.abs(tt.bitrate-ke.bitrate)/u;return O(tt,Pe,[He,ee,Oe,W]),O(ke,Pe,[He,0,0,W]),dt},reset:function(){k()}},y=(0,T.Z)(I).getInstance().getLogger(e),k(),e}t.__dashjs_factory_name="LearningAbrController",we.Z=ae.Z.getClassFactory(t)},5317:function(at,we,P){var ae=P(5448),T=P(2298);function t(){var e,y,p,u,_;function m(){y=null,p=null,u=null,_=null}function n(d,I,k,q){var F=new T.Z;return F.type=d,F.weights.bitrateReward=I||1,F.weights.bitrateSwitchPenalty=1,F.weights.rebufferPenalty=k||1e3,F.weights.latencyPenalty=[],F.weights.latencyPenalty.push({threshold:1.1,penalty:.05*q}),F.weights.latencyPenalty.push({threshold:1e8,penalty:.1*k}),F.weights.playbackSpeedPenalty=q||200,F}function c(d,I,k,q,F){F.bitrateWSum+=F.weights.bitrateReward*d,F.lastBitrate&&(F.bitrateSwitchWSum+=F.weights.bitrateSwitchPenalty*Math.abs(d-F.lastBitrate)),F.lastBitrate=d,F.rebufferWSum+=F.weights.rebufferPenalty*I;for(var $=0;$<F.weights.latencyPenalty.length;$++){var O=F.weights.latencyPenalty[$];if(k<=O.threshold){F.latencyWSum+=O.penalty*k;break}}F.playbackSpeedWSum+=F.weights.playbackSpeedPenalty*Math.abs(1-q),F.totalQoe=F.bitrateWSum-F.bitrateSwitchWSum-F.rebufferWSum-F.latencyWSum-F.playbackSpeedWSum}return e={setupPerSegmentQoe:function(d,I,k){y=n("segment",d,I,k),p=d,u=I,_=k},logSegmentMetrics:function(d,I,k,q){y&&c(d,I,k,q,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(d,I,k,q){var F=null;return p&&u&&_&&(F=n("segment",p,u,_)),F?(c(d,I,k,q,F),F.totalQoe):0},reset:function(){m()}},m(),e}t.__dashjs_factory_name="LoLpQoeEvaluator",we.Z=ae.Z.getClassFactory(t)},5435:function(at,we,P){var ae=P(6398),T=P(5448),t=P(4722),e=P(5317),y=P(2068),p=P(3860),u=P(6523),_=P(3393);function m(n){var c,d,I,k,q=(n=n||{}).dashMetrics,F=this.context;return d={getMaxIndex:function($){try{var O=(0,y.Z)(F).create(),K=$.getMediaInfo().type,re=$.getAbrController(),H=$.getStreamInfo(),ee=re.getQualityFor(K,H.id),se=$.getMediaInfo(),_e=q.getCurrentBufferState(K),X=$.getScheduleController(),Ae=q.getCurrentBufferLevel(K,!0),Le=H&&H.manifestInfo?H.manifestInfo.isDynamic:null,Ye=X.getPlaybackController(),ye=Ye.getCurrentLiveLatency();if(!$.useLoLPABR()||K===_.Z.AUDIO)return O;ye||(ye=0);var Pe=Ye.getPlaybackRate(),He=re.getThroughputHistory().getSafeAverageThroughput(K,Le);if(c.debug("Throughput ".concat(Math.round(He)," kbps")),isNaN(He)||!_e||re.getAbandonmentStateFor(H.id,K)===p.Z.ABANDON_LOAD)return O;for(var tt=se.bitrateList,ve=$.getRepresentationInfo().fragmentDuration,Oe=tt[0].bandwidth/1e3,_t=tt[tt.length-1].bandwidth/1e3,dt=0;dt<tt.length;dt++){var ke=tt[dt].bandwidth/1e3;ke>_t?_t=ke:ke<Oe&&(Oe=ke)}var Je=tt[ee].bandwidth/1e3,ge=q.getCurrentHttpRequest(K,!0),me=(ge.tresponse.getTime()-ge.trequest.getTime())/1e3,Ue=me>ve?me-ve:0;k.setupPerSegmentQoe(ve,_t,Oe),k.logSegmentMetrics(Je,Ue,ye,Pe);var f=(0,u.Z)(F).create({targetLatency:1.5,bufferMin:.3,segmentDuration:ve,qoeEvaluator:k});return O.quality=I.getNextQuality(se,1e3*He,ye,Ae,Pe,ee,f),O.reason={throughput:He,latency:ye},O.priority=y.Z.PRIORITY.STRONG,X.setTimeToLoadDelay(0),O.quality!==ee&&c.debug("[TgcLearningRule]["+K+"] requesting switch to index: ",O.quality,"Average throughput",Math.round(He),"kbps"),O}catch(o){throw o}},reset:function(){I.reset(),k.reset()}},c=(0,ae.Z)(F).getInstance().getLogger(d),I=(0,t.Z)(F).create(),k=(0,e.Z)(F).create(),d}m.__dashjs_factory_name="LoLPRule",we.Z=T.Z.getClassFactory(m)},6523:function(at,we,P){var ae=P(5448);function T(t){var e,y,p,u,_=t.targetLatency,m=t.bufferMin,n=t.segmentDuration,c=t.qoeEvaluator;function d(){return n}function I(k,q){var F=d();return q>F?k-F:k+F-q}return e={getMinBuffer:function(){return m},getSegmentDuration:d,getNextBufferWithBitrate:function(k,q,F){return I(q,k*n/F)},getNextBuffer:I,findWeightVector:function(k,q,F,$,O,K){var re=null,H=null,ee=null,se=Math.abs(q-p);return k.forEach(function(_e){y.forEach(function(X){X[0];var Ae=X[1],Le=X[2],Ye=(X[3],_e.bitrate*n/O),ye=I(F,Ye),Pe=(Le===0?10:1/Le)*Math.max(1e-5,Ye-ye),He=(Ae===0?10:1/Ae)*_e.state.latency,tt=c.calculateSingleUseQoe(_e.bitrate,Pe,He,K);(re===null||tt>re)&&function(ve,Oe,_t){return!(ve>_+_t)&&Oe>=m}(q,ye,se)&&(re=tt,H=X,ee=_e.bitrate)})}),H===null&&ee===null&&(H=-1),p=q,H}},y=function k(q,F,$){if($===F)return q;for(var O=q.length,K=0;K<O;K++)for(var re=q.shift(),H=0;H<u.length;H++)q.push(re.concat(u[H]));return k(q,F,$+1)}((u=[.2,.4,.6,.8,1]).map(function(k){return[k]}),4,1),p=0,e}T.__dashjs_factory_name="LoLpWeightSelector",we.Z=ae.Z.getClassFactory(T)},2298:function(at,we){we.Z=function P(){(function(ae,T){if(!(ae instanceof T))throw new TypeError("Cannot call a class as a function")})(this,P),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(at,we,P){P.d(we,{Y:function(){return c}});var ae=P(3393),T=P(1553),t=P(5448),e=P(2128),y=P(2594),p=P(7387),u=P(7417),_=P(9032),m=P(9326),n=P(7802),c=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function d(I){var k,q,F,$,O,K,re,H,ee=this.context,se=I.adapter,_e=I.baseURLController,X=I.streamInfo,Ae=I.timelineConverter,Le=I.debug,Ye=I.eventBus,ye=I.events,Pe=I.dashConstants,He=(0,y.Z)(ee).getInstance();function tt(Oe,_t){var dt=new e.Z;dt.id=Oe.id,dt.bitrate=Oe.bandwidth,dt.width=Oe.width,dt.height=Oe.height,dt.tilesHor=1,dt.tilesVert=1,Oe.essentialProperties&&Oe.essentialProperties.forEach(function(ke){if(c.indexOf(ke.schemeIdUri)>=0&&ke.value){var Je=ke.value.split("x");Je.length!==2||isNaN(Je[0])||isNaN(Je[1])||(dt.tilesHor=parseInt(Je[0],10),dt.tilesVert=parseInt(Je[1],10))}}),_t?K.updateSegmentData(Oe).then(function(ke){(function(Je,ge,me){var Ue=[],f=function(o,v){var S,W,V,Se,ze=[],Me=0;for(S=0,W=o.segments.length;S<W;S++)V=o.segments[S],(Se=(0,p.TJ)(Ae,se.getIsDynamic(),v,V.startTime,V.duration,V.timescale,V.media,V.mediaRange,Me))&&(ze.push(Se),Se=null,Me++);return ze}(me,ge);ge.segments=f,Je.segmentDuration=ge.segments[0].duration,Je.readThumbnail=function(o,v){var S=null;Ue.some(function(W){if(W.start<=o&&W.end>o)return S=W.url,!0}),S?v(S):ge.segments.some(function(W){if(W.mediaStartTime<=o&&W.mediaStartTime+W.duration>o){var V=_e.resolve(ge.path);return re.load({method:"get",url:V.url,request:{range:W.mediaRange,responseType:"arraybuffer"},onload:function(Se){var ze=H.getSamplesInfo(Se.target.response),Me=new Blob([Se.target.response.slice(ze.sampleList[0].offset,ze.sampleList[0].offset+ze.sampleList[0].size)],{type:"image/jpeg"}),De=window.URL.createObjectURL(Me);Ue.push({start:W.mediaStartTime,end:W.mediaStartTime+W.duration,url:De}),v&&v(De)}}),!0}})}})(dt,Oe,ke)}):(dt.startNumber=Oe.startNumber,dt.segmentDuration=Oe.segmentDuration,dt.timescale=Oe.timescale,dt.templateUrl=function(ke){var Je=He.isRelative(ke.media)?He.resolve(ke.media,_e.resolve(ke.path).url):ke.media;return Je?(0,p.Aj)(Je,ke.id):""}(Oe)),dt.tilesHor>0&&dt.tilesVert>0&&(dt.widthPerTile=dt.width/dt.tilesHor,dt.heightPerTile=dt.height/dt.tilesVert,q.push(dt))}function ve(){q=[],$=-1,O=null}return k={getTracks:function(){return q},addTracks:function(){if(X&&se&&(O=se.getMediaInfoForType(X,ae.Z.IMAGE))){var Oe=se.getVoRepresentations(O);Oe&&Oe.length>0&&Oe.forEach(function(_t){(_t.segmentInfoType===T.Z.SEGMENT_TEMPLATE&&_t.segmentDuration>0&&_t.media||_t.segmentInfoType===T.Z.SEGMENT_TIMELINE)&&tt(_t),_t.segmentInfoType===T.Z.SEGMENT_BASE&&tt(_t,!0)}),q.length>0&&q.sort(function(_t,dt){return _t.bitrate-dt.bitrate})}},reset:ve,setTrackByIndex:function(Oe){q&&q.length!==0&&(Oe>=q.length&&(Oe=q.length-1),$=Oe)},getCurrentTrack:function(){return $<0?null:q[$]},getCurrentTrackIndex:function(){return $},getThumbnailRequestForTime:function(Oe){for(var _t,dt=se.getVoRepresentations(O),ke=0;ke<dt.length;ke++)if(q[$].id===dt[ke].id){_t=dt[ke];break}return F.getSegmentRequestForTime(O,_t,Oe)}},ve(),re=(0,_.Z)(ee).create({}),H=(0,u.Z)(ee).getInstance(),K=(0,n.Z)(ee).create({events:ye,eventBus:Ye,streamInfo:X,timelineConverter:Ae,dashConstants:Pe,dashMetrics:I.dashMetrics,segmentBaseController:I.segmentBaseController,type:ae.Z.IMAGE}),(F=(0,m.Z)(ee).create({streamInfo:X,type:ae.Z.IMAGE,timelineConverter:Ae,segmentsController:K,baseURLController:_e,debug:Le,eventBus:Ye,events:ye,dashConstants:Pe,urlUtils:He})).initialize(!!se&&se.getIsDynamic()),k}d.__dashjs_factory_name="ThumbnailTracks",we.Z=t.Z.getClassFactory(d)},7417:function(at,we,P){var ae=P(6398),T=P(8260),t=P(5448),e=P(6934),y=P(9597);function p(){var u,_,m=this.context;function n(I){if(!I)return null;I.fileStart===void 0&&(I.fileStart=0);var k=e.parseBuffer(I),q=(0,T.Z)(m).create();return q.setData(k),q}function c(I,k){return I[k+3]>>>0|I[k+2]<<8>>>0|I[k+1]<<16>>>0|I[k]<<24>>>0}function d(I,k){return String.fromCharCode(I[k++])+String.fromCharCode(I[k++])+String.fromCharCode(I[k++])+String.fromCharCode(I[k])}return _={parse:n,findLastTopIsoBoxCompleted:function(I,k,q){if(q===void 0&&(q=0),!k||q+8>=k.byteLength)return new y.Z(0,!1);for(var F,$=k instanceof ArrayBuffer?new Uint8Array(k):k,O=0;q<$.byteLength;){var K=c($,q),re=d($,q+4);if(K===0)break;q+K<=$.byteLength&&(I.indexOf(re)>=0?F=new y.Z(q,!0,K):O=q+K),q+=K}return F||new y.Z(O,!1)},getMediaTimescaleFromMoov:function(I){var k=n(I),q=k?k.getBox("mdhd"):void 0;return q?q.timescale:NaN},getSamplesInfo:function(I){if(!I||I.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var k,q,F,$,O,K,re,H,ee,se,_e,X,Ae,Le,Ye,ye,Pe=n(I),He=Pe.getBoxes("moof"),tt=Pe.getBoxes("mfhd");Ye=Pe.getBoxes("moof").length,Le=tt[tt.length-1].sequence_number,q=0,O=[];var ve=-1,Oe=-1;for(se=0;se<He.length;se++){var _t=He[se],dt=_t.getChildBoxes("traf");for(H=0;H<dt.length;H++){var ke=dt[H],Je=ke.getChildBox("tfhd"),ge=ke.getChildBox("tfdt");$=ge.baseMediaDecodeTime;var me=ke.getChildBoxes("trun"),Ue=ke.getChildBoxes("subs");for(ee=0;ee<me.length;ee++){var f=me[ee];for(q=f.sample_count,Ae=(Je.base_data_offset||0)+(f.data_offset||0),re=0;re<q;re++){k=(K=f.samples[re]).sample_duration!==void 0?K.sample_duration:Je.default_sample_duration,F=K.sample_size!==void 0?K.sample_size:Je.default_sample_size;var o={dts:$,cts:$+(K.sample_composition_time_offset!==void 0?K.sample_composition_time_offset:0),duration:k,offset:_t.offset+Ae,size:F,subSizes:[F]};if(Ue)for(_e=0;_e<Ue.length;_e++){var v=Ue[_e];if(ve<v.entry_count-1&&re>Oe&&(ve++,Oe+=v.entries[ve].sample_delta),re==Oe){o.subSizes=[];var S=v.entries[ve];for(X=0;X<S.subsample_count;X++)o.subSizes.push(S.subsamples[X].subsample_size)}}O.push(o),Ae+=F,$+=k}}ye=$-ge.baseMediaDecodeTime}}return{sampleList:O,lastSequenceNumber:Le,totalDuration:ye,numSequences:Ye}},findInitRange:function(I){var k=null,q=n(I);if(!q)return k;var F=q.getBox("ftyp"),$=q.getBox("moov");return u.debug("Searching for initialization."),$&&$.isComplete&&(k=(F?F.offset:$.offset)+"-"+($.offset+$.size-1),u.debug("Found the initialization.  Range: "+k)),k},parsePayload:function(I,k,q){if(q===void 0&&(q=0),!k||q+8>=k.byteLength)return new y.Z(0,!1);for(var F,$=k instanceof ArrayBuffer?new Uint8Array(k):k,O=0;q<$.byteLength;){var K=c($,q),re=d($,q+4);if(K===0)break;q+K<=$.byteLength&&(I.indexOf(re)>=0?F=new y.Z(q,!0,K,re):O=q+K),q+=K}return F||new y.Z(O,!1)}},u=(0,ae.Z)(m).getInstance().getLogger(_),_}p.__dashjs_factory_name="BoxParser",we.Z=t.Z.getSingletonFactory(p)},1715:function(at,we,P){P.d(we,{B:function(){return y}});var ae=P(5448),T=P(7803),t=P(3393),e=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function y(){var u="ManagedMediaSource"in window,_="WebKitMediaSource"in window,m="MediaSource"in window;return u||_||m}function p(){var u,_,m;return u={setConfig:function(n){n&&n.settings&&(_=n.settings)},supportsMediaSource:y,supportsEncryptedMedia:function(){return m},supportsCodec:function(n,c){return c!==t.Z.AUDIO&&c!==t.Z.VIDEO?Promise.resolve(!0):function(d,I){return _.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(d.codec&&I===t.Z.AUDIO||I===t.Z.VIDEO&&d.codec&&d.width&&d.height&&d.bitrate&&d.framerate)}(n,c)?function(d,I){return new Promise(function(k){if(d&&d.codec){var q={type:"media-source"};q[I]={},q[I].contentType=d.codec,q[I].width=d.width,q[I].height=d.height,q[I].bitrate=parseInt(d.bitrate),q[I].framerate=parseFloat(d.framerate),navigator.mediaCapabilities.decodingInfo(q).then(function(F){k(F.supported)}).catch(function(){k(!1)})}else k(!1)})}(n,c):function(d){return new Promise(function(I){if(d&&d.codec){var k=d.codec;d.width&&d.height&&(k+=';width="'+d.width+'";height="'+d.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(k)||"MediaSource"in window&&MediaSource.isTypeSupported(k)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(k)?I(!0):I(!1)}else I(!1)})}(n)},setEncryptedMediaSupported:function(n){m=n},supportsEssentialProperty:function(n){try{return T.Y.indexOf(n.schemeIdUri)!==-1||t.Z.FONT_DOWNLOAD_DVB_SCHEME===n.schemeIdUri}catch{return!0}},codecRootCompatibleWithCodec:function(n,c){for(var d,I=n.split(".")[0],k=c.indexOf(I)===0,q=0;q<e.length;q++)if(e[q].codec===I){d=e[q];break}return d?k||d.compatibleCodecs.some(function(F){return c.indexOf(F)===0}):k}},m=!1,u}p.__dashjs_factory_name="Capabilities",we.Z=ae.Z.getSingletonFactory(p)},2295:function(at,we,P){var ae=P(5448),T=P(3106);function t(){return{customTimeRangeArray:[],length:0,add:function(e,y){var p;for(p=0;p<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[p].start;p++);for(this.customTimeRangeArray.splice(p,0,{start:e,end:y}),p=0;p<this.customTimeRangeArray.length-1;p++)this.mergeRanges(p,p+1)&&p--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,y){for(var p=0;p<this.customTimeRangeArray.length;p++)if(e<=this.customTimeRangeArray[p].start&&y>=this.customTimeRangeArray[p].end)this.customTimeRangeArray.splice(p,1),p--;else{if(e>this.customTimeRangeArray[p].start&&y<this.customTimeRangeArray[p].end){this.customTimeRangeArray.splice(p+1,0,{start:y,end:this.customTimeRangeArray[p].end}),this.customTimeRangeArray[p].end=e;break}e>this.customTimeRangeArray[p].start&&e<this.customTimeRangeArray[p].end?this.customTimeRangeArray[p].end=e:y>this.customTimeRangeArray[p].start&&y<this.customTimeRangeArray[p].end&&(this.customTimeRangeArray[p].start=y)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,y){var p=this.customTimeRangeArray[e],u=this.customTimeRangeArray[y];return p.start<=u.start&&u.start<=p.end&&p.end<=u.end?(p.end=u.end,this.customTimeRangeArray.splice(y,1),!0):u.start<=p.start&&p.start<=u.end&&u.end<=p.end?(p.start=u.start,this.customTimeRangeArray.splice(y,1),!0):u.start<=p.start&&p.start<=u.end&&p.end<=u.end?(this.customTimeRangeArray.splice(e,1),!0):p.start<=u.start&&u.start<=p.end&&u.end<=p.end&&(this.customTimeRangeArray.splice(y,1),!0)},start:function(e){return(0,T.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,T.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}t.__dashjs_factory_name="CustomTimeRanges",we.Z=ae.Z.getClassFactory(t)},5:function(at,we,P){var ae=P(5448);function T(){var t,e=/^[a-z][a-z0-9+\-_.]*:/i,y=/^https?:\/\//i,p=/^https:\/\//i,u=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,_=function(F,$){try{return new window.URL(F,$).toString()}catch{return F}},m=function(F,$){var O=n;if(!$||!I(F))return F;k(F)&&(O=c),q(F)&&(O=d);var K=O($),re=K.charAt(K.length-1)!=="/"&&F.charAt(0)!=="/"?"/":"";return[K,F].join(re)};function n(F){var $=F.indexOf("/"),O=F.lastIndexOf("/");return $!==-1?O===$+1?F:(F.indexOf("?")!==-1&&(F=F.substring(0,F.indexOf("?"))),F.substring(0,O+1)):""}function c(F){var $=F.match(u);return $?$[1]:""}function d(F){var $=F.match(e);return $?$[0]:""}function I(F){return!e.test(F)}function k(F){return I(F)&&F.charAt(0)==="/"}function q(F){return F.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),t=_}catch{}finally{t=t||m}}(),{parseBaseUrl:n,parseOrigin:c,parseScheme:d,isRelative:I,isPathAbsolute:k,isSchemeRelative:q,isHTTPURL:function(F){return y.test(F)},isHTTPS:function(F){return p.test(F)},removeHostname:function(F){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(F)[2].substring(1)},resolve:function(F,$){return t(F,$)}}}T.__dashjs_factory_name="DefaultURLUtils",we.Z=ae.Z.getSingletonFactory(T)},8260:function(at,we,P){var ae=P(2839),T=P(5448);function t(){var e;function y(u){var _=[];if(!u||!e||typeof e.fetchAll!="function")return _;for(var m,n=e.fetchAll(u),c=0,d=n.length;c<d;c++)(m=p(n[c]))&&_.push(m);return _}function p(u){if(!u)return null;var _=new ae.Z(u);return u.hasOwnProperty("_incomplete")&&(_.isComplete=!u._incomplete),_}return{getBox:function(u){return u&&e&&e.boxes&&e.boxes.length!==0&&typeof e.fetch=="function"?p(e.fetch(u)):null},getBoxes:y,setData:function(u){e=u},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var u=y(e.boxes[e.boxes.length-1].type);return u.length>0?u[u.length-1]:null}}}t.__dashjs_factory_name="IsoFile",we.Z=T.Z.getClassFactory(t)},7473:function(at,we,P){P.d(we,{k:function(){return T}});var ae=P(5448);function T(e,y){var p={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0,range:e.request.range};return Promise.resolve(y.modifyRequest(p)).then(function(){return Object.assign(e,p,{withCredentials:p.credentials==="include"})})}function t(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,y){return y.url,e}}}t.__dashjs_factory_name="RequestModifier",we.Z=ae.Z.getSingletonFactory(t)},3106:function(at,we,P){P.d(we,{PS:function(){return t},SE:function(){return e}});var ae=P(3393);function T(y){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},T(y)}function t(y,p){if(T(y)!==p)throw ae.Z.BAD_ARGUMENT_ERROR}function e(y){if(y===null||isNaN(y)||y%1!=0)throw ae.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(at,we,P){var ae=P(5448),T=P(5);function t(){var y,p=[],u=this.context;function _(m,n,c){var d=function(I){var k;for(k=0;k<p.length;k++)if(p[k].regex.test(I))return p[k].utils;return y}(c||n);return d&&typeof d[m]=="function"?d[m](n,c):y[m](n,c)}return y=(0,T.Z)(u).getInstance(),{registerUrlRegex:function(m,n){p.push({regex:m,utils:n})},parseBaseUrl:function(m){return _("parseBaseUrl",m)},parseOrigin:function(m){return _("parseOrigin",m)},parseScheme:function(m){return _("parseScheme",m)},isRelative:function(m){return _("isRelative",m)},isPathAbsolute:function(m){return _("isPathAbsolute",m)},isSchemeRelative:function(m){return _("isSchemeRelative",m)},isHTTPURL:function(m){return _("isHTTPURL",m)},isHTTPS:function(m){return _("isHTTPS",m)},removeHostname:function(m){return _("removeHostname",m)},resolve:function(m,n){return _("resolve",m,n)}}}t.__dashjs_factory_name="URLUtils";var e=ae.Z.getSingletonFactory(t);we.Z=e},5459:function(at,we){we.Z=function P(ae,T,t){(function(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")})(this,P),this.code=ae||null,this.message=T||null,this.data=t||null}},3186:function(at,we,P){var ae=P(7855);function T(e,y){for(var p=0;p<y.length;p++){var u=y[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}var t=function(){function e(u){(function(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=u||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var y,p;return y=e,(p=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===ae.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(u){this.type=u&&u.init?ae.w.INIT_SEGMENT_TYPE:ae.w.MEDIA_SEGMENT_TYPE,this.url=u&&u.url?u.url:null,this.range=u&&u.range?u.range.start+"-"+u.range.end:null,this.mediaType=u&&u.mediaType?u.mediaType:null}}])&&T(y.prototype,p),e}();t.ACTION_DOWNLOAD="download",t.ACTION_COMPLETE="complete",we.Z=t},2839:function(at,we){function P(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var ae=function(){function T(y){if(function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,T),this.offset=y._offset,this.type=y.type,this.size=y.size,this.boxes=[],y.boxes)for(var p=0;p<y.boxes.length;p++)this.boxes.push(new T(y.boxes[p]));switch(this.isComplete=!0,y.type){case"sidx":if(this.timescale=y.timescale,this.earliest_presentation_time=y.earliest_presentation_time,this.first_offset=y.first_offset,this.references=y.references,y.references){this.references=[];for(var u=0;u<y.references.length;u++){var _={reference_type:y.references[u].reference_type,referenced_size:y.references[u].referenced_size,subsegment_duration:y.references[u].subsegment_duration};this.references.push(_)}}break;case"emsg":this.id=y.id,this.version=y.version===1?1:0,this.value=y.value,this.timescale=y.timescale,this.scheme_id_uri=y.scheme_id_uri,this.presentation_time_delta=y.version===1?y.presentation_time:y.presentation_time_delta,this.event_duration=y.event_duration,this.message_data=y.message_data;break;case"mdhd":this.timescale=y.timescale;break;case"mfhd":this.sequence_number=y.sequence_number;break;case"subs":this.entry_count=y.entry_count,this.entries=y.entries;break;case"tfhd":this.base_data_offset=y.base_data_offset,this.sample_description_index=y.sample_description_index,this.default_sample_duration=y.default_sample_duration,this.default_sample_size=y.default_sample_size,this.default_sample_flags=y.default_sample_flags,this.flags=y.flags;break;case"tfdt":this.version=y.version,this.baseMediaDecodeTime=y.baseMediaDecodeTime,this.flags=y.flags;break;case"trun":if(this.sample_count=y.sample_count,this.first_sample_flags=y.first_sample_flags,this.data_offset=y.data_offset,this.flags=y.flags,this.samples=y.samples,y.samples){this.samples=[];for(var m=0,n=y.samples.length;m<n;m++){var c={sample_size:y.samples[m].sample_size,sample_duration:y.samples[m].sample_duration,sample_composition_time_offset:y.samples[m].sample_composition_time_offset};this.samples.push(c)}}break;case"prft":this.version=y.version,this.reference_track_ID=y.reference_track_ID,this.ntp_timestamp_sec=y.ntp_timestamp_sec,this.ntp_timestamp_frac=y.ntp_timestamp_frac,this.media_time=y.media_time,this.flags=y.flags}}var t,e;return t=T,(e=[{key:"getChildBox",value:function(y){for(var p=0;p<this.boxes.length;p++)if(this.boxes[p].type===y)return this.boxes[p]}},{key:"getChildBoxes",value:function(y){for(var p=[],u=0;u<this.boxes.length;u++)this.boxes[u].type===y&&p.push(this.boxes[u]);return p}}])&&P(t.prototype,e),T}();we.Z=ae},9597:function(at,we){we.Z=function P(ae,T,t){(function(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")})(this,P),this.lastCompletedOffset=ae,this.found=T,this.size=t}},2128:function(at,we){we.Z=function P(){(function(ae,T){if(!(ae instanceof T))throw new TypeError("Cannot call a class as a function")})(this,P),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(at,we,P){function ae(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}P.d(we,{O:function(){return t},w:function(){return T}});var T=function e(){ae(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},t=function e(){ae(this,e),this.s=null,this.d=null,this.b=[]};T.GET="GET",T.HEAD="HEAD",T.MPD_TYPE="MPD",T.XLINK_EXPANSION_TYPE="XLinkExpansion",T.INIT_SEGMENT_TYPE="InitializationSegment",T.INDEX_SEGMENT_TYPE="IndexSegment",T.MEDIA_SEGMENT_TYPE="MediaSegment",T.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",T.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",T.DVB_REPORTING_TYPE="DVBReporting",T.LICENSE="license",T.CONTENT_STEERING_TYPE="ContentSteering",T.OTHER_TYPE="other"},3039:function(at,we){function P(T,t){return function(e,y){for(var p,u,_,m=ae(e,"tag"),n=ae(y??"*","range"),c=[],d=-1;++d<n.length;)if(p=n[d].toLowerCase(),t||p!=="*"){for(u=-1,_=[];++u<m.length;)if(T(m[u].toLowerCase(),p)){if(!t)return m[u];c.push(m[u])}else _.push(m[u]);m=_}return t?c:void 0}}function ae(T,t){var e=T&&typeof T=="string"?[T]:T;if(!e||typeof e!="object"||!("length"in e))throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string");return e}we.basicFilter=P(function(T,t){return t==="*"||T===t||T.indexOf(t+"-")>-1},!0),we.extendedFilter=P(function(T,t){var e=T.split("-"),y=t.split("-"),p=0,u=0;if(y[u]!=="*"&&e[p]!==y[u])return!1;for(p++,u++;u<y.length;)if(y[u]!=="*"){if(!e[p])return!1;if(e[p]!==y[u]){if(e[p].length===1)return!1;p++}else p++,u++}else u++;return!0},!0),we.lookup=P(function(T,t){for(var e,y=t;;){if(y==="*"||T===y)return!0;if((e=y.lastIndexOf("-"))<0)return!1;y.charAt(e-2)==="-"&&(e-=2),y=y.slice(0,e)}})},3973:function(at,we,P){at.exports=P(3854)},3854:function(at,we,P){var ae=P(2415),T=P(3039),t=P(7778),e=P(5813),y=P(3165),p=P(9460);at.exports=function(k,q){var F,$=q||{},O=ae.parse(String(k||"").toLowerCase(),$),K=ae.stringify(O),re=-1;if(!K)return K;for(;++re<t.length;)T.extendedFilter(K,t[re].from).length&&(n(O,t[re].from,t[re].to),K=ae.stringify(O));for(re=-1;++re<e.length;)c(O,e[re].from.field,e[re].from.value)&&d(O,e[re].to.field,e[re].to.value);for(K=ae.stringify(Object.assign({},O,m)),re=-1;++re<y.length;)K===y[re]&&(n(O,y[re],y[re].split("-").slice(0,-1).join("-")),K=ae.stringify(Object.assign({},O,m)));if(O.extensions.sort(I),$.warning)for(F in p)u.call(p[F],O[F])&&$.warning("Deprecated "+F+" `"+O[F]+"`, expected one of `"+p[F][O[F]].join("`, `")+"`",null,7);return O.script&&(O.script=O.script.charAt(0).toUpperCase()+O.script.slice(1)),O.region&&(O.region=O.region.toUpperCase()),ae.stringify(O)};var u={}.hasOwnProperty,_=new Intl.Collator,m={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function n(k,q,F){var $,O=ae.parse(q),K=ae.parse(F),re=[];for($ in O)O[$]&&O[$].length&&c(k,$,O[$])&&re.push($);for($ in K)K[$]&&K[$].length&&(re.indexOf($)>-1||!k[$]||!k[$].length)&&d(k,$,K[$])}function c(k,q,F){var $,O,K,re,H=!1;if(F){if(O=$=k[q],$&&typeof $=="object")for(O=[],K=-1;++K<$.length;)re=$[K],F.indexOf(re)<0?O.push(re):H=!0;else $===F&&(O=null,H=!0);k[q]=O}return H}function d(k,q,F){var $,O,K,re=k[q];if(re&&typeof re=="object")for($=[].concat(F),O=-1;++O<$.length;)K=$[O],re.indexOf(K)<0&&re.push(K);else k[q]=F}function I(k,q){return _.compare(k.singleton,q.singleton)}},2415:function(at,we,P){we.parse=P(6903),we.stringify=P(6713)},6903:function(at,we,P){var ae=P(2219),T=P(3516),t=P(395),e=P(858),y=P(8589);at.exports=function u(_,m){var n,c,d,I=m||{},k={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},q=String(_),F=q.toLowerCase(),$=0;if(_==null)throw new Error("Expected string, got `"+_+"`");if(p.call(y,F))return(I.normalize==null||I.normalize)&&y[F]?u(y[F]):(k[e.indexOf(F)===-1?"irregular":"regular"]=q,k);for(;T(F.charCodeAt($))&&$<9;)$++;if($>1&&$<9){if(k.language=q.slice(0,$),$<4)for(c=0;F.charCodeAt($)===45&&T(F.charCodeAt($+1))&&T(F.charCodeAt($+2))&&T(F.charCodeAt($+3))&&!T(F.charCodeAt($+4));){if(c>2)return O($,3,"Too many extended language subtags, expected at most 3 subtags");k.extendedLanguageSubtags.push(q.slice($+1,$+4)),$+=4,c++}for(F.charCodeAt($)===45&&T(F.charCodeAt($+1))&&T(F.charCodeAt($+2))&&T(F.charCodeAt($+3))&&T(F.charCodeAt($+4))&&!T(F.charCodeAt($+5))&&(k.script=q.slice($+1,$+5),$+=5),F.charCodeAt($)===45&&(T(F.charCodeAt($+1))&&T(F.charCodeAt($+2))&&!T(F.charCodeAt($+3))?(k.region=q.slice($+1,$+3),$+=3):t(F.charCodeAt($+1))&&t(F.charCodeAt($+2))&&t(F.charCodeAt($+3))&&!t(F.charCodeAt($+4))&&(k.region=q.slice($+1,$+4),$+=4));F.charCodeAt($)===45;){for(d=n=$+1;ae(F.charCodeAt(d));){if(d-n>7)return O(d,1,"Too long variant, expected at most 8 characters");d++}if(!(d-n>4||d-n>3&&t(F.charCodeAt(n))))break;k.variants.push(q.slice(n,d)),$=d}for(;F.charCodeAt($)===45&&F.charCodeAt($+1)!==120&&ae(F.charCodeAt($+1))&&F.charCodeAt($+2)===45&&ae(F.charCodeAt($+3));){for(d=$+2,c=0;F.charCodeAt(d)===45&&ae(F.charCodeAt(d+1))&&ae(F.charCodeAt(d+2));)for(d=(n=d+1)+2,c++;ae(F.charCodeAt(d));){if(d-n>7)return O(d,2,"Too long extension, expected at most 8 characters");d++}if(!c)return O(d,4,"Empty extension, extensions must have at least 2 characters of content");k.extensions.push({singleton:q.charAt($+1),extensions:q.slice($+3,d).split("-")}),$=d}}else $=0;if($===0&&F.charCodeAt($)===120||F.charCodeAt($)===45&&F.charCodeAt($+1)===120)for(d=$=$?$+2:1;F.charCodeAt(d)===45&&ae(F.charCodeAt(d+1));){for(d=n=$+1;ae(F.charCodeAt(d));){if(d-n>7)return O(d,5,"Too long private-use area, expected at most 8 characters");d++}k.privateuse.push(q.slice($+1,d)),$=d}return $!==q.length?O($,6,"Found superfluous content after tag"):k;function O(K,re,H){return I.warning&&I.warning(H,re,K),I.forgiving?k:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var p={}.hasOwnProperty},6713:function(at){at.exports=function(we){var P,ae,T,t=we||{},e=[];if(t.irregular||t.regular)return t.irregular||t.regular;if(t.language)for(e=e.concat(t.language,t.extendedLanguageSubtags||[],t.script||[],t.region||[],t.variants||[]),P=t.extensions||[],ae=-1;++ae<P.length;)(T=P[ae]).singleton&&T.extensions&&T.extensions.length&&(e=e.concat(T.singleton,T.extensions));return t.privateuse&&t.privateuse.length&&(e=e.concat("x",t.privateuse)),e.join("-")}},1549:function(at,we,P){var ae=P(6693),T=P(2165),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;we.Buffer=p,we.SlowBuffer=function(f){return+f!=f&&(f=0),p.alloc(+f)},we.INSPECT_MAX_BYTES=50;var e=2147483647;function y(f){if(f>e)throw new RangeError('The value "'+f+'" is invalid for option "size"');var o=new Uint8Array(f);return Object.setPrototypeOf(o,p.prototype),o}function p(f,o,v){if(typeof f=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(f)}return u(f,o,v)}function u(f,o,v){if(typeof f=="string")return function(V,Se){if(typeof Se=="string"&&Se!==""||(Se="utf8"),!p.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);var ze=0|I(V,Se),Me=y(ze),De=Me.write(V,Se);return De!==ze&&(Me=Me.slice(0,De)),Me}(f,o);if(ArrayBuffer.isView(f))return function(V){if(ge(V,Uint8Array)){var Se=new Uint8Array(V);return c(Se.buffer,Se.byteOffset,Se.byteLength)}return n(V)}(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(ge(f,ArrayBuffer)||f&&ge(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(f,SharedArrayBuffer)||f&&ge(f.buffer,SharedArrayBuffer)))return c(f,o,v);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=f.valueOf&&f.valueOf();if(S!=null&&S!==f)return p.from(S,o,v);var W=function(V){if(p.isBuffer(V)){var Se=0|d(V.length),ze=y(Se);return ze.length===0||V.copy(ze,0,0,Se),ze}return V.length!==void 0?typeof V.length!="number"||me(V.length)?y(0):n(V):V.type==="Buffer"&&Array.isArray(V.data)?n(V.data):void 0}(f);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return p.from(f[Symbol.toPrimitive]("string"),o,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}function _(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function m(f){return _(f),y(f<0?0:0|d(f))}function n(f){for(var o=f.length<0?0:0|d(f.length),v=y(o),S=0;S<o;S+=1)v[S]=255&f[S];return v}function c(f,o,v){if(o<0||f.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<o+(v||0))throw new RangeError('"length" is outside of buffer bounds');var S;return S=o===void 0&&v===void 0?new Uint8Array(f):v===void 0?new Uint8Array(f,o):new Uint8Array(f,o,v),Object.setPrototypeOf(S,p.prototype),S}function d(f){if(f>=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|f}function I(f,o){if(p.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||ge(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var v=f.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&v===0)return 0;for(var W=!1;;)switch(o){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return dt(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return ke(f).length;default:if(W)return S?-1:dt(f).length;o=(""+o).toLowerCase(),W=!0}}function k(f,o,v){var S=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(o>>>=0))return"";for(f||(f="utf8");;)switch(f){case"hex":return Ye(this,o,v);case"utf8":case"utf-8":return _e(this,o,v);case"ascii":return Ae(this,o,v);case"latin1":case"binary":return Le(this,o,v);case"base64":return se(this,o,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,o,v);default:if(S)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),S=!0}}function q(f,o,v){var S=f[o];f[o]=f[v],f[v]=S}function F(f,o,v,S,W){if(f.length===0)return-1;if(typeof v=="string"?(S=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),me(v=+v)&&(v=W?0:f.length-1),v<0&&(v=f.length+v),v>=f.length){if(W)return-1;v=f.length-1}else if(v<0){if(!W)return-1;v=0}if(typeof o=="string"&&(o=p.from(o,S)),p.isBuffer(o))return o.length===0?-1:$(f,o,v,S,W);if(typeof o=="number")return o&=255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(f,o,v):Uint8Array.prototype.lastIndexOf.call(f,o,v):$(f,[o],v,S,W);throw new TypeError("val must be string, number or Buffer")}function $(f,o,v,S,W){var V,Se=1,ze=f.length,Me=o.length;if(S!==void 0&&((S=String(S).toLowerCase())==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(f.length<2||o.length<2)return-1;Se=2,ze/=2,Me/=2,v/=2}function De(mt,it){return Se===1?mt[it]:mt.readUInt16BE(it*Se)}if(W){var be=-1;for(V=v;V<ze;V++)if(De(f,V)===De(o,be===-1?0:V-be)){if(be===-1&&(be=V),V-be+1===Me)return be*Se}else be!==-1&&(V-=V-be),be=-1}else for(v+Me>ze&&(v=ze-Me),V=v;V>=0;V--){for(var xe=!0,Qe=0;Qe<Me;Qe++)if(De(f,V+Qe)!==De(o,Qe)){xe=!1;break}if(xe)return V}return-1}function O(f,o,v,S){v=Number(v)||0;var W=f.length-v;S?(S=Number(S))>W&&(S=W):S=W;var V=o.length;S>V/2&&(S=V/2);for(var Se=0;Se<S;++Se){var ze=parseInt(o.substr(2*Se,2),16);if(me(ze))return Se;f[v+Se]=ze}return Se}function K(f,o,v,S){return Je(dt(o,f.length-v),f,v,S)}function re(f,o,v,S){return Je(function(W){for(var V=[],Se=0;Se<W.length;++Se)V.push(255&W.charCodeAt(Se));return V}(o),f,v,S)}function H(f,o,v,S){return Je(ke(o),f,v,S)}function ee(f,o,v,S){return Je(function(W,V){for(var Se,ze,Me,De=[],be=0;be<W.length&&!((V-=2)<0);++be)ze=(Se=W.charCodeAt(be))>>8,Me=Se%256,De.push(Me),De.push(ze);return De}(o,f.length-v),f,v,S)}function se(f,o,v){return o===0&&v===f.length?ae.fromByteArray(f):ae.fromByteArray(f.slice(o,v))}function _e(f,o,v){v=Math.min(f.length,v);for(var S=[],W=o;W<v;){var V,Se,ze,Me,De=f[W],be=null,xe=De>239?4:De>223?3:De>191?2:1;if(W+xe<=v)switch(xe){case 1:De<128&&(be=De);break;case 2:(192&(V=f[W+1]))==128&&(Me=(31&De)<<6|63&V)>127&&(be=Me);break;case 3:V=f[W+1],Se=f[W+2],(192&V)==128&&(192&Se)==128&&(Me=(15&De)<<12|(63&V)<<6|63&Se)>2047&&(Me<55296||Me>57343)&&(be=Me);break;case 4:V=f[W+1],Se=f[W+2],ze=f[W+3],(192&V)==128&&(192&Se)==128&&(192&ze)==128&&(Me=(15&De)<<18|(63&V)<<12|(63&Se)<<6|63&ze)>65535&&Me<1114112&&(be=Me)}be===null?(be=65533,xe=1):be>65535&&(be-=65536,S.push(be>>>10&1023|55296),be=56320|1023&be),S.push(be),W+=xe}return function(Qe){var mt=Qe.length;if(mt<=X)return String.fromCharCode.apply(String,Qe);for(var it="",Ut=0;Ut<mt;)it+=String.fromCharCode.apply(String,Qe.slice(Ut,Ut+=X));return it}(S)}we.kMaxLength=e,p.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(f,o),f.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(f,o,v){return u(f,o,v)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(f,o,v){return function(S,W,V){return _(S),S<=0?y(S):W!==void 0?typeof V=="string"?y(S).fill(W,V):y(S).fill(W):y(S)}(f,o,v)},p.allocUnsafe=function(f){return m(f)},p.allocUnsafeSlow=function(f){return m(f)},p.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==p.prototype},p.compare=function(f,o){if(ge(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),ge(o,Uint8Array)&&(o=p.from(o,o.offset,o.byteLength)),!p.isBuffer(f)||!p.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===o)return 0;for(var v=f.length,S=o.length,W=0,V=Math.min(v,S);W<V;++W)if(f[W]!==o[W]){v=f[W],S=o[W];break}return v<S?-1:S<v?1:0},p.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(f,o){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return p.alloc(0);var v;if(o===void 0)for(o=0,v=0;v<f.length;++v)o+=f[v].length;var S=p.allocUnsafe(o),W=0;for(v=0;v<f.length;++v){var V=f[v];if(ge(V,Uint8Array))W+V.length>S.length?p.from(V).copy(S,W):Uint8Array.prototype.set.call(S,V,W);else{if(!p.isBuffer(V))throw new TypeError('"list" argument must be an Array of Buffers');V.copy(S,W)}W+=V.length}return S},p.byteLength=I,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<f;o+=2)q(this,o,o+1);return this},p.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<f;o+=4)q(this,o,o+3),q(this,o+1,o+2);return this},p.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<f;o+=8)q(this,o,o+7),q(this,o+1,o+6),q(this,o+2,o+5),q(this,o+3,o+4);return this},p.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?_e(this,0,f):k.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(f){if(!p.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||p.compare(this,f)===0},p.prototype.inspect=function(){var f="",o=we.INSPECT_MAX_BYTES;return f=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(f+=" ... "),"<Buffer "+f+">"},t&&(p.prototype[t]=p.prototype.inspect),p.prototype.compare=function(f,o,v,S,W){if(ge(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),!p.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(o===void 0&&(o=0),v===void 0&&(v=f?f.length:0),S===void 0&&(S=0),W===void 0&&(W=this.length),o<0||v>f.length||S<0||W>this.length)throw new RangeError("out of range index");if(S>=W&&o>=v)return 0;if(S>=W)return-1;if(o>=v)return 1;if(this===f)return 0;for(var V=(W>>>=0)-(S>>>=0),Se=(v>>>=0)-(o>>>=0),ze=Math.min(V,Se),Me=this.slice(S,W),De=f.slice(o,v),be=0;be<ze;++be)if(Me[be]!==De[be]){V=Me[be],Se=De[be];break}return V<Se?-1:Se<V?1:0},p.prototype.includes=function(f,o,v){return this.indexOf(f,o,v)!==-1},p.prototype.indexOf=function(f,o,v){return F(this,f,o,v,!0)},p.prototype.lastIndexOf=function(f,o,v){return F(this,f,o,v,!1)},p.prototype.write=function(f,o,v,S){if(o===void 0)S="utf8",v=this.length,o=0;else if(v===void 0&&typeof o=="string")S=o,v=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(v)?(v>>>=0,S===void 0&&(S="utf8")):(S=v,v=void 0)}var W=this.length-o;if((v===void 0||v>W)&&(v=W),f.length>0&&(v<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(var V=!1;;)switch(S){case"hex":return O(this,f,o,v);case"utf8":case"utf-8":return K(this,f,o,v);case"ascii":case"latin1":case"binary":return re(this,f,o,v);case"base64":return H(this,f,o,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,f,o,v);default:if(V)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),V=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function Ae(f,o,v){var S="";v=Math.min(f.length,v);for(var W=o;W<v;++W)S+=String.fromCharCode(127&f[W]);return S}function Le(f,o,v){var S="";v=Math.min(f.length,v);for(var W=o;W<v;++W)S+=String.fromCharCode(f[W]);return S}function Ye(f,o,v){var S=f.length;(!o||o<0)&&(o=0),(!v||v<0||v>S)&&(v=S);for(var W="",V=o;V<v;++V)W+=Ue[f[V]];return W}function ye(f,o,v){for(var S=f.slice(o,v),W="",V=0;V<S.length-1;V+=2)W+=String.fromCharCode(S[V]+256*S[V+1]);return W}function Pe(f,o,v){if(f%1!=0||f<0)throw new RangeError("offset is not uint");if(f+o>v)throw new RangeError("Trying to access beyond buffer length")}function He(f,o,v,S,W,V){if(!p.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>W||o<V)throw new RangeError('"value" argument is out of bounds');if(v+S>f.length)throw new RangeError("Index out of range")}function tt(f,o,v,S,W,V){if(v+S>f.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function ve(f,o,v,S,W){return o=+o,v>>>=0,W||tt(f,0,v,4),T.write(f,o,v,S,23,4),v+4}function Oe(f,o,v,S,W){return o=+o,v>>>=0,W||tt(f,0,v,8),T.write(f,o,v,S,52,8),v+8}p.prototype.slice=function(f,o){var v=this.length;(f=~~f)<0?(f+=v)<0&&(f=0):f>v&&(f=v),(o=o===void 0?v:~~o)<0?(o+=v)<0&&(o=0):o>v&&(o=v),o<f&&(o=f);var S=this.subarray(f,o);return Object.setPrototypeOf(S,p.prototype),S},p.prototype.readUintLE=p.prototype.readUIntLE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=this[f],W=1,V=0;++V<o&&(W*=256);)S+=this[f+V]*W;return S},p.prototype.readUintBE=p.prototype.readUIntBE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=this[f+--o],W=1;o>0&&(W*=256);)S+=this[f+--o]*W;return S},p.prototype.readUint8=p.prototype.readUInt8=function(f,o){return f>>>=0,o||Pe(f,1,this.length),this[f]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(f,o){return f>>>=0,o||Pe(f,2,this.length),this[f]|this[f+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(f,o){return f>>>=0,o||Pe(f,2,this.length),this[f]<<8|this[f+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},p.prototype.readIntLE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=this[f],W=1,V=0;++V<o&&(W*=256);)S+=this[f+V]*W;return S>=(W*=128)&&(S-=Math.pow(2,8*o)),S},p.prototype.readIntBE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=o,W=1,V=this[f+--S];S>0&&(W*=256);)V+=this[f+--S]*W;return V>=(W*=128)&&(V-=Math.pow(2,8*o)),V},p.prototype.readInt8=function(f,o){return f>>>=0,o||Pe(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},p.prototype.readInt16LE=function(f,o){f>>>=0,o||Pe(f,2,this.length);var v=this[f]|this[f+1]<<8;return 32768&v?4294901760|v:v},p.prototype.readInt16BE=function(f,o){f>>>=0,o||Pe(f,2,this.length);var v=this[f+1]|this[f]<<8;return 32768&v?4294901760|v:v},p.prototype.readInt32LE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},p.prototype.readInt32BE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},p.prototype.readFloatLE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),T.read(this,f,!0,23,4)},p.prototype.readFloatBE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),T.read(this,f,!1,23,4)},p.prototype.readDoubleLE=function(f,o){return f>>>=0,o||Pe(f,8,this.length),T.read(this,f,!0,52,8)},p.prototype.readDoubleBE=function(f,o){return f>>>=0,o||Pe(f,8,this.length),T.read(this,f,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(f,o,v,S){f=+f,o>>>=0,v>>>=0,S||He(this,f,o,v,Math.pow(2,8*v)-1,0);var W=1,V=0;for(this[o]=255&f;++V<v&&(W*=256);)this[o+V]=f/W&255;return o+v},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(f,o,v,S){f=+f,o>>>=0,v>>>=0,S||He(this,f,o,v,Math.pow(2,8*v)-1,0);var W=v-1,V=1;for(this[o+W]=255&f;--W>=0&&(V*=256);)this[o+W]=f/V&255;return o+v},p.prototype.writeUint8=p.prototype.writeUInt8=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,1,255,0),this[o]=255&f,o+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,65535,0),this[o]=255&f,this[o+1]=f>>>8,o+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,65535,0),this[o]=f>>>8,this[o+1]=255&f,o+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,4294967295,0),this[o+3]=f>>>24,this[o+2]=f>>>16,this[o+1]=f>>>8,this[o]=255&f,o+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,4294967295,0),this[o]=f>>>24,this[o+1]=f>>>16,this[o+2]=f>>>8,this[o+3]=255&f,o+4},p.prototype.writeIntLE=function(f,o,v,S){if(f=+f,o>>>=0,!S){var W=Math.pow(2,8*v-1);He(this,f,o,v,W-1,-W)}var V=0,Se=1,ze=0;for(this[o]=255&f;++V<v&&(Se*=256);)f<0&&ze===0&&this[o+V-1]!==0&&(ze=1),this[o+V]=(f/Se>>0)-ze&255;return o+v},p.prototype.writeIntBE=function(f,o,v,S){if(f=+f,o>>>=0,!S){var W=Math.pow(2,8*v-1);He(this,f,o,v,W-1,-W)}var V=v-1,Se=1,ze=0;for(this[o+V]=255&f;--V>=0&&(Se*=256);)f<0&&ze===0&&this[o+V+1]!==0&&(ze=1),this[o+V]=(f/Se>>0)-ze&255;return o+v},p.prototype.writeInt8=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,1,127,-128),f<0&&(f=255+f+1),this[o]=255&f,o+1},p.prototype.writeInt16LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,32767,-32768),this[o]=255&f,this[o+1]=f>>>8,o+2},p.prototype.writeInt16BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,32767,-32768),this[o]=f>>>8,this[o+1]=255&f,o+2},p.prototype.writeInt32LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,2147483647,-2147483648),this[o]=255&f,this[o+1]=f>>>8,this[o+2]=f>>>16,this[o+3]=f>>>24,o+4},p.prototype.writeInt32BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[o]=f>>>24,this[o+1]=f>>>16,this[o+2]=f>>>8,this[o+3]=255&f,o+4},p.prototype.writeFloatLE=function(f,o,v){return ve(this,f,o,!0,v)},p.prototype.writeFloatBE=function(f,o,v){return ve(this,f,o,!1,v)},p.prototype.writeDoubleLE=function(f,o,v){return Oe(this,f,o,!0,v)},p.prototype.writeDoubleBE=function(f,o,v){return Oe(this,f,o,!1,v)},p.prototype.copy=function(f,o,v,S){if(!p.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),S||S===0||(S=this.length),o>=f.length&&(o=f.length),o||(o=0),S>0&&S<v&&(S=v),S===v||f.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),f.length-o<S-v&&(S=f.length-o+v);var W=S-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,v,S):Uint8Array.prototype.set.call(f,this.subarray(v,S),o),W},p.prototype.fill=function(f,o,v,S){if(typeof f=="string"){if(typeof o=="string"?(S=o,o=0,v=this.length):typeof v=="string"&&(S=v,v=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!p.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(f.length===1){var W=f.charCodeAt(0);(S==="utf8"&&W<128||S==="latin1")&&(f=W)}}else typeof f=="number"?f&=255:typeof f=="boolean"&&(f=Number(f));if(o<0||this.length<o||this.length<v)throw new RangeError("Out of range index");if(v<=o)return this;var V;if(o>>>=0,v=v===void 0?this.length:v>>>0,f||(f=0),typeof f=="number")for(V=o;V<v;++V)this[V]=f;else{var Se=p.isBuffer(f)?f:p.from(f,S),ze=Se.length;if(ze===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(V=0;V<v-o;++V)this[V+o]=Se[V%ze]}return this};var _t=/[^+/0-9A-Za-z-_]/g;function dt(f,o){var v;o=o||1/0;for(var S=f.length,W=null,V=[],Se=0;Se<S;++Se){if((v=f.charCodeAt(Se))>55295&&v<57344){if(!W){if(v>56319){(o-=3)>-1&&V.push(239,191,189);continue}if(Se+1===S){(o-=3)>-1&&V.push(239,191,189);continue}W=v;continue}if(v<56320){(o-=3)>-1&&V.push(239,191,189),W=v;continue}v=65536+(W-55296<<10|v-56320)}else W&&(o-=3)>-1&&V.push(239,191,189);if(W=null,v<128){if((o-=1)<0)break;V.push(v)}else if(v<2048){if((o-=2)<0)break;V.push(v>>6|192,63&v|128)}else if(v<65536){if((o-=3)<0)break;V.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((o-=4)<0)break;V.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return V}function ke(f){return ae.toByteArray(function(o){if((o=(o=o.split("=")[0]).trim().replace(_t,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(f))}function Je(f,o,v,S){for(var W=0;W<S&&!(W+v>=o.length||W>=f.length);++W)o[W+v]=f[W];return W}function ge(f,o){return f instanceof o||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===o.name}function me(f){return f!=f}var Ue=function(){for(var f="0123456789abcdef",o=new Array(256),v=0;v<16;++v)for(var S=16*v,W=0;W<16;++W)o[S+W]=f[v]+f[W];return o}()},6693:function(at,we){we.byteLength=function(_){var m=p(_),n=m[0],c=m[1];return 3*(n+c)/4-c},we.toByteArray=function(_){var m,n,c=p(_),d=c[0],I=c[1],k=new T(function($,O,K){return 3*(O+K)/4-K}(0,d,I)),q=0,F=I>0?d-4:d;for(n=0;n<F;n+=4)m=ae[_.charCodeAt(n)]<<18|ae[_.charCodeAt(n+1)]<<12|ae[_.charCodeAt(n+2)]<<6|ae[_.charCodeAt(n+3)],k[q++]=m>>16&255,k[q++]=m>>8&255,k[q++]=255&m;return I===2&&(m=ae[_.charCodeAt(n)]<<2|ae[_.charCodeAt(n+1)]>>4,k[q++]=255&m),I===1&&(m=ae[_.charCodeAt(n)]<<10|ae[_.charCodeAt(n+1)]<<4|ae[_.charCodeAt(n+2)]>>2,k[q++]=m>>8&255,k[q++]=255&m),k},we.fromByteArray=function(_){for(var m,n=_.length,c=n%3,d=[],I=16383,k=0,q=n-c;k<q;k+=I)d.push(u(_,k,k+I>q?q:k+I));return c===1?(m=_[n-1],d.push(P[m>>2]+P[m<<4&63]+"==")):c===2&&(m=(_[n-2]<<8)+_[n-1],d.push(P[m>>10]+P[m>>4&63]+P[m<<2&63]+"=")),d.join("")};for(var P=[],ae=[],T=typeof Uint8Array<"u"?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,y=t.length;e<y;++e)P[e]=t[e],ae[t.charCodeAt(e)]=e;function p(_){var m=_.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=_.indexOf("=");return n===-1&&(n=m),[n,n===m?0:4-n%4]}function u(_,m,n){for(var c,d,I=[],k=m;k<n;k+=3)c=(_[k]<<16&16711680)+(_[k+1]<<8&65280)+(255&_[k+2]),I.push(P[(d=c)>>18&63]+P[d>>12&63]+P[d>>6&63]+P[63&d]);return I.join("")}ae[45]=62,ae[95]=63},2165:function(at,we){we.read=function(P,ae,T,t,e){var y,p,u=8*e-t-1,_=(1<<u)-1,m=_>>1,n=-7,c=T?e-1:0,d=T?-1:1,I=P[ae+c];for(c+=d,y=I&(1<<-n)-1,I>>=-n,n+=u;n>0;y=256*y+P[ae+c],c+=d,n-=8);for(p=y&(1<<-n)-1,y>>=-n,n+=t;n>0;p=256*p+P[ae+c],c+=d,n-=8);if(y===0)y=1-m;else{if(y===_)return p?NaN:1/0*(I?-1:1);p+=Math.pow(2,t),y-=m}return(I?-1:1)*p*Math.pow(2,y-t)},we.write=function(P,ae,T,t,e,y){var p,u,_,m=8*y-e-1,n=(1<<m)-1,c=n>>1,d=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=t?0:y-1,k=t?1:-1,q=ae<0||ae===0&&1/ae<0?1:0;for(ae=Math.abs(ae),isNaN(ae)||ae===1/0?(u=isNaN(ae)?1:0,p=n):(p=Math.floor(Math.log(ae)/Math.LN2),ae*(_=Math.pow(2,-p))<1&&(p--,_*=2),(ae+=p+c>=1?d/_:d*Math.pow(2,1-c))*_>=2&&(p++,_/=2),p+c>=n?(u=0,p=n):p+c>=1?(u=(ae*_-1)*Math.pow(2,e),p+=c):(u=ae*Math.pow(2,c-1)*Math.pow(2,e),p=0));e>=8;P[T+I]=255&u,I+=k,u/=256,e-=8);for(p=p<<e|u,m+=e;m>0;P[T+I]=255&p,I+=k,p/=256,m-=8);P[T+I-k]|=128*q}},6934:function(at,we){var P={parseBuffer:function(t){return new ae(t).parse()},addBoxProcessor:function(t,e){typeof t=="string"&&typeof e=="function"&&(T.prototype._boxProcessors[t]=e)},createFile:function(){return new ae},createBox:function(t,e,y){var p=T.create(t);return e&&e.append(p,y),p},createFullBox:function(t,e,y){var p=P.createBox(t,e,y);return p.version=0,p.flags=0,p},Utils:{}};P.Utils.dataViewToString=function(t,e){var y=e||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(y).decode(t);var p=[],u=0;if(y==="utf-8")for(;u<t.byteLength;){var _=t.getUint8(u++);_<128||(_<224?(_=(31&_)<<6,_|=63&t.getUint8(u++)):_<240?(_=(15&_)<<12,_|=(63&t.getUint8(u++))<<6,_|=63&t.getUint8(u++)):(_=(7&_)<<18,_|=(63&t.getUint8(u++))<<12,_|=(63&t.getUint8(u++))<<6,_|=63&t.getUint8(u++))),p.push(String.fromCharCode(_))}else for(;u<t.byteLength;)p.push(String.fromCharCode(t.getUint8(u++)));return p.join("")},P.Utils.utf8ToByteArray=function(t){var e,y;if(typeof TextEncoder<"u")e=new TextEncoder().encode(t);else for(e=[],y=0;y<t.length;++y){var p=t.charCodeAt(y);p<128?e.push(p):p<2048?(e.push(192|p>>6),e.push(128|63&p)):p<65536?(e.push(224|p>>12),e.push(128|63&p>>6),e.push(128|63&p)):(e.push(240|p>>18),e.push(128|63&p>>12),e.push(128|63&p>>6),e.push(128|63&p))}return e},P.Utils.appendBox=function(t,e,y){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,y!==-1)if(y!=null){var p,u=-1;if(typeof y=="number")u=y;else{if(typeof y=="string")p=y;else{if(typeof y!="object"||!y.type)return void t.boxes.push(e);p=y.type}for(var _=0;_<t.boxes.length;_++)if(p===t.boxes[_].type){u=_+1;break}}t.boxes.splice(u,0,e)}else t.boxes.push(e)},we.parseBuffer=P.parseBuffer,we.addBoxProcessor=P.addBoxProcessor,we.createFile=P.createFile,we.createBox=P.createBox,we.createFullBox=P.createFullBox,we.Utils=P.Utils,P.Cursor=function(t){this.offset=t===void 0?0:t};var ae=function(t){this._cursor=new P.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};ae.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},ae.prototype.fetchAll=function(t,e){var y=[];return ae._sweep.call(this,t,y,e),y},ae.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=T.parse(this);if(t.type===void 0)break;this.boxes.push(t)}return this},ae._sweep=function(t,e,y){for(var p in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&y)return;ae._sweep.call(this.boxes[p],t,e,y)}},ae.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var y=new Uint8Array(e);for(this._rawo=new DataView(y.buffer),this.bytes=y,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return y.buffer},ae.prototype.append=function(t,e){P.Utils.appendBox(this,t,e)};var T=function(){this._cursor=new P.Cursor};T.parse=function(t){var e=new T;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},T.create=function(t){var e=new T;return e.type=t,e.boxes=[],e},T.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],T.prototype._boxProcessors={},T.prototype._procField=function(t,e,y){this._parsing?this[t]=this._readField(e,y):this._writeField(e,y,this[t])},T.prototype._procFieldArray=function(t,e,y,p){var u;if(this._parsing)for(this[t]=[],u=0;u<e;u++)this[t][u]=this._readField(y,p);else for(u=0;u<this[t].length;u++)this._writeField(y,p,this[t][u])},T.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},T.prototype._procEntries=function(t,e,y){var p;if(this._parsing)for(this[t]=[],p=0;p<e;p++)this[t].push({}),y.call(this,this[t][p]);else for(p=0;p<e;p++)y.call(this,this[t][p])},T.prototype._procSubEntries=function(t,e,y,p){var u;if(this._parsing)for(t[e]=[],u=0;u<y;u++)t[e].push({}),p.call(this,t[e][u]);else for(u=0;u<y;u++)p.call(this,t[e][u])},T.prototype._procEntryField=function(t,e,y,p){this._parsing?t[e]=this._readField(y,p):this._writeField(y,p,t[e])},T.prototype._procSubBoxes=function(t,e){var y;if(this._parsing)for(this[t]=[],y=0;y<e;y++)this[t].push(T.parse(this));else for(y=0;y<e;y++)this._rawo?this[t][y].write():this.size+=this[t][y].getLength()},T.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return e===-1?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},T.prototype._readInt=function(t){var e=null,y=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(y);break;case 16:e=this._raw.getInt16(y);break;case 32:e=this._raw.getInt32(y);break;case 64:var p=this._raw.getInt32(y),u=this._raw.getInt32(y+4);e=p*Math.pow(2,32)+u}return this._cursor.offset+=t>>3,e},T.prototype._readUint=function(t){var e,y,p=null,u=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:p=this._raw.getUint8(u);break;case 16:p=this._raw.getUint16(u);break;case 24:p=((e=this._raw.getUint16(u))<<8)+(y=this._raw.getUint8(u+2));break;case 32:p=this._raw.getUint32(u);break;case 64:e=this._raw.getUint32(u),y=this._raw.getUint32(u+4),p=e*Math.pow(2,32)+y}return this._cursor.offset+=t>>3,p},T.prototype._readString=function(t){for(var e="",y=0;y<t;y++){var p=this._readUint(8);e+=String.fromCharCode(p)}return e},T.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},T.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(e===0)break;t+=String.fromCharCode(e)}return t},T.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var y=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,y}return null},T.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e&&P.Utils.dataViewToString(e)},T.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},T.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},T.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(T.parse(this))},T.prototype.append=function(t,e){P.Utils.appendBox(this,t,e)},T.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},T.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},T.prototype._writeInt=function(t,e){if(this._rawo){var y=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(y,e);break;case 16:this._rawo.setInt16(y,e);break;case 32:this._rawo.setInt32(y,e);break;case 64:var p=Math.floor(e/Math.pow(2,32)),u=e-p*Math.pow(2,32);this._rawo.setUint32(y,p),this._rawo.setUint32(y+4,u)}this._cursor.offset+=t>>3}else this.size+=t>>3},T.prototype._writeUint=function(t,e){if(this._rawo){var y,p,u=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(u,e);break;case 16:this._rawo.setUint16(u,e);break;case 24:y=(16776960&e)>>8,p=255&e,this._rawo.setUint16(u,y),this._rawo.setUint8(u+2,p);break;case 32:this._rawo.setUint32(u,e);break;case 64:p=e-(y=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(u,y),this._rawo.setUint32(u+4,p)}this._cursor.offset+=t>>3}else this.size+=t>>3},T.prototype._writeString=function(t,e){for(var y=0;y<t;y++)this._writeUint(8,e.charCodeAt(y))},T.prototype._writeTerminatedString=function(t){if(t.length!==0){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},T.prototype._writeTemplate=function(t,e){var y=Math.floor(e),p=(e-y)*Math.pow(2,t/2);this._writeUint(t/2,y),this._writeUint(t/2,p)},T.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,y=0;y<t.length;y++)this._rawo.setInt8(e+y,t[y]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},T.prototype._writeUTF8String=function(t){var e=P.Utils.utf8ToByteArray(t);if(this._rawo)for(var y=new DataView(this._rawo.buffer,this._cursor.offset,e.length),p=0;p<e.length;p++)y.setUint8(p,e[p]);else this.size+=e.length},T.prototype._writeField=function(t,e,y){switch(t){case"uint":this._writeUint(e,y);break;case"int":this._writeInt(e,y);break;case"template":this._writeTemplate(e,y);break;case"string":e==-1?this._writeTerminatedString(y):this._writeString(e,y);break;case"data":this._writeData(y);break;case"utf8":this._writeUTF8String(y)}},T.prototype._boxProcessors.avc1=T.prototype._boxProcessors.avc2=T.prototype._boxProcessors.avc3=T.prototype._boxProcessors.avc4=T.prototype._boxProcessors.hvc1=T.prototype._boxProcessors.hev1=T.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},T.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"segment_duration","uint",this.version===1?64:32),this._procEntryField(t,"media_time","int",this.version===1?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)})},T.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},T.prototype._boxProcessors.free=T.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},T.prototype._boxProcessors.ftyp=T.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},T.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},T.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},T.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},T.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},T.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},T.prototype._boxProcessors.mp4a=T.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},T.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},T.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},T.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},T.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},T.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},T.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},T.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)})},T.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},T.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},T.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},T.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_delta","uint",32)})},T.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",this.version===1?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},T.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},T.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},T.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(t){this._procEntryField(t,"time","uint",this.version===1?64:32),this._procEntryField(t,"moof_offset","uint",this.version===1?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},T.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},T.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors["url "]=T.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},T.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},T.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},T.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},T.prototype._boxProcessors.vtte=function(){}},5530:function(at,we,P){at.exports=P(6146).polyfill()},6146:function(at,we,P){at.exports=function(){function ae(ke){return typeof ke=="function"}var T=Array.isArray?Array.isArray:function(ke){return Object.prototype.toString.call(ke)==="[object Array]"},t=0,e=void 0,y=void 0,p=function(ke,Je){I[t]=ke,I[t+1]=Je,(t+=2)===2&&(y?y(k):K())},u=typeof window<"u"?window:void 0,_=u||{},m=_.MutationObserver||_.WebKitMutationObserver,n=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",c=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function d(){var ke=setTimeout;return function(){return ke(k,1)}}var I=new Array(1e3);function k(){for(var ke=0;ke<t;ke+=2)(0,I[ke])(I[ke+1]),I[ke]=void 0,I[ke+1]=void 0;t=0}var q,F,$,O,K=void 0;function re(ke,Je){var ge=this,me=new this.constructor(se);me[ee]===void 0&&Oe(me);var Ue=ge._state;if(Ue){var f=arguments[Ue-1];p(function(){return tt(Ue,me,f,ge._result)})}else Pe(ge,me,ke,Je);return me}function H(ke){if(ke&&typeof ke=="object"&&ke.constructor===this)return ke;var Je=new this(se);return Ae(Je,ke),Je}K=n?function(){return process.nextTick(k)}:m?(F=0,$=new m(k),O=document.createTextNode(""),$.observe(O,{characterData:!0}),function(){O.data=F=++F%2}):c?((q=new MessageChannel).port1.onmessage=k,function(){return q.port2.postMessage(0)}):u===void 0?function(){try{var ke=Function("return this")().require("vertx");return(e=ke.runOnLoop||ke.runOnContext)!==void 0?function(){e(k)}:d()}catch{return d()}}():d();var ee=Math.random().toString(36).substring(2);function se(){}var _e=void 0;function X(ke,Je,ge){Je.constructor===ke.constructor&&ge===re&&Je.constructor.resolve===H?function(me,Ue){Ue._state===1?Ye(me,Ue._result):Ue._state===2?ye(me,Ue._result):Pe(Ue,void 0,function(f){return Ae(me,f)},function(f){return ye(me,f)})}(ke,Je):ge===void 0?Ye(ke,Je):ae(ge)?function(me,Ue,f){p(function(o){var v=!1,S=function(W,V,Se,ze){try{W.call(V,Se,ze)}catch(Me){return Me}}(f,Ue,function(W){v||(v=!0,Ue!==W?Ae(o,W):Ye(o,W))},function(W){v||(v=!0,ye(o,W))},o._label);!v&&S&&(v=!0,ye(o,S))},me)}(ke,Je,ge):Ye(ke,Je)}function Ae(ke,Je){if(ke===Je)ye(ke,new TypeError("You cannot resolve a promise with itself"));else if(Ue=typeof(me=Je),me===null||Ue!=="object"&&Ue!=="function")Ye(ke,Je);else{var ge=void 0;try{ge=Je.then}catch(f){return void ye(ke,f)}X(ke,Je,ge)}var me,Ue}function Le(ke){ke._onerror&&ke._onerror(ke._result),He(ke)}function Ye(ke,Je){ke._state===_e&&(ke._result=Je,ke._state=1,ke._subscribers.length!==0&&p(He,ke))}function ye(ke,Je){ke._state===_e&&(ke._state=2,ke._result=Je,p(Le,ke))}function Pe(ke,Je,ge,me){var Ue=ke._subscribers,f=Ue.length;ke._onerror=null,Ue[f]=Je,Ue[f+1]=ge,Ue[f+2]=me,f===0&&ke._state&&p(He,ke)}function He(ke){var Je=ke._subscribers,ge=ke._state;if(Je.length!==0){for(var me=void 0,Ue=void 0,f=ke._result,o=0;o<Je.length;o+=3)me=Je[o],Ue=Je[o+ge],me?tt(ge,me,Ue,f):Ue(f);ke._subscribers.length=0}}function tt(ke,Je,ge,me){var Ue=ae(ge),f=void 0,o=void 0,v=!0;if(Ue){try{f=ge(me)}catch(S){v=!1,o=S}if(Je===f)return void ye(Je,new TypeError("A promises callback cannot return that same promise."))}else f=me;Je._state!==_e||(Ue&&v?Ae(Je,f):v===!1?ye(Je,o):ke===1?Ye(Je,f):ke===2&&ye(Je,f))}var ve=0;function Oe(ke){ke[ee]=ve++,ke._state=void 0,ke._result=void 0,ke._subscribers=[]}var _t=function(){function ke(Je,ge){this._instanceConstructor=Je,this.promise=new Je(se),this.promise[ee]||Oe(this.promise),T(ge)?(this.length=ge.length,this._remaining=ge.length,this._result=new Array(this.length),this.length===0?Ye(this.promise,this._result):(this.length=this.length||0,this._enumerate(ge),this._remaining===0&&Ye(this.promise,this._result))):ye(this.promise,new Error("Array Methods must be provided an Array"))}return ke.prototype._enumerate=function(Je){for(var ge=0;this._state===_e&&ge<Je.length;ge++)this._eachEntry(Je[ge],ge)},ke.prototype._eachEntry=function(Je,ge){var me=this._instanceConstructor,Ue=me.resolve;if(Ue===H){var f=void 0,o=void 0,v=!1;try{f=Je.then}catch(W){v=!0,o=W}if(f===re&&Je._state!==_e)this._settledAt(Je._state,ge,Je._result);else if(typeof f!="function")this._remaining--,this._result[ge]=Je;else if(me===dt){var S=new me(se);v?ye(S,o):X(S,Je,f),this._willSettleAt(S,ge)}else this._willSettleAt(new me(function(W){return W(Je)}),ge)}else this._willSettleAt(Ue(Je),ge)},ke.prototype._settledAt=function(Je,ge,me){var Ue=this.promise;Ue._state===_e&&(this._remaining--,Je===2?ye(Ue,me):this._result[ge]=me),this._remaining===0&&Ye(Ue,this._result)},ke.prototype._willSettleAt=function(Je,ge){var me=this;Pe(Je,void 0,function(Ue){return me._settledAt(1,ge,Ue)},function(Ue){return me._settledAt(2,ge,Ue)})},ke}(),dt=function(){function ke(Je){this[ee]=ve++,this._result=this._state=void 0,this._subscribers=[],se!==Je&&(typeof Je!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ke?function(ge,me){try{me(function(Ue){Ae(ge,Ue)},function(Ue){ye(ge,Ue)})}catch(Ue){ye(ge,Ue)}}(this,Je):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ke.prototype.catch=function(Je){return this.then(null,Je)},ke.prototype.finally=function(Je){var ge=this,me=ge.constructor;return ae(Je)?ge.then(function(Ue){return me.resolve(Je()).then(function(){return Ue})},function(Ue){return me.resolve(Je()).then(function(){throw Ue})}):ge.then(Je,Je)},ke}();return dt.prototype.then=re,dt.all=function(ke){return new _t(this,ke).promise},dt.race=function(ke){var Je=this;return T(ke)?new Je(function(ge,me){for(var Ue=ke.length,f=0;f<Ue;f++)Je.resolve(ke[f]).then(ge,me)}):new Je(function(ge,me){return me(new TypeError("You must pass an array to race."))})},dt.resolve=H,dt.reject=function(ke){var Je=new this(se);return ye(Je,ke),Je},dt._setScheduler=function(ke){y=ke},dt._setAsap=function(ke){p=ke},dt._asap=p,dt.polyfill=function(){var ke=void 0;if(P.g!==void 0)ke=P.g;else if(typeof self<"u")ke=self;else try{ke=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Je=ke.Promise;if(Je){var ge=null;try{ge=Object.prototype.toString.call(Je.resolve())}catch{}if(ge==="[object Promise]"&&!Je.cast)return}ke.Promise=dt},dt.Promise=dt,dt}()},1159:function(at){var we,P=typeof Reflect=="object"?Reflect:null,ae=P&&typeof P.apply=="function"?P.apply:function(k,q,F){return Function.prototype.apply.call(k,q,F)};we=P&&typeof P.ownKeys=="function"?P.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var T=Number.isNaN||function(k){return k!=k};function t(){t.init.call(this)}at.exports=t,at.exports.once=function(k,q){return new Promise(function(F,$){function O(re){k.removeListener(q,K),$(re)}function K(){typeof k.removeListener=="function"&&k.removeListener("error",O),F([].slice.call(arguments))}I(k,q,K,{once:!0}),q!=="error"&&function(re,H,ee){typeof re.on=="function"&&I(re,"error",H,{once:!0})}(k,O)})},t.EventEmitter=t,t.prototype._events=void 0,t.prototype._eventsCount=0,t.prototype._maxListeners=void 0;var e=10;function y(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}function p(k){return k._maxListeners===void 0?t.defaultMaxListeners:k._maxListeners}function u(k,q,F,$){var O,K,re,H;if(y(F),(K=k._events)===void 0?(K=k._events=Object.create(null),k._eventsCount=0):(K.newListener!==void 0&&(k.emit("newListener",q,F.listener?F.listener:F),K=k._events),re=K[q]),re===void 0)re=K[q]=F,++k._eventsCount;else if(typeof re=="function"?re=K[q]=$?[F,re]:[re,F]:$?re.unshift(F):re.push(F),(O=p(k))>0&&re.length>O&&!re.warned){re.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=k,ee.type=q,ee.count=re.length,H=ee,console&&console.warn&&console.warn(H)}return k}function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(k,q,F){var $={fired:!1,wrapFn:void 0,target:k,type:q,listener:F},O=_.bind($);return O.listener=F,$.wrapFn=O,O}function n(k,q,F){var $=k._events;if($===void 0)return[];var O=$[q];return O===void 0?[]:typeof O=="function"?F?[O.listener||O]:[O]:F?function(K){for(var re=new Array(K.length),H=0;H<re.length;++H)re[H]=K[H].listener||K[H];return re}(O):d(O,O.length)}function c(k){var q=this._events;if(q!==void 0){var F=q[k];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}function d(k,q){for(var F=new Array(q),$=0;$<q;++$)F[$]=k[$];return F}function I(k,q,F,$){if(typeof k.on=="function")$.once?k.once(q,F):k.on(q,F);else{if(typeof k.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k);k.addEventListener(q,function O(K){$.once&&k.removeEventListener(q,O),F(K)})}}Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return e},set:function(k){if(typeof k!="number"||k<0||T(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");e=k}}),t.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},t.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||T(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this},t.prototype.getMaxListeners=function(){return p(this)},t.prototype.emit=function(k){for(var q=[],F=1;F<arguments.length;F++)q.push(arguments[F]);var $=k==="error",O=this._events;if(O!==void 0)$=$&&O.error===void 0;else if(!$)return!1;if($){var K;if(q.length>0&&(K=q[0]),K instanceof Error)throw K;var re=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw re.context=K,re}var H=O[k];if(H===void 0)return!1;if(typeof H=="function")ae(H,this,q);else{var ee=H.length,se=d(H,ee);for(F=0;F<ee;++F)ae(se[F],this,q)}return!0},t.prototype.addListener=function(k,q){return u(this,k,q,!1)},t.prototype.on=t.prototype.addListener,t.prototype.prependListener=function(k,q){return u(this,k,q,!0)},t.prototype.once=function(k,q){return y(q),this.on(k,m(this,k,q)),this},t.prototype.prependOnceListener=function(k,q){return y(q),this.prependListener(k,m(this,k,q)),this},t.prototype.removeListener=function(k,q){var F,$,O,K,re;if(y(q),($=this._events)===void 0)return this;if((F=$[k])===void 0)return this;if(F===q||F.listener===q)--this._eventsCount==0?this._events=Object.create(null):(delete $[k],$.removeListener&&this.emit("removeListener",k,F.listener||q));else if(typeof F!="function"){for(O=-1,K=F.length-1;K>=0;K--)if(F[K]===q||F[K].listener===q){re=F[K].listener,O=K;break}if(O<0)return this;O===0?F.shift():function(H,ee){for(;ee+1<H.length;ee++)H[ee]=H[ee+1];H.pop()}(F,O),F.length===1&&($[k]=F[0]),$.removeListener!==void 0&&this.emit("removeListener",k,re||q)}return this},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(k){var q,F,$;if((F=this._events)===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[k]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete F[k]),this;if(arguments.length===0){var O,K=Object.keys(F);for($=0;$<K.length;++$)(O=K[$])!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(q=F[k])=="function")this.removeListener(k,q);else if(q!==void 0)for($=q.length-1;$>=0;$--)this.removeListener(k,q[$]);return this},t.prototype.listeners=function(k){return n(this,k,!0)},t.prototype.rawListeners=function(k){return n(this,k,!1)},t.listenerCount=function(k,q){return typeof k.listenerCount=="function"?k.listenerCount(q):c.call(k,q)},t.prototype.listenerCount=c,t.prototype.eventNames=function(){return this._eventsCount>0?we(this._events):[]}},3101:function(at){var we=Array.isArray,P=Object.keys,ae=Object.prototype.hasOwnProperty;at.exports=function T(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var y,p,u,_=we(t),m=we(e);if(_&&m){if((p=t.length)!=e.length)return!1;for(y=p;y--!=0;)if(!T(t[y],e[y]))return!1;return!0}if(_!=m)return!1;var n=t instanceof Date,c=e instanceof Date;if(n!=c)return!1;if(n&&c)return t.getTime()==e.getTime();var d=t instanceof RegExp,I=e instanceof RegExp;if(d!=I)return!1;if(d&&I)return t.toString()==e.toString();var k=P(t);if((p=k.length)!==P(e).length)return!1;for(y=p;y--!=0;)if(!ae.call(e,k[y]))return!1;for(y=p;y--!=0;)if(!T(t[u=k[y]],e[u]))return!1;return!0}return t!=t&&e!=e}},3362:function(at,we,P){(function(ae,T,t,e,y){function p(o){if("contents"in o)for(var v=("styleAttrs"in o)?o.styleAttrs[e.byName.ruby.qname]:null,S=o.kind==="span"&&(v==="container"||v==="textContainer"||v==="baseContainer"),W=o.contents.length-1;W>=0;W--)!S||"styleAttrs"in o.contents[W]&&e.byName.ruby.qname in o.contents[W].styleAttrs?p(o.contents[W]):delete o.contents[W]}function u(o,v,S,W){var V=W&&W.timeContainer==="seq",Se=0;W&&(Se=V&&S?S.end:W.begin),v.begin=v.explicit_begin?v.explicit_begin+Se:Se;var ze=v.begin,Me=null;if("sets"in v)for(var De=0;De<v.sets.length;De++)u(o,v.sets[De],Me,v),ze=v.timeContainer==="seq"?v.sets[De].end:Math.max(ze,v.sets[De].end),Me=v.sets[De];if("contents"in v){if("contents"in v)for(var be=0;be<v.contents.length;be++)u(o,v.contents[be],Me,v),ze=v.timeContainer==="seq"?v.contents[be].end:Math.max(ze,v.contents[be].end),Me=v.contents[be]}else ze=V?v.begin:Number.POSITIVE_INFINITY;v.explicit_end!==null&&v.explicit_dur!==null?v.end=Math.min(v.begin+v.explicit_dur,Se+v.explicit_end):v.explicit_end===null&&v.explicit_dur!==null?v.end=v.begin+v.explicit_dur:v.explicit_end!==null&&v.explicit_dur===null?v.end=Se+v.explicit_end:v.end=ze,delete v.explicit_begin,delete v.explicit_dur,delete v.explicit_end,o._registerEvent(v)}function _(o){this.node=o}function m(){this.events=[],this.head=new n,this.body=null}function n(){this.styling=new c,this.layout=new k}function c(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function I(){this.styleAttrs=null}function k(){this.regions={}}function q(o,v){F.call(this,"image"),this.src=o,this.type=v}function F(o){this.kind=o}function $(o){this.id=o}function O(o){this.regionID=o}function K(o){this.styleAttrs=o}function re(o){this.sets=o}function H(o){this.contents=o}function ee(o,v,S){this.explicit_begin=o,this.explicit_end=v,this.explicit_dur=S}function se(){F.call(this,"body")}function _e(){F.call(this,"div")}function X(){F.call(this,"p")}function Ae(){F.call(this,"span")}function Le(){F.call(this,"span")}function Ye(){F.call(this,"br")}function ye(){}function Pe(){}function He(o){return o&&"xml:id"in o.attributes&&o.attributes["xml:id"].value||null}function tt(o){return o&&"style"in o.attributes?o.attributes.style.value.split(" "):[]}function ve(o,v){var S={};if(o!==null)for(var W in o.attributes){var V=o.attributes[W].uri+" "+o.attributes[W].local,Se=e.byQName[V];if(Se!==void 0){var ze=Se.parse(o.attributes[W].value);ze!==null?(S[V]=ze,Se===e.byName.zIndex&&ge(v,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):me(v,"Cannot parse styling attribute "+V+" --> "+o.attributes[W].value)}}return S}function Oe(o,v,S){for(var W in o.attributes)if(o.attributes[W].uri===v&&o.attributes[W].local===S)return o.attributes[W].value;return null}function _t(o,v,S){var W,V=null;return(W=/^(\d+(?:\.\d+)?)f$/.exec(S))!==null?v!==null&&(V=parseFloat(W[1])/v):(W=/^(\d+(?:\.\d+)?)t$/.exec(S))!==null?o!==null&&(V=parseFloat(W[1])/o):(W=/^(\d+(?:\.\d+)?)ms$/.exec(S))!==null?V=parseFloat(W[1])/1e3:(W=/^(\d+(?:\.\d+)?)s$/.exec(S))!==null?V=parseFloat(W[1]):(W=/^(\d+(?:\.\d+)?)h$/.exec(S))!==null?V=3600*parseFloat(W[1]):(W=/^(\d+(?:\.\d+)?)m$/.exec(S))!==null?V=60*parseFloat(W[1]):(W=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(S))!==null?V=3600*parseInt(W[1])+60*parseInt(W[2])+parseFloat(W[3]):(W=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(S))!==null&&v!==null&&(V=3600*parseInt(W[1])+60*parseInt(W[2])+parseInt(W[3])+(W[4]===null?0:parseInt(W[4])/v)),V}function dt(o,v,S){for(;v.styleRefs.length>0;){var W=v.styleRefs.pop();W in o.styles?(dt(o,o.styles[W],S),Je(o.styles[W].styleAttrs,v.styleAttrs)):me(S,"Non-existant style id referenced")}}function ke(o,v,S,W){for(var V=v.length-1;V>=0;V--){var Se=v[V];Se in o.styles?Je(o.styles[Se].styleAttrs,S):me(W,"Non-existant style id referenced")}}function Je(o,v){for(var S in o)o.hasOwnProperty(S)&&(S in v||(v[S]=o[S]))}function ge(o,v){if(o&&o.warn&&o.warn(v))throw v}function me(o,v){if(o&&o.error&&o.error(v))throw v}function Ue(o,v){throw o&&o.fatal&&o.fatal(v),v}function f(o,v){for(var S,W=0,V=o.length-1;W<=V;){var Se=o[S=Math.floor((W+V)/2)];if(Se<v)W=S+1;else{if(!(Se>v))return{found:!0,index:S};V=S-1}}return{found:!1,index:W}}ae.fromXML=function(o,v,S){var W=T.parser(!0,{xmlns:!0}),V=[],Se=[],ze=[],Me=0,De=null;W.onclosetag=function(it){if(V[0]instanceof ye)De.head!==null&&De.head.styling!==null&&ke(De.head.styling,V[0].styleRefs,V[0].styleAttrs,v),delete V[0].styleRefs;else if(V[0]instanceof c)for(var Ut in V[0].styles)V[0].styles.hasOwnProperty(Ut)&&dt(V[0],V[0].styles[Ut],v);else if(V[0]instanceof X||V[0]instanceof Ae){if(V[0].contents.length>1){var It,Ft=[V[0].contents[0]];for(It=1;It<V[0].contents.length;It++)V[0].contents[It]instanceof Le&&Ft[Ft.length-1]instanceof Le?Ft[Ft.length-1].text+=V[0].contents[It].text:Ft.push(V[0].contents[It]);V[0].contents=Ft}V[0]instanceof Ae&&V[0].contents.length===1&&V[0].contents[0]instanceof Le&&(V[0].text=V[0].contents[0].text,delete V[0].contents)}else V[0]instanceof _&&(V[0].node.uri===t.ns_tt&&V[0].node.local==="metadata"?Me--:Me>0&&S&&"onCloseTag"in S&&S.onCloseTag());ze.shift(),Se.shift(),V.shift()},W.ontext=function(it){if(V[0]!==void 0)if(V[0]instanceof Ae||V[0]instanceof X){if(V[0]instanceof Ae){var Ut=V[0].styleAttrs[e.byName.ruby.qname];if(Ut==="container"||Ut==="textContainer"||Ut==="baseContainer")return}var It=new Le;It.initFromText(De,V[0],it,Se[0],ze[0],v),V[0].contents.push(It)}else V[0]instanceof _&&Me>0&&S&&"onText"in S&&S.onText(it)},W.onopentag=function(it){var Ut=it.attributes["xml:space"];Ut?ze.unshift(Ut.value):ze.length===0?ze.unshift("default"):ze.unshift(ze[0]);var It=it.attributes["xml:lang"];if(It?Se.unshift(It.value):Se.length===0?Se.unshift(""):Se.unshift(Se[0]),it.uri===t.ns_tt)if(it.local==="tt")De!==null&&Ue(v,"Two <tt> elements at ("+this.line+","+this.column+")"),(De=new m).initFromNode(it,Se[0],v),V.unshift(De);else if(it.local==="head")V[0]instanceof m||Ue(v,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),V.unshift(De.head);else if(it.local==="styling")V[0]instanceof n||Ue(v,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),V.unshift(De.head.styling);else if(it.local==="style"){var Ft;V[0]instanceof c?((Ft=new d).initFromNode(it,v),Ft.id?De.head.styling.styles[Ft.id]=Ft:me(v,"<style> element missing @id attribute"),V.unshift(Ft)):V[0]instanceof ye?((Ft=new d).initFromNode(it,v),Je(Ft.styleAttrs,V[0].styleAttrs),V.unshift(Ft)):Ue(v,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(it.local==="initial"){var Pt;if(V[0]instanceof c){for(var tn in(Pt=new I).initFromNode(it,v),Pt.styleAttrs)Pt.styleAttrs.hasOwnProperty(tn)&&(De.head.styling.initials[tn]=Pt.styleAttrs[tn]);V.unshift(Pt)}else Ue(v,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(it.local==="layout")V[0]instanceof n||Ue(v,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),V.unshift(De.head.layout);else if(it.local==="region"){V[0]instanceof k||Ue(v,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var dn=new ye;dn.initFromNode(De,it,Se[0],v),!dn.id||dn.id in De.head.layout.regions?me(v,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):De.head.layout.regions[dn.id]=dn,V.unshift(dn)}else if(it.local==="body"){V[0]instanceof m||Ue(v,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),De.body!==null&&Ue(v,"Second <body> element at "+this.line+","+this.column+")");var An=new se;An.initFromNode(De,it,Se[0],v),De.body=An,V.unshift(An)}else if(it.local==="div"){V[0]instanceof _e||V[0]instanceof se||Ue(v,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var _n=new _e;_n.initFromNode(De,V[0],it,Se[0],v);var Rn=_n.styleAttrs[e.byName.backgroundImage.qname];Rn&&(_n.contents.push(new q(Rn)),delete _n.styleAttrs[e.byName.backgroundImage.qname]),V[0].contents.push(_n),V.unshift(_n)}else if(it.local==="image"){V[0]instanceof _e||Ue(v,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var qn=new q;qn.initFromNode(De,V[0],it,Se[0],v),V[0].contents.push(qn),V.unshift(qn)}else if(it.local==="p"){V[0]instanceof _e||Ue(v,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var yn=new X;yn.initFromNode(De,V[0],it,Se[0],v),V[0].contents.push(yn),V.unshift(yn)}else if(it.local==="span"){V[0]instanceof Ae||V[0]instanceof X||Ue(v,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Qn=new Ae;Qn.initFromNode(De,V[0],it,Se[0],ze[0],v),V[0].contents.push(Qn),V.unshift(Qn)}else if(it.local==="br"){V[0]instanceof Ae||V[0]instanceof X||Ue(v,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var xn=new Ye;xn.initFromNode(De,V[0],it,Se[0],v),V[0].contents.push(xn),V.unshift(xn)}else if(it.local==="set"){V[0]instanceof Ae||V[0]instanceof X||V[0]instanceof _e||V[0]instanceof se||V[0]instanceof ye||V[0]instanceof Ye||Ue(v,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Vn=new Pe;Vn.initFromNode(De,V[0],it,v),V[0].sets.push(Vn),V.unshift(Vn)}else V.unshift(new _(it));else V.unshift(new _(it));if(V[0]instanceof _){if(it.uri===t.ns_tt&&it.local==="metadata")Me++;else if(Me>0&&S&&"onOpenTag"in S){var er=[];for(var Kn in it.attributes)er[it.attributes[Kn].uri+" "+it.attributes[Kn].local]={uri:it.attributes[Kn].uri,local:it.attributes[Kn].local,value:it.attributes[Kn].value};S.onOpenTag(it.uri,it.local,er)}}},W.write(o).close(),delete De.head.styling.styles;var be=!1;for(var xe in De.head.layout.regions)if(De.head.layout.regions.hasOwnProperty(xe)){be=!0;break}if(!be){var Qe=ye.prototype.createDefaultRegion(De.lang);De.head.layout.regions[Qe.id]=Qe}for(var mt in De.head.layout.regions)De.head.layout.regions.hasOwnProperty(mt)&&u(De,De.head.layout.regions[mt],null,null);return De.body&&u(De,De.body,null,null),De.body&&p(De.body),De},m.prototype.initFromNode=function(o,v,S){var W=function(Me,De){var be=Oe(Me,t.ns_ttp,"cellResolution"),xe=15,Qe=32;if(be!==null){var mt=/(\d+) (\d+)/.exec(be);mt!==null?(Qe=parseInt(mt[1]),xe=parseInt(mt[2])):ge(De,"Malformed cellResolution value (using initial value instead)")}return{w:Qe,h:xe}}(o,S);this.cellLength={h:new y.ComputedLength(0,1/W.h),w:new y.ComputedLength(1/W.w,0)};var V=function(Me,De){var be,xe=Oe(Me,t.ns_ttp,"frameRate"),Qe=30;xe!==null&&((be=/(\d+)/.exec(xe))!==null?Qe=parseInt(be[1]):ge(De,"Malformed frame rate attribute (using initial value instead)"));var mt=Oe(Me,t.ns_ttp,"frameRateMultiplier"),it=1;mt!==null&&((be=/(\d+) (\d+)/.exec(mt))!==null?it=parseInt(be[1])/parseInt(be[2]):ge(De,"Malformed frame rate multiplier attribute (using initial value instead)"));var Ut=it*Qe,It=1,Ft=Oe(Me,t.ns_ttp,"tickRate");return Ft===null?xe!==null&&(It=Ut):(be=/(\d+)/.exec(Ft))!==null?It=parseInt(be[1]):ge(De,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Ut,tickRate:It}}(o,S);this.effectiveFrameRate=V.effectiveFrameRate,this.tickRate=V.tickRate,this.aspectRatio=function(Me,De){var be=Oe(Me,t.ns_ittp,"aspectRatio");be===null&&(be=Oe(Me,t.ns_ttp,"displayAspectRatio"));var xe=null;if(be!==null){var Qe=/(\d+)\s+(\d+)/.exec(be);if(Qe!==null){var mt=parseInt(Qe[1]),it=parseInt(Qe[2]);mt!==0&&it!==0?xe=mt/it:me(De,"Illegal aspectRatio values (ignoring)")}else me(De,"Malformed aspectRatio attribute (ignoring)")}return xe}(o,S);var Se=Oe(o,t.ns_ttp,"timeBase");Se!==null&&Se!=="media"&&Ue(S,"Unsupported time base");var ze=function(Me,De){var be=Oe(Me,t.ns_tts,"extent");if(be===null)return null;var xe=be.split(" ");if(xe.length!==2)return ge(De,"Malformed extent (ignoring)"),null;var Qe=y.parseLength(xe[0]),mt=y.parseLength(xe[1]);return mt&&Qe?{h:mt,w:Qe}:(ge(De,"Malformed extent values (ignoring)"),null)}(o,S);ze===null?this.pxLength={h:null,w:null}:(ze.h.unit==="px"&&ze.w.unit==="px"||Ue(S,"Extent on TT must be in px or absent"),this.pxLength={h:new y.ComputedLength(0,1/ze.h.value),w:new y.ComputedLength(1/ze.w.value,0)}),this.dimensions={h:new y.ComputedLength(0,1),w:new y.ComputedLength(1,0)},this.lang=v},m.prototype._registerEvent=function(o){if(!(o.end<=o.begin)){var v=f(this.events,o.begin);if(v.found||this.events.splice(v.index,0,o.begin),o.end!==Number.POSITIVE_INFINITY){var S=f(this.events,o.end);S.found||this.events.splice(S.index,0,o.end)}}},m.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},m.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(o,v){this.id=He(o),this.styleAttrs=ve(o,v),this.styleRefs=tt(o)},I.prototype.initFromNode=function(o,v){for(var S in this.styleAttrs={},o.attributes)if(o.attributes[S].uri===t.ns_itts||o.attributes[S].uri===t.ns_ebutts||o.attributes[S].uri===t.ns_tts){var W=o.attributes[S].uri+" "+o.attributes[S].local;this.styleAttrs[W]=o.attributes[S].value}},q.prototype.initFromNode=function(o,v,S,W,V){this.src="src"in S.attributes?S.attributes.src.value:null,this.src||me(V,"Invalid image@src attribute"),this.type="type"in S.attributes?S.attributes.type.value:null,this.type||me(V,"Invalid image@type attribute"),K.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),re.prototype.initFromNode.call(this,o,v,S,V),O.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},$.prototype.initFromNode=function(o,v,S,W){this.id=He(S)},O.prototype.initFromNode=function(o,v,S,W){this.regionID=function(V){return V&&"region"in V.attributes?V.attributes.region.value:""}(S)},K.prototype.initFromNode=function(o,v,S,W){this.styleAttrs=ve(S,W),o.head!==null&&o.head.styling!==null&&ke(o.head.styling,tt(S),this.styleAttrs,W)},re.prototype.initFromNode=function(o,v,S,W){this.sets=[]},H.prototype.initFromNode=function(o,v,S,W){this.contents=[]},ee.prototype.initFromNode=function(o,v,S,W){var V=function(Se,ze,Me,De){var be=null;Me&&"begin"in Me.attributes&&(be=_t(Se.tickRate,Se.effectiveFrameRate,Me.attributes.begin.value))===null&&ge(De,"Malformed begin value "+Me.attributes.begin.value+" (using 0)");var xe=null;Me&&"dur"in Me.attributes&&(xe=_t(Se.tickRate,Se.effectiveFrameRate,Me.attributes.dur.value))===null&&ge(De,"Malformed dur value "+Me.attributes.dur.value+" (ignoring)");var Qe=null;return Me&&"end"in Me.attributes&&(Qe=_t(Se.tickRate,Se.effectiveFrameRate,Me.attributes.end.value))===null&&ge(De,"Malformed end value (ignoring)"),{explicit_begin:be,explicit_end:Qe,explicit_dur:xe}}(o,0,S,W);this.explicit_begin=V.explicit_begin,this.explicit_end=V.explicit_end,this.explicit_dur=V.explicit_dur,this.timeContainer=function(Se,ze){var Me=Se&&"timeContainer"in Se.attributes?Se.attributes.timeContainer.value:null;return Me&&Me!=="par"?Me==="seq"?"seq":(me(ze,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(S,W)},se.prototype.initFromNode=function(o,v,S,W){K.prototype.initFromNode.call(this,o,null,v,W),ee.prototype.initFromNode.call(this,o,null,v,W),re.prototype.initFromNode.call(this,o,null,v,W),O.prototype.initFromNode.call(this,o,null,v,W),H.prototype.initFromNode.call(this,o,null,v,W),this.lang=S},_e.prototype.initFromNode=function(o,v,S,W,V){K.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),re.prototype.initFromNode.call(this,o,v,S,V),O.prototype.initFromNode.call(this,o,v,S,V),H.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},X.prototype.initFromNode=function(o,v,S,W,V){K.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),re.prototype.initFromNode.call(this,o,v,S,V),O.prototype.initFromNode.call(this,o,v,S,V),H.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},Ae.prototype.initFromNode=function(o,v,S,W,V,Se){K.prototype.initFromNode.call(this,o,v,S,Se),ee.prototype.initFromNode.call(this,o,v,S,Se),re.prototype.initFromNode.call(this,o,v,S,Se),O.prototype.initFromNode.call(this,o,v,S,Se),H.prototype.initFromNode.call(this,o,v,S,Se),this.space=V,this.lang=W},Le.prototype.initFromText=function(o,v,S,W,V,Se){ee.prototype.initFromNode.call(this,o,v,null,Se),this.text=S,this.space=V,this.lang=W},Ye.prototype.initFromNode=function(o,v,S,W,V){O.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},ye.prototype.createDefaultRegion=function(o){var v=new ye;return $.call(v,""),K.call(v,{}),re.call(v,[]),ee.call(v,0,Number.POSITIVE_INFINITY,null),this.lang=o,v},ye.prototype.initFromNode=function(o,v,S,W){$.prototype.initFromNode.call(this,o,null,v,W),ee.prototype.initFromNode.call(this,o,null,v,W),re.prototype.initFromNode.call(this,o,null,v,W),this.styleAttrs=ve(v,W),this.styleRefs=tt(v),this.lang=S},Pe.prototype.initFromNode=function(o,v,S,W){ee.prototype.initFromNode.call(this,o,v,S,W);var V=ve(S,W);for(var Se in this.qname=null,this.value=null,V)if(V.hasOwnProperty(Se)){if(this.qname){me(W,"More than one style specified on set");break}this.qname=Se,this.value=V[Se]}}})(we,typeof sax>"u"?P(5378):sax,typeof imscNames>"u"?P(210):imscNames,typeof imscStyles>"u"?P(6811):imscStyles,typeof imscUtils>"u"?P(5926):imscUtils)},506:function(at,we,P){var ae=/firefox/i.test(navigator.userAgent);(function(T,t,e){function y(H,ee,se,_e){var X;if(se.kind==="region")(X=document.createElement("div")).style.position="absolute";else if(se.kind==="body")X=document.createElement("div");else if(se.kind==="div")X=document.createElement("div");else if(se.kind==="image"){if(X=document.createElement("img"),H.imgResolver!==null&&se.src!==null){var Ae=H.imgResolver(se.src,X);Ae&&(X.src=Ae),X.height=H.regionH,X.width=H.regionW}}else if(se.kind==="p")X=document.createElement("p");else if(se.kind==="span")if(se.styleAttrs[e.byName.ruby.qname]==="container")X=document.createElement("ruby"),H.ruby=!0;else if(se.styleAttrs[e.byName.ruby.qname]==="base")X=document.createElement("span");else if(se.styleAttrs[e.byName.ruby.qname]==="text")X=document.createElement("rt");else if(se.styleAttrs[e.byName.ruby.qname]==="baseContainer")X=document.createElement("rbc");else if(se.styleAttrs[e.byName.ruby.qname]==="textContainer")X=document.createElement("rtc");else{if(se.styleAttrs[e.byName.ruby.qname]==="delimiter")return;X=document.createElement("span")}else se.kind==="br"&&(X=document.createElement("br"));if(X){if(se.lang&&(se.kind!=="region"&&se.lang===_e.lang||(X.lang=se.lang)),ee.appendChild(X),X.style.margin="0",se.kind==="region"){var Le=se.styleAttrs[e.byName.writingMode.qname];Le==="lrtb"||Le==="lr"?(H.ipd="lr",H.bpd="tb"):Le==="rltb"||Le==="rl"?(H.ipd="rl",H.bpd="tb"):Le==="tblr"?(H.ipd="tb",H.bpd="lr"):Le!=="tbrl"&&Le!=="tb"||(H.ipd="tb",H.bpd="rl")}else if(se.kind==="p"&&H.bpd==="tb"){var Ye=se.styleAttrs[e.byName.direction.qname];H.ipd=Ye==="ltr"?"lr":"rl"}for(var ye=0;ye<I.length;ye++){var Pe=I[ye],He=se.styleAttrs[Pe.qname];He!==void 0&&Pe.map!==null&&Pe.map(H,X,se,He)}var tt=X,ve=se.styleAttrs[e.byName.linePadding.qname];if(ve&&!ve.isZero()){var Oe=ve.toUsedLength(H.w,H.h);if(Oe>0){var _t=Math.ceil(Oe)+"px";H.bpd==="tb"?(tt.style.paddingLeft=_t,tt.style.paddingRight=_t):(tt.style.paddingTop=_t,tt.style.paddingBottom=_t),H.lp=ve}}var dt=se.styleAttrs[e.byName.multiRowAlign.qname];if(dt&&dt!=="auto"){var ke=document.createElement("span");ke.style.display="inline-block",ke.style.textAlign=dt,X.appendChild(ke),tt=ke,H.mra=dt}var Je=se.styleAttrs[e.byName.rubyReserve.qname];if(Je&&Je[0]!=="none"&&(H.rubyReserve=Je),se.styleAttrs[e.byName.fillLineGap.qname]&&(H.flg=!0),se.kind==="span"&&se.text){var ge=se.styleAttrs[e.byName.textEmphasis.qname];if(ge&&ge.style!=="none"&&(H.textEmphasis=!0),e.byName.textCombine.qname in se.styleAttrs&&se.styleAttrs[e.byName.textCombine.qname]==="all")X.textContent=se.text,X._isd_element=se,ge&&c(H,X,0,ge);else for(var me="",Ue=0;Ue<se.text.length;Ue++){me+=se.text.charAt(Ue);var f=se.text.charCodeAt(Ue);if(f<55296||f>56319||Ue===se.text.length-1){var o=document.createElement("span");o.textContent=me,ge&&c(H,o,0,ge),X.appendChild(o),me="",o._isd_element=se}}}if("contents"in se)for(var v=0;v<se.contents.length;v++)y(H,tt,se.contents[v],se);var S=[];if(se.kind==="p"&&(n(H,tt,S,null),H.rubyReserve&&(function(Me,De){for(var be=0;be<Me.length;be++){var xe,Qe,mt=document.createElement("ruby"),it=document.createElement("span");it.textContent="",mt.appendChild(it);var Ut,It=De.rubyReserve[1].toUsedLength(De.w,De.h)+"px";De.rubyReserve[0]==="both"||De.rubyReserve[0]==="outside"&&Me.length==1?((xe=document.createElement("rtc")).style[$]=F?"after":"under",xe.textContent="",xe.style.fontSize=It,(Qe=document.createElement("rtc")).style[$]=F?"before":"over",Qe.textContent="",Qe.style.fontSize=It,mt.appendChild(xe),mt.appendChild(Qe)):((xe=document.createElement("rtc")).textContent="",xe.style.fontSize=It,Ut=De.rubyReserve[0]==="after"||De.rubyReserve[0]==="outside"&&be>0?F?"after":De.bpd==="tb"||De.bpd==="rl"?"under":"over":F?"before":De.bpd==="tb"||De.bpd==="rl"?"over":"under",xe.style[$]=Ut,mt.appendChild(xe));for(var Ft=null,Pt=0;Pt<Me[be].rbc.length;Pt++)if(Me[be].rbc[Pt].localName==="ruby"){Ft=Me[be].rbc[Pt];for(var tn=0;tn<Ft.style.length;tn++)mt.style.setProperty(Ft.style.item(tn),Ft.style.getPropertyValue(Ft.style.item(tn)));break}(Ft=Ft||Me[be].elements[0].node).parentElement.insertBefore(mt,Ft)}}(S,H),H.rubyReserve=null),(H.ruby||H.rubyReserve)&&(function(Me,De){for(var be=0;be<Me.length;be++)for(var xe=0;xe<Me[be].rbc.length;xe++){var Qe;Me[be].rbc[xe].style[$]||(Qe=F?be===0?"before":"after":De.bpd==="tb"||De.bpd==="rl"?be===0?"over":"under":be===0?"under":"over",Me[be].rbc[xe].style[$]=Qe)}}(S,H),H.ruby=null),H.textEmphasis&&(function(Me,De){for(var be=0;be<Me.length;be++)for(var xe=0;xe<Me[be].te.length;xe++){var Qe;Me[be].te[xe].style[K]&&Me[be].te[xe].style[K]!=="none"||(Qe=De.bpd==="tb"?be===0?"left over":"left under":De.bpd==="rl"?be===0?"right under":"left under":be===0?"left under":"right under",Me[be].te[xe].style[K]=Qe)}}(S,H),H.textEmphasis=null),H.mra&&(function(Me){for(var De=0;De<Me.length-1;De++){var be=Me[De].elements.length;if(be!==0&&Me[De].br===!1){var xe=document.createElement("br"),Qe=Me[De].elements[be-1].node;Qe.parentElement.insertBefore(xe,Qe.nextSibling)}}}(S),H.mra=null),H.lp&&(function(Me,De,be){if(Me!==null)for(var xe=0;xe<Me.length;xe++){var Qe=Me[xe].elements.length,mt=Math.ceil(De)+"px",it="-"+Math.ceil(De)+"px";if(Qe!==0){var Ut=Me[xe].elements[Me[xe].start_elem],It=Me[xe].elements[Me[xe].end_elem];if(Ut===It){var Ft=Ut.node.getBoundingClientRect();if(Ft.width==0||Ft.height==0)continue}be.ipd==="lr"?(Ut.node.style.marginLeft=it,Ut.node.style.paddingLeft=mt):be.ipd==="rl"?(Ut.node.style.paddingRight=mt,Ut.node.style.marginRight=it):be.ipd==="tb"&&(Ut.node.style.paddingTop=mt,Ut.node.style.marginTop=it),be.ipd==="lr"?(ae||(It.node.style.marginRight=it),It.node.style.paddingRight=mt):be.ipd==="rl"?(It.node.style.paddingLeft=mt,ae||(It.node.style.marginLeft=it)):be.ipd==="tb"&&(It.node.style.paddingBottom=mt,It.node.style.marginBottom=it)}}}(S,H.lp.toUsedLength(H.w,H.h),H),H.lp=null),function(Me,De){for(var be=0;be<Me.length;be++)for(var xe=Me[be],Qe=1;Qe<xe.elements.length;){var mt=xe.elements[Qe-1],it=xe.elements[Qe];u(mt.node,it.node,De)?xe.elements.splice(Qe,1):Qe++}for(var Ut,It,Ft=[],Pt=0;Pt<Me.length;Pt++)for(var tn=0;tn<Me[Pt].elements.length;tn++)(It=p(Ut=Me[Pt].elements[tn].node,Ft,!1))&&(Ut.style.backgroundColor=It);for(var dn=0;dn<Ft.length;dn++)Ft[dn].style.backgroundColor=""}(S,H),H.flg)){var W=m(tt.getBoundingClientRect(),H);(function(Me,De,be,xe,Qe){for(var mt=Math.sign(be-De),it=0;it<=Me.length;it++){var Ut,It,Ft,Pt;if(Ut=it===0?Math.round(De):it===Me.length?Math.round(be):Math.round((Me[it-1].after+Me[it].before)/2),it>0&&Me[it-1])for(Ft=0;Ft<Me[it-1].elements.length;Ft++)It=mt*(Ut-(Pt=Me[it-1].elements[Ft]).after)+"px",xe.bpd==="lr"?Pt.node.style.paddingRight=It:xe.bpd==="rl"?Pt.node.style.paddingLeft=It:xe.bpd==="tb"&&(Pt.node.style.paddingBottom=It);if(it<Me.length)for(Ft=0;Ft<Me[it].elements.length;Ft++)It=mt*((Pt=Me[it].elements[Ft]).before-Ut)+"px",xe.bpd==="lr"?Pt.node.style.paddingLeft=It:xe.bpd==="rl"?Pt.node.style.paddingRight=It:xe.bpd==="tb"&&(Pt.node.style.paddingTop=It)}})(S,W.before,W.after,H),H.flg=null}if(se.kind==="region"&&H.bpd==="tb"&&H.enableRollUp&&se.contents.length>0&&se.styleAttrs[e.byName.displayAlign.qname]==="after"){n(H,tt,S,null);var V=new _(se.id===""?"_":se.id,S);if(H.currentISDState[V.id]=V,H.previousISDState&&V.id in H.previousISDState&&H.previousISDState[V.id].plist.length>0&&V.plist.length>1&&V.plist[V.plist.length-2].text===H.previousISDState[V.id].plist[H.previousISDState[V.id].plist.length-1].text){var Se=X.firstElementChild,ze=V.plist[V.plist.length-1].after-V.plist[V.plist.length-1].before;Se.style.bottom="-"+ze+"px",Se.style.transition="transform 0.4s",Se.style.position="relative",Se.style.transform="translateY(-"+ze+"px)"}}}else re(H.errorHandler,"Error processing ISD element kind: "+se.kind)}function p(H,ee,se){return H.style.backgroundColor?(se&&!ee.includes(H)&&ee.push(H),H.style.backgroundColor):H.parentElement.nodeName==="SPAN"||H.parentElement.nodeName==="RUBY"||H.parentElement.nodeName==="RBC"||H.parentElement.nodeName==="RTC"||H.parentElement.nodeName==="RT"?p(H.parentElement,ee,!0):void 0}function u(H,ee,se){if(H.tagName==="SPAN"&&ee.tagName==="SPAN"&&H._isd_element===ee._isd_element){if(!H._isd_element)return re(se.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;H.textContent+=ee.textContent;for(var _e=0;_e<ee.style.length;_e++){var X=ee.style[_e];(X.indexOf("border")>=0||X.indexOf("padding")>=0||X.indexOf("margin")>=0)&&(H.style[X]=ee.style[X])}return ee.parentElement.removeChild(ee),!0}return!1}function _(H,ee){this.id=H,this.plist=ee}function m(H,ee){var se={before:null,after:null,start:null,end:null};return ee.bpd==="tb"?(se.before=H.top,se.after=H.bottom,ee.ipd==="lr"?(se.start=H.left,se.end=H.right):(se.start=H.right,se.end=H.left)):ee.bpd==="lr"?(se.before=H.left,se.after=H.right,se.start=H.top,se.end=H.bottom):ee.bpd==="rl"&&(se.before=H.right,se.after=H.left,se.start=H.top,se.end=H.bottom),se}function n(H,ee,se,_e){if(ee.localName!=="rt"&&ee.localName!=="rtc"){var X,Ae,Le,Ye,ye=ee.style.backgroundColor||_e;if(ee.childElementCount===0)if(ee.localName==="span"||ee.localName==="rb"){var Pe=m(ee.getBoundingClientRect(),H);if(se.length!==0&&(X=Pe.before,Ae=Pe.after,Le=se[se.length-1].before,Ae<(Ye=se[se.length-1].after)&&X>Le||Ye<=Ae&&Le>=X)){var He=Math.sign(Pe.after-Pe.before),tt=Math.sign(Pe.end-Pe.start);He*(Pe.before-se[se.length-1].before)<0&&(se[se.length-1].before=Pe.before),He*(Pe.after-se[se.length-1].after)>0&&(se[se.length-1].after=Pe.after),tt*(Pe.start-se[se.length-1].start)<0&&(se[se.length-1].start=Pe.start,se[se.length-1].start_elem=se[se.length-1].elements.length),tt*(Pe.end-se[se.length-1].end)>0&&(se[se.length-1].end=Pe.end,se[se.length-1].end_elem=se[se.length-1].elements.length)}else se.push({before:Pe.before,after:Pe.after,start:Pe.start,end:Pe.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});se[se.length-1].text+=ee.textContent,se[se.length-1].elements.push({node:ee,bgcolor:ye,before:Pe.before,after:Pe.after})}else ee.localName==="br"&&se.length!==0&&(se[se.length-1].br=!0);else for(var ve=ee.firstChild;ve;)ve.nodeType===Node.ELEMENT_NODE&&(n(H,ve,se,ye),ve.localName==="ruby"||ve.localName==="rtc"?se.length>0&&se[se.length-1].rbc.push(ve):ve.localName==="span"&&ve.style[O]&&ve.style[O]!=="none"&&se.length>0&&se[se.length-1].te.push(ve)),ve=ve.nextSibling}}function c(H,ee,se,_e){var X;_e.style!=="none"&&(_e.style==="auto"?ee.style[O]="filled":ee.style[O]=_e.style+" "+_e.symbol,(_e.position==="before"||_e.position==="after")&&(X=H.bpd==="tb"?_e.position==="before"?"left over":"left under":H.bpd==="rl"?_e.position==="before"?"right under":"left under":_e.position==="before"?"left under":"right under",ee.style[K]=X))}function d(H,ee){this.qname=H,this.map=ee}T.render=function(H,ee,se,_e,X,Ae,Le,Ye,ye){var Pe=_e||ee.clientHeight,He=X||ee.clientWidth;if(H.aspectRatio!==null){var tt=Pe*H.aspectRatio;tt>He?Pe=Math.round(He/H.aspectRatio):He=tt}var ve=document.createElement("div");ve.style.position="relative",ve.style.width=He+"px",ve.style.height=Pe+"px",ve.style.margin="auto",ve.style.top=0,ve.style.bottom=0,ve.style.left=0,ve.style.right=0,ve.style.zIndex=0;var Oe={h:Pe,w:He,regionH:null,regionW:null,imgResolver:se,displayForcedOnlyMode:Ae||!1,isd:H,errorHandler:Le,previousISDState:Ye,enableRollUp:ye||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ee.appendChild(ve),"contents"in H)for(var _t=0;_t<H.contents.length;_t++)y(Oe,ve,H.contents[_t],H);return Oe.currentISDState};for(var I=[new d("http://www.w3.org/ns/ttml#styling backgroundColor",function(H,ee,se,_e){_e[3]!==0&&(ee.style.backgroundColor="rgba("+_e[0].toString()+","+_e[1].toString()+","+_e[2].toString()+","+(_e[3]/255).toString()+")")}),new d("http://www.w3.org/ns/ttml#styling color",function(H,ee,se,_e){ee.style.color="rgba("+_e[0].toString()+","+_e[1].toString()+","+_e[2].toString()+","+(_e[3]/255).toString()+")"}),new d("http://www.w3.org/ns/ttml#styling direction",function(H,ee,se,_e){ee.style.direction=_e}),new d("http://www.w3.org/ns/ttml#styling display",function(H,ee,se,_e){}),new d("http://www.w3.org/ns/ttml#styling displayAlign",function(H,ee,se,_e){ee.style.display="flex",ee.style.flexDirection="column",_e==="before"?ee.style.justifyContent="flex-start":_e==="center"?ee.style.justifyContent="center":_e==="after"&&(ee.style.justifyContent="flex-end")}),new d("http://www.w3.org/ns/ttml#styling extent",function(H,ee,se,_e){H.regionH=_e.h.toUsedLength(H.w,H.h),H.regionW=_e.w.toUsedLength(H.w,H.h);var X=0,Ae=0,Le=se.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];Le&&(X=Le[0].toUsedLength(H.w,H.h)+Le[2].toUsedLength(H.w,H.h),Ae=Le[1].toUsedLength(H.w,H.h)+Le[3].toUsedLength(H.w,H.h)),ee.style.height=H.regionH-X+"px",ee.style.width=H.regionW-Ae+"px"}),new d("http://www.w3.org/ns/ttml#styling fontFamily",function(H,ee,se,_e){for(var X=[],Ae=0;Ae<_e.length;Ae++)_e[Ae]=_e[Ae].trim(),_e[Ae]==="monospaceSerif"?(X.push("Courier New"),X.push('"Liberation Mono"'),X.push("Courier"),X.push("monospace")):_e[Ae]==="proportionalSansSerif"?(X.push("Arial"),X.push("Helvetica"),X.push('"Liberation Sans"'),X.push("sans-serif")):_e[Ae]==="monospace"?X.push("monospace"):_e[Ae]==="sansSerif"?X.push("sans-serif"):_e[Ae]==="serif"?X.push("serif"):_e[Ae]==="monospaceSansSerif"?(X.push("Consolas"),X.push("monospace")):_e[Ae]==="proportionalSerif"?X.push("serif"):X.push(_e[Ae]);if(X.length>0){for(var Le=[X[0]],Ye=1;Ye<X.length;Ye++)Le.indexOf(X[Ye])==-1&&Le.push(X[Ye]);X=Le}ee.style.fontFamily=X.join(",")}),new d("http://www.w3.org/ns/ttml#styling shear",function(H,ee,se,_e){if(_e!==0){var X=-.9*_e;H.bpd==="tb"?ee.style.transform="skewX("+X+"deg)":ee.style.transform="skewY("+X+"deg)"}}),new d("http://www.w3.org/ns/ttml#styling fontSize",function(H,ee,se,_e){ee.style.fontSize=_e.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling fontStyle",function(H,ee,se,_e){ee.style.fontStyle=_e}),new d("http://www.w3.org/ns/ttml#styling fontWeight",function(H,ee,se,_e){ee.style.fontWeight=_e}),new d("http://www.w3.org/ns/ttml#styling lineHeight",function(H,ee,se,_e){ee.style.lineHeight=_e==="normal"?"normal":_e.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling opacity",function(H,ee,se,_e){ee.style.opacity=_e}),new d("http://www.w3.org/ns/ttml#styling origin",function(H,ee,se,_e){ee.style.top=_e.h.toUsedLength(H.w,H.h)+"px",ee.style.left=_e.w.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling overflow",function(H,ee,se,_e){ee.style.overflow=_e}),new d("http://www.w3.org/ns/ttml#styling padding",function(H,ee,se,_e){var X=[];X[0]=_e[0].toUsedLength(H.w,H.h)+"px",X[1]=_e[3].toUsedLength(H.w,H.h)+"px",X[2]=_e[2].toUsedLength(H.w,H.h)+"px",X[3]=_e[1].toUsedLength(H.w,H.h)+"px",ee.style.padding=X.join(" ")}),new d("http://www.w3.org/ns/ttml#styling position",function(H,ee,se,_e){ee.style.top=_e.h.toUsedLength(H.w,H.h)+"px",ee.style.left=_e.w.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling rubyAlign",function(H,ee,se,_e){ee.style.rubyAlign=_e==="spaceAround"?"space-around":"center"}),new d("http://www.w3.org/ns/ttml#styling rubyPosition",function(H,ee,se,_e){var X;_e!=="before"&&_e!=="after"||(X=F?_e:H.bpd==="tb"||H.bpd==="rl"?_e==="before"?"over":"under":_e==="before"?"under":"over",ee.parentElement.style[$]=X)}),new d("http://www.w3.org/ns/ttml#styling showBackground",null),new d("http://www.w3.org/ns/ttml#styling textAlign",function(H,ee,se,_e){var X;X=_e==="start"?H.ipd==="rl"?"right":"left":_e==="end"?H.ipd==="rl"?"left":"right":_e,ee.style.textAlign=X}),new d("http://www.w3.org/ns/ttml#styling textDecoration",function(H,ee,se,_e){ee.style.textDecoration=_e.join(" ").replace("lineThrough","line-through")}),new d("http://www.w3.org/ns/ttml#styling textOutline",function(H,ee,se,_e){}),new d("http://www.w3.org/ns/ttml#styling textShadow",function(H,ee,se,_e){var X=se.styleAttrs[e.byName.textOutline.qname];if(_e==="none"&&X==="none")ee.style.textShadow="";else{var Ae=[];if(X!=="none"){var Le="rgba("+X.color[0].toString()+","+X.color[1].toString()+","+X.color[2].toString()+","+(X.color[3]/255).toString()+")";Ae.push("1px 1px 1px "+Le),Ae.push("-1px 1px 1px "+Le),Ae.push("1px -1px 1px "+Le),Ae.push("-1px -1px 1px "+Le)}if(_e!=="none")for(var Ye=0;Ye<_e.length;Ye++)Ae.push(_e[Ye].x_off.toUsedLength(H.w,H.h)+"px "+_e[Ye].y_off.toUsedLength(H.w,H.h)+"px "+_e[Ye].b_radius.toUsedLength(H.w,H.h)+"px rgba("+_e[Ye].color[0].toString()+","+_e[Ye].color[1].toString()+","+_e[Ye].color[2].toString()+","+(_e[Ye].color[3]/255).toString()+")");ee.style.textShadow=Ae.join(",")}}),new d("http://www.w3.org/ns/ttml#styling textCombine",function(H,ee,se,_e){ee.style.textCombineUpright=_e}),new d("http://www.w3.org/ns/ttml#styling textEmphasis",function(H,ee,se,_e){}),new d("http://www.w3.org/ns/ttml#styling unicodeBidi",function(H,ee,se,_e){var X;X=_e==="bidiOverride"?"bidi-override":_e,ee.style.unicodeBidi=X}),new d("http://www.w3.org/ns/ttml#styling visibility",function(H,ee,se,_e){ee.style.visibility=_e}),new d("http://www.w3.org/ns/ttml#styling wrapOption",function(H,ee,se,_e){_e==="wrap"?se.space==="preserve"?ee.style.whiteSpace="pre-wrap":ee.style.whiteSpace="normal":se.space==="preserve"?ee.style.whiteSpace="pre":ee.style.whiteSpace="noWrap"}),new d("http://www.w3.org/ns/ttml#styling writingMode",function(H,ee,se,_e){_e==="lrtb"||_e==="lr"||_e==="rltb"||_e==="rl"?ee.style.writingMode="horizontal-tb":_e==="tblr"?ee.style.writingMode="vertical-lr":_e!=="tbrl"&&_e!=="tb"||(ee.style.writingMode="vertical-rl")}),new d("http://www.w3.org/ns/ttml#styling zIndex",function(H,ee,se,_e){ee.style.zIndex=_e}),new d("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(H,ee,se,_e){H.displayForcedOnlyMode&&_e===!1&&(ee.style.visibility="hidden")})],k={},q=0;q<I.length;q++)k[I[q].qname]=I[q];var F="webkitRubyPosition"in window.getComputedStyle(document.documentElement),$=F?"webkitRubyPosition":"rubyPosition",O="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",K="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function re(H,ee){if(H&&H.error&&H.error(ee))throw ee}})(we,typeof imscNames>"u"?P(210):imscNames,typeof imscStyles>"u"?P(6811):imscStyles,typeof imscUtils>"u"?P(5926):imscUtils)},4080:function(at,we,P){(function(ae,T,t,e){ae.generateISD=function(d,I,k){var q,F=new m(d),$={},O={},K=d.head.styling.initials[t.byName.showBackground.qname],re=d.head.styling.initials[t.byName.backgroundColor.qname];for(var H in d.head.layout.regions)if(d.head.layout.regions.hasOwnProperty(H)){var ee=d.head.layout.regions[H],se=ee.styleAttrs[t.byName.showBackground.qname]||K,_e=ee.styleAttrs[t.byName.backgroundColor.qname]||re;O[ee.id]=(se==="always"||se===void 0)&&_e!==void 0&&!(I<ee.begin||I>=ee.end)}for(var X in d.body&&d.body.regionID&&(O[d.body.regionID]=!0),q=d.body!==null?function Le(Ye,ye){if(ye.contents){var Pe={};for(var He in ye)ye.hasOwnProperty(He)&&(Pe[He]=ye[He]);return Pe.contents=[],ye.contents.filter(function(tt){return!(Ye<tt.begin||Ye>=tt.end)}).forEach(function(tt){var ve=Le(Ye,tt);ve.regionID&&(O[ve.regionID]=!0),ve!==null&&Pe.contents.push(ve)}),Pe}return ye}(I,d.body):null,O[""]!==void 0&&(O[""]=!0),O)if(O[X]){var Ae=p(d,I,d.head.layout.regions[X],q,null,"",d.head.layout.regions[X],k,$);Ae!==null&&F.contents.push(Ae.element)}return F};var y=[t.byName.color.qname,t.byName.textCombine.qname,t.byName.textDecoration.qname,t.byName.textEmphasis.qname,t.byName.textOutline.qname,t.byName.textShadow.qname];function p(d,I,k,q,F,$,O,K,re){if(I<O.begin||I>=O.end)return null;var H="regionID"in O&&O.regionID!==""?O.regionID:$;if(F!==null&&H!==k.id&&(!("contents"in O)||"contents"in O&&O.contents.length===0||H!==""))return null;var ee=new n(O);if("sets"in O)for(var se=0;se<O.sets.length;se++)I<O.sets[se].begin||I>=O.sets[se].end||(ee.styleAttrs[O.sets[se].qname]=O.sets[se].value);var _e={};for(var X in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(X)&&(_e[X]=!0,ee.kind==="region"&&X===t.byName.writingMode.qname&&!(t.byName.direction.qname in ee.styleAttrs))){var Ae=ee.styleAttrs[X];Ae==="lrtb"||Ae==="lr"?ee.styleAttrs[t.byName.direction.qname]="ltr":Ae!=="rltb"&&Ae!=="rl"||(ee.styleAttrs[t.byName.direction.qname]="rtl")}if(F!==null)for(var Le=0;Le<t.all.length;Le++){var Ye=t.all[Le];if(Ye.qname===t.byName.textDecoration.qname){var ye=F.styleAttrs[Ye.qname],Pe=ee.styleAttrs[Ye.qname],He=[];Pe===void 0?He=ye:Pe.indexOf("none")===-1?((Pe.indexOf("noUnderline")===-1&&ye.indexOf("underline")!==-1||Pe.indexOf("underline")!==-1)&&He.push("underline"),(Pe.indexOf("noLineThrough")===-1&&ye.indexOf("lineThrough")!==-1||Pe.indexOf("lineThrough")!==-1)&&He.push("lineThrough"),(Pe.indexOf("noOverline")===-1&&ye.indexOf("overline")!==-1||Pe.indexOf("overline")!==-1)&&He.push("overline")):He.push("none"),ee.styleAttrs[Ye.qname]=He}else if(Ye.qname!==t.byName.fontSize.qname||Ye.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[t.byName.ruby.qname]!=="textContainer")if(Ye.qname!==t.byName.fontSize.qname||Ye.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[t.byName.ruby.qname]!=="text")Ye.inherit&&Ye.qname in F.styleAttrs&&!(Ye.qname in ee.styleAttrs)&&(ee.styleAttrs[Ye.qname]=F.styleAttrs[Ye.qname]);else{var tt=F.styleAttrs[t.byName.fontSize.qname];F.styleAttrs[t.byName.ruby.qname]==="textContainer"?ee.styleAttrs[Ye.qname]=tt:ee.styleAttrs[Ye.qname]=new e.ComputedLength(.5*tt.rw,.5*tt.rh)}else{var ve=F.styleAttrs[t.byName.fontSize.qname];ee.styleAttrs[Ye.qname]=new e.ComputedLength(.5*ve.rw,.5*ve.rh)}}for(var Oe=0;Oe<t.all.length;Oe++){var _t=t.all[Oe];if(!(_t.qname in ee.styleAttrs)&&!(_t.qname===t.byName.position.qname&&t.byName.origin.qname in ee.styleAttrs||_t.qname===t.byName.origin.qname&&t.byName.position.qname in ee.styleAttrs)){var dt=d.head.styling.initials[_t.qname]||_t.initial;if(dt!==null&&(ee.kind==="region"||_t.inherit===!1&&dt!==null)){var ke=_t.parse(dt);ke!==null?(ee.styleAttrs[_t.qname]=ke,_e[_t.qname]=!0):c(K,"Invalid initial value for '"+_t.qname+"' on element '"+ee.kind)}}}for(var Je=0;Je<t.all.length;Je++){var ge=t.all[Je];if(ge.qname in _e&&ge.compute!==null){var me=ge.compute(d,F,ee,ee.styleAttrs[ge.qname],re);me!==null?ee.styleAttrs[ge.qname]=me:(ee.styleAttrs[ge.qname]=ge.compute(d,F,ee,ge.parse(ge.initial),re),c(K,"Style '"+ge.qname+"' on element '"+ee.kind+"' cannot be computed"))}}if(ee.styleAttrs[t.byName.display.qname]==="none")return null;var Ue=null;F===null?Ue=q===null?[]:[q]:"contents"in O&&(Ue=O.contents);for(var f=0;Ue!==null&&f<Ue.length;f++){var o=p(d,I,k,q,ee,H,Ue[f],K,re);o!==null&&ee.contents.push(o.element)}for(var v in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(v)){var S=!1;if(ee.kind==="span"){var W=ee.styleAttrs[t.byName.ruby.qname];(S=(W==="container"||W==="textContainer"||W==="baseContainer")&&y.indexOf(v)!==-1)||(S=W!=="container"&&v===t.byName.rubyAlign.qname),S||(S=!(W==="textContainer"||W==="text")&&v===t.byName.rubyPosition.qname)}if(!S){var V=t.byQName[v];"applies"in V&&(S=V.applies.indexOf(ee.kind)===-1)}S&&delete ee.styleAttrs[v]}var Se=ee.styleAttrs[t.byName.ruby.qname];if(ee.kind==="p"||ee.kind==="span"&&(Se==="textContainer"||Se==="text")){var ze=[];u(ee,ze),function(Me){for(var De,be=0;be<Me.length;)if((De=Me[be]).kind!=="br"&&De.space!=="preserve"){var xe=De.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(xe)&&(be===0||(Qe=Me[be-1]).kind==="br"||/[\r\n\t ]$/.test(Qe.text))&&(xe=xe.substring(1)),De.text=xe,xe.length===0?Me.splice(be,1):be++}else be++;var Qe,mt;for(be=0;be<Me.length;be++)(De=Me[be]).kind!=="br"&&De.space!=="preserve"?/[ ]$/.test(De.text)&&(be===Me.length-1||(mt=Me[be+1]).kind==="br"||mt.space==="preserve"&&/^[\r\n]/.test(mt.text))&&(De.text=De.text.slice(0,-1)):be++}(ze),_(ee)}return ee.kind==="div"&&t.byName.backgroundImage.qname in ee.styleAttrs||ee.kind==="br"||ee.kind==="image"||"contents"in ee&&ee.contents.length>0||ee.kind==="span"&&ee.text!==null||ee.kind==="region"&&ee.styleAttrs[t.byName.showBackground.qname]==="always"?{region_id:H,element:ee}:null}function u(d,I){if("contents"in d)for(var k=0;k<d.contents.length;k++){var q=d.contents[k],F=q.styleAttrs[t.byName.ruby.qname];(q.kind!=="span"||F!=="textContainer"&&F!=="text")&&("contents"in q?u(q,I):(q.kind==="span"&&q.text.length!==0||q.kind==="br")&&I.push(q))}}function _(d){if(d.kind==="br")return!1;if("text"in d)return d.text.length===0;if("contents"in d){for(var I=d.contents.length;I--;)_(d.contents[I])&&d.contents.splice(I,1);return d.contents.length===0}}function m(d){this.contents=[],this.aspectRatio=d.aspectRatio,this.lang=d.lang}function n(d){for(var I in this.kind=d.kind||"region",this.lang=d.lang,d.id&&(this.id=d.id),this.styleAttrs={},d.styleAttrs)d.styleAttrs.hasOwnProperty(I)&&(this.styleAttrs[I]=d.styleAttrs[I]);"src"in d&&(this.src=d.src),"type"in d&&(this.type=d.type),"text"in d?this.text=d.text:(this.kind==="region"||"contents"in d)&&(this.contents=[]),"space"in d&&(this.space=d.space)}function c(d,I){if(d&&d.error&&d.error(I))throw I}})(we,typeof imscNames>"u"?P(210):imscNames,typeof imscStyles>"u"?P(6811):imscStyles,typeof imscUtils>"u"?P(5926):imscUtils)},4403:function(at,we,P){we.generateISD=P(4080).generateISD,we.fromXML=P(3362).fromXML,we.renderHTML=P(506).render},210:function(at,we){(function(P){P.ns_tt="http://www.w3.org/ns/ttml",P.ns_tts="http://www.w3.org/ns/ttml#styling",P.ns_ttp="http://www.w3.org/ns/ttml#parameter",P.ns_xml="http://www.w3.org/XML/1998/namespace",P.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",P.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",P.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",P.ns_ebutts="urn:ebu:tt:style"})(we)},6811:function(at,we,P){(function(ae,T,t){function e(u,_,m,n,c,d,I,k){this.name=_,this.ns=u,this.qname=u+" "+_,this.inherit=c,this.animatable=d,this.initial=m,this.applies=n,this.parse=I,this.compute=k}for(var y in ae.all=[new e(T.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,t.parseColor,null),new e(T.ns_tts,"color","white",["span"],!0,!0,t.parseColor,null),new e(T.ns_tts,"direction","ltr",["p","span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(u){return u},null),new e(T.ns_tts,"displayAlign","before",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"extent","auto",["tt","region"],!1,!0,function(u){if(u==="auto")return u;var _=u.split(" ");if(_.length!==2)return null;var m=t.parseLength(_[0]),n=t.parseLength(_[1]);return n&&m?{h:n,w:m}:null},function(u,_,m,n,c){var d,I;if(n==="auto")d=new t.ComputedLength(0,1);else if((d=t.toComputedLength(n.h.value,n.h.unit,null,u.dimensions.h,null,u.pxLength.h))===null)return null;if(n==="auto")I=new t.ComputedLength(1,0);else if((I=t.toComputedLength(n.w.value,n.w.unit,null,u.dimensions.w,null,u.pxLength.w))===null)return null;return{h:d,w:I}}),new e(T.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(u){for(var _=u.split(","),m=[],n=0;n<_.length;n++)_[n]=_[n].trim(),_[n].charAt(0)!=="'"&&_[n].charAt(0)!=='"'&&_[n]==="default"?m.push("monospaceSerif"):m.push(_[n]);return m},null),new e(T.ns_tts,"shear","0%",["p"],!0,!0,t.parseLength,function(u,_,m,n){return n.unit!=="%"?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new e(T.ns_tts,"fontSize","1c",["span","p"],!0,!0,t.parseLength,function(u,_,m,n,c){return t.toComputedLength(n.value,n.unit,_!==null?_.styleAttrs[ae.byName.fontSize.qname]:u.cellLength.h,_!==null?_.styleAttrs[ae.byName.fontSize.qname]:u.cellLength.h,u.cellLength.h,u.pxLength.h)}),new e(T.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(u){return u},null),new e(T.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(u){return u},null),new e(T.ns_tts,"lineHeight","normal",["p"],!0,!0,function(u){return u==="normal"?u:t.parseLength(u)},function(u,_,m,n,c){var d;if(n==="normal")d=n;else if((d=t.toComputedLength(n.value,n.unit,m.styleAttrs[ae.byName.fontSize.qname],m.styleAttrs[ae.byName.fontSize.qname],u.cellLength.h,u.pxLength.h))===null)return null;return d}),new e(T.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new e(T.ns_tts,"origin","auto",["region"],!1,!0,function(u){if(u==="auto")return u;var _=u.split(" ");if(_.length!==2)return null;var m=t.parseLength(_[0]),n=t.parseLength(_[1]);return n&&m?{h:n,w:m}:null},function(u,_,m,n,c){var d,I;if(n==="auto")d=new t.ComputedLength(0,0);else if((d=t.toComputedLength(n.h.value,n.h.unit,null,u.dimensions.h,null,u.pxLength.h))===null)return null;if(n==="auto")I=new t.ComputedLength(0,0);else if((I=t.toComputedLength(n.w.value,n.w.unit,null,u.dimensions.w,null,u.pxLength.w))===null)return null;return{h:d,w:I}}),new e(T.ns_tts,"overflow","hidden",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"padding","0px",["region"],!1,!0,function(u){var _=u.split(" ");if(_.length>4)return null;for(var m=[],n=0;n<_.length;n++){var c=t.parseLength(_[n]);if(!c)return null;m.push(c)}return m},function(u,_,m,n,c){var d;if(n.length===1)d=[n[0],n[0],n[0],n[0]];else if(n.length===2)d=[n[0],n[1],n[0],n[1]];else if(n.length===3)d=[n[0],n[1],n[2],n[1]];else{if(n.length!==4)return null;d=[n[0],n[1],n[2],n[3]]}var I=m.styleAttrs[ae.byName.writingMode.qname];if(I==="lrtb"||I==="lr")d=[d[0],d[3],d[2],d[1]];else if(I==="rltb"||I==="rl")d=[d[0],d[1],d[2],d[3]];else if(I==="tblr")d=[d[3],d[0],d[1],d[2]];else{if(I!=="tbrl"&&I!=="tb")return null;d=[d[3],d[2],d[1],d[0]]}for(var k=[],q=0;q<d.length;q++)if(d[q].value===0)k[q]=new t.ComputedLength(0,0);else if(k[q]=t.toComputedLength(d[q].value,d[q].unit,m.styleAttrs[ae.byName.fontSize.qname],q===0||q===2?m.styleAttrs[ae.byName.extent.qname].h:m.styleAttrs[ae.byName.extent.qname].w,q===0||q===2?u.cellLength.h:u.cellLength.w,q===0||q===2?u.pxLength.h:u.pxLength.w),k[q]===null)return null;return k}),new e(T.ns_tts,"position","top left",["region"],!1,!0,function(u){return t.parsePosition(u)},function(u,_,m,n){var c,d;return(c=t.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new t.ComputedLength(-m.styleAttrs[ae.byName.extent.qname].h.rw,u.dimensions.h.rh-m.styleAttrs[ae.byName.extent.qname].h.rh),null,u.pxLength.h))===null?null:(n.v.edge==="bottom"&&(c=new t.ComputedLength(-c.rw-m.styleAttrs[ae.byName.extent.qname].h.rw,u.dimensions.h.rh-c.rh-m.styleAttrs[ae.byName.extent.qname].h.rh)),d=t.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new t.ComputedLength(u.dimensions.w.rw-m.styleAttrs[ae.byName.extent.qname].w.rw,-m.styleAttrs[ae.byName.extent.qname].w.rh),null,u.pxLength.w),c===null?null:(n.h.edge==="right"&&(d=new t.ComputedLength(u.dimensions.w.rw-d.rw-m.styleAttrs[ae.byName.extent.qname].w.rw,-d.rh-m.styleAttrs[ae.byName.extent.qname].w.rh)),{h:c,w:d}))}),new e(T.ns_tts,"ruby","none",["span"],!1,!0,function(u){return u},null),new e(T.ns_tts,"rubyAlign","center",["span"],!0,!0,function(u){return u!=="center"&&u!=="spaceAround"?null:u},null),new e(T.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"rubyReserve","none",["p"],!0,!0,function(u){var _=u.split(" "),m=[null,null];if(_.length===0||_.length>2||_[0]!=="none"&&_[0]!=="both"&&_[0]!=="after"&&_[0]!=="before"&&_[0]!=="outside")return null;if(m[0]=_[0],_.length===2&&_[0]!=="none"){var n=t.parseLength(_[1]);if(!n)return null;m[1]=n}return m},function(u,_,m,n,c){if(n[0]==="none")return n;var d;return(d=n[1]===null?new t.ComputedLength(.5*m.styleAttrs[ae.byName.fontSize.qname].rw,.5*m.styleAttrs[ae.byName.fontSize.qname].rh):t.toComputedLength(n[1].value,n[1].unit,m.styleAttrs[ae.byName.fontSize.qname],m.styleAttrs[ae.byName.fontSize.qname],u.cellLength.h,u.pxLength.h))===null?null:[n[0],d]}),new e(T.ns_tts,"showBackground","always",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"textAlign","start",["p"],!0,!0,function(u){return u},function(u,_,m,n,c){return n==="left"?"start":n==="right"?"end":n}),new e(T.ns_tts,"textCombine","none",["span"],!0,!0,function(u){return u==="none"||u==="all"?u:null},null),new e(T.ns_tts,"textDecoration","none",["span"],!0,!0,function(u){return u.split(" ")},null),new e(T.ns_tts,"textEmphasis","none",["span"],!0,!0,function(u){for(var _=u.split(" "),m={style:null,symbol:null,color:null,position:null},n=0;n<_.length;n++)if(_[n]==="none"||_[n]==="auto")m.style=_[n];else if(_[n]==="filled"||_[n]==="open")m.style=_[n];else if(_[n]==="circle"||_[n]==="dot"||_[n]==="sesame")m.symbol=_[n];else if(_[n]==="current")m.color=_[n];else if(_[n]==="outside"||_[n]==="before"||_[n]==="after")m.position=_[n];else if(m.color=t.parseColor(_[n]),m.color===null)return null;return m.style==null&&m.symbol==null?m.style="auto":(m.symbol=m.symbol||"circle",m.style=m.style||"filled"),m.position=m.position||"outside",m.color=m.color||"current",m},null),new e(T.ns_tts,"textOutline","none",["span"],!0,!0,function(u){if(u==="none")return u;var _={},m=u.split(" ");if(m.length===0||m.length>2)return null;var n=t.parseColor(m[0]);if(_.color=n,n!==null&&m.shift(),m.length!==1)return null;var c=t.parseLength(m[0]);return c?(_.thickness=c,_):null},function(u,_,m,n,c){if(n==="none")return n;var d={};return n.color===null?d.color=m.styleAttrs[ae.byName.color.qname]:d.color=n.color,d.thickness=t.toComputedLength(n.thickness.value,n.thickness.unit,m.styleAttrs[ae.byName.fontSize.qname],m.styleAttrs[ae.byName.fontSize.qname],u.cellLength.h,u.pxLength.h),d.thickness===null?null:d}),new e(T.ns_tts,"textShadow","none",["span"],!0,!0,t.parseTextShadow,function(u,_,m,n){if(n==="none")return n;for(var c=[],d=0;d<n.length;d++){var I={};if(I.x_off=t.toComputedLength(n[d][0].value,n[d][0].unit,null,m.styleAttrs[ae.byName.fontSize.qname],null,u.pxLength.w),I.x_off===null||(I.y_off=t.toComputedLength(n[d][1].value,n[d][1].unit,null,m.styleAttrs[ae.byName.fontSize.qname],null,u.pxLength.h),I.y_off===null))return null;if(n[d][2]===null)I.b_radius=0;else if(I.b_radius=t.toComputedLength(n[d][2].value,n[d][2].unit,null,m.styleAttrs[ae.byName.fontSize.qname],null,u.pxLength.h),I.b_radius===null)return null;n[d][3]===null?I.color=m.styleAttrs[ae.byName.color.qname]:I.color=n[d][3],c.push(I)}return c}),new e(T.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(u){return u},null),new e(T.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"zIndex","auto",["region"],!1,!0,function(u){var _;return u==="auto"?_=u:(_=parseInt(u),isNaN(_)&&(_=null)),_},null),new e(T.ns_ebutts,"linePadding","0c",["p"],!0,!1,t.parseLength,function(u,_,m,n,c){return t.toComputedLength(n.value,n.unit,null,null,u.cellLength.w,null)}),new e(T.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(u){return u},null),new e(T.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(u){return u},null),new e(T.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(u){return u==="true"},null),new e(T.ns_itts,"fillLineGap","false",["p"],!0,!0,function(u){return u==="true"},null)],ae.byQName={},ae.all)ae.byQName[ae.all[y].qname]=ae.all[y];for(var p in ae.byName={},ae.all)ae.byName[ae.all[p].name]=ae.all[p]})(we,typeof imscNames>"u"?P(210):imscNames,typeof imscUtils>"u"?P(5926):imscUtils)},5926:function(at,we){(function(P){var ae=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,T=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,t=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,e={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};P.parseColor=function(p){var u,_=null,m=e[p.toLowerCase()];return m!==void 0?_=m:(u=ae.exec(p))!==null?_=[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16),u[4]!==void 0?parseInt(u[4],16):255]:(u=T.exec(p))!==null?_=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),255]:(u=t.exec(p))!==null&&(_=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),parseInt(u[4])]),_};var y=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;P.parseLength=function(p){var u,_=null;return(u=y.exec(p))!==null&&(_={value:parseFloat(u[1]),unit:u[2]}),_},P.parseTextShadow=function(p){for(var u=p.match(/([^\(,\)]|\([^\)]+\))+/g),_=[],m=0;m<u.length;m++){var n=u[m].split(" ");if(n.length===1&&n[0]==="none")return"none";if(n.length>1&&n.length<5){var c=[null,null,null,null],d=P.parseLength(n.shift());if(d===null||(c[0]=d,(d=P.parseLength(n.shift()))===null))return null;if(c[1]=d,n.length===0){_.push(c);continue}if((d=P.parseLength(n[0]))!==null&&(c[2]=d,n.shift()),n.length===0){_.push(c);continue}var I=P.parseColor(n[0]);if(I===null)return null;c[3]=I,_.push(c)}}return _},P.parsePosition=function(p){var u=p.split(" "),_=function(q){return q==="center"||q==="left"||q==="top"||q==="bottom"||q==="right"};if(u.length>4)return null;for(var m=0;m<u.length;m++)if(!_(u[m])){var n=P.parseLength(u[m]);if(n===null)return null;u[m]=n}for(var c={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},d=0;d<u.length;){var I=u[d++];if(_(I)){var k={value:0,unit:"%"};u.length!==2&&d<u.length&&!_(u[d])&&(k=u[d++]),I==="right"?(c.h.edge=I,c.h.offset=k):I==="bottom"?(c.v.edge=I,c.v.offset=k):I==="left"?c.h.offset=k:I==="top"&&(c.v.offset=k)}else{if(u.length!==1&&u.length!==2)return null;d===1?c.h.offset=I:c.v.offset=I}}return c},P.ComputedLength=function(p,u){this.rw=p,this.rh=u},P.ComputedLength.prototype.toUsedLength=function(p,u){return p*this.rw+u*this.rh},P.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},P.toComputedLength=function(p,u,_,m,n,c){return u==="%"&&m?new P.ComputedLength(m.rw*p/100,m.rh*p/100):u==="em"&&_?new P.ComputedLength(_.rw*p,_.rh*p):u==="c"&&n?new P.ComputedLength(p*n.rw,p*n.rh):u==="px"&&c?new P.ComputedLength(p*c.rw,p*c.rh):u==="rh"?new P.ComputedLength(0,p/100):u==="rw"?new P.ComputedLength(p/100,0):null}})(we)},3516:function(at){at.exports=function(we){var P=typeof we=="string"?we.charCodeAt(0):we;return P>=97&&P<=122||P>=65&&P<=90}},2219:function(at,we,P){var ae=P(3516),T=P(395);at.exports=function(t){return ae(t)||T(t)}},395:function(at){at.exports=function(we){var P=typeof we=="string"?we.charCodeAt(0):we;return P>=48&&P<=57}},3875:function(at){function we(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function P(T,t){for(var e,y="",p=0,u=-1,_=0,m=0;m<=T.length;++m){if(m<T.length)e=T.charCodeAt(m);else{if(e===47)break;e=47}if(e===47){if(!(u===m-1||_===1))if(u!==m-1&&_===2){if(y.length<2||p!==2||y.charCodeAt(y.length-1)!==46||y.charCodeAt(y.length-2)!==46){if(y.length>2){var n=y.lastIndexOf("/");if(n!==y.length-1){n===-1?(y="",p=0):p=(y=y.slice(0,n)).length-1-y.lastIndexOf("/"),u=m,_=0;continue}}else if(y.length===2||y.length===1){y="",p=0,u=m,_=0;continue}}t&&(y.length>0?y+="/..":y="..",p=2)}else y.length>0?y+="/"+T.slice(u+1,m):y=T.slice(u+1,m),p=m-u-1;u=m,_=0}else e===46&&_!==-1?++_:_=-1}return y}var ae={resolve:function(){for(var T,t="",e=!1,y=arguments.length-1;y>=-1&&!e;y--){var p;y>=0?p=arguments[y]:(T===void 0&&(T=process.cwd()),p=T),we(p),p.length!==0&&(t=p+"/"+t,e=p.charCodeAt(0)===47)}return t=P(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(T){if(we(T),T.length===0)return".";var t=T.charCodeAt(0)===47,e=T.charCodeAt(T.length-1)===47;return(T=P(T,!t)).length!==0||t||(T="."),T.length>0&&e&&(T+="/"),t?"/"+T:T},isAbsolute:function(T){return we(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,t=0;t<arguments.length;++t){var e=arguments[t];we(e),e.length>0&&(T===void 0?T=e:T+="/"+e)}return T===void 0?".":ae.normalize(T)},relative:function(T,t){if(we(T),we(t),T===t||(T=ae.resolve(T))===(t=ae.resolve(t)))return"";for(var e=1;e<T.length&&T.charCodeAt(e)===47;++e);for(var y=T.length,p=y-e,u=1;u<t.length&&t.charCodeAt(u)===47;++u);for(var _=t.length-u,m=p<_?p:_,n=-1,c=0;c<=m;++c){if(c===m){if(_>m){if(t.charCodeAt(u+c)===47)return t.slice(u+c+1);if(c===0)return t.slice(u+c)}else p>m&&(T.charCodeAt(e+c)===47?n=c:c===0&&(n=0));break}var d=T.charCodeAt(e+c);if(d!==t.charCodeAt(u+c))break;d===47&&(n=c)}var I="";for(c=e+n+1;c<=y;++c)c!==y&&T.charCodeAt(c)!==47||(I.length===0?I+="..":I+="/..");return I.length>0?I+t.slice(u+n):(u+=n,t.charCodeAt(u)===47&&++u,t.slice(u))},_makeLong:function(T){return T},dirname:function(T){if(we(T),T.length===0)return".";for(var t=T.charCodeAt(0),e=t===47,y=-1,p=!0,u=T.length-1;u>=1;--u)if((t=T.charCodeAt(u))===47){if(!p){y=u;break}}else p=!1;return y===-1?e?"/":".":e&&y===1?"//":T.slice(0,y)},basename:function(T,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');we(T);var e,y=0,p=-1,u=!0;if(t!==void 0&&t.length>0&&t.length<=T.length){if(t.length===T.length&&t===T)return"";var _=t.length-1,m=-1;for(e=T.length-1;e>=0;--e){var n=T.charCodeAt(e);if(n===47){if(!u){y=e+1;break}}else m===-1&&(u=!1,m=e+1),_>=0&&(n===t.charCodeAt(_)?--_==-1&&(p=e):(_=-1,p=m))}return y===p?p=m:p===-1&&(p=T.length),T.slice(y,p)}for(e=T.length-1;e>=0;--e)if(T.charCodeAt(e)===47){if(!u){y=e+1;break}}else p===-1&&(u=!1,p=e+1);return p===-1?"":T.slice(y,p)},extname:function(T){we(T);for(var t=-1,e=0,y=-1,p=!0,u=0,_=T.length-1;_>=0;--_){var m=T.charCodeAt(_);if(m!==47)y===-1&&(p=!1,y=_+1),m===46?t===-1?t=_:u!==1&&(u=1):t!==-1&&(u=-1);else if(!p){e=_+1;break}}return t===-1||y===-1||u===0||u===1&&t===y-1&&t===e+1?"":T.slice(t,y)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return function(t,e){var y=e.dir||e.root,p=e.base||(e.name||"")+(e.ext||"");return y?y===e.root?y+p:y+"/"+p:p}(0,T)},parse:function(T){we(T);var t={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return t;var e,y=T.charCodeAt(0),p=y===47;p?(t.root="/",e=1):e=0;for(var u=-1,_=0,m=-1,n=!0,c=T.length-1,d=0;c>=e;--c)if((y=T.charCodeAt(c))!==47)m===-1&&(n=!1,m=c+1),y===46?u===-1?u=c:d!==1&&(d=1):u!==-1&&(d=-1);else if(!n){_=c+1;break}return u===-1||m===-1||d===0||d===1&&u===m-1&&u===_+1?m!==-1&&(t.base=t.name=_===0&&p?T.slice(1,m):T.slice(_,m)):(_===0&&p?(t.name=T.slice(1,u),t.base=T.slice(1,m)):(t.name=T.slice(_,u),t.base=T.slice(_,m)),t.ext=T.slice(u,m)),_>0?t.dir=T.slice(0,_-1):p&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};ae.posix=ae,at.exports=ae},8387:function(at,we,P){var ae=P(1549),T=ae.Buffer;function t(y,p){for(var u in y)p[u]=y[u]}function e(y,p,u){return T(y,p,u)}T.from&&T.alloc&&T.allocUnsafe&&T.allocUnsafeSlow?at.exports=ae:(t(ae,we),we.Buffer=e),t(T,e),e.from=function(y,p,u){if(typeof y=="number")throw new TypeError("Argument must not be a number");return T(y,p,u)},e.alloc=function(y,p,u){if(typeof y!="number")throw new TypeError("Argument must be a number");var _=T(y);return p!==void 0?typeof u=="string"?_.fill(p,u):_.fill(p):_.fill(0),_},e.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return T(y)},e.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return ae.SlowBuffer(y)}},5378:function(at,we,P){(function(ae){ae.parser=function(f,o){return new e(f,o)},ae.SAXParser=e,ae.SAXStream=p,ae.createStream=function(f,o){return new p(f,o)},ae.MAX_BUFFER_LENGTH=65536;var T,t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function e(f,o){if(!(this instanceof e))return new e(f,o);var v=this;(function(S){for(var W=0,V=t.length;W<V;W++)S[t[W]]=""})(v),v.q=v.c="",v.bufferCheckPosition=ae.MAX_BUFFER_LENGTH,v.opt=o||{},v.opt.lowercase=v.opt.lowercase||v.opt.lowercasetags,v.looseCase=v.opt.lowercase?"toLowerCase":"toUpperCase",v.tags=[],v.closed=v.closedRoot=v.sawRoot=!1,v.tag=v.error=null,v.strict=!!f,v.noscript=!(!f&&!v.opt.noscript),v.state=X.BEGIN,v.strictEntities=v.opt.strictEntities,v.ENTITIES=v.strictEntities?Object.create(ae.XML_ENTITIES):Object.create(ae.ENTITIES),v.attribList=[],v.opt.xmlns&&(v.ns=Object.create(k)),v.trackPosition=v.opt.position!==!1,v.trackPosition&&(v.position=v.line=v.column=0),Le(v,"onready")}ae.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(f){function o(){}return o.prototype=f,new o}),Object.keys||(Object.keys=function(f){var o=[];for(var v in f)f.hasOwnProperty(v)&&o.push(v);return o}),e.prototype={end:function(){tt(this)},write:function(f){var o=this;if(this.error)throw this.error;if(o.closed)return He(o,"Cannot write after close. Assign an onready handler.");if(f===null)return tt(o);typeof f=="object"&&(f=f.toString());for(var v=0,S="";S=Ue(f,v++),o.c=S,S;)switch(o.trackPosition&&(o.position++,S===`
`?(o.line++,o.column=0):o.column++),o.state){case X.BEGIN:if(o.state=X.BEGIN_WHITESPACE,S==="\uFEFF")continue;me(o,S);continue;case X.BEGIN_WHITESPACE:me(o,S);continue;case X.TEXT:if(o.sawRoot&&!o.closedRoot){for(var W=v-1;S&&S!=="<"&&S!=="&";)(S=Ue(f,v++))&&o.trackPosition&&(o.position++,S===`
`?(o.line++,o.column=0):o.column++);o.textNode+=f.substring(W,v-1)}S!=="<"||o.sawRoot&&o.closedRoot&&!o.strict?(!H(u,S)||o.sawRoot&&!o.closedRoot||ve(o,"Text data outside of root node."),S==="&"?o.state=X.TEXT_ENTITY:o.textNode+=S):(o.state=X.OPEN_WAKA,o.startTagPosition=o.position);continue;case X.SCRIPT:S==="<"?o.state=X.SCRIPT_ENDING:o.script+=S;continue;case X.SCRIPT_ENDING:S==="/"?o.state=X.CLOSE_TAG:(o.script+="<"+S,o.state=X.SCRIPT);continue;case X.OPEN_WAKA:if(S==="!")o.state=X.SGML_DECL,o.sgmlDecl="";else if(!re(u,S))if(re(q,S))o.state=X.OPEN_TAG,o.tagName=S;else if(S==="/")o.state=X.CLOSE_TAG,o.tagName="";else if(S==="?")o.state=X.PROC_INST,o.procInstName=o.procInstBody="";else{if(ve(o,"Unencoded <"),o.startTagPosition+1<o.position){var V=o.position-o.startTagPosition;S=new Array(V).join(" ")+S}o.textNode+="<"+S,o.state=X.TEXT}continue;case X.SGML_DECL:(o.sgmlDecl+S).toUpperCase()==="[CDATA["?(Ye(o,"onopencdata"),o.state=X.CDATA,o.sgmlDecl="",o.cdata=""):o.sgmlDecl+S==="--"?(o.state=X.COMMENT,o.comment="",o.sgmlDecl=""):(o.sgmlDecl+S).toUpperCase()==="DOCTYPE"?(o.state=X.DOCTYPE,(o.doctype||o.sawRoot)&&ve(o,"Inappropriately located doctype declaration"),o.doctype="",o.sgmlDecl=""):S===">"?(Ye(o,"onsgmldeclaration",o.sgmlDecl),o.sgmlDecl="",o.state=X.TEXT):(re(n,S)&&(o.state=X.SGML_DECL_QUOTED),o.sgmlDecl+=S);continue;case X.SGML_DECL_QUOTED:S===o.q&&(o.state=X.SGML_DECL,o.q=""),o.sgmlDecl+=S;continue;case X.DOCTYPE:S===">"?(o.state=X.TEXT,Ye(o,"ondoctype",o.doctype),o.doctype=!0):(o.doctype+=S,S==="["?o.state=X.DOCTYPE_DTD:re(n,S)&&(o.state=X.DOCTYPE_QUOTED,o.q=S));continue;case X.DOCTYPE_QUOTED:o.doctype+=S,S===o.q&&(o.q="",o.state=X.DOCTYPE);continue;case X.DOCTYPE_DTD:o.doctype+=S,S==="]"?o.state=X.DOCTYPE:re(n,S)&&(o.state=X.DOCTYPE_DTD_QUOTED,o.q=S);continue;case X.DOCTYPE_DTD_QUOTED:o.doctype+=S,S===o.q&&(o.state=X.DOCTYPE_DTD,o.q="");continue;case X.COMMENT:S==="-"?o.state=X.COMMENT_ENDING:o.comment+=S;continue;case X.COMMENT_ENDING:S==="-"?(o.state=X.COMMENT_ENDED,o.comment=Pe(o.opt,o.comment),o.comment&&Ye(o,"oncomment",o.comment),o.comment=""):(o.comment+="-"+S,o.state=X.COMMENT);continue;case X.COMMENT_ENDED:S!==">"?(ve(o,"Malformed comment"),o.comment+="--"+S,o.state=X.COMMENT):o.state=X.TEXT;continue;case X.CDATA:S==="]"?o.state=X.CDATA_ENDING:o.cdata+=S;continue;case X.CDATA_ENDING:S==="]"?o.state=X.CDATA_ENDING_2:(o.cdata+="]"+S,o.state=X.CDATA);continue;case X.CDATA_ENDING_2:S===">"?(o.cdata&&Ye(o,"oncdata",o.cdata),Ye(o,"onclosecdata"),o.cdata="",o.state=X.TEXT):S==="]"?o.cdata+="]":(o.cdata+="]]"+S,o.state=X.CDATA);continue;case X.PROC_INST:S==="?"?o.state=X.PROC_INST_ENDING:re(u,S)?o.state=X.PROC_INST_BODY:o.procInstName+=S;continue;case X.PROC_INST_BODY:if(!o.procInstBody&&re(u,S))continue;S==="?"?o.state=X.PROC_INST_ENDING:o.procInstBody+=S;continue;case X.PROC_INST_ENDING:S===">"?(Ye(o,"onprocessinginstruction",{name:o.procInstName,body:o.procInstBody}),o.procInstName=o.procInstBody="",o.state=X.TEXT):(o.procInstBody+="?"+S,o.state=X.PROC_INST_BODY);continue;case X.OPEN_TAG:re(F,S)?o.tagName+=S:(Oe(o),S===">"?ke(o):S==="/"?o.state=X.OPEN_TAG_SLASH:(H(u,S)&&ve(o,"Invalid character in tag name"),o.state=X.ATTRIB));continue;case X.OPEN_TAG_SLASH:S===">"?(ke(o,!0),Je(o)):(ve(o,"Forward-slash in opening tag not followed by >"),o.state=X.ATTRIB);continue;case X.ATTRIB:if(re(u,S))continue;S===">"?ke(o):S==="/"?o.state=X.OPEN_TAG_SLASH:re(q,S)?(o.attribName=S,o.attribValue="",o.state=X.ATTRIB_NAME):ve(o,"Invalid attribute name");continue;case X.ATTRIB_NAME:S==="="?o.state=X.ATTRIB_VALUE:S===">"?(ve(o,"Attribute without value"),o.attribValue=o.attribName,dt(o),ke(o)):re(u,S)?o.state=X.ATTRIB_NAME_SAW_WHITE:re(F,S)?o.attribName+=S:ve(o,"Invalid attribute name");continue;case X.ATTRIB_NAME_SAW_WHITE:if(S==="=")o.state=X.ATTRIB_VALUE;else{if(re(u,S))continue;ve(o,"Attribute without value"),o.tag.attributes[o.attribName]="",o.attribValue="",Ye(o,"onattribute",{name:o.attribName,value:""}),o.attribName="",S===">"?ke(o):re(q,S)?(o.attribName=S,o.state=X.ATTRIB_NAME):(ve(o,"Invalid attribute name"),o.state=X.ATTRIB)}continue;case X.ATTRIB_VALUE:if(re(u,S))continue;re(n,S)?(o.q=S,o.state=X.ATTRIB_VALUE_QUOTED):(ve(o,"Unquoted attribute value"),o.state=X.ATTRIB_VALUE_UNQUOTED,o.attribValue=S);continue;case X.ATTRIB_VALUE_QUOTED:if(S!==o.q){S==="&"?o.state=X.ATTRIB_VALUE_ENTITY_Q:o.attribValue+=S;continue}dt(o),o.q="",o.state=X.ATTRIB_VALUE_CLOSED;continue;case X.ATTRIB_VALUE_CLOSED:re(u,S)?o.state=X.ATTRIB:S===">"?ke(o):S==="/"?o.state=X.OPEN_TAG_SLASH:re(q,S)?(ve(o,"No whitespace between attributes"),o.attribName=S,o.attribValue="",o.state=X.ATTRIB_NAME):ve(o,"Invalid attribute name");continue;case X.ATTRIB_VALUE_UNQUOTED:if(H(c,S)){S==="&"?o.state=X.ATTRIB_VALUE_ENTITY_U:o.attribValue+=S;continue}dt(o),S===">"?ke(o):o.state=X.ATTRIB;continue;case X.CLOSE_TAG:if(o.tagName)S===">"?Je(o):re(F,S)?o.tagName+=S:o.script?(o.script+="</"+o.tagName,o.tagName="",o.state=X.SCRIPT):(H(u,S)&&ve(o,"Invalid tagname in closing tag"),o.state=X.CLOSE_TAG_SAW_WHITE);else{if(re(u,S))continue;H(q,S)?o.script?(o.script+="</"+S,o.state=X.SCRIPT):ve(o,"Invalid tagname in closing tag."):o.tagName=S}continue;case X.CLOSE_TAG_SAW_WHITE:if(re(u,S))continue;S===">"?Je(o):ve(o,"Invalid characters in closing tag");continue;case X.TEXT_ENTITY:case X.ATTRIB_VALUE_ENTITY_Q:case X.ATTRIB_VALUE_ENTITY_U:var Se,ze;switch(o.state){case X.TEXT_ENTITY:Se=X.TEXT,ze="textNode";break;case X.ATTRIB_VALUE_ENTITY_Q:Se=X.ATTRIB_VALUE_QUOTED,ze="attribValue";break;case X.ATTRIB_VALUE_ENTITY_U:Se=X.ATTRIB_VALUE_UNQUOTED,ze="attribValue"}S===";"?(o[ze]+=ge(o),o.entity="",o.state=Se):re(o.entity.length?O:$,S)?o.entity+=S:(ve(o,"Invalid character in entity name"),o[ze]+="&"+o.entity+S,o.entity="",o.state=Se);continue;default:throw new Error(o,"Unknown state: "+o.state)}return o.position>=o.bufferCheckPosition&&function(Me){for(var De=Math.max(ae.MAX_BUFFER_LENGTH,10),be=0,xe=0,Qe=t.length;xe<Qe;xe++){var mt=Me[t[xe]].length;if(mt>De)switch(t[xe]){case"textNode":ye(Me);break;case"cdata":Ye(Me,"oncdata",Me.cdata),Me.cdata="";break;case"script":Ye(Me,"onscript",Me.script),Me.script="";break;default:He(Me,"Max buffer length exceeded: "+t[xe])}be=Math.max(be,mt)}var it=ae.MAX_BUFFER_LENGTH-be;Me.bufferCheckPosition=it+Me.position}(o),o},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var f;ye(f=this),f.cdata!==""&&(Ye(f,"oncdata",f.cdata),f.cdata=""),f.script!==""&&(Ye(f,"onscript",f.script),f.script="")}};try{T=P(182).Stream}catch{T=function(){}}var y=ae.EVENTS.filter(function(f){return f!=="error"&&f!=="end"});function p(f,o){if(!(this instanceof p))return new p(f,o);T.apply(this),this._parser=new e(f,o),this.writable=!0,this.readable=!0;var v=this;this._parser.onend=function(){v.emit("end")},this._parser.onerror=function(S){v.emit("error",S),v._parser.error=null},this._decoder=null,y.forEach(function(S){Object.defineProperty(v,"on"+S,{get:function(){return v._parser["on"+S]},set:function(W){if(!W)return v.removeAllListeners(S),v._parser["on"+S]=W,W;v.on(S,W)},enumerable:!0,configurable:!1})})}p.prototype=Object.create(T.prototype,{constructor:{value:p}}),p.prototype.write=function(f){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(f)){if(!this._decoder){var o=P(7503).s;this._decoder=new o("utf8")}f=this._decoder.write(f)}return this._parser.write(f.toString()),this.emit("data",f),!0},p.prototype.end=function(f){return f&&f.length&&this.write(f),this._parser.end(),!0},p.prototype.on=function(f,o){var v=this;return v._parser["on"+f]||y.indexOf(f)===-1||(v._parser["on"+f]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,f),v.emit.apply(v,S)}),T.prototype.on.call(v,f,o)};var u=`\r
	 `,_="0124356789",m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=`'"`,c=u+">",d="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",k={xml:d,xmlns:I};u=K(u),_=K(_),m=K(m);var q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function K(f){return f.split("").reduce(function(o,v){return o[v]=!0,o},{})}function re(f,o){return function(v){return Object.prototype.toString.call(v)==="[object RegExp]"}(f)?!!o.match(f):f[o]}function H(f,o){return!re(f,o)}n=K(n),c=K(c);var ee,se,_e,X=0;for(var Ae in ae.STATE={BEGIN:X++,BEGIN_WHITESPACE:X++,TEXT:X++,TEXT_ENTITY:X++,OPEN_WAKA:X++,SGML_DECL:X++,SGML_DECL_QUOTED:X++,DOCTYPE:X++,DOCTYPE_QUOTED:X++,DOCTYPE_DTD:X++,DOCTYPE_DTD_QUOTED:X++,COMMENT_STARTING:X++,COMMENT:X++,COMMENT_ENDING:X++,COMMENT_ENDED:X++,CDATA:X++,CDATA_ENDING:X++,CDATA_ENDING_2:X++,PROC_INST:X++,PROC_INST_BODY:X++,PROC_INST_ENDING:X++,OPEN_TAG:X++,OPEN_TAG_SLASH:X++,ATTRIB:X++,ATTRIB_NAME:X++,ATTRIB_NAME_SAW_WHITE:X++,ATTRIB_VALUE:X++,ATTRIB_VALUE_QUOTED:X++,ATTRIB_VALUE_CLOSED:X++,ATTRIB_VALUE_UNQUOTED:X++,ATTRIB_VALUE_ENTITY_Q:X++,ATTRIB_VALUE_ENTITY_U:X++,CLOSE_TAG:X++,CLOSE_TAG_SAW_WHITE:X++,SCRIPT:X++,SCRIPT_ENDING:X++},ae.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},ae.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(ae.ENTITIES).forEach(function(f){var o=ae.ENTITIES[f],v=typeof o=="number"?String.fromCharCode(o):o;ae.ENTITIES[f]=v}),ae.STATE)ae.STATE[ae.STATE[Ae]]=Ae;function Le(f,o,v){f[o]&&f[o](v)}function Ye(f,o,v){f.textNode&&ye(f),Le(f,o,v)}function ye(f){f.textNode=Pe(f.opt,f.textNode),f.textNode&&Le(f,"ontext",f.textNode),f.textNode=""}function Pe(f,o){return f.trim&&(o=o.trim()),f.normalize&&(o=o.replace(/\s+/g," ")),o}function He(f,o){return ye(f),f.trackPosition&&(o+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c),o=new Error(o),f.error=o,Le(f,"onerror",o),f}function tt(f){return f.sawRoot&&!f.closedRoot&&ve(f,"Unclosed root tag"),f.state!==X.BEGIN&&f.state!==X.BEGIN_WHITESPACE&&f.state!==X.TEXT&&He(f,"Unexpected end"),ye(f),f.c="",f.closed=!0,Le(f,"onend"),e.call(f,f.strict,f.opt),f}function ve(f,o){if(typeof f!="object"||!(f instanceof e))throw new Error("bad call to strictFail");f.strict&&He(f,o)}function Oe(f){f.strict||(f.tagName=f.tagName[f.looseCase]());var o=f.tags[f.tags.length-1]||f,v=f.tag={name:f.tagName,attributes:{}};f.opt.xmlns&&(v.ns=o.ns),f.attribList.length=0,Ye(f,"onopentagstart",v)}function _t(f,o){var v=f.indexOf(":")<0?["",f]:f.split(":"),S=v[0],W=v[1];return o&&f==="xmlns"&&(S="xmlns",W=""),{prefix:S,local:W}}function dt(f){if(f.strict||(f.attribName=f.attribName[f.looseCase]()),f.attribList.indexOf(f.attribName)!==-1||f.tag.attributes.hasOwnProperty(f.attribName))f.attribName=f.attribValue="";else{if(f.opt.xmlns){var o=_t(f.attribName,!0),v=o.prefix,S=o.local;if(v==="xmlns")if(S==="xml"&&f.attribValue!==d)ve(f,"xml: prefix must be bound to "+d+`
Actual: `+f.attribValue);else if(S==="xmlns"&&f.attribValue!==I)ve(f,"xmlns: prefix must be bound to "+I+`
Actual: `+f.attribValue);else{var W=f.tag,V=f.tags[f.tags.length-1]||f;W.ns===V.ns&&(W.ns=Object.create(V.ns)),W.ns[S]=f.attribValue}f.attribList.push([f.attribName,f.attribValue])}else f.tag.attributes[f.attribName]=f.attribValue,Ye(f,"onattribute",{name:f.attribName,value:f.attribValue});f.attribName=f.attribValue=""}}function ke(f,o){if(f.opt.xmlns){var v=f.tag,S=_t(f.tagName);v.prefix=S.prefix,v.local=S.local,v.uri=v.ns[S.prefix]||"",v.prefix&&!v.uri&&(ve(f,"Unbound namespace prefix: "+JSON.stringify(f.tagName)),v.uri=S.prefix);var W=f.tags[f.tags.length-1]||f;v.ns&&W.ns!==v.ns&&Object.keys(v.ns).forEach(function(Ut){Ye(f,"onopennamespace",{prefix:Ut,uri:v.ns[Ut]})});for(var V=0,Se=f.attribList.length;V<Se;V++){var ze=f.attribList[V],Me=ze[0],De=ze[1],be=_t(Me,!0),xe=be.prefix,Qe=be.local,mt=xe===""?"":v.ns[xe]||"",it={name:Me,value:De,prefix:xe,local:Qe,uri:mt};xe&&xe!=="xmlns"&&!mt&&(ve(f,"Unbound namespace prefix: "+JSON.stringify(xe)),it.uri=xe),f.tag.attributes[Me]=it,Ye(f,"onattribute",it)}f.attribList.length=0}f.tag.isSelfClosing=!!o,f.sawRoot=!0,f.tags.push(f.tag),Ye(f,"onopentag",f.tag),o||(f.noscript||f.tagName.toLowerCase()!=="script"?f.state=X.TEXT:f.state=X.SCRIPT,f.tag=null,f.tagName=""),f.attribName=f.attribValue="",f.attribList.length=0}function Je(f){if(!f.tagName)return ve(f,"Weird empty close tag."),f.textNode+="</>",void(f.state=X.TEXT);if(f.script){if(f.tagName!=="script")return f.script+="</"+f.tagName+">",f.tagName="",void(f.state=X.SCRIPT);Ye(f,"onscript",f.script),f.script=""}var o=f.tags.length,v=f.tagName;f.strict||(v=v[f.looseCase]());for(var S=v;o--&&f.tags[o].name!==S;)ve(f,"Unexpected close tag");if(o<0)return ve(f,"Unmatched closing tag: "+f.tagName),f.textNode+="</"+f.tagName+">",void(f.state=X.TEXT);f.tagName=v;for(var W=f.tags.length;W-- >o;){var V=f.tag=f.tags.pop();f.tagName=f.tag.name,Ye(f,"onclosetag",f.tagName);var Se={};for(var ze in V.ns)Se[ze]=V.ns[ze];var Me=f.tags[f.tags.length-1]||f;f.opt.xmlns&&V.ns!==Me.ns&&Object.keys(V.ns).forEach(function(De){var be=V.ns[De];Ye(f,"onclosenamespace",{prefix:De,uri:be})})}o===0&&(f.closedRoot=!0),f.tagName=f.attribValue=f.attribName="",f.attribList.length=0,f.state=X.TEXT}function ge(f){var o,v=f.entity,S=v.toLowerCase(),W="";return f.ENTITIES[v]?f.ENTITIES[v]:f.ENTITIES[S]?f.ENTITIES[S]:((v=S).charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),W=(o=parseInt(v,16)).toString(16)):(v=v.slice(1),W=(o=parseInt(v,10)).toString(10))),v=v.replace(/^0+/,""),W.toLowerCase()!==v?(ve(f,"Invalid character entity"),"&"+f.entity+";"):String.fromCodePoint(o))}function me(f,o){o==="<"?(f.state=X.OPEN_WAKA,f.startTagPosition=f.position):H(u,o)&&(ve(f,"Non-whitespace before first tag."),f.textNode=o,f.state=X.TEXT)}function Ue(f,o){var v="";return o<f.length&&(v=f.charAt(o)),v}X=ae.STATE,String.fromCodePoint||(ee=String.fromCharCode,se=Math.floor,_e=function(){var f,o,v=16384,S=[],W=-1,V=arguments.length;if(!V)return"";for(var Se="";++W<V;){var ze=Number(arguments[W]);if(!isFinite(ze)||ze<0||ze>1114111||se(ze)!==ze)throw RangeError("Invalid code point: "+ze);ze<=65535?S.push(ze):(f=55296+((ze-=65536)>>10),o=ze%1024+56320,S.push(f,o)),(W+1===V||S.length>v)&&(Se+=ee.apply(null,S),S.length=0)}return Se},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:_e,configurable:!0,writable:!0}):String.fromCodePoint=_e)})(we)},182:function(at,we,P){at.exports=T;var ae=P(1159).EventEmitter;function T(){ae.call(this)}P(1765)(T,ae),T.Readable=P(2846),T.Writable=P(8318),T.Duplex=P(6138),T.Transform=P(9798),T.PassThrough=P(5472),T.finished=P(8800),T.pipeline=P(7295),T.Stream=T,T.prototype.pipe=function(t,e){var y=this;function p(I){t.writable&&t.write(I)===!1&&y.pause&&y.pause()}function u(){y.readable&&y.resume&&y.resume()}y.on("data",p),t.on("drain",u),t._isStdio||e&&e.end===!1||(y.on("end",m),y.on("close",n));var _=!1;function m(){_||(_=!0,t.end())}function n(){_||(_=!0,typeof t.destroy=="function"&&t.destroy())}function c(I){if(d(),ae.listenerCount(this,"error")===0)throw I}function d(){y.removeListener("data",p),t.removeListener("drain",u),y.removeListener("end",m),y.removeListener("close",n),y.removeListener("error",c),t.removeListener("error",c),y.removeListener("end",d),y.removeListener("close",d),t.removeListener("close",d)}return y.on("error",c),t.on("error",c),y.on("end",d),y.on("close",d),t.on("close",d),t.emit("pipe",y),t}},1765:function(at){typeof Object.create=="function"?at.exports=function(we,P){P&&(we.super_=P,we.prototype=Object.create(P.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}))}:at.exports=function(we,P){if(P){we.super_=P;var ae=function(){};ae.prototype=P.prototype,we.prototype=new ae,we.prototype.constructor=we}}},3690:function(at){var we={};function P(T,t,e){e||(e=Error);var y=function(p){var u,_;function m(n,c,d){return p.call(this,function(I,k,q){return typeof t=="string"?t:t(I,k,q)}(n,c,d))||this}return _=p,(u=m).prototype=Object.create(_.prototype),u.prototype.constructor=u,u.__proto__=_,m}(e);y.prototype.name=e.name,y.prototype.code=T,we[T]=y}function ae(T,t){if(Array.isArray(T)){var e=T.length;return T=T.map(function(y){return String(y)}),e>2?"one of ".concat(t," ").concat(T.slice(0,e-1).join(", "),", or ")+T[e-1]:e===2?"one of ".concat(t," ").concat(T[0]," or ").concat(T[1]):"of ".concat(t," ").concat(T[0])}return"of ".concat(t," ").concat(String(T))}P("ERR_INVALID_OPT_VALUE",function(T,t){return'The value "'+t+'" is invalid for option "'+T+'"'},TypeError),P("ERR_INVALID_ARG_TYPE",function(T,t,e){var y,p,u,_,m;if(typeof t=="string"&&(p="not ",t.substr(0,p.length)===p)?(y="must not be",t=t.replace(/^not /,"")):y="must be",function(c,d,I){return(I===void 0||I>c.length)&&(I=c.length),c.substring(I-d.length,I)===d}(T," argument"))u="The ".concat(T," ").concat(y," ").concat(ae(t,"type"));else{var n=(typeof m!="number"&&(m=0),m+1>(_=T).length||_.indexOf(".",m)===-1?"argument":"property");u='The "'.concat(T,'" ').concat(n," ").concat(y," ").concat(ae(t,"type"))}return u+". Received type ".concat(typeof e)},TypeError),P("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),P("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),P("ERR_STREAM_PREMATURE_CLOSE","Premature close"),P("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),P("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),P("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),P("ERR_STREAM_WRITE_AFTER_END","write after end"),P("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),P("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),P("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),at.exports.q=we},6138:function(at,we,P){var ae=Object.keys||function(n){var c=[];for(var d in n)c.push(d);return c};at.exports=u;var T=P(2846),t=P(8318);P(1765)(u,T);for(var e=ae(t.prototype),y=0;y<e.length;y++){var p=e[y];u.prototype[p]||(u.prototype[p]=t.prototype[p])}function u(n){if(!(this instanceof u))return new u(n);T.call(this,n),t.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",_)))}function _(){this._writableState.ended||process.nextTick(m,this)}function m(n){n.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},5472:function(at,we,P){at.exports=T;var ae=P(9798);function T(t){if(!(this instanceof T))return new T(t);ae.call(this,t)}P(1765)(T,ae),T.prototype._transform=function(t,e,y){y(null,t)}},2846:function(at,we,P){var ae;at.exports=ee,ee.ReadableState=H,P(1159).EventEmitter;var T,t=function(ge,me){return ge.listeners(me).length},e=P(9299),y=P(1549).Buffer,p=P.g.Uint8Array||function(){},u=P(964);T=u&&u.debuglog?u.debuglog("stream"):function(){};var _,m,n,c=P(8393),d=P(6163),I=P(7269).getHighWaterMark,k=P(3690).q,q=k.ERR_INVALID_ARG_TYPE,F=k.ERR_STREAM_PUSH_AFTER_EOF,$=k.ERR_METHOD_NOT_IMPLEMENTED,O=k.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;P(1765)(ee,e);var K=d.errorOrDestroy,re=["error","close","destroy","pause","resume"];function H(ge,me,Ue){ae=ae||P(6138),ge=ge||{},typeof Ue!="boolean"&&(Ue=me instanceof ae),this.objectMode=!!ge.objectMode,Ue&&(this.objectMode=this.objectMode||!!ge.readableObjectMode),this.highWaterMark=I(this,ge,"readableHighWaterMark",Ue),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ge.emitClose!==!1,this.autoDestroy=!!ge.autoDestroy,this.destroyed=!1,this.defaultEncoding=ge.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ge.encoding&&(_||(_=P(7503).s),this.decoder=new _(ge.encoding),this.encoding=ge.encoding)}function ee(ge){if(ae=ae||P(6138),!(this instanceof ee))return new ee(ge);var me=this instanceof ae;this._readableState=new H(ge,this,me),this.readable=!0,ge&&(typeof ge.read=="function"&&(this._read=ge.read),typeof ge.destroy=="function"&&(this._destroy=ge.destroy)),e.call(this)}function se(ge,me,Ue,f,o){T("readableAddChunk",me);var v,S=ge._readableState;if(me===null)S.reading=!1,function(W,V){if(T("onEofChunk"),!V.ended){if(V.decoder){var Se=V.decoder.end();Se&&Se.length&&(V.buffer.push(Se),V.length+=V.objectMode?1:Se.length)}V.ended=!0,V.sync?Le(W):(V.needReadable=!1,V.emittedReadable||(V.emittedReadable=!0,Ye(W)))}}(ge,S);else if(o||(v=function(W,V){var Se,ze;return ze=V,y.isBuffer(ze)||ze instanceof p||typeof V=="string"||V===void 0||W.objectMode||(Se=new q("chunk",["string","Buffer","Uint8Array"],V)),Se}(S,me)),v)K(ge,v);else if(S.objectMode||me&&me.length>0)if(typeof me=="string"||S.objectMode||Object.getPrototypeOf(me)===y.prototype||(me=function(W){return y.from(W)}(me)),f)S.endEmitted?K(ge,new O):_e(ge,S,me,!0);else if(S.ended)K(ge,new F);else{if(S.destroyed)return!1;S.reading=!1,S.decoder&&!Ue?(me=S.decoder.write(me),S.objectMode||me.length!==0?_e(ge,S,me,!1):ye(ge,S)):_e(ge,S,me,!1)}else f||(S.reading=!1,ye(ge,S));return!S.ended&&(S.length<S.highWaterMark||S.length===0)}function _e(ge,me,Ue,f){me.flowing&&me.length===0&&!me.sync?(me.awaitDrain=0,ge.emit("data",Ue)):(me.length+=me.objectMode?1:Ue.length,f?me.buffer.unshift(Ue):me.buffer.push(Ue),me.needReadable&&Le(ge)),ye(ge,me)}Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ge){this._readableState&&(this._readableState.destroyed=ge)}}),ee.prototype.destroy=d.destroy,ee.prototype._undestroy=d.undestroy,ee.prototype._destroy=function(ge,me){me(ge)},ee.prototype.push=function(ge,me){var Ue,f=this._readableState;return f.objectMode?Ue=!0:typeof ge=="string"&&((me=me||f.defaultEncoding)!==f.encoding&&(ge=y.from(ge,me),me=""),Ue=!0),se(this,ge,me,!1,Ue)},ee.prototype.unshift=function(ge){return se(this,ge,null,!0,!1)},ee.prototype.isPaused=function(){return this._readableState.flowing===!1},ee.prototype.setEncoding=function(ge){_||(_=P(7503).s);var me=new _(ge);this._readableState.decoder=me,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ue=this._readableState.buffer.head,f="";Ue!==null;)f+=me.write(Ue.data),Ue=Ue.next;return this._readableState.buffer.clear(),f!==""&&this._readableState.buffer.push(f),this._readableState.length=f.length,this};var X=1073741824;function Ae(ge,me){return ge<=0||me.length===0&&me.ended?0:me.objectMode?1:ge!=ge?me.flowing&&me.length?me.buffer.head.data.length:me.length:(ge>me.highWaterMark&&(me.highWaterMark=function(Ue){return Ue>=X?Ue=X:(Ue--,Ue|=Ue>>>1,Ue|=Ue>>>2,Ue|=Ue>>>4,Ue|=Ue>>>8,Ue|=Ue>>>16,Ue++),Ue}(ge)),ge<=me.length?ge:me.ended?me.length:(me.needReadable=!0,0))}function Le(ge){var me=ge._readableState;T("emitReadable",me.needReadable,me.emittedReadable),me.needReadable=!1,me.emittedReadable||(T("emitReadable",me.flowing),me.emittedReadable=!0,process.nextTick(Ye,ge))}function Ye(ge){var me=ge._readableState;T("emitReadable_",me.destroyed,me.length,me.ended),me.destroyed||!me.length&&!me.ended||(ge.emit("readable"),me.emittedReadable=!1),me.needReadable=!me.flowing&&!me.ended&&me.length<=me.highWaterMark,Oe(ge)}function ye(ge,me){me.readingMore||(me.readingMore=!0,process.nextTick(Pe,ge,me))}function Pe(ge,me){for(;!me.reading&&!me.ended&&(me.length<me.highWaterMark||me.flowing&&me.length===0);){var Ue=me.length;if(T("maybeReadMore read 0"),ge.read(0),Ue===me.length)break}me.readingMore=!1}function He(ge){var me=ge._readableState;me.readableListening=ge.listenerCount("readable")>0,me.resumeScheduled&&!me.paused?me.flowing=!0:ge.listenerCount("data")>0&&ge.resume()}function tt(ge){T("readable nexttick read 0"),ge.read(0)}function ve(ge,me){T("resume",me.reading),me.reading||ge.read(0),me.resumeScheduled=!1,ge.emit("resume"),Oe(ge),me.flowing&&!me.reading&&ge.read(0)}function Oe(ge){var me=ge._readableState;for(T("flow",me.flowing);me.flowing&&ge.read()!==null;);}function _t(ge,me){return me.length===0?null:(me.objectMode?Ue=me.buffer.shift():!ge||ge>=me.length?(Ue=me.decoder?me.buffer.join(""):me.buffer.length===1?me.buffer.first():me.buffer.concat(me.length),me.buffer.clear()):Ue=me.buffer.consume(ge,me.decoder),Ue);var Ue}function dt(ge){var me=ge._readableState;T("endReadable",me.endEmitted),me.endEmitted||(me.ended=!0,process.nextTick(ke,me,ge))}function ke(ge,me){if(T("endReadableNT",ge.endEmitted,ge.length),!ge.endEmitted&&ge.length===0&&(ge.endEmitted=!0,me.readable=!1,me.emit("end"),ge.autoDestroy)){var Ue=me._writableState;(!Ue||Ue.autoDestroy&&Ue.finished)&&me.destroy()}}function Je(ge,me){for(var Ue=0,f=ge.length;Ue<f;Ue++)if(ge[Ue]===me)return Ue;return-1}ee.prototype.read=function(ge){T("read",ge),ge=parseInt(ge,10);var me=this._readableState,Ue=ge;if(ge!==0&&(me.emittedReadable=!1),ge===0&&me.needReadable&&((me.highWaterMark!==0?me.length>=me.highWaterMark:me.length>0)||me.ended))return T("read: emitReadable",me.length,me.ended),me.length===0&&me.ended?dt(this):Le(this),null;if((ge=Ae(ge,me))===0&&me.ended)return me.length===0&&dt(this),null;var f,o=me.needReadable;return T("need readable",o),(me.length===0||me.length-ge<me.highWaterMark)&&T("length less than watermark",o=!0),me.ended||me.reading?T("reading or ended",o=!1):o&&(T("do read"),me.reading=!0,me.sync=!0,me.length===0&&(me.needReadable=!0),this._read(me.highWaterMark),me.sync=!1,me.reading||(ge=Ae(Ue,me))),(f=ge>0?_t(ge,me):null)===null?(me.needReadable=me.length<=me.highWaterMark,ge=0):(me.length-=ge,me.awaitDrain=0),me.length===0&&(me.ended||(me.needReadable=!0),Ue!==ge&&me.ended&&dt(this)),f!==null&&this.emit("data",f),f},ee.prototype._read=function(ge){K(this,new $("_read()"))},ee.prototype.pipe=function(ge,me){var Ue=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=ge;break;case 1:f.pipes=[f.pipes,ge];break;default:f.pipes.push(ge)}f.pipesCount+=1,T("pipe count=%d opts=%j",f.pipesCount,me);var o=me&&me.end===!1||ge===process.stdout||ge===process.stderr?De:v;function v(){T("onend"),ge.end()}f.endEmitted?process.nextTick(o):Ue.once("end",o),ge.on("unpipe",function be(xe,Qe){T("onunpipe"),xe===Ue&&Qe&&Qe.hasUnpiped===!1&&(Qe.hasUnpiped=!0,T("cleanup"),ge.removeListener("close",ze),ge.removeListener("finish",Me),ge.removeListener("drain",S),ge.removeListener("error",Se),ge.removeListener("unpipe",be),Ue.removeListener("end",v),Ue.removeListener("end",De),Ue.removeListener("data",V),W=!0,!f.awaitDrain||ge._writableState&&!ge._writableState.needDrain||S())});var S=function(be){return function(){var xe=be._readableState;T("pipeOnDrain",xe.awaitDrain),xe.awaitDrain&&xe.awaitDrain--,xe.awaitDrain===0&&t(be,"data")&&(xe.flowing=!0,Oe(be))}}(Ue);ge.on("drain",S);var W=!1;function V(be){T("ondata");var xe=ge.write(be);T("dest.write",xe),xe===!1&&((f.pipesCount===1&&f.pipes===ge||f.pipesCount>1&&Je(f.pipes,ge)!==-1)&&!W&&(T("false write response, pause",f.awaitDrain),f.awaitDrain++),Ue.pause())}function Se(be){T("onerror",be),De(),ge.removeListener("error",Se),t(ge,"error")===0&&K(ge,be)}function ze(){ge.removeListener("finish",Me),De()}function Me(){T("onfinish"),ge.removeListener("close",ze),De()}function De(){T("unpipe"),Ue.unpipe(ge)}return Ue.on("data",V),function(be,xe,Qe){if(typeof be.prependListener=="function")return be.prependListener(xe,Qe);be._events&&be._events[xe]?Array.isArray(be._events[xe])?be._events[xe].unshift(Qe):be._events[xe]=[Qe,be._events[xe]]:be.on(xe,Qe)}(ge,"error",Se),ge.once("close",ze),ge.once("finish",Me),ge.emit("pipe",Ue),f.flowing||(T("pipe resume"),Ue.resume()),ge},ee.prototype.unpipe=function(ge){var me=this._readableState,Ue={hasUnpiped:!1};if(me.pipesCount===0)return this;if(me.pipesCount===1)return ge&&ge!==me.pipes||(ge||(ge=me.pipes),me.pipes=null,me.pipesCount=0,me.flowing=!1,ge&&ge.emit("unpipe",this,Ue)),this;if(!ge){var f=me.pipes,o=me.pipesCount;me.pipes=null,me.pipesCount=0,me.flowing=!1;for(var v=0;v<o;v++)f[v].emit("unpipe",this,{hasUnpiped:!1});return this}var S=Je(me.pipes,ge);return S===-1||(me.pipes.splice(S,1),me.pipesCount-=1,me.pipesCount===1&&(me.pipes=me.pipes[0]),ge.emit("unpipe",this,Ue)),this},ee.prototype.on=function(ge,me){var Ue=e.prototype.on.call(this,ge,me),f=this._readableState;return ge==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):ge==="readable"&&(f.endEmitted||f.readableListening||(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,T("on readable",f.length,f.reading),f.length?Le(this):f.reading||process.nextTick(tt,this))),Ue},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(ge,me){var Ue=e.prototype.removeListener.call(this,ge,me);return ge==="readable"&&process.nextTick(He,this),Ue},ee.prototype.removeAllListeners=function(ge){var me=e.prototype.removeAllListeners.apply(this,arguments);return ge!=="readable"&&ge!==void 0||process.nextTick(He,this),me},ee.prototype.resume=function(){var ge=this._readableState;return ge.flowing||(T("resume"),ge.flowing=!ge.readableListening,function(me,Ue){Ue.resumeScheduled||(Ue.resumeScheduled=!0,process.nextTick(ve,me,Ue))}(this,ge)),ge.paused=!1,this},ee.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ee.prototype.wrap=function(ge){var me=this,Ue=this._readableState,f=!1;for(var o in ge.on("end",function(){if(T("wrapped end"),Ue.decoder&&!Ue.ended){var S=Ue.decoder.end();S&&S.length&&me.push(S)}me.push(null)}),ge.on("data",function(S){T("wrapped data"),Ue.decoder&&(S=Ue.decoder.write(S)),Ue.objectMode&&S==null||(Ue.objectMode||S&&S.length)&&(me.push(S)||(f=!0,ge.pause()))}),ge)this[o]===void 0&&typeof ge[o]=="function"&&(this[o]=function(S){return function(){return ge[S].apply(ge,arguments)}}(o));for(var v=0;v<re.length;v++)ge.on(re[v],this.emit.bind(this,re[v]));return this._read=function(S){T("wrapped _read",S),f&&(f=!1,ge.resume())},this},typeof Symbol=="function"&&(ee.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=P(7299)),m(this)}),Object.defineProperty(ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ge){this._readableState&&(this._readableState.flowing=ge)}}),ee._fromList=_t,Object.defineProperty(ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ee.from=function(ge,me){return n===void 0&&(n=P(6233)),n(ee,ge,me)})},9798:function(at,we,P){at.exports=_;var ae=P(3690).q,T=ae.ERR_METHOD_NOT_IMPLEMENTED,t=ae.ERR_MULTIPLE_CALLBACK,e=ae.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=ae.ERR_TRANSFORM_WITH_LENGTH_0,p=P(6138);function u(c,d){var I=this._transformState;I.transforming=!1;var k=I.writecb;if(k===null)return this.emit("error",new t);I.writechunk=null,I.writecb=null,d!=null&&this.push(d),k(c);var q=this._readableState;q.reading=!1,(q.needReadable||q.length<q.highWaterMark)&&this._read(q.highWaterMark)}function _(c){if(!(this instanceof _))return new _(c);p.call(this,c),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",m)}function m(){var c=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(d,I){n(c,d,I)})}function n(c,d,I){if(d)return c.emit("error",d);if(I!=null&&c.push(I),c._writableState.length)throw new y;if(c._transformState.transforming)throw new e;return c.push(null)}P(1765)(_,p),_.prototype.push=function(c,d){return this._transformState.needTransform=!1,p.prototype.push.call(this,c,d)},_.prototype._transform=function(c,d,I){I(new T("_transform()"))},_.prototype._write=function(c,d,I){var k=this._transformState;if(k.writecb=I,k.writechunk=c,k.writeencoding=d,!k.transforming){var q=this._readableState;(k.needTransform||q.needReadable||q.length<q.highWaterMark)&&this._read(q.highWaterMark)}},_.prototype._read=function(c){var d=this._transformState;d.writechunk===null||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},_.prototype._destroy=function(c,d){p.prototype._destroy.call(this,c,function(I){d(I)})}},8318:function(at,we,P){function ae(ye){var Pe=this;this.next=null,this.entry=null,this.finish=function(){(function(He,tt,ve){var Oe=He.entry;for(He.entry=null;Oe;){var _t=Oe.callback;tt.pendingcb--,_t(void 0),Oe=Oe.next}tt.corkedRequestsFree.next=He})(Pe,ye)}}var T;at.exports=ee,ee.WritableState=H;var t,e={deprecate:P(7839)},y=P(9299),p=P(1549).Buffer,u=P.g.Uint8Array||function(){},_=P(6163),m=P(7269).getHighWaterMark,n=P(3690).q,c=n.ERR_INVALID_ARG_TYPE,d=n.ERR_METHOD_NOT_IMPLEMENTED,I=n.ERR_MULTIPLE_CALLBACK,k=n.ERR_STREAM_CANNOT_PIPE,q=n.ERR_STREAM_DESTROYED,F=n.ERR_STREAM_NULL_VALUES,$=n.ERR_STREAM_WRITE_AFTER_END,O=n.ERR_UNKNOWN_ENCODING,K=_.errorOrDestroy;function re(){}function H(ye,Pe,He){T=T||P(6138),ye=ye||{},typeof He!="boolean"&&(He=Pe instanceof T),this.objectMode=!!ye.objectMode,He&&(this.objectMode=this.objectMode||!!ye.writableObjectMode),this.highWaterMark=m(this,ye,"writableHighWaterMark",He),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var tt=ye.decodeStrings===!1;this.decodeStrings=!tt,this.defaultEncoding=ye.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ve){(function(Oe,_t){var dt=Oe._writableState,ke=dt.sync,Je=dt.writecb;if(typeof Je!="function")throw new I;if(function(me){me.writing=!1,me.writecb=null,me.length-=me.writelen,me.writelen=0}(dt),_t)(function(me,Ue,f,o,v){--Ue.pendingcb,f?(process.nextTick(v,o),process.nextTick(Ye,me,Ue),me._writableState.errorEmitted=!0,K(me,o)):(v(o),me._writableState.errorEmitted=!0,K(me,o),Ye(me,Ue))})(Oe,dt,ke,_t,Je);else{var ge=Ae(dt)||Oe.destroyed;ge||dt.corked||dt.bufferProcessing||!dt.bufferedRequest||X(Oe,dt),ke?process.nextTick(_e,Oe,dt,ge,Je):_e(Oe,dt,ge,Je)}})(Pe,ve)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ye.emitClose!==!1,this.autoDestroy=!!ye.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ae(this)}function ee(ye){var Pe=this instanceof(T=T||P(6138));if(!Pe&&!t.call(ee,this))return new ee(ye);this._writableState=new H(ye,this,Pe),this.writable=!0,ye&&(typeof ye.write=="function"&&(this._write=ye.write),typeof ye.writev=="function"&&(this._writev=ye.writev),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.final=="function"&&(this._final=ye.final)),y.call(this)}function se(ye,Pe,He,tt,ve,Oe,_t){Pe.writelen=tt,Pe.writecb=_t,Pe.writing=!0,Pe.sync=!0,Pe.destroyed?Pe.onwrite(new q("write")):He?ye._writev(ve,Pe.onwrite):ye._write(ve,Oe,Pe.onwrite),Pe.sync=!1}function _e(ye,Pe,He,tt){He||function(ve,Oe){Oe.length===0&&Oe.needDrain&&(Oe.needDrain=!1,ve.emit("drain"))}(ye,Pe),Pe.pendingcb--,tt(),Ye(ye,Pe)}function X(ye,Pe){Pe.bufferProcessing=!0;var He=Pe.bufferedRequest;if(ye._writev&&He&&He.next){var tt=Pe.bufferedRequestCount,ve=new Array(tt),Oe=Pe.corkedRequestsFree;Oe.entry=He;for(var _t=0,dt=!0;He;)ve[_t]=He,He.isBuf||(dt=!1),He=He.next,_t+=1;ve.allBuffers=dt,se(ye,Pe,!0,Pe.length,ve,"",Oe.finish),Pe.pendingcb++,Pe.lastBufferedRequest=null,Oe.next?(Pe.corkedRequestsFree=Oe.next,Oe.next=null):Pe.corkedRequestsFree=new ae(Pe),Pe.bufferedRequestCount=0}else{for(;He;){var ke=He.chunk,Je=He.encoding,ge=He.callback;if(se(ye,Pe,!1,Pe.objectMode?1:ke.length,ke,Je,ge),He=He.next,Pe.bufferedRequestCount--,Pe.writing)break}He===null&&(Pe.lastBufferedRequest=null)}Pe.bufferedRequest=He,Pe.bufferProcessing=!1}function Ae(ye){return ye.ending&&ye.length===0&&ye.bufferedRequest===null&&!ye.finished&&!ye.writing}function Le(ye,Pe){ye._final(function(He){Pe.pendingcb--,He&&K(ye,He),Pe.prefinished=!0,ye.emit("prefinish"),Ye(ye,Pe)})}function Ye(ye,Pe){var He=Ae(Pe);if(He&&(function(ve,Oe){Oe.prefinished||Oe.finalCalled||(typeof ve._final!="function"||Oe.destroyed?(Oe.prefinished=!0,ve.emit("prefinish")):(Oe.pendingcb++,Oe.finalCalled=!0,process.nextTick(Le,ve,Oe)))}(ye,Pe),Pe.pendingcb===0&&(Pe.finished=!0,ye.emit("finish"),Pe.autoDestroy))){var tt=ye._readableState;(!tt||tt.autoDestroy&&tt.endEmitted)&&ye.destroy()}return He}P(1765)(ee,y),H.prototype.getBuffer=function(){for(var ye=this.bufferedRequest,Pe=[];ye;)Pe.push(ye),ye=ye.next;return Pe},function(){try{Object.defineProperty(H.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(ee,Symbol.hasInstance,{value:function(ye){return!!t.call(this,ye)||this===ee&&ye&&ye._writableState instanceof H}})):t=function(ye){return ye instanceof this},ee.prototype.pipe=function(){K(this,new k)},ee.prototype.write=function(ye,Pe,He){var tt,ve=this._writableState,Oe=!1,_t=!ve.objectMode&&(tt=ye,p.isBuffer(tt)||tt instanceof u);return _t&&!p.isBuffer(ye)&&(ye=function(dt){return p.from(dt)}(ye)),typeof Pe=="function"&&(He=Pe,Pe=null),_t?Pe="buffer":Pe||(Pe=ve.defaultEncoding),typeof He!="function"&&(He=re),ve.ending?function(dt,ke){var Je=new $;K(dt,Je),process.nextTick(ke,Je)}(this,He):(_t||function(dt,ke,Je,ge){var me;return Je===null?me=new F:typeof Je=="string"||ke.objectMode||(me=new c("chunk",["string","Buffer"],Je)),!me||(K(dt,me),process.nextTick(ge,me),!1)}(this,ve,ye,He))&&(ve.pendingcb++,Oe=function(dt,ke,Je,ge,me,Ue){if(!Je){var f=function(W,V,Se){return W.objectMode||W.decodeStrings===!1||typeof V!="string"||(V=p.from(V,Se)),V}(ke,ge,me);ge!==f&&(Je=!0,me="buffer",ge=f)}var o=ke.objectMode?1:ge.length;ke.length+=o;var v=ke.length<ke.highWaterMark;if(v||(ke.needDrain=!0),ke.writing||ke.corked){var S=ke.lastBufferedRequest;ke.lastBufferedRequest={chunk:ge,encoding:me,isBuf:Je,callback:Ue,next:null},S?S.next=ke.lastBufferedRequest:ke.bufferedRequest=ke.lastBufferedRequest,ke.bufferedRequestCount+=1}else se(dt,ke,!1,o,ge,me,Ue);return v}(this,ve,_t,ye,Pe,He)),Oe},ee.prototype.cork=function(){this._writableState.corked++},ee.prototype.uncork=function(){var ye=this._writableState;ye.corked&&(ye.corked--,ye.writing||ye.corked||ye.bufferProcessing||!ye.bufferedRequest||X(this,ye))},ee.prototype.setDefaultEncoding=function(ye){if(typeof ye=="string"&&(ye=ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ye+"").toLowerCase())>-1))throw new O(ye);return this._writableState.defaultEncoding=ye,this},Object.defineProperty(ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ee.prototype._write=function(ye,Pe,He){He(new d("_write()"))},ee.prototype._writev=null,ee.prototype.end=function(ye,Pe,He){var tt=this._writableState;return typeof ye=="function"?(He=ye,ye=null,Pe=null):typeof Pe=="function"&&(He=Pe,Pe=null),ye!=null&&this.write(ye,Pe),tt.corked&&(tt.corked=1,this.uncork()),tt.ending||function(ve,Oe,_t){Oe.ending=!0,Ye(ve,Oe),_t&&(Oe.finished?process.nextTick(_t):ve.once("finish",_t)),Oe.ended=!0,ve.writable=!1}(this,tt,He),this},Object.defineProperty(ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(ye){this._writableState&&(this._writableState.destroyed=ye)}}),ee.prototype.destroy=_.destroy,ee.prototype._undestroy=_.undestroy,ee.prototype._destroy=function(ye,Pe){Pe(ye)}},7299:function(at,we,P){var ae;function T(F,$,O){return $ in F?Object.defineProperty(F,$,{value:O,enumerable:!0,configurable:!0,writable:!0}):F[$]=O,F}var t=P(8800),e=Symbol("lastResolve"),y=Symbol("lastReject"),p=Symbol("error"),u=Symbol("ended"),_=Symbol("lastPromise"),m=Symbol("handlePromise"),n=Symbol("stream");function c(F,$){return{value:F,done:$}}function d(F){var $=F[e];if($!==null){var O=F[n].read();O!==null&&(F[_]=null,F[e]=null,F[y]=null,$(c(O,!1)))}}function I(F){process.nextTick(d,F)}var k=Object.getPrototypeOf(function(){}),q=Object.setPrototypeOf((T(ae={get stream(){return this[n]},next:function(){var F=this,$=this[p];if($!==null)return Promise.reject($);if(this[u])return Promise.resolve(c(void 0,!0));if(this[n].destroyed)return new Promise(function(H,ee){process.nextTick(function(){F[p]?ee(F[p]):H(c(void 0,!0))})});var O,K=this[_];if(K)O=new Promise(function(H,ee){return function(se,_e){H.then(function(){ee[u]?se(c(void 0,!0)):ee[m](se,_e)},_e)}}(K,this));else{var re=this[n].read();if(re!==null)return Promise.resolve(c(re,!1));O=new Promise(this[m])}return this[_]=O,O}},Symbol.asyncIterator,function(){return this}),T(ae,"return",function(){var F=this;return new Promise(function($,O){F[n].destroy(null,function(K){K?O(K):$(c(void 0,!0))})})}),ae),k);at.exports=function(F){var $,O=Object.create(q,(T($={},n,{value:F,writable:!0}),T($,e,{value:null,writable:!0}),T($,y,{value:null,writable:!0}),T($,p,{value:null,writable:!0}),T($,u,{value:F._readableState.endEmitted,writable:!0}),T($,m,{value:function(K,re){var H=O[n].read();H?(O[_]=null,O[e]=null,O[y]=null,K(c(H,!1))):(O[e]=K,O[y]=re)},writable:!0}),$));return O[_]=null,t(F,function(K){if(K&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"){var re=O[y];return re!==null&&(O[_]=null,O[e]=null,O[y]=null,re(K)),void(O[p]=K)}var H=O[e];H!==null&&(O[_]=null,O[e]=null,O[y]=null,H(c(void 0,!0))),O[u]=!0}),F.on("readable",I.bind(null,O)),O}},8393:function(at,we,P){function ae(u,_){var m=Object.keys(u);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(u);_&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(u,c).enumerable})),m.push.apply(m,n)}return m}function T(u,_,m){return _ in u?Object.defineProperty(u,_,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[_]=m,u}function t(u,_){for(var m=0;m<_.length;m++){var n=_[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}var e=P(1549).Buffer,y=P(9862).inspect,p=y&&y.custom||"inspect";at.exports=function(){function u(){(function(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.head=null,this.tail=null,this.length=0}var _,m;return _=u,m=[{key:"push",value:function(n){var c={data:n,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(n){var c={data:n,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var c=this.head,d=""+c.data;c=c.next;)d+=n+c.data;return d}},{key:"concat",value:function(n){if(this.length===0)return e.alloc(0);for(var c,d,I,k=e.allocUnsafe(n>>>0),q=this.head,F=0;q;)c=q.data,d=k,I=F,e.prototype.copy.call(c,d,I),F+=q.data.length,q=q.next;return k}},{key:"consume",value:function(n,c){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():c?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var c=this.head,d=1,I=c.data;for(n-=I.length;c=c.next;){var k=c.data,q=n>k.length?k.length:n;if(q===k.length?I+=k:I+=k.slice(0,n),(n-=q)==0){q===k.length?(++d,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=k.slice(q));break}++d}return this.length-=d,I}},{key:"_getBuffer",value:function(n){var c=e.allocUnsafe(n),d=this.head,I=1;for(d.data.copy(c),n-=d.data.length;d=d.next;){var k=d.data,q=n>k.length?k.length:n;if(k.copy(c,c.length-n,0,q),(n-=q)==0){q===k.length?(++I,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=k.slice(q));break}++I}return this.length-=I,c}},{key:p,value:function(n,c){return y(this,function(d){for(var I=1;I<arguments.length;I++){var k=arguments[I]!=null?arguments[I]:{};I%2?ae(Object(k),!0).forEach(function(q){T(d,q,k[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(k)):ae(Object(k)).forEach(function(q){Object.defineProperty(d,q,Object.getOwnPropertyDescriptor(k,q))})}return d}({},c,{depth:0,customInspect:!1}))}}],m&&t(_.prototype,m),u}()},6163:function(at){function we(T,t){ae(T,t),P(T)}function P(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function ae(T,t){T.emit("error",t)}at.exports={destroy:function(T,t){var e=this,y=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return y||p?(t?t(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ae,this,T)):process.nextTick(ae,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(u){!t&&u?e._writableState?e._writableState.errorEmitted?process.nextTick(P,e):(e._writableState.errorEmitted=!0,process.nextTick(we,e,u)):process.nextTick(we,e,u):t?(process.nextTick(P,e),t(u)):process.nextTick(P,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(T,t){var e=T._readableState,y=T._writableState;e&&e.autoDestroy||y&&y.autoDestroy?T.destroy(t):T.emit("error",t)}}},8800:function(at,we,P){var ae=P(3690).q.ERR_STREAM_PREMATURE_CLOSE;function T(){}at.exports=function t(e,y,p){if(typeof y=="function")return t(e,null,y);y||(y={}),p=function($){var O=!1;return function(){if(!O){O=!0;for(var K=arguments.length,re=new Array(K),H=0;H<K;H++)re[H]=arguments[H];$.apply(this,re)}}}(p||T);var u=y.readable||y.readable!==!1&&e.readable,_=y.writable||y.writable!==!1&&e.writable,m=function(){e.writable||c()},n=e._writableState&&e._writableState.finished,c=function(){_=!1,n=!0,u||p.call(e)},d=e._readableState&&e._readableState.endEmitted,I=function(){u=!1,d=!0,_||p.call(e)},k=function($){p.call(e,$)},q=function(){var $;return u&&!d?(e._readableState&&e._readableState.ended||($=new ae),p.call(e,$)):_&&!n?(e._writableState&&e._writableState.ended||($=new ae),p.call(e,$)):void 0},F=function(){e.req.on("finish",c)};return function($){return $.setHeader&&typeof $.abort=="function"}(e)?(e.on("complete",c),e.on("abort",q),e.req?F():e.on("request",F)):_&&!e._writableState&&(e.on("end",m),e.on("close",m)),e.on("end",I),e.on("finish",c),y.error!==!1&&e.on("error",k),e.on("close",q),function(){e.removeListener("complete",c),e.removeListener("abort",q),e.removeListener("request",F),e.req&&e.req.removeListener("finish",c),e.removeListener("end",m),e.removeListener("close",m),e.removeListener("finish",c),e.removeListener("end",I),e.removeListener("error",k),e.removeListener("close",q)}}},6233:function(at){at.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(at,we,P){var ae,T=P(3690).q,t=T.ERR_MISSING_ARGS,e=T.ERR_STREAM_DESTROYED;function y(n){if(n)throw n}function p(n,c,d,I){I=function(F){var $=!1;return function(){$||($=!0,F.apply(void 0,arguments))}}(I);var k=!1;n.on("close",function(){k=!0}),ae===void 0&&(ae=P(8800)),ae(n,{readable:c,writable:d},function(F){if(F)return I(F);k=!0,I()});var q=!1;return function(F){if(!k&&!q)return q=!0,function($){return $.setHeader&&typeof $.abort=="function"}(n)?n.abort():typeof n.destroy=="function"?n.destroy():void I(F||new e("pipe"))}}function u(n){n()}function _(n,c){return n.pipe(c)}function m(n){return n.length?typeof n[n.length-1]!="function"?y:n.pop():y}at.exports=function(){for(var n=arguments.length,c=new Array(n),d=0;d<n;d++)c[d]=arguments[d];var I,k=m(c);if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new t("streams");var q=c.map(function(F,$){var O=$<c.length-1;return p(F,O,$>0,function(K){I||(I=K),K&&q.forEach(u),O||(q.forEach(u),k(I))})});return c.reduce(_)}},7269:function(at,we,P){var ae=P(3690).q.ERR_INVALID_OPT_VALUE;at.exports={getHighWaterMark:function(T,t,e,y){var p=function(u,_,m){return u.highWaterMark!=null?u.highWaterMark:_?u[m]:null}(t,y,e);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new ae(y?e:"highWaterMark",p);return Math.floor(p)}return T.objectMode?16:16384}}},9299:function(at,we,P){at.exports=P(1159).EventEmitter},7503:function(at,we,P){var ae=P(8387).Buffer,T=ae.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(d){var I;switch(this.encoding=function(k){var q=function(F){if(!F)return"utf8";for(var $;;)switch(F){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return F;default:if($)return;F=(""+F).toLowerCase(),$=!0}}(k);if(typeof q!="string"&&(ae.isEncoding===T||!T(k)))throw new Error("Unknown encoding: "+k);return q||k}(d),this.encoding){case"utf16le":this.text=p,this.end=u,I=4;break;case"utf8":this.fillLast=y,I=4;break;case"base64":this.text=_,this.end=m,I=3;break;default:return this.write=n,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=ae.allocUnsafe(I)}function e(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function y(d){var I=this.lastTotal-this.lastNeed,k=function(q,F,$){if((192&F[0])!=128)return q.lastNeed=0,"";if(q.lastNeed>1&&F.length>1){if((192&F[1])!=128)return q.lastNeed=1,"";if(q.lastNeed>2&&F.length>2&&(192&F[2])!=128)return q.lastNeed=2,""}}(this,d);return k!==void 0?k:this.lastNeed<=d.length?(d.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,I,0,d.length),void(this.lastNeed-=d.length))}function p(d,I){if((d.length-I)%2==0){var k=d.toString("utf16le",I);if(k){var q=k.charCodeAt(k.length-1);if(q>=55296&&q<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",I,d.length-1)}function u(d){var I=d&&d.length?this.write(d):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,k)}return I}function _(d,I){var k=(d.length-I)%3;return k===0?d.toString("base64",I):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",I,d.length-k))}function m(d){var I=d&&d.length?this.write(d):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function n(d){return d.toString(this.encoding)}function c(d){return d&&d.length?this.write(d):""}we.s=t,t.prototype.write=function(d){if(d.length===0)return"";var I,k;if(this.lastNeed){if((I=this.fillLast(d))===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<d.length?I?I+this.text(d,k):this.text(d,k):I||""},t.prototype.end=function(d){var I=d&&d.length?this.write(d):"";return this.lastNeed?I+"":I},t.prototype.text=function(d,I){var k=function(F,$,O){var K=$.length-1;if(K<O)return 0;var re=e($[K]);return re>=0?(re>0&&(F.lastNeed=re-1),re):--K<O||re===-2?0:(re=e($[K]))>=0?(re>0&&(F.lastNeed=re-2),re):--K<O||re===-2?0:(re=e($[K]))>=0?(re>0&&(re===2?re=0:F.lastNeed=re-3),re):0}(this,d,I);if(!this.lastNeed)return d.toString("utf8",I);this.lastTotal=k;var q=d.length-(k-this.lastNeed);return d.copy(this.lastChar,0,q),d.toString("utf8",I,q)},t.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},1067:function(at,we,P){var ae;(function(T,t){var e="function",y="undefined",p="object",u="string",_="major",m="model",n="name",c="type",d="vendor",I="version",k="architecture",q="console",F="mobile",$="tablet",O="smarttv",K="wearable",re="embedded",H="Amazon",ee="Apple",se="ASUS",_e="BlackBerry",X="Browser",Ae="Chrome",Le="Firefox",Ye="Google",ye="Huawei",Pe="LG",He="Microsoft",tt="Motorola",ve="Opera",Oe="Samsung",_t="Sharp",dt="Sony",ke="Xiaomi",Je="Zebra",ge="Facebook",me="Chromium OS",Ue="Mac OS",f=function(xe){for(var Qe={},mt=0;mt<xe.length;mt++)Qe[xe[mt].toUpperCase()]=xe[mt];return Qe},o=function(xe,Qe){return typeof xe===u&&v(Qe).indexOf(v(xe))!==-1},v=function(xe){return xe.toLowerCase()},S=function(xe,Qe){if(typeof xe===u)return xe=xe.replace(/^\s\s*/,""),typeof Qe===y?xe:xe.substring(0,500)},W=function(xe,Qe){for(var mt,it,Ut,It,Ft,Pt,tn=0;tn<Qe.length&&!Ft;){var dn=Qe[tn],An=Qe[tn+1];for(mt=it=0;mt<dn.length&&!Ft&&dn[mt];)if(Ft=dn[mt++].exec(xe))for(Ut=0;Ut<An.length;Ut++)Pt=Ft[++it],typeof(It=An[Ut])===p&&It.length>0?It.length===2?typeof It[1]==e?this[It[0]]=It[1].call(this,Pt):this[It[0]]=It[1]:It.length===3?typeof It[1]!==e||It[1].exec&&It[1].test?this[It[0]]=Pt?Pt.replace(It[1],It[2]):t:this[It[0]]=Pt?It[1].call(this,Pt,It[2]):t:It.length===4&&(this[It[0]]=Pt?It[3].call(this,Pt.replace(It[1],It[2])):t):this[It]=Pt||t;tn+=2}},V=function(xe,Qe){for(var mt in Qe)if(typeof Qe[mt]===p&&Qe[mt].length>0){for(var it=0;it<Qe[mt].length;it++)if(o(Qe[mt][it],xe))return mt==="?"?t:mt}else if(o(Qe[mt],xe))return mt==="?"?t:mt;return xe},Se={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ze={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[I,[n,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[I,[n,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[n,I],[/opios[\/ ]+([\w\.]+)/i],[I,[n,ve+" Mini"]],[/\bopr\/([\w\.]+)/i],[I,[n,ve]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[I,[n,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[n,I],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[I,[n,"UC"+X]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[I,[n,"WeChat"]],[/konqueror\/([\w\.]+)/i],[I,[n,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[I,[n,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[I,[n,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[I,[n,"Smart Lenovo "+X]],[/(avast|avg)\/([\w\.]+)/i],[[n,/(.+)/,"$1 Secure "+X],I],[/\bfocus\/([\w\.]+)/i],[I,[n,Le+" Focus"]],[/\bopt\/([\w\.]+)/i],[I,[n,ve+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[I,[n,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[I,[n,"Dolphin"]],[/coast\/([\w\.]+)/i],[I,[n,ve+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[I,[n,"MIUI "+X]],[/fxios\/([-\w\.]+)/i],[I,[n,Le]],[/\bqihu|(qi?ho?o?|360)browser/i],[[n,"360 "+X]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[n,/(.+)/,"$1 "+X],I],[/samsungbrowser\/([\w\.]+)/i],[I,[n,Oe+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],I],[/metasr[\/ ]?([\d\.]+)/i],[I,[n,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[n,"Sogou Mobile"],I],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[n,I],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[n],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[n,ge],I],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[n,I],[/\bgsa\/([\w\.]+) .*safari\//i],[I,[n,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[I,[n,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[I,[n,Ae+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[n,Ae+" WebView"],I],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[I,[n,"Android "+X]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[n,I],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[I,[n,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[I,n],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[n,[I,V,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[n,I],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[n,"Netscape"],I],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[I,[n,Le+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[n,I],[/(cobalt)\/([\w\.]+)/i],[n,[I,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[k,"amd64"]],[/(ia32(?=;))/i],[[k,v]],[/((?:i[346]|x)86)[;\)]/i],[[k,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[k,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[k,"armhf"]],[/windows (ce|mobile); ppc;/i],[[k,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[k,/ower/,"",v]],[/(sun4\w)[;\)]/i],[[k,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[k,v]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[d,Oe],[c,$]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[d,Oe],[c,F]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[d,ee],[c,F]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[d,ee],[c,$]],[/(macintosh);/i],[m,[d,ee]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[d,_t],[c,F]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[d,ye],[c,$]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[d,ye],[c,F]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[d,ke],[c,F]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[d,ke],[c,$]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[d,"OPPO"],[c,F]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[d,"Vivo"],[c,F]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[m,[d,"Realme"],[c,F]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[d,tt],[c,F]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[d,tt],[c,$]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[d,Pe],[c,$]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[d,Pe],[c,F]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[d,"Lenovo"],[c,$]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[d,"Nokia"],[c,F]],[/(pixel c)\b/i],[m,[d,Ye],[c,$]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[d,Ye],[c,F]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[d,dt],[c,F]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[d,dt],[c,$]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[d,"OnePlus"],[c,F]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[d,H],[c,$]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[d,H],[c,F]],[/(playbook);[-\w\),; ]+(rim)/i],[m,d,[c,$]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[d,_e],[c,F]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[d,se],[c,$]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[d,se],[c,F]],[/(nexus 9)/i],[m,[d,"HTC"],[c,$]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[m,/_/g," "],[c,F]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[d,"Acer"],[c,$]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[d,"Meizu"],[c,F]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[m,[d,"Ulefone"],[c,F]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,m,[c,F]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,m,[c,$]],[/(surface duo)/i],[m,[d,He],[c,$]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[d,"Fairphone"],[c,F]],[/(u304aa)/i],[m,[d,"AT&T"],[c,F]],[/\bsie-(\w*)/i],[m,[d,"Siemens"],[c,F]],[/\b(rct\w+) b/i],[m,[d,"RCA"],[c,$]],[/\b(venue[\d ]{2,7}) b/i],[m,[d,"Dell"],[c,$]],[/\b(q(?:mv|ta)\w+) b/i],[m,[d,"Verizon"],[c,$]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[d,"Barnes & Noble"],[c,$]],[/\b(tm\d{3}\w+) b/i],[m,[d,"NuVision"],[c,$]],[/\b(k88) b/i],[m,[d,"ZTE"],[c,$]],[/\b(nx\d{3}j) b/i],[m,[d,"ZTE"],[c,F]],[/\b(gen\d{3}) b.+49h/i],[m,[d,"Swiss"],[c,F]],[/\b(zur\d{3}) b/i],[m,[d,"Swiss"],[c,$]],[/\b((zeki)?tb.*\b) b/i],[m,[d,"Zeki"],[c,$]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],m,[c,$]],[/\b(ns-?\w{0,9}) b/i],[m,[d,"Insignia"],[c,$]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[d,"NextBook"],[c,$]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],m,[c,F]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],m,[c,F]],[/\b(ph-1) /i],[m,[d,"Essential"],[c,F]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[d,"Envizen"],[c,$]],[/\b(trio[-\w\. ]+) b/i],[m,[d,"MachSpeed"],[c,$]],[/\btu_(1491) b/i],[m,[d,"Rotor"],[c,$]],[/(shield[\w ]+) b/i],[m,[d,"Nvidia"],[c,$]],[/(sprint) (\w+)/i],[d,m,[c,F]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[d,He],[c,F]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[d,Je],[c,$]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[d,Je],[c,F]],[/smart-tv.+(samsung)/i],[d,[c,O]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[d,Oe],[c,O]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,Pe],[c,O]],[/(apple) ?tv/i],[d,[m,ee+" TV"],[c,O]],[/crkey/i],[[m,Ae+"cast"],[d,Ye],[c,O]],[/droid.+aft(\w+)( bui|\))/i],[m,[d,H],[c,O]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[d,_t],[c,O]],[/(bravia[\w ]+)( bui|\))/i],[m,[d,dt],[c,O]],[/(mitv-\w{5}) bui/i],[m,[d,ke],[c,O]],[/Hbbtv.*(technisat) (.*);/i],[d,m,[c,O]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,S],[m,S],[c,O]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,O]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,m,[c,q]],[/droid.+; (shield) bui/i],[m,[d,"Nvidia"],[c,q]],[/(playstation [345portablevi]+)/i],[m,[d,dt],[c,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[d,He],[c,q]],[/((pebble))app/i],[d,m,[c,K]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[d,ee],[c,K]],[/droid.+; (glass) \d/i],[m,[d,Ye],[c,K]],[/droid.+; (wt63?0{2,3})\)/i],[m,[d,Je],[c,K]],[/(quest( 2| pro)?)/i],[m,[d,ge],[c,K]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[c,re]],[/(aeobc)\b/i],[m,[d,H],[c,re]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[m,[c,F]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[c,$]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,$]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,F]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[I,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[I,[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[n,I],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[I,n]],os:[[/microsoft (windows) (vista|xp)/i],[n,I],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[n,[I,V,Se]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[I,V,Se],[n,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[I,/_/g,"."],[n,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[n,Ue],[I,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[I,n],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[n,I],[/\(bb(10);/i],[I,[n,_e]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[I,[n,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[I,[n,Le+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[I,[n,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[I,[n,"watchOS"]],[/crkey\/([\d\.]+)/i],[I,[n,Ae+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[n,me],I],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[n,I],[/(sunos) ?([\w\.\d]*)/i],[[n,"Solaris"],I],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[n,I]]},Me=function(xe,Qe){if(typeof xe===p&&(Qe=xe,xe=t),!(this instanceof Me))return new Me(xe,Qe).getResult();var mt=typeof T!==y&&T.navigator?T.navigator:t,it=xe||(mt&&mt.userAgent?mt.userAgent:""),Ut=mt&&mt.userAgentData?mt.userAgentData:t,It=Qe?function(Pt,tn){var dn={};for(var An in Pt)tn[An]&&tn[An].length%2==0?dn[An]=tn[An].concat(Pt[An]):dn[An]=Pt[An];return dn}(ze,Qe):ze,Ft=mt&&mt.userAgent==it;return this.getBrowser=function(){var Pt,tn={};return tn[n]=t,tn[I]=t,W.call(tn,it,It.browser),tn[_]=typeof(Pt=tn[I])===u?Pt.replace(/[^\d\.]/g,"").split(".")[0]:t,Ft&&mt&&mt.brave&&typeof mt.brave.isBrave==e&&(tn[n]="Brave"),tn},this.getCPU=function(){var Pt={};return Pt[k]=t,W.call(Pt,it,It.cpu),Pt},this.getDevice=function(){var Pt={};return Pt[d]=t,Pt[m]=t,Pt[c]=t,W.call(Pt,it,It.device),Ft&&!Pt[c]&&Ut&&Ut.mobile&&(Pt[c]=F),Ft&&Pt[m]=="Macintosh"&&mt&&typeof mt.standalone!==y&&mt.maxTouchPoints&&mt.maxTouchPoints>2&&(Pt[m]="iPad",Pt[c]=$),Pt},this.getEngine=function(){var Pt={};return Pt[n]=t,Pt[I]=t,W.call(Pt,it,It.engine),Pt},this.getOS=function(){var Pt={};return Pt[n]=t,Pt[I]=t,W.call(Pt,it,It.os),Ft&&!Pt[n]&&Ut&&Ut.platform!="Unknown"&&(Pt[n]=Ut.platform.replace(/chrome os/i,me).replace(/macos/i,Ue)),Pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return it},this.setUA=function(Pt){return it=typeof Pt===u&&Pt.length>500?S(Pt,500):Pt,this},this.setUA(it),this};Me.VERSION="1.0.37",Me.BROWSER=f([n,I,_]),Me.CPU=f([k]),Me.DEVICE=f([m,d,c,q,F,O,$,K,re]),Me.ENGINE=Me.OS=f([n,I]),typeof we!==y?(at.exports&&(we=at.exports=Me),we.UAParser=Me):P.amdO?(ae=(function(){return Me}).call(we,P,we,at))===t||(at.exports=ae):typeof T!==y&&(T.UAParser=Me);var De=typeof T!==y&&(T.jQuery||T.Zepto);if(De&&!De.ua){var be=new Me;De.ua=be.getResult(),De.ua.get=function(){return be.getUA()},De.ua.set=function(xe){be.setUA(xe);var Qe=be.getResult();for(var mt in Qe)De.ua[mt]=Qe[mt]}}})(typeof window=="object"?window:this)},7839:function(at,we,P){function ae(T){try{if(!P.g.localStorage)return!1}catch{return!1}var t=P.g.localStorage[T];return t!=null&&String(t).toLowerCase()==="true"}at.exports=function(T,t){if(ae("noDeprecation"))return T;var e=!1;return function(){if(!e){if(ae("throwDeprecation"))throw new Error(t);ae("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return T.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(at){at.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(at){at.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(at){at.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(at){at.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(at){at.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(at){at.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},dr={};function Fn(at){var we=dr[at];if(we!==void 0)return we.exports;var P=dr[at]={exports:{}};return wr[at].call(P.exports,P,P.exports,Fn),P.exports}Fn.amdO={},Fn.n=function(at){var we=at&&at.__esModule?function(){return at.default}:function(){return at};return Fn.d(we,{a:we}),we},Fn.d=function(at,we){for(var P in we)Fn.o(we,P)&&!Fn.o(at,P)&&Object.defineProperty(at,P,{enumerable:!0,get:we[P]})},Fn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Fn.o=function(at,we){return Object.prototype.hasOwnProperty.call(at,we)};var Nr={};return function(){Fn.d(Nr,{default:function(){return p}}),Fn(8416);var at,we=Fn(1715),P=Fn(8080),ae=Fn(1737),T=Fn(1139),t=function(){var u,_="application/dash+xml";function m(c,d,I){if(!c||!/^VIDEO$/i.test(c.nodeName))return null;if(c._dashjs_player)return c._dashjs_player;var k,q=c.id||c.name||"video element";if(!(d=d||[].slice.call(c.querySelectorAll("source")).filter(function(F){return F.type==_})[0])&&c.src)(d=document.createElement("source")).src=c.src;else if(!d&&!c.src)return null;return I=I||{},(k=(0,T.Z)(I).create()).initialize(c,d.src,c.autoplay),u||(u=k.getDebug().getLogger()),u.debug("Converted "+q+" to dash.js player and added content: "+d.src),c._dashjs_player=k,k}function n(c){return/^VIDEO$/i.test(c.nodeName)?c:n(c.parentNode)}return{create:m,createAll:function(c,d){var I=[];c=c||"[data-dashjs-player]";for(var k=(d=d||document).querySelectorAll(c),q=0;q<k.length;q++){var F=m(k[q],null);I.push(F)}for(var $=d.querySelectorAll('source[type="'+_+'"]'),O=0;O<$.length;O++){var K=m(n($[O]),null);I.push(K)}return I}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?t.createAll():at=window.setInterval(function(){window.dashjs&&(window.clearInterval(at),t.createAll())},500):window.addEventListener("load",function u(){window.removeEventListener("load",u),t.createAll()}));var e=t,y=Fn(6398);dashjs.Protection=ae.default,dashjs.MetricsReporting=P.default,dashjs.MediaPlayerFactory=e,dashjs.Debug=y.Z,dashjs.supportsMediaSource=we.B;var p=dashjs}(),Nr.default}()})})(To);var So=To.exports;const gu=fu(So),mu=du({__proto__:null,default:gu},[So]);export{mu as d};
