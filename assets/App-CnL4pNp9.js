import{a as V}from"./index-BtuGy7By.js";import{v as S,n as R,z as U,q as B,y as M,H as j,e as f,o as h,l as v,g as n,k as l,r as c,f as x,t as d,h as k,F}from"./app-iU-FcijY.js";import{u as O}from"./useDarkMode-CmpLu_KR.js";import{t as P}from"./index-Czf9nBaM.js";import{_ as $}from"./plugin-vue_export-helper-DlAUqK2U.js";const E=S({__name:"App",props:{authorGroup:{}},setup(z,{expose:g}){g();const w=z,a=O(),u=R([]),y=M("i18nLanguage","en"),p=R(""),s=async o=>{try{const m=(await V.get("https://levelapi.pvzge.com/links.json")).data[o];for(const _ in m){const r=m[_].location,A=(await V.get(`https://levelapi.pvzge.com${r}`)).data,D=A.authorInfo,N=A.author;A.levelList.forEach(i=>{if(typeof i=="string")u.value.push({name:i,author:N,introduction:D,url:`https://levelapi.pvzge.com/${o}/${_}/levels/${i}`});else if(i.fileName&&i.Information){const t=i.Information;u.value.push({name:typeof t.name=="string"?t.name:t.name[y]??t.name.en,introduction:typeof t.Introduction=="string"?t.Introduction:t.Introduction[y]??t.Introduction.en,author:N,gameVersion:t.GameVersion,version:t.Version,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt,difficulty:t.Difficulty,category:t.Category,url:`https://levelapi.pvzge.com/${o}/${_}/levels/${i.fileName}`})}})}}catch(e){j.error("Failed to load levels: "+e.message)}},b=async o=>{try{const m=(await V.get(o.url)).data,_=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(_),r.setAttribute("download",o.name),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)}catch(e){j.error("Failed to download level: "+e.message)}},C={pageSize:6},I=U(()=>u.value.filter(o=>o.name.toLowerCase().includes(p.value.toLowerCase())||o.author.toLowerCase().includes(p.value.toLowerCase())));B(()=>{s(w.authorGroup)});const L={props:w,isDarkMode:a,levels:u,i18nLanguage:y,searchValue:p,fetchLevels:s,downloadLevel:b,pagination:C,filteredLevels:I,get theme(){return P}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),G={key:0},q={key:1},H={key:2},J={key:3},T=["onClick"],Z={class:"author-name"};function K(z,g,w,a,u,y){const p=c("a-input-search"),s=c("VPIcon"),b=c("a-list-item-meta"),C=c("a-list-item"),I=c("a-list"),L=c("a-space"),o=c("a-config-provider");return h(),f(F,null,[v(` <a-row :gutter="[16, 24]">
        <a-col :span="8" v-for="level in paginatedLevels" :key="level.name">
            <a-card :title="level.name" @click="downloadLevel(level)" hoverable>
                <p v-if="level.author">Author: {{ level.author }}</p>
                <p v-if="level.introduction">Introduction: {{ level.introduction }}</p>
            </a-card>
        </a-col>
    </a-row>
 `),n(o,{theme:{algorithm:a.isDarkMode?a.theme.darkAlgorithm:a.theme.defaultAlgorithm}},{default:l(()=>[n(L,{direction:"vertical",size:"middle",style:{width:"100%"},theme:"dark"},{default:l(()=>[n(p,{value:a.searchValue,"onUpdate:value":g[0]||(g[0]=e=>a.searchValue=e),valueModifiers:{lazy:!0},placeholder:"Search level...","enter-button":""},null,8,["value"]),n(I,{"item-layout":"vertical","data-source":a.filteredLevels,size:"middle",header:"PvZ2 Gardendless Levels",pagination:a.pagination,bordered:""},{renderItem:l(({item:e})=>[n(C,null,{actions:l(()=>[e.version?(h(),f("span",G,[n(s,{icon:"code-branch"}),k(" "+d(e.version),1)])):v("v-if",!0),e.difficulty?(h(),f("span",q,[n(s,{icon:"fire"}),k(" "+d(e.difficulty),1)])):v("v-if",!0),e.category?(h(),f("span",H,[n(s,{icon:"tag"}),k(" "+d(e.category),1)])):v("v-if",!0),e.updatedAt?(h(),f("span",J,[n(s,{icon:"clock"}),k(" "+d(e.updatedAt),1)])):v("v-if",!0)]),default:l(()=>[n(b,{description:e.introduction},{title:l(()=>[x("a",{onClick:m=>a.downloadLevel(e)},d(e.name),9,T),x("span",Z," by "+d(e.author),1)]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["theme"])],2112)}const oe=$(E,[["render",K],["__scopeId","data-v-42d8a775"],["__file","App.vue"]]);export{oe as L};
