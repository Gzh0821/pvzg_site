import{a as h}from"./axios-upsvKRUO.js";import{m as j,h as m,u as B,i as I,z as w,r as c,o as g,c as C,e as v,g as L,F as z,k as O,n as P,b as A,t as R}from"./app-BmrlQMQg.js";import{_ as F}from"./plugin-vue_export-helper-DlAUqK2U.js";const U=j({__name:"App",setup(S,{expose:b}){b();const n=m([]),o=m(1),r=m(9),l=async()=>{try{const t=(await h.get("https://levelapi.pvzge.com/links.json")).data.official;for(const d in t){const _=t[d].location,f=(await h.get(`https://levelapi.pvzge.com${_}`)).data,x=f.AuthorInfo,y=f.Author;f.levelList.forEach(k=>{n.value.push({name:k,author:y,authorInfo:x,url:`https://levelapi.pvzge.com/official/${y}/levels/${k}`})})}}catch(e){w.error("Failed to load levels: "+e.message)}},i=async e=>{try{const d=(await h.get(e.url)).data,_=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(_),a.setAttribute("download",e.name),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}catch(t){w.error("Failed to download level: "+t.message)}},p=e=>{o.value=e},u=B(()=>{const e=(o.value-1)*r.value,t=e+r.value;return n.value.slice(e,t)});I(()=>{l()});const s={levels:n,currentPage:o,pageSize:r,fetchOfficialLevels:l,downloadLevel:i,handlePageChange:p,paginatedLevels:u};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function D(S,b,n,o,r,l){const i=c("a-card"),p=c("a-col"),u=c("a-row"),s=c("a-pagination");return g(),C(z,null,[v(u,{gutter:[16,24]},{default:L(()=>[(g(!0),C(z,null,O(o.paginatedLevels,e=>(g(),P(p,{span:8,key:e.name},{default:L(()=>[v(i,{title:e.name,onClick:t=>o.downloadLevel(e),hoverable:""},{default:L(()=>[A("p",null,"Author: "+R(e.author),1),A("p",null,"Author Info: "+R(e.authorInfo),1)]),_:2},1032,["title","onClick"])]),_:2},1024))),128))]),_:1}),v(s,{current:o.currentPage,pageSize:o.pageSize,total:o.levels.length,onChange:o.handlePageChange,style:{"margin-top":"20px"}},null,8,["current","pageSize","total"])],64)}const $=F(U,[["render",D],["__scopeId","data-v-213f4eff"],["__file","App.vue"]]);export{$ as L};
