import{a as L}from"./index-t--hEgTQ.js";import{k as U,f as C,m as B,n as F,g as M,r as c,c as p,o as m,F as S,h as v,d as s,u as k,w as l,b as I,t as d,e as _,z as A}from"./app-B0gQIHOA.js";import{u as E}from"./useDarkMode-DZ9DJMWY.js";import{t as V}from"./index-Do28fuxA.js";import{_ as O}from"./plugin-vue_export-helper-DlAUqK2U.js";const P={key:0},G={key:1},J={key:2},T={key:3},Z=["onClick"],q={class:"author-name"},H=U({__name:"App",props:{authorGroup:{}},setup(z){const N=z,R=E(),g=C([]),w=B("i18nLanguage","en"),f=C(""),$=async o=>{try{const i=(await L.get("https://levelapi.pvzge.com/links.json")).data[o];for(const a in i){const n=i[a].location,u=(await L.get(`https://levelapi.pvzge.com${n}`)).data,y=u.authorInfo,h=u.author;u.levelList.forEach(e=>{if(typeof e=="string")g.value.push({name:e,author:h,introduction:y,url:`https://levelapi.pvzge.com/${o}/${a}/levels/${e}`});else if(e.fileName&&e.Information){const t=e.Information;g.value.push({name:typeof t.name=="string"?t.name:t.name[w]??t.name.en,introduction:typeof t.Introduction=="string"?t.Introduction:t.Introduction[w]??t.Introduction.en,author:h,gameVersion:t.GameVersion,version:t.Version,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt,difficulty:t.Difficulty,category:t.Category,url:`https://levelapi.pvzge.com/${o}/${a}/levels/${e.fileName}`})}})}}catch(r){A.error("Failed to load levels: "+r.message)}},j=async o=>{try{const i=(await L.get(o.url)).data,a=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.setAttribute("download",o.name),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}catch(r){A.error("Failed to download level: "+r.message)}},x={pageSize:6},D=F(()=>g.value.filter(o=>o.name.toLowerCase().includes(f.value.toLowerCase())||o.author.toLowerCase().includes(f.value.toLowerCase())));return M(()=>{$(N.authorGroup)}),(o,r)=>{const i=c("a-input-search"),a=c("VPIcon"),n=c("a-list-item-meta"),b=c("a-list-item"),u=c("a-list"),y=c("a-space"),h=c("a-config-provider");return m(),p(S,null,[v(` <a-row :gutter="[16, 24]">
        <a-col :span="8" v-for="level in paginatedLevels" :key="level.name">
            <a-card :title="level.name" @click="downloadLevel(level)" hoverable>
                <p v-if="level.author">Author: {{ level.author }}</p>
                <p v-if="level.introduction">Introduction: {{ level.introduction }}</p>
            </a-card>
        </a-col>
    </a-row>
 `),s(h,{theme:{algorithm:k(R)?k(V).darkAlgorithm:k(V).defaultAlgorithm}},{default:l(()=>[s(y,{direction:"vertical",size:"middle",style:{width:"100%"},theme:"dark"},{default:l(()=>[s(i,{value:f.value,"onUpdate:value":r[0]||(r[0]=e=>f.value=e),valueModifiers:{lazy:!0},placeholder:"Search level...","enter-button":""},null,8,["value"]),s(u,{"item-layout":"vertical","data-source":D.value,size:"middle",header:"PvZ2 Gardendless Levels",pagination:x,bordered:""},{renderItem:l(({item:e})=>[s(b,null,{actions:l(()=>[e.version?(m(),p("span",P,[s(a,{icon:"code-branch"}),_(" "+d(e.version),1)])):v("v-if",!0),e.difficulty?(m(),p("span",G,[s(a,{icon:"fire"}),_(" "+d(e.difficulty),1)])):v("v-if",!0),e.category?(m(),p("span",J,[s(a,{icon:"tag"}),_(" "+d(e.category),1)])):v("v-if",!0),e.updatedAt?(m(),p("span",T,[s(a,{icon:"clock"}),_(" "+d(e.updatedAt),1)])):v("v-if",!0)]),default:l(()=>[s(n,{description:e.introduction},{title:l(()=>[I("a",{onClick:t=>j(e)},d(e.name),9,Z),I("span",q," by "+d(e.author),1)]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["theme"])],2112)}}}),ee=O(H,[["__scopeId","data-v-42d8a775"]]);export{ee as L};
