import{a as h}from"./axios-CCb-kr4I.js";import{m as z,g as m,n as B,h as I,q as k,r as c,o as g,c as C,d as v,e as L,F as A,j as O,u as P,a as R,t as S}from"./app-qpcPVIbo.js";import{_ as F}from"./plugin-vue_export-helper-DlAUqK2U.js";const U=z({__name:"App",setup(j,{expose:y}){y();const n=m([]),o=m(1),r=m(9),l=async()=>{try{const t=(await h.get("https://levelapi.pvzge.com/links.json")).data.official;for(const d in t){const _=t[d].location,f=(await h.get(`https://levelapi.pvzge.com${_}`)).data,x=f.AuthorInfo,b=f.Author;f.levelList.forEach(w=>{n.value.push({name:w,author:b,authorInfo:x,url:`https://levelapi.pvzge.com/official/${b}/levels/${w}`})})}}catch(e){k.error("Failed to load levels: "+e.message)}},i=async e=>{try{const d=(await h.get(e.url)).data,_=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(_),a.setAttribute("download",e.name),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}catch(t){k.error("Failed to download level: "+t.message)}},p=e=>{o.value=e},u=B(()=>{const e=(o.value-1)*r.value,t=e+r.value;return n.value.slice(e,t)});I(()=>{l()});const s={levels:n,currentPage:o,pageSize:r,fetchOfficialLevels:l,downloadLevel:i,handlePageChange:p,paginatedLevels:u};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function D(j,y,n,o,r,l){const i=c("a-card"),p=c("a-col"),u=c("a-row"),s=c("a-pagination");return g(),C(A,null,[v(u,{gutter:[16,24]},{default:L(()=>[(g(!0),C(A,null,O(o.paginatedLevels,e=>(g(),P(p,{span:8,key:e.name},{default:L(()=>[v(i,{title:e.name,onClick:t=>o.downloadLevel(e),hoverable:""},{default:L(()=>[R("p",null,"Author: "+S(e.author),1),R("p",null,"Author Info: "+S(e.authorInfo),1)]),_:2},1032,["title","onClick"])]),_:2},1024))),128))]),_:1}),v(s,{current:o.currentPage,pageSize:o.pageSize,total:o.levels.length,onChange:o.handlePageChange,style:{"margin-top":"20px"}},null,8,["current","pageSize","total"])],64)}const $=F(U,[["render",D],["__scopeId","data-v-213f4eff"],["__file","App.vue"]]);export{$ as L};
