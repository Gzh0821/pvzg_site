import{a as V}from"./axios-upsvKRUO.js";import{m as B,h as L,q as $,u as D,i as F,z as x,r as i,o as p,c as f,j as _,e as a,g as v,d as b,t as l,b as S,F as G}from"./app-B74gG9ZB.js";import{_ as O}from"./plugin-vue_export-helper-DlAUqK2U.js";const E=B({__name:"App",props:{authorGroup:{}},setup(j,{expose:m}){m();const k=j,o=L([]),N=L(1),R=L(9),d=$("i18nLanguage","en"),r=L(""),h=async s=>{try{const g=(await V.get("https://levelapi.pvzge.com/links.json")).data[s];for(const z in g){const n=g[z].location,A=(await V.get(`https://levelapi.pvzge.com${n}`)).data,U=A.authorInfo,y=A.author;A.levelList.forEach(c=>{if(typeof c=="string")o.value.push({name:c,author:y,introduction:U,url:`https://levelapi.pvzge.com/official/${y}/levels/${c}`});else if(c.fileName&&c.Information){const t=c.Information;o.value.push({name:typeof t.name=="string"?t.name:t.name[d]??t.name.en,introduction:typeof t.Introduction=="string"?t.Introduction:t.Introduction[d]??t.Introduction.en,author:y,gameVersion:t.GameVersion,version:t.Version,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt,difficulty:t.Difficulty,category:t.Category,url:`https://levelapi.pvzge.com/official/${y}/levels/${c.fileName}`})}})}}catch(u){x.error("Failed to load levels: "+u.message)}},w=async s=>{try{const g=(await V.get(s.url)).data,z=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(z),n.setAttribute("download",s.name),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}catch(u){x.error("Failed to download level: "+u.message)}},I={pageSize:6},C=D(()=>o.value.filter(s=>s.name.toLowerCase().includes(r.value.toLowerCase())));F(()=>{h(k.authorGroup)});const e={props:k,levels:o,currentPage:N,pageSize:R,i18nLanguage:d,searchValue:r,fetchLevels:h,downloadLevel:w,pagination:I,filteredLevels:C};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),P={key:0},H={key:1},M={key:2},q={key:3},J=["onClick"],T={class:"author-name"};function Z(j,m,k,o,N,R){const d=i("a-input-search"),r=i("HopeIcon"),h=i("a-list-item-meta"),w=i("a-list-item"),I=i("a-list"),C=i("a-space");return p(),f(G,null,[_(` <a-row :gutter="[16, 24]">
        <a-col :span="8" v-for="level in paginatedLevels" :key="level.name">
            <a-card :title="level.name" @click="downloadLevel(level)" hoverable>
                <p v-if="level.author">Author: {{ level.author }}</p>
                <p v-if="level.introduction">Introduction: {{ level.introduction }}</p>
            </a-card>
        </a-col>
    </a-row>
 `),a(C,{direction:"vertical",size:"middle",style:{width:"100%"}},{default:v(()=>[a(d,{value:o.searchValue,"onUpdate:value":m[0]||(m[0]=e=>o.searchValue=e),valueModifiers:{lazy:!0},placeholder:"Search level...","enter-button":""},null,8,["value"]),a(I,{"item-layout":"vertical","data-source":o.filteredLevels,size:"middle",header:"PvZ2 Gardendless Levels",pagination:o.pagination,bordered:""},{renderItem:v(({item:e})=>[a(w,null,{actions:v(()=>[e.version?(p(),f("span",P,[a(r,{icon:"code-branch"}),b(" "+l(e.version),1)])):_("v-if",!0),e.difficulty?(p(),f("span",H,[a(r,{icon:"fire"}),b(" "+l(e.difficulty),1)])):_("v-if",!0),e.category?(p(),f("span",M,[a(r,{icon:"tag"}),b(" "+l(e.category),1)])):_("v-if",!0),e.updatedAt?(p(),f("span",q,[a(r,{icon:"clock"}),b(" "+l(e.updatedAt),1)])):_("v-if",!0)]),default:v(()=>[a(h,{description:e.introduction},{title:v(()=>[S("a",{onClick:s=>o.downloadLevel(e)},l(e.name),9,J),S("span",T," by "+l(e.author),1)]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})],2112)}const Y=O(E,[["render",Z],["__scopeId","data-v-c6702455"],["__file","App.vue"]]);export{Y as L};
