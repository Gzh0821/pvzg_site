import{a as L}from"./index-R-lXtGyY.js";import{t as b}from"./index-B8GtfMIY.js";import{k as U,h as C,m as B,n as D,i as F,r as c,c as p,o as m,F as S,f as v,d as s,u as I,w as l,b as A,t as d,e as _,x as V}from"./app-BgS9_fNZ.js";import{_ as E}from"./plugin-vue_export-helper-DlAUqK2U.js";const M={key:0},O={key:1},P={key:2},G={key:3},J=["onClick"],T={class:"author-name"},Z=U({__name:"App",props:{authorGroup:{}},setup($){const z=$,g=C([]),k=B("i18nLanguage","en"),h=C(""),N=async o=>{try{const i=(await L.get("https://levelapi.pvzge.com/links.json")).data[o];for(const a in i){const n=i[a].location,u=(await L.get(`https://levelapi.pvzge.com${n}`)).data,y=u.authorInfo,f=u.author;u.levelList.forEach(e=>{if(typeof e=="string")g.value.push({name:e,author:f,introduction:y,url:`https://levelapi.pvzge.com/${o}/${a}/levels/${e}`});else if(e.fileName&&e.Information){const t=e.Information;g.value.push({name:typeof t.name=="string"?t.name:t.name[k]??t.name.en,introduction:typeof t.Introduction=="string"?t.Introduction:t.Introduction[k]??t.Introduction.en,author:f,gameVersion:t.GameVersion,version:t.Version,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt,difficulty:t.Difficulty,category:t.Category,url:`https://levelapi.pvzge.com/${o}/${a}/levels/${e.fileName}`})}})}}catch(r){V.error("Failed to load levels: "+r.message)}},R=async o=>{try{const i=(await L.get(o.url)).data,a=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.setAttribute("download",o.name),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}catch(r){V.error("Failed to download level: "+r.message)}},j={pageSize:6},x=D(()=>g.value.filter(o=>o.name.toLowerCase().includes(h.value.toLowerCase())||o.author.toLowerCase().includes(h.value.toLowerCase())));return F(()=>{N(z.authorGroup)}),(o,r)=>{const i=c("a-input-search"),a=c("VPIcon"),n=c("a-list-item-meta"),w=c("a-list-item"),u=c("a-list"),y=c("a-space"),f=c("a-config-provider");return m(),p(S,null,[v(` <a-row :gutter="[16, 24]">
        <a-col :span="8" v-for="level in paginatedLevels" :key="level.name">
            <a-card :title="level.name" @click="downloadLevel(level)" hoverable>
                <p v-if="level.author">Author: {{ level.author }}</p>
                <p v-if="level.introduction">Introduction: {{ level.introduction }}</p>
            </a-card>
        </a-col>
    </a-row>
 `),s(f,{theme:{algorithm:o.$isDarkMode?I(b).darkAlgorithm:I(b).defaultAlgorithm}},{default:l(()=>[s(y,{direction:"vertical",size:"middle",style:{width:"100%"},theme:"dark"},{default:l(()=>[s(i,{value:h.value,"onUpdate:value":r[0]||(r[0]=e=>h.value=e),valueModifiers:{lazy:!0},placeholder:"Search level...","enter-button":""},null,8,["value"]),s(u,{"item-layout":"vertical","data-source":x.value,size:"middle",header:"PvZ2 Gardendless Levels",pagination:j,bordered:""},{renderItem:l(({item:e})=>[s(w,null,{actions:l(()=>[e.version?(m(),p("span",M,[s(a,{icon:"code-branch"}),_(" "+d(e.version),1)])):v("v-if",!0),e.difficulty?(m(),p("span",O,[s(a,{icon:"fire"}),_(" "+d(e.difficulty),1)])):v("v-if",!0),e.category?(m(),p("span",P,[s(a,{icon:"tag"}),_(" "+d(e.category),1)])):v("v-if",!0),e.updatedAt?(m(),p("span",G,[s(a,{icon:"clock"}),_(" "+d(e.updatedAt),1)])):v("v-if",!0)]),default:l(()=>[s(n,{description:e.introduction},{title:l(()=>[A("a",{onClick:t=>R(e)},d(e.name),9,J),A("span",T," by "+d(e.author),1)]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["theme"])],2112)}}}),W=E(Z,[["__scopeId","data-v-4206e6a9"]]);export{W as L};
