import{a as L}from"./index-xsH4HHeE.js";import{k as U,f as b,m as x,n as B,g as F,r as c,c as p,o as m,F as M,h as v,d as s,u as C,w as l,b as I,t as d,e as _,z as A}from"./app-CGxeTRJ9.js";import{u as S}from"./useDarkMode-BHUPzVoL.js";import{t as V}from"./index-BjrX26yL.js";import{_ as E}from"./plugin-vue_export-helper-DlAUqK2U.js";const O={key:0},P={key:1},G={key:2},J={key:3},T=["onClick"],Z={class:"author-name"},q=U({__name:"App",props:{authorGroup:{}},setup(z){const $=z;S();const g=b([]),k=x("i18nLanguage","en"),f=b(""),N=async o=>{try{const i=(await L.get("https://levelapi.pvzge.com/links.json")).data[o];for(const a in i){const n=i[a].location,u=(await L.get(`https://levelapi.pvzge.com${n}`)).data,y=u.authorInfo,h=u.author;u.levelList.forEach(e=>{if(typeof e=="string")g.value.push({name:e,author:h,introduction:y,url:`https://levelapi.pvzge.com/${o}/${a}/levels/${e}`});else if(e.fileName&&e.Information){const t=e.Information;g.value.push({name:typeof t.name=="string"?t.name:t.name[k]??t.name.en,introduction:typeof t.Introduction=="string"?t.Introduction:t.Introduction[k]??t.Introduction.en,author:h,gameVersion:t.GameVersion,version:t.Version,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt,difficulty:t.Difficulty,category:t.Category,url:`https://levelapi.pvzge.com/${o}/${a}/levels/${e.fileName}`})}})}}catch(r){A.error("Failed to load levels: "+r.message)}},R=async o=>{try{const i=(await L.get(o.url)).data,a=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.setAttribute("download",o.name),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}catch(r){A.error("Failed to download level: "+r.message)}},j={pageSize:6},D=B(()=>g.value.filter(o=>o.name.toLowerCase().includes(f.value.toLowerCase())||o.author.toLowerCase().includes(f.value.toLowerCase())));return F(()=>{N($.authorGroup)}),(o,r)=>{const i=c("a-input-search"),a=c("VPIcon"),n=c("a-list-item-meta"),w=c("a-list-item"),u=c("a-list"),y=c("a-space"),h=c("a-config-provider");return m(),p(M,null,[v(` <a-row :gutter="[16, 24]">
        <a-col :span="8" v-for="level in paginatedLevels" :key="level.name">
            <a-card :title="level.name" @click="downloadLevel(level)" hoverable>
                <p v-if="level.author">Author: {{ level.author }}</p>
                <p v-if="level.introduction">Introduction: {{ level.introduction }}</p>
            </a-card>
        </a-col>
    </a-row>
 `),s(h,{theme:{algorithm:o.$isDarkMode?C(V).darkAlgorithm:C(V).defaultAlgorithm}},{default:l(()=>[s(y,{direction:"vertical",size:"middle",style:{width:"100%"},theme:"dark"},{default:l(()=>[s(i,{value:f.value,"onUpdate:value":r[0]||(r[0]=e=>f.value=e),valueModifiers:{lazy:!0},placeholder:"Search level...","enter-button":""},null,8,["value"]),s(u,{"item-layout":"vertical","data-source":D.value,size:"middle",header:"PvZ2 Gardendless Levels",pagination:j,bordered:""},{renderItem:l(({item:e})=>[s(w,null,{actions:l(()=>[e.version?(m(),p("span",O,[s(a,{icon:"code-branch"}),_(" "+d(e.version),1)])):v("v-if",!0),e.difficulty?(m(),p("span",P,[s(a,{icon:"fire"}),_(" "+d(e.difficulty),1)])):v("v-if",!0),e.category?(m(),p("span",G,[s(a,{icon:"tag"}),_(" "+d(e.category),1)])):v("v-if",!0),e.updatedAt?(m(),p("span",J,[s(a,{icon:"clock"}),_(" "+d(e.updatedAt),1)])):v("v-if",!0)]),default:l(()=>[s(n,{description:e.introduction},{title:l(()=>[I("a",{onClick:t=>R(e)},d(e.name),9,T),I("span",Z," by "+d(e.author),1)]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["theme"])],2112)}}}),Y=E(q,[["__scopeId","data-v-ab54ea9c"]]);export{Y as L};
